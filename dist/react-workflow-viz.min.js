!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("react-workflow-viz",["react","react-dom"],factory):"object"==typeof exports?exports["react-workflow-viz"]=factory(require("react"),require("react-dom")):root["react-workflow-viz"]=factory(root.React,root.ReactDOM)}(window,(function(__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__5__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=11)}([function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"e",(function(){return VERSION})),__webpack_require__.d(__webpack_exports__,"p",(function(){return root})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ArrayProto})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ObjProto})),__webpack_require__.d(__webpack_exports__,"d",(function(){return SymbolProto})),__webpack_require__.d(__webpack_exports__,"o",(function(){return push})),__webpack_require__.d(__webpack_exports__,"q",(function(){return slice})),__webpack_require__.d(__webpack_exports__,"t",(function(){return toString})),__webpack_require__.d(__webpack_exports__,"i",(function(){return hasOwnProperty})),__webpack_require__.d(__webpack_exports__,"r",(function(){return supportsArrayBuffer})),__webpack_require__.d(__webpack_exports__,"s",(function(){return supportsDataView})),__webpack_require__.d(__webpack_exports__,"k",(function(){return nativeIsArray})),__webpack_require__.d(__webpack_exports__,"m",(function(){return nativeKeys})),__webpack_require__.d(__webpack_exports__,"j",(function(){return nativeCreate})),__webpack_require__.d(__webpack_exports__,"l",(function(){return nativeIsView})),__webpack_require__.d(__webpack_exports__,"g",(function(){return _isNaN})),__webpack_require__.d(__webpack_exports__,"f",(function(){return _isFinite})),__webpack_require__.d(__webpack_exports__,"h",(function(){return hasEnumBug})),__webpack_require__.d(__webpack_exports__,"n",(function(){return nonEnumerableProps})),__webpack_require__.d(__webpack_exports__,"b",(function(){return MAX_ARRAY_INDEX}));var VERSION="1.13.2",root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},ArrayProto=Array.prototype,ObjProto=Object.prototype,SymbolProto="undefined"!=typeof Symbol?Symbol.prototype:null,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,supportsArrayBuffer="undefined"!=typeof ArrayBuffer,supportsDataView="undefined"!=typeof DataView,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeCreate=Object.create,nativeIsView=supportsArrayBuffer&&ArrayBuffer.isView,_isNaN=isNaN,_isFinite=isFinite,hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],MAX_ARRAY_INDEX=Math.pow(2,53)-1}).call(this,__webpack_require__(16))},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(module,exports,__webpack_require__){module.exports=__webpack_require__(14)()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return index_default})),__webpack_require__.d(__webpack_exports__,"VERSION",(function(){return _setup.e})),__webpack_require__.d(__webpack_exports__,"restArguments",(function(){return restArguments})),__webpack_require__.d(__webpack_exports__,"isObject",(function(){return isObject})),__webpack_require__.d(__webpack_exports__,"isNull",(function(){return isNull})),__webpack_require__.d(__webpack_exports__,"isUndefined",(function(){return isUndefined})),__webpack_require__.d(__webpack_exports__,"isBoolean",(function(){return isBoolean})),__webpack_require__.d(__webpack_exports__,"isElement",(function(){return isElement})),__webpack_require__.d(__webpack_exports__,"isString",(function(){return isString})),__webpack_require__.d(__webpack_exports__,"isNumber",(function(){return isNumber})),__webpack_require__.d(__webpack_exports__,"isDate",(function(){return isDate})),__webpack_require__.d(__webpack_exports__,"isRegExp",(function(){return isRegExp})),__webpack_require__.d(__webpack_exports__,"isError",(function(){return isError})),__webpack_require__.d(__webpack_exports__,"isSymbol",(function(){return isSymbol})),__webpack_require__.d(__webpack_exports__,"isArrayBuffer",(function(){return isArrayBuffer})),__webpack_require__.d(__webpack_exports__,"isDataView",(function(){return modules_isDataView})),__webpack_require__.d(__webpack_exports__,"isArray",(function(){return isArray})),__webpack_require__.d(__webpack_exports__,"isFunction",(function(){return modules_isFunction})),__webpack_require__.d(__webpack_exports__,"isArguments",(function(){return modules_isArguments})),__webpack_require__.d(__webpack_exports__,"isFinite",(function(){return isFinite_isFinite})),__webpack_require__.d(__webpack_exports__,"isNaN",(function(){return isNaN_isNaN})),__webpack_require__.d(__webpack_exports__,"isTypedArray",(function(){return modules_isTypedArray})),__webpack_require__.d(__webpack_exports__,"isEmpty",(function(){return isEmpty})),__webpack_require__.d(__webpack_exports__,"isMatch",(function(){return isMatch})),__webpack_require__.d(__webpack_exports__,"isEqual",(function(){return isEqual})),__webpack_require__.d(__webpack_exports__,"isMap",(function(){return isMap})),__webpack_require__.d(__webpack_exports__,"isWeakMap",(function(){return isWeakMap})),__webpack_require__.d(__webpack_exports__,"isSet",(function(){return isSet})),__webpack_require__.d(__webpack_exports__,"isWeakSet",(function(){return isWeakSet})),__webpack_require__.d(__webpack_exports__,"keys",(function(){return keys_keys})),__webpack_require__.d(__webpack_exports__,"allKeys",(function(){return allKeys})),__webpack_require__.d(__webpack_exports__,"values",(function(){return values_values})),__webpack_require__.d(__webpack_exports__,"pairs",(function(){return pairs_pairs})),__webpack_require__.d(__webpack_exports__,"invert",(function(){return invert})),__webpack_require__.d(__webpack_exports__,"functions",(function(){return functions})),__webpack_require__.d(__webpack_exports__,"methods",(function(){return functions})),__webpack_require__.d(__webpack_exports__,"extend",(function(){return extend})),__webpack_require__.d(__webpack_exports__,"extendOwn",(function(){return extendOwn})),__webpack_require__.d(__webpack_exports__,"assign",(function(){return extendOwn})),__webpack_require__.d(__webpack_exports__,"defaults",(function(){return defaults})),__webpack_require__.d(__webpack_exports__,"create",(function(){return create})),__webpack_require__.d(__webpack_exports__,"clone",(function(){return clone})),__webpack_require__.d(__webpack_exports__,"tap",(function(){return tap})),__webpack_require__.d(__webpack_exports__,"get",(function(){return get})),__webpack_require__.d(__webpack_exports__,"has",(function(){return has_has})),__webpack_require__.d(__webpack_exports__,"mapObject",(function(){return mapObject})),__webpack_require__.d(__webpack_exports__,"identity",(function(){return identity})),__webpack_require__.d(__webpack_exports__,"constant",(function(){return constant})),__webpack_require__.d(__webpack_exports__,"noop",(function(){return noop})),__webpack_require__.d(__webpack_exports__,"toPath",(function(){return toPath})),__webpack_require__.d(__webpack_exports__,"property",(function(){return property})),__webpack_require__.d(__webpack_exports__,"propertyOf",(function(){return propertyOf})),__webpack_require__.d(__webpack_exports__,"matcher",(function(){return matcher_matcher})),__webpack_require__.d(__webpack_exports__,"matches",(function(){return matcher_matcher})),__webpack_require__.d(__webpack_exports__,"times",(function(){return times})),__webpack_require__.d(__webpack_exports__,"random",(function(){return random})),__webpack_require__.d(__webpack_exports__,"now",(function(){return now})),__webpack_require__.d(__webpack_exports__,"escape",(function(){return modules_escape})),__webpack_require__.d(__webpack_exports__,"unescape",(function(){return modules_unescape})),__webpack_require__.d(__webpack_exports__,"templateSettings",(function(){return templateSettings})),__webpack_require__.d(__webpack_exports__,"template",(function(){return template_template})),__webpack_require__.d(__webpack_exports__,"result",(function(){return result_result})),__webpack_require__.d(__webpack_exports__,"uniqueId",(function(){return uniqueId})),__webpack_require__.d(__webpack_exports__,"chain",(function(){return chain})),__webpack_require__.d(__webpack_exports__,"iteratee",(function(){return iteratee_iteratee})),__webpack_require__.d(__webpack_exports__,"partial",(function(){return modules_partial})),__webpack_require__.d(__webpack_exports__,"bind",(function(){return bind})),__webpack_require__.d(__webpack_exports__,"bindAll",(function(){return bindAll})),__webpack_require__.d(__webpack_exports__,"memoize",(function(){return memoize_memoize})),__webpack_require__.d(__webpack_exports__,"delay",(function(){return delay})),__webpack_require__.d(__webpack_exports__,"defer",(function(){return defer})),__webpack_require__.d(__webpack_exports__,"throttle",(function(){return throttle})),__webpack_require__.d(__webpack_exports__,"debounce",(function(){return debounce})),__webpack_require__.d(__webpack_exports__,"wrap",(function(){return wrap})),__webpack_require__.d(__webpack_exports__,"negate",(function(){return negate})),__webpack_require__.d(__webpack_exports__,"compose",(function(){return compose})),__webpack_require__.d(__webpack_exports__,"after",(function(){return after})),__webpack_require__.d(__webpack_exports__,"before",(function(){return before})),__webpack_require__.d(__webpack_exports__,"once",(function(){return once})),__webpack_require__.d(__webpack_exports__,"findKey",(function(){return findKey})),__webpack_require__.d(__webpack_exports__,"findIndex",(function(){return findIndex})),__webpack_require__.d(__webpack_exports__,"findLastIndex",(function(){return findLastIndex})),__webpack_require__.d(__webpack_exports__,"sortedIndex",(function(){return sortedIndex_sortedIndex})),__webpack_require__.d(__webpack_exports__,"indexOf",(function(){return indexOf})),__webpack_require__.d(__webpack_exports__,"lastIndexOf",(function(){return lastIndexOf})),__webpack_require__.d(__webpack_exports__,"find",(function(){return find})),__webpack_require__.d(__webpack_exports__,"detect",(function(){return find})),__webpack_require__.d(__webpack_exports__,"findWhere",(function(){return findWhere})),__webpack_require__.d(__webpack_exports__,"each",(function(){return each})),__webpack_require__.d(__webpack_exports__,"forEach",(function(){return each})),__webpack_require__.d(__webpack_exports__,"map",(function(){return map_map})),__webpack_require__.d(__webpack_exports__,"collect",(function(){return map_map})),__webpack_require__.d(__webpack_exports__,"reduce",(function(){return reduce})),__webpack_require__.d(__webpack_exports__,"foldl",(function(){return reduce})),__webpack_require__.d(__webpack_exports__,"inject",(function(){return reduce})),__webpack_require__.d(__webpack_exports__,"reduceRight",(function(){return reduceRight})),__webpack_require__.d(__webpack_exports__,"foldr",(function(){return reduceRight})),__webpack_require__.d(__webpack_exports__,"filter",(function(){return filter})),__webpack_require__.d(__webpack_exports__,"select",(function(){return filter})),__webpack_require__.d(__webpack_exports__,"reject",(function(){return reject})),__webpack_require__.d(__webpack_exports__,"every",(function(){return every})),__webpack_require__.d(__webpack_exports__,"all",(function(){return every})),__webpack_require__.d(__webpack_exports__,"some",(function(){return some})),__webpack_require__.d(__webpack_exports__,"any",(function(){return some})),__webpack_require__.d(__webpack_exports__,"contains",(function(){return contains})),__webpack_require__.d(__webpack_exports__,"includes",(function(){return contains})),__webpack_require__.d(__webpack_exports__,"include",(function(){return contains})),__webpack_require__.d(__webpack_exports__,"invoke",(function(){return invoke})),__webpack_require__.d(__webpack_exports__,"pluck",(function(){return pluck})),__webpack_require__.d(__webpack_exports__,"where",(function(){return where})),__webpack_require__.d(__webpack_exports__,"max",(function(){return max})),__webpack_require__.d(__webpack_exports__,"min",(function(){return min})),__webpack_require__.d(__webpack_exports__,"shuffle",(function(){return shuffle})),__webpack_require__.d(__webpack_exports__,"sample",(function(){return sample_sample})),__webpack_require__.d(__webpack_exports__,"sortBy",(function(){return sortBy})),__webpack_require__.d(__webpack_exports__,"groupBy",(function(){return groupBy})),__webpack_require__.d(__webpack_exports__,"indexBy",(function(){return indexBy})),__webpack_require__.d(__webpack_exports__,"countBy",(function(){return countBy})),__webpack_require__.d(__webpack_exports__,"partition",(function(){return modules_partition})),__webpack_require__.d(__webpack_exports__,"toArray",(function(){return toArray})),__webpack_require__.d(__webpack_exports__,"size",(function(){return size})),__webpack_require__.d(__webpack_exports__,"pick",(function(){return pick})),__webpack_require__.d(__webpack_exports__,"omit",(function(){return omit})),__webpack_require__.d(__webpack_exports__,"first",(function(){return first})),__webpack_require__.d(__webpack_exports__,"head",(function(){return first})),__webpack_require__.d(__webpack_exports__,"take",(function(){return first})),__webpack_require__.d(__webpack_exports__,"initial",(function(){return initial_initial})),__webpack_require__.d(__webpack_exports__,"last",(function(){return last_last})),__webpack_require__.d(__webpack_exports__,"rest",(function(){return rest_rest})),__webpack_require__.d(__webpack_exports__,"tail",(function(){return rest_rest})),__webpack_require__.d(__webpack_exports__,"drop",(function(){return rest_rest})),__webpack_require__.d(__webpack_exports__,"compact",(function(){return compact})),__webpack_require__.d(__webpack_exports__,"flatten",(function(){return flatten_flatten})),__webpack_require__.d(__webpack_exports__,"without",(function(){return without})),__webpack_require__.d(__webpack_exports__,"uniq",(function(){return uniq})),__webpack_require__.d(__webpack_exports__,"unique",(function(){return uniq})),__webpack_require__.d(__webpack_exports__,"union",(function(){return union})),__webpack_require__.d(__webpack_exports__,"intersection",(function(){return intersection})),__webpack_require__.d(__webpack_exports__,"difference",(function(){return difference})),__webpack_require__.d(__webpack_exports__,"unzip",(function(){return unzip})),__webpack_require__.d(__webpack_exports__,"transpose",(function(){return unzip})),__webpack_require__.d(__webpack_exports__,"zip",(function(){return zip})),__webpack_require__.d(__webpack_exports__,"object",(function(){return object_object})),__webpack_require__.d(__webpack_exports__,"range",(function(){return range})),__webpack_require__.d(__webpack_exports__,"chunk",(function(){return chunk})),__webpack_require__.d(__webpack_exports__,"mixin",(function(){return mixin}));var modules_namespaceObject={};__webpack_require__.r(modules_namespaceObject),__webpack_require__.d(modules_namespaceObject,"VERSION",(function(){return _setup.e})),__webpack_require__.d(modules_namespaceObject,"restArguments",(function(){return restArguments})),__webpack_require__.d(modules_namespaceObject,"isObject",(function(){return isObject})),__webpack_require__.d(modules_namespaceObject,"isNull",(function(){return isNull})),__webpack_require__.d(modules_namespaceObject,"isUndefined",(function(){return isUndefined})),__webpack_require__.d(modules_namespaceObject,"isBoolean",(function(){return isBoolean})),__webpack_require__.d(modules_namespaceObject,"isElement",(function(){return isElement})),__webpack_require__.d(modules_namespaceObject,"isString",(function(){return isString})),__webpack_require__.d(modules_namespaceObject,"isNumber",(function(){return isNumber})),__webpack_require__.d(modules_namespaceObject,"isDate",(function(){return isDate})),__webpack_require__.d(modules_namespaceObject,"isRegExp",(function(){return isRegExp})),__webpack_require__.d(modules_namespaceObject,"isError",(function(){return isError})),__webpack_require__.d(modules_namespaceObject,"isSymbol",(function(){return isSymbol})),__webpack_require__.d(modules_namespaceObject,"isArrayBuffer",(function(){return isArrayBuffer})),__webpack_require__.d(modules_namespaceObject,"isDataView",(function(){return modules_isDataView})),__webpack_require__.d(modules_namespaceObject,"isArray",(function(){return isArray})),__webpack_require__.d(modules_namespaceObject,"isFunction",(function(){return modules_isFunction})),__webpack_require__.d(modules_namespaceObject,"isArguments",(function(){return modules_isArguments})),__webpack_require__.d(modules_namespaceObject,"isFinite",(function(){return isFinite_isFinite})),__webpack_require__.d(modules_namespaceObject,"isNaN",(function(){return isNaN_isNaN})),__webpack_require__.d(modules_namespaceObject,"isTypedArray",(function(){return modules_isTypedArray})),__webpack_require__.d(modules_namespaceObject,"isEmpty",(function(){return isEmpty})),__webpack_require__.d(modules_namespaceObject,"isMatch",(function(){return isMatch})),__webpack_require__.d(modules_namespaceObject,"isEqual",(function(){return isEqual})),__webpack_require__.d(modules_namespaceObject,"isMap",(function(){return isMap})),__webpack_require__.d(modules_namespaceObject,"isWeakMap",(function(){return isWeakMap})),__webpack_require__.d(modules_namespaceObject,"isSet",(function(){return isSet})),__webpack_require__.d(modules_namespaceObject,"isWeakSet",(function(){return isWeakSet})),__webpack_require__.d(modules_namespaceObject,"keys",(function(){return keys_keys})),__webpack_require__.d(modules_namespaceObject,"allKeys",(function(){return allKeys})),__webpack_require__.d(modules_namespaceObject,"values",(function(){return values_values})),__webpack_require__.d(modules_namespaceObject,"pairs",(function(){return pairs_pairs})),__webpack_require__.d(modules_namespaceObject,"invert",(function(){return invert})),__webpack_require__.d(modules_namespaceObject,"functions",(function(){return functions})),__webpack_require__.d(modules_namespaceObject,"methods",(function(){return functions})),__webpack_require__.d(modules_namespaceObject,"extend",(function(){return extend})),__webpack_require__.d(modules_namespaceObject,"extendOwn",(function(){return extendOwn})),__webpack_require__.d(modules_namespaceObject,"assign",(function(){return extendOwn})),__webpack_require__.d(modules_namespaceObject,"defaults",(function(){return defaults})),__webpack_require__.d(modules_namespaceObject,"create",(function(){return create})),__webpack_require__.d(modules_namespaceObject,"clone",(function(){return clone})),__webpack_require__.d(modules_namespaceObject,"tap",(function(){return tap})),__webpack_require__.d(modules_namespaceObject,"get",(function(){return get})),__webpack_require__.d(modules_namespaceObject,"has",(function(){return has_has})),__webpack_require__.d(modules_namespaceObject,"mapObject",(function(){return mapObject})),__webpack_require__.d(modules_namespaceObject,"identity",(function(){return identity})),__webpack_require__.d(modules_namespaceObject,"constant",(function(){return constant})),__webpack_require__.d(modules_namespaceObject,"noop",(function(){return noop})),__webpack_require__.d(modules_namespaceObject,"toPath",(function(){return toPath})),__webpack_require__.d(modules_namespaceObject,"property",(function(){return property})),__webpack_require__.d(modules_namespaceObject,"propertyOf",(function(){return propertyOf})),__webpack_require__.d(modules_namespaceObject,"matcher",(function(){return matcher_matcher})),__webpack_require__.d(modules_namespaceObject,"matches",(function(){return matcher_matcher})),__webpack_require__.d(modules_namespaceObject,"times",(function(){return times})),__webpack_require__.d(modules_namespaceObject,"random",(function(){return random})),__webpack_require__.d(modules_namespaceObject,"now",(function(){return now})),__webpack_require__.d(modules_namespaceObject,"escape",(function(){return modules_escape})),__webpack_require__.d(modules_namespaceObject,"unescape",(function(){return modules_unescape})),__webpack_require__.d(modules_namespaceObject,"templateSettings",(function(){return templateSettings})),__webpack_require__.d(modules_namespaceObject,"template",(function(){return template_template})),__webpack_require__.d(modules_namespaceObject,"result",(function(){return result_result})),__webpack_require__.d(modules_namespaceObject,"uniqueId",(function(){return uniqueId})),__webpack_require__.d(modules_namespaceObject,"chain",(function(){return chain})),__webpack_require__.d(modules_namespaceObject,"iteratee",(function(){return iteratee_iteratee})),__webpack_require__.d(modules_namespaceObject,"partial",(function(){return modules_partial})),__webpack_require__.d(modules_namespaceObject,"bind",(function(){return bind})),__webpack_require__.d(modules_namespaceObject,"bindAll",(function(){return bindAll})),__webpack_require__.d(modules_namespaceObject,"memoize",(function(){return memoize_memoize})),__webpack_require__.d(modules_namespaceObject,"delay",(function(){return delay})),__webpack_require__.d(modules_namespaceObject,"defer",(function(){return defer})),__webpack_require__.d(modules_namespaceObject,"throttle",(function(){return throttle})),__webpack_require__.d(modules_namespaceObject,"debounce",(function(){return debounce})),__webpack_require__.d(modules_namespaceObject,"wrap",(function(){return wrap})),__webpack_require__.d(modules_namespaceObject,"negate",(function(){return negate})),__webpack_require__.d(modules_namespaceObject,"compose",(function(){return compose})),__webpack_require__.d(modules_namespaceObject,"after",(function(){return after})),__webpack_require__.d(modules_namespaceObject,"before",(function(){return before})),__webpack_require__.d(modules_namespaceObject,"once",(function(){return once})),__webpack_require__.d(modules_namespaceObject,"findKey",(function(){return findKey})),__webpack_require__.d(modules_namespaceObject,"findIndex",(function(){return findIndex})),__webpack_require__.d(modules_namespaceObject,"findLastIndex",(function(){return findLastIndex})),__webpack_require__.d(modules_namespaceObject,"sortedIndex",(function(){return sortedIndex_sortedIndex})),__webpack_require__.d(modules_namespaceObject,"indexOf",(function(){return indexOf})),__webpack_require__.d(modules_namespaceObject,"lastIndexOf",(function(){return lastIndexOf})),__webpack_require__.d(modules_namespaceObject,"find",(function(){return find})),__webpack_require__.d(modules_namespaceObject,"detect",(function(){return find})),__webpack_require__.d(modules_namespaceObject,"findWhere",(function(){return findWhere})),__webpack_require__.d(modules_namespaceObject,"each",(function(){return each})),__webpack_require__.d(modules_namespaceObject,"forEach",(function(){return each})),__webpack_require__.d(modules_namespaceObject,"map",(function(){return map_map})),__webpack_require__.d(modules_namespaceObject,"collect",(function(){return map_map})),__webpack_require__.d(modules_namespaceObject,"reduce",(function(){return reduce})),__webpack_require__.d(modules_namespaceObject,"foldl",(function(){return reduce})),__webpack_require__.d(modules_namespaceObject,"inject",(function(){return reduce})),__webpack_require__.d(modules_namespaceObject,"reduceRight",(function(){return reduceRight})),__webpack_require__.d(modules_namespaceObject,"foldr",(function(){return reduceRight})),__webpack_require__.d(modules_namespaceObject,"filter",(function(){return filter})),__webpack_require__.d(modules_namespaceObject,"select",(function(){return filter})),__webpack_require__.d(modules_namespaceObject,"reject",(function(){return reject})),__webpack_require__.d(modules_namespaceObject,"every",(function(){return every})),__webpack_require__.d(modules_namespaceObject,"all",(function(){return every})),__webpack_require__.d(modules_namespaceObject,"some",(function(){return some})),__webpack_require__.d(modules_namespaceObject,"any",(function(){return some})),__webpack_require__.d(modules_namespaceObject,"contains",(function(){return contains})),__webpack_require__.d(modules_namespaceObject,"includes",(function(){return contains})),__webpack_require__.d(modules_namespaceObject,"include",(function(){return contains})),__webpack_require__.d(modules_namespaceObject,"invoke",(function(){return invoke})),__webpack_require__.d(modules_namespaceObject,"pluck",(function(){return pluck})),__webpack_require__.d(modules_namespaceObject,"where",(function(){return where})),__webpack_require__.d(modules_namespaceObject,"max",(function(){return max})),__webpack_require__.d(modules_namespaceObject,"min",(function(){return min})),__webpack_require__.d(modules_namespaceObject,"shuffle",(function(){return shuffle})),__webpack_require__.d(modules_namespaceObject,"sample",(function(){return sample_sample})),__webpack_require__.d(modules_namespaceObject,"sortBy",(function(){return sortBy})),__webpack_require__.d(modules_namespaceObject,"groupBy",(function(){return groupBy})),__webpack_require__.d(modules_namespaceObject,"indexBy",(function(){return indexBy})),__webpack_require__.d(modules_namespaceObject,"countBy",(function(){return countBy})),__webpack_require__.d(modules_namespaceObject,"partition",(function(){return modules_partition})),__webpack_require__.d(modules_namespaceObject,"toArray",(function(){return toArray})),__webpack_require__.d(modules_namespaceObject,"size",(function(){return size})),__webpack_require__.d(modules_namespaceObject,"pick",(function(){return pick})),__webpack_require__.d(modules_namespaceObject,"omit",(function(){return omit})),__webpack_require__.d(modules_namespaceObject,"first",(function(){return first})),__webpack_require__.d(modules_namespaceObject,"head",(function(){return first})),__webpack_require__.d(modules_namespaceObject,"take",(function(){return first})),__webpack_require__.d(modules_namespaceObject,"initial",(function(){return initial_initial})),__webpack_require__.d(modules_namespaceObject,"last",(function(){return last_last})),__webpack_require__.d(modules_namespaceObject,"rest",(function(){return rest_rest})),__webpack_require__.d(modules_namespaceObject,"tail",(function(){return rest_rest})),__webpack_require__.d(modules_namespaceObject,"drop",(function(){return rest_rest})),__webpack_require__.d(modules_namespaceObject,"compact",(function(){return compact})),__webpack_require__.d(modules_namespaceObject,"flatten",(function(){return flatten_flatten})),__webpack_require__.d(modules_namespaceObject,"without",(function(){return without})),__webpack_require__.d(modules_namespaceObject,"uniq",(function(){return uniq})),__webpack_require__.d(modules_namespaceObject,"unique",(function(){return uniq})),__webpack_require__.d(modules_namespaceObject,"union",(function(){return union})),__webpack_require__.d(modules_namespaceObject,"intersection",(function(){return intersection})),__webpack_require__.d(modules_namespaceObject,"difference",(function(){return difference})),__webpack_require__.d(modules_namespaceObject,"unzip",(function(){return unzip})),__webpack_require__.d(modules_namespaceObject,"transpose",(function(){return unzip})),__webpack_require__.d(modules_namespaceObject,"zip",(function(){return zip})),__webpack_require__.d(modules_namespaceObject,"object",(function(){return object_object})),__webpack_require__.d(modules_namespaceObject,"range",(function(){return range})),__webpack_require__.d(modules_namespaceObject,"chunk",(function(){return chunk})),__webpack_require__.d(modules_namespaceObject,"mixin",(function(){return mixin})),__webpack_require__.d(modules_namespaceObject,"default",(function(){return underscore_array_methods}));var _setup=__webpack_require__(0);function restArguments(func,startIndex){return startIndex=null==startIndex?func.length-1:+startIndex,function(){for(var length=Math.max(arguments.length-startIndex,0),rest=Array(length),index=0;index<length;index++)rest[index]=arguments[index+startIndex];switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest);case 2:return func.call(this,arguments[0],arguments[1],rest)}var args=Array(startIndex+1);for(index=0;index<startIndex;index++)args[index]=arguments[index];return args[startIndex]=rest,func.apply(this,args)}}function isObject(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj}function isNull(obj){return null===obj}function isUndefined(obj){return void 0===obj}function isBoolean(obj){return!0===obj||!1===obj||"[object Boolean]"===_setup.t.call(obj)}function isElement(obj){return!(!obj||1!==obj.nodeType)}function tagTester(name){var tag="[object "+name+"]";return function(obj){return _setup.t.call(obj)===tag}}var isString=tagTester("String"),isNumber=tagTester("Number"),isDate=tagTester("Date"),isRegExp=tagTester("RegExp"),isError=tagTester("Error"),isSymbol=tagTester("Symbol"),isArrayBuffer=tagTester("ArrayBuffer"),isFunction=tagTester("Function"),nodelist=_setup.p.document&&_setup.p.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof nodelist&&(isFunction=function(obj){return"function"==typeof obj||!1});var modules_isFunction=isFunction,_hasObjectTag=tagTester("Object"),hasStringTagBug=_setup.s&&_hasObjectTag(new DataView(new ArrayBuffer(8))),isIE11="undefined"!=typeof Map&&_hasObjectTag(new Map),isDataView=tagTester("DataView");var modules_isDataView=hasStringTagBug?function(obj){return null!=obj&&modules_isFunction(obj.getInt8)&&isArrayBuffer(obj.buffer)}:isDataView,isArray=_setup.k||tagTester("Array");function has(obj,key){return null!=obj&&_setup.i.call(obj,key)}var isArguments=tagTester("Arguments");!function(){isArguments(arguments)||(isArguments=function(obj){return has(obj,"callee")})}();var modules_isArguments=isArguments;function isFinite_isFinite(obj){return!isSymbol(obj)&&Object(_setup.f)(obj)&&!isNaN(parseFloat(obj))}function isNaN_isNaN(obj){return isNumber(obj)&&Object(_setup.g)(obj)}function constant(value){return function(){return value}}function createSizePropertyCheck(getSizeProperty){return function(collection){var sizeProperty=getSizeProperty(collection);return"number"==typeof sizeProperty&&sizeProperty>=0&&sizeProperty<=_setup.b}}function shallowProperty(key){return function(obj){return null==obj?void 0:obj[key]}}var _getByteLength=shallowProperty("byteLength"),_isBufferLike=createSizePropertyCheck(_getByteLength),typedArrayPattern=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var modules_isTypedArray=_setup.r?function(obj){return _setup.l?Object(_setup.l)(obj)&&!modules_isDataView(obj):_isBufferLike(obj)&&typedArrayPattern.test(_setup.t.call(obj))}:constant(!1),_getLength=shallowProperty("length");function collectNonEnumProps(obj,keys){keys=function(keys){for(var hash={},l=keys.length,i=0;i<l;++i)hash[keys[i]]=!0;return{contains:function(key){return!0===hash[key]},push:function(key){return hash[key]=!0,keys.push(key)}}}(keys);var nonEnumIdx=_setup.n.length,constructor=obj.constructor,proto=modules_isFunction(constructor)&&constructor.prototype||_setup.c,prop="constructor";for(has(obj,prop)&&!keys.contains(prop)&&keys.push(prop);nonEnumIdx--;)(prop=_setup.n[nonEnumIdx])in obj&&obj[prop]!==proto[prop]&&!keys.contains(prop)&&keys.push(prop)}function keys_keys(obj){if(!isObject(obj))return[];if(_setup.m)return Object(_setup.m)(obj);var keys=[];for(var key in obj)has(obj,key)&&keys.push(key);return _setup.h&&collectNonEnumProps(obj,keys),keys}function isEmpty(obj){if(null==obj)return!0;var length=_getLength(obj);return"number"==typeof length&&(isArray(obj)||isString(obj)||modules_isArguments(obj))?0===length:0===_getLength(keys_keys(obj))}function isMatch(object,attrs){var _keys=keys_keys(attrs),length=_keys.length;if(null==object)return!length;for(var obj=Object(object),i=0;i<length;i++){var key=_keys[i];if(attrs[key]!==obj[key]||!(key in obj))return!1}return!0}function _(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)}function toBufferView(bufferSource){return new Uint8Array(bufferSource.buffer||bufferSource,bufferSource.byteOffset||0,_getByteLength(bufferSource))}_.VERSION=_setup.e,_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return String(this._wrapped)};function eq(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return!1;if(a!=a)return b!=b;var type=typeof a;return("function"===type||"object"===type||"object"==typeof b)&&deepEq(a,b,aStack,bStack)}function deepEq(a,b,aStack,bStack){a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=_setup.t.call(a);if(className!==_setup.t.call(b))return!1;if(hasStringTagBug&&"[object Object]"==className&&modules_isDataView(a)){if(!modules_isDataView(b))return!1;className="[object DataView]"}switch(className){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object Symbol]":return _setup.d.valueOf.call(a)===_setup.d.valueOf.call(b);case"[object ArrayBuffer]":case"[object DataView]":return deepEq(toBufferView(a),toBufferView(b),aStack,bStack)}var areArrays="[object Array]"===className;if(!areArrays&&modules_isTypedArray(a)){if(_getByteLength(a)!==_getByteLength(b))return!1;if(a.buffer===b.buffer&&a.byteOffset===b.byteOffset)return!0;areArrays=!0}if(!areArrays){if("object"!=typeof a||"object"!=typeof b)return!1;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(modules_isFunction(aCtor)&&aCtor instanceof aCtor&&modules_isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1}bStack=bStack||[];for(var length=(aStack=aStack||[]).length;length--;)if(aStack[length]===a)return bStack[length]===b;if(aStack.push(a),bStack.push(b),areArrays){if((length=a.length)!==b.length)return!1;for(;length--;)if(!eq(a[length],b[length],aStack,bStack))return!1}else{var key,_keys=keys_keys(a);if(length=_keys.length,keys_keys(b).length!==length)return!1;for(;length--;)if(!has(b,key=_keys[length])||!eq(a[key],b[key],aStack,bStack))return!1}return aStack.pop(),bStack.pop(),!0}function isEqual(a,b){return eq(a,b)}function allKeys(obj){if(!isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);return _setup.h&&collectNonEnumProps(obj,keys),keys}function ie11fingerprint(methods){var length=_getLength(methods);return function(obj){if(null==obj)return!1;var keys=allKeys(obj);if(_getLength(keys))return!1;for(var i=0;i<length;i++)if(!modules_isFunction(obj[methods[i]]))return!1;return methods!==weakMapMethods||!modules_isFunction(obj[forEachName])}}var forEachName="forEach",commonInit=["clear","delete"],mapTail=["get","has","set"],mapMethods=commonInit.concat(forEachName,mapTail),weakMapMethods=commonInit.concat(mapTail),setMethods=["add"].concat(commonInit,forEachName,"has"),isMap=isIE11?ie11fingerprint(mapMethods):tagTester("Map"),isWeakMap=isIE11?ie11fingerprint(weakMapMethods):tagTester("WeakMap"),isSet=isIE11?ie11fingerprint(setMethods):tagTester("Set"),isWeakSet=tagTester("WeakSet");function values_values(obj){for(var _keys=keys_keys(obj),length=_keys.length,values=Array(length),i=0;i<length;i++)values[i]=obj[_keys[i]];return values}function pairs_pairs(obj){for(var _keys=keys_keys(obj),length=_keys.length,pairs=Array(length),i=0;i<length;i++)pairs[i]=[_keys[i],obj[_keys[i]]];return pairs}function invert(obj){for(var result={},_keys=keys_keys(obj),i=0,length=_keys.length;i<length;i++)result[obj[_keys[i]]]=_keys[i];return result}function functions(obj){var names=[];for(var key in obj)modules_isFunction(obj[key])&&names.push(key);return names.sort()}function createAssigner(keysFunc,defaults){return function(obj){var length=arguments.length;if(defaults&&(obj=Object(obj)),length<2||null==obj)return obj;for(var index=1;index<length;index++)for(var source=arguments[index],keys=keysFunc(source),l=keys.length,i=0;i<l;i++){var key=keys[i];defaults&&void 0!==obj[key]||(obj[key]=source[key])}return obj}}var extend=createAssigner(allKeys),extendOwn=createAssigner(keys_keys),defaults=createAssigner(allKeys,!0);function baseCreate(prototype){if(!isObject(prototype))return{};if(_setup.j)return Object(_setup.j)(prototype);var Ctor=function(){};Ctor.prototype=prototype;var result=new Ctor;return Ctor.prototype=null,result}function create(prototype,props){var result=baseCreate(prototype);return props&&extendOwn(result,props),result}function clone(obj){return isObject(obj)?isArray(obj)?obj.slice():extend({},obj):obj}function tap(obj,interceptor){return interceptor(obj),obj}function toPath(path){return isArray(path)?path:[path]}function _toPath_toPath(path){return _.toPath(path)}function deepGet(obj,path){for(var length=path.length,i=0;i<length;i++){if(null==obj)return;obj=obj[path[i]]}return length?obj:void 0}function get(object,path,defaultValue){var value=deepGet(object,_toPath_toPath(path));return isUndefined(value)?defaultValue:value}function has_has(obj,path){for(var length=(path=_toPath_toPath(path)).length,i=0;i<length;i++){var key=path[i];if(!has(obj,key))return!1;obj=obj[key]}return!!length}function identity(value){return value}function matcher_matcher(attrs){return attrs=extendOwn({},attrs),function(obj){return isMatch(obj,attrs)}}function property(path){return path=_toPath_toPath(path),function(obj){return deepGet(obj,path)}}function optimizeCb(func,context,argCount){if(void 0===context)return func;switch(null==argCount?3:argCount){case 1:return function(value){return func.call(context,value)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}}function baseIteratee(value,context,argCount){return null==value?identity:modules_isFunction(value)?optimizeCb(value,context,argCount):isObject(value)&&!isArray(value)?matcher_matcher(value):property(value)}function iteratee_iteratee(value,context){return baseIteratee(value,context,1/0)}function cb(value,context,argCount){return _.iteratee!==iteratee_iteratee?_.iteratee(value,context):baseIteratee(value,context,argCount)}function mapObject(obj,iteratee,context){iteratee=cb(iteratee,context);for(var _keys=keys_keys(obj),length=_keys.length,results={},index=0;index<length;index++){var currentKey=_keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results}function noop(){}function propertyOf(obj){return null==obj?noop:function(path){return get(obj,path)}}function times(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum}function random(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))}_.toPath=toPath,_.iteratee=iteratee_iteratee;var now=Date.now||function(){return(new Date).getTime()};function createEscaper(map){var escaper=function(match){return map[match]},source="(?:"+keys_keys(map).join("|")+")",testRegexp=RegExp(source),replaceRegexp=RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}}var _escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},modules_escape=createEscaper(_escapeMap),modules_unescape=createEscaper(invert(_escapeMap)),templateSettings=_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escapeRegExp=/\\|'|\r|\n|\u2028|\u2029/g;function escapeChar(match){return"\\"+escapes[match]}var bareIdentifier=/^\s*(\w|\$)+\s*$/;function template_template(text,settings,oldSettings){!settings&&oldSettings&&(settings=oldSettings),settings=defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,(function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escapeRegExp,escapeChar),index=offset+match.length,escape?source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'":interpolate?source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'":evaluate&&(source+="';\n"+evaluate+"\n__p+='"),match})),source+="';\n";var render,argument=settings.variable;if(argument){if(!bareIdentifier.test(argument))throw new Error("variable is not a bare identifier: "+argument)}else source="with(obj||{}){\n"+source+"}\n",argument="obj";source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(argument,"_",source)}catch(e){throw e.source=source,e}var template=function(data){return render.call(this,data,_)};return template.source="function("+argument+"){\n"+source+"}",template}function result_result(obj,path,fallback){var length=(path=_toPath_toPath(path)).length;if(!length)return modules_isFunction(fallback)?fallback.call(obj):fallback;for(var i=0;i<length;i++){var prop=null==obj?void 0:obj[path[i]];void 0===prop&&(prop=fallback,i=length),obj=modules_isFunction(prop)?prop.call(obj):prop}return obj}var idCounter=0;function uniqueId(prefix){var id=++idCounter+"";return prefix?prefix+id:id}function chain(obj){var instance=_(obj);return instance._chain=!0,instance}function executeBound(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype),result=sourceFunc.apply(self,args);return isObject(result)?result:self}var partial=restArguments((function(func,boundArgs){var placeholder=partial.placeholder,bound=function(){for(var position=0,length=boundArgs.length,args=Array(length),i=0;i<length;i++)args[i]=boundArgs[i]===placeholder?arguments[position++]:boundArgs[i];for(;position<arguments.length;)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound}));partial.placeholder=_;var modules_partial=partial,bind=restArguments((function(func,context,args){if(!modules_isFunction(func))throw new TypeError("Bind must be called on a function");var bound=restArguments((function(callArgs){return executeBound(func,bound,context,this,args.concat(callArgs))}));return bound})),_isArrayLike=createSizePropertyCheck(_getLength);function flatten(input,depth,strict,output){if(output=output||[],depth||0===depth){if(depth<=0)return output.concat(input)}else depth=1/0;for(var idx=output.length,i=0,length=_getLength(input);i<length;i++){var value=input[i];if(_isArrayLike(value)&&(isArray(value)||modules_isArguments(value)))if(depth>1)flatten(value,depth-1,strict,output),idx=output.length;else for(var j=0,len=value.length;j<len;)output[idx++]=value[j++];else strict||(output[idx++]=value)}return output}var bindAll=restArguments((function(obj,keys){var index=(keys=flatten(keys,!1,!1)).length;if(index<1)throw new Error("bindAll must be passed function names");for(;index--;){var key=keys[index];obj[key]=bind(obj[key],obj)}return obj}));function memoize_memoize(func,hasher){var memoize=function(key){var cache=memoize.cache,address=""+(hasher?hasher.apply(this,arguments):key);return has(cache,address)||(cache[address]=func.apply(this,arguments)),cache[address]};return memoize.cache={},memoize}var delay=restArguments((function(func,wait,args){return setTimeout((function(){return func.apply(null,args)}),wait)})),defer=modules_partial(delay,_,1);function throttle(func,wait,options){var timeout,context,args,result,previous=0;options||(options={});var later=function(){previous=!1===options.leading?0:now(),timeout=null,result=func.apply(context,args),timeout||(context=args=null)},throttled=function(){var _now=now();previous||!1!==options.leading||(previous=_now);var remaining=wait-(_now-previous);return context=this,args=arguments,remaining<=0||remaining>wait?(timeout&&(clearTimeout(timeout),timeout=null),previous=_now,result=func.apply(context,args),timeout||(context=args=null)):timeout||!1===options.trailing||(timeout=setTimeout(later,remaining)),result};return throttled.cancel=function(){clearTimeout(timeout),previous=0,timeout=context=args=null},throttled}function debounce(func,wait,immediate){var timeout,previous,args,result,context,later=function(){var passed=now()-previous;wait>passed?timeout=setTimeout(later,wait-passed):(timeout=null,immediate||(result=func.apply(context,args)),timeout||(args=context=null))},debounced=restArguments((function(_args){return context=this,args=_args,previous=now(),timeout||(timeout=setTimeout(later,wait),immediate&&(result=func.apply(context,args))),result}));return debounced.cancel=function(){clearTimeout(timeout),timeout=args=context=null},debounced}function wrap(func,wrapper){return modules_partial(wrapper,func)}function negate(predicate){return function(){return!predicate.apply(this,arguments)}}function compose(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}}function after(times,func){return function(){if(--times<1)return func.apply(this,arguments)}}function before(times,func){var memo;return function(){return--times>0&&(memo=func.apply(this,arguments)),times<=1&&(func=null),memo}}var once=modules_partial(before,2);function findKey(obj,predicate,context){predicate=cb(predicate,context);for(var key,_keys=keys_keys(obj),i=0,length=_keys.length;i<length;i++)if(predicate(obj[key=_keys[i]],key,obj))return key}function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);for(var length=_getLength(array),index=dir>0?0:length-1;index>=0&&index<length;index+=dir)if(predicate(array[index],index,array))return index;return-1}}var findIndex=createPredicateIndexFinder(1),findLastIndex=createPredicateIndexFinder(-1);function sortedIndex_sortedIndex(array,obj,iteratee,context){for(var value=(iteratee=cb(iteratee,context,1))(obj),low=0,high=_getLength(array);low<high;){var mid=Math.floor((low+high)/2);iteratee(array[mid])<value?low=mid+1:high=mid}return low}function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=_getLength(array);if("number"==typeof idx)dir>0?i=idx>=0?idx:Math.max(idx+length,i):length=idx>=0?Math.min(idx+1,length):idx+length+1;else if(sortedIndex&&idx&&length)return array[idx=sortedIndex(array,item)]===item?idx:-1;if(item!=item)return(idx=predicateFind(_setup.q.call(array,i,length),isNaN_isNaN))>=0?idx+i:-1;for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir)if(array[idx]===item)return idx;return-1}}var indexOf=createIndexFinder(1,findIndex,sortedIndex_sortedIndex),lastIndexOf=createIndexFinder(-1,findLastIndex);function find(obj,predicate,context){var key=(_isArrayLike(obj)?findIndex:findKey)(obj,predicate,context);if(void 0!==key&&-1!==key)return obj[key]}function findWhere(obj,attrs){return find(obj,matcher_matcher(attrs))}function each(obj,iteratee,context){var i,length;if(iteratee=optimizeCb(iteratee,context),_isArrayLike(obj))for(i=0,length=obj.length;i<length;i++)iteratee(obj[i],i,obj);else{var _keys=keys_keys(obj);for(i=0,length=_keys.length;i<length;i++)iteratee(obj[_keys[i]],_keys[i],obj)}return obj}function map_map(obj,iteratee,context){iteratee=cb(iteratee,context);for(var _keys=!_isArrayLike(obj)&&keys_keys(obj),length=(_keys||obj).length,results=Array(length),index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results}function createReduce(dir){var reducer=function(obj,iteratee,memo,initial){var _keys=!_isArrayLike(obj)&&keys_keys(obj),length=(_keys||obj).length,index=dir>0?0:length-1;for(initial||(memo=obj[_keys?_keys[index]:index],index+=dir);index>=0&&index<length;index+=dir){var currentKey=_keys?_keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo};return function(obj,iteratee,memo,context){var initial=arguments.length>=3;return reducer(obj,optimizeCb(iteratee,context,4),memo,initial)}}var reduce=createReduce(1),reduceRight=createReduce(-1);function filter(obj,predicate,context){var results=[];return predicate=cb(predicate,context),each(obj,(function(value,index,list){predicate(value,index,list)&&results.push(value)})),results}function reject(obj,predicate,context){return filter(obj,negate(cb(predicate)),context)}function every(obj,predicate,context){predicate=cb(predicate,context);for(var _keys=!_isArrayLike(obj)&&keys_keys(obj),length=(_keys||obj).length,index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return!1}return!0}function some(obj,predicate,context){predicate=cb(predicate,context);for(var _keys=!_isArrayLike(obj)&&keys_keys(obj),length=(_keys||obj).length,index=0;index<length;index++){var currentKey=_keys?_keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return!0}return!1}function contains(obj,item,fromIndex,guard){return _isArrayLike(obj)||(obj=values_values(obj)),("number"!=typeof fromIndex||guard)&&(fromIndex=0),indexOf(obj,item,fromIndex)>=0}var invoke=restArguments((function(obj,path,args){var contextPath,func;return modules_isFunction(path)?func=path:(path=_toPath_toPath(path),contextPath=path.slice(0,-1),path=path[path.length-1]),map_map(obj,(function(context){var method=func;if(!method){if(contextPath&&contextPath.length&&(context=deepGet(context,contextPath)),null==context)return;method=context[path]}return null==method?method:method.apply(context,args)}))}));function pluck(obj,key){return map_map(obj,property(key))}function where(obj,attrs){return filter(obj,matcher_matcher(attrs))}function max(obj,iteratee,context){var value,computed,result=-1/0,lastComputed=-1/0;if(null==iteratee||"number"==typeof iteratee&&"object"!=typeof obj[0]&&null!=obj)for(var i=0,length=(obj=_isArrayLike(obj)?obj:values_values(obj)).length;i<length;i++)null!=(value=obj[i])&&value>result&&(result=value);else iteratee=cb(iteratee,context),each(obj,(function(v,index,list){((computed=iteratee(v,index,list))>lastComputed||computed===-1/0&&result===-1/0)&&(result=v,lastComputed=computed)}));return result}function min(obj,iteratee,context){var value,computed,result=1/0,lastComputed=1/0;if(null==iteratee||"number"==typeof iteratee&&"object"!=typeof obj[0]&&null!=obj)for(var i=0,length=(obj=_isArrayLike(obj)?obj:values_values(obj)).length;i<length;i++)null!=(value=obj[i])&&value<result&&(result=value);else iteratee=cb(iteratee,context),each(obj,(function(v,index,list){((computed=iteratee(v,index,list))<lastComputed||computed===1/0&&result===1/0)&&(result=v,lastComputed=computed)}));return result}var reStrSymbol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function toArray(obj){return obj?isArray(obj)?_setup.q.call(obj):isString(obj)?obj.match(reStrSymbol):_isArrayLike(obj)?map_map(obj,identity):values_values(obj):[]}function sample_sample(obj,n,guard){if(null==n||guard)return _isArrayLike(obj)||(obj=values_values(obj)),obj[random(obj.length-1)];var sample=toArray(obj),length=_getLength(sample);n=Math.max(Math.min(n,length),0);for(var last=length-1,index=0;index<n;index++){var rand=random(index,last),temp=sample[index];sample[index]=sample[rand],sample[rand]=temp}return sample.slice(0,n)}function shuffle(obj){return sample_sample(obj,1/0)}function sortBy(obj,iteratee,context){var index=0;return iteratee=cb(iteratee,context),pluck(map_map(obj,(function(value,key,list){return{value:value,index:index++,criteria:iteratee(value,key,list)}})).sort((function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(a<b||void 0===b)return-1}return left.index-right.index})),"value")}function group(behavior,partition){return function(obj,iteratee,context){var result=partition?[[],[]]:{};return iteratee=cb(iteratee,context),each(obj,(function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)})),result}}var groupBy=group((function(result,value,key){has(result,key)?result[key].push(value):result[key]=[value]})),indexBy=group((function(result,value,key){result[key]=value})),countBy=group((function(result,value,key){has(result,key)?result[key]++:result[key]=1})),modules_partition=group((function(result,value,pass){result[pass?0:1].push(value)}),!0);function size(obj){return null==obj?0:_isArrayLike(obj)?obj.length:keys_keys(obj).length}function keyInObj(value,key,obj){return key in obj}var pick=restArguments((function(obj,keys){var result={},iteratee=keys[0];if(null==obj)return result;modules_isFunction(iteratee)?(keys.length>1&&(iteratee=optimizeCb(iteratee,keys[1])),keys=allKeys(obj)):(iteratee=keyInObj,keys=flatten(keys,!1,!1),obj=Object(obj));for(var i=0,length=keys.length;i<length;i++){var key=keys[i],value=obj[key];iteratee(value,key,obj)&&(result[key]=value)}return result})),omit=restArguments((function(obj,keys){var context,iteratee=keys[0];return modules_isFunction(iteratee)?(iteratee=negate(iteratee),keys.length>1&&(context=keys[1])):(keys=map_map(flatten(keys,!1,!1),String),iteratee=function(value,key){return!contains(keys,key)}),pick(obj,iteratee,context)}));function initial_initial(array,n,guard){return _setup.q.call(array,0,Math.max(0,array.length-(null==n||guard?1:n)))}function first(array,n,guard){return null==array||array.length<1?null==n||guard?void 0:[]:null==n||guard?array[0]:initial_initial(array,array.length-n)}function rest_rest(array,n,guard){return _setup.q.call(array,null==n||guard?1:n)}function last_last(array,n,guard){return null==array||array.length<1?null==n||guard?void 0:[]:null==n||guard?array[array.length-1]:rest_rest(array,Math.max(0,array.length-n))}function compact(array){return filter(array,Boolean)}function flatten_flatten(array,depth){return flatten(array,depth,!1)}var difference=restArguments((function(array,rest){return rest=flatten(rest,!0,!0),filter(array,(function(value){return!contains(rest,value)}))})),without=restArguments((function(array,otherArrays){return difference(array,otherArrays)}));function uniq(array,isSorted,iteratee,context){isBoolean(isSorted)||(context=iteratee,iteratee=isSorted,isSorted=!1),null!=iteratee&&(iteratee=cb(iteratee,context));for(var result=[],seen=[],i=0,length=_getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;isSorted&&!iteratee?(i&&seen===computed||result.push(value),seen=computed):iteratee?contains(seen,computed)||(seen.push(computed),result.push(value)):contains(result,value)||result.push(value)}return result}var union=restArguments((function(arrays){return uniq(flatten(arrays,!0,!0))}));function intersection(array){for(var result=[],argsLength=arguments.length,i=0,length=_getLength(array);i<length;i++){var item=array[i];if(!contains(result,item)){var j;for(j=1;j<argsLength&&contains(arguments[j],item);j++);j===argsLength&&result.push(item)}}return result}function unzip(array){for(var length=array&&max(array,_getLength).length||0,result=Array(length),index=0;index<length;index++)result[index]=pluck(array,index);return result}var zip=restArguments(unzip);function object_object(list,values){for(var result={},i=0,length=_getLength(list);i<length;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result}function range(start,stop,step){null==stop&&(stop=start||0,start=0),step||(step=stop<start?-1:1);for(var length=Math.max(Math.ceil((stop-start)/step),0),range=Array(length),idx=0;idx<length;idx++,start+=step)range[idx]=start;return range}function chunk(array,count){if(null==count||count<1)return[];for(var result=[],i=0,length=array.length;i<length;)result.push(_setup.q.call(array,i,i+=count));return result}function chainResult(instance,obj){return instance._chain?_(obj).chain():obj}function mixin(obj){return each(functions(obj),(function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return _setup.o.apply(args,arguments),chainResult(this,func.apply(_,args))}})),_}each(["pop","push","reverse","shift","sort","splice","unshift"],(function(name){var method=_setup.a[name];_.prototype[name]=function(){var obj=this._wrapped;return null!=obj&&(method.apply(obj,arguments),"shift"!==name&&"splice"!==name||0!==obj.length||delete obj[0]),chainResult(this,obj)}})),each(["concat","join","slice"],(function(name){var method=_setup.a[name];_.prototype[name]=function(){var obj=this._wrapped;return null!=obj&&(obj=method.apply(obj,arguments)),chainResult(this,obj)}}));var underscore_array_methods=_,index_default_=mixin(modules_namespaceObject);index_default_._=index_default_;var index_default=index_default_},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var safeIsNaN=Number.isNaN||function(value){return"number"==typeof value&&value!=value};function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(var i=0;i<newInputs.length;i++)if(first=newInputs[i],second=lastInputs[i],!(first===second||safeIsNaN(first)&&safeIsNaN(second)))return!1;var first,second;return!0}__webpack_exports__.default=function(resultFn,isEqual){var lastThis;void 0===isEqual&&(isEqual=areInputsEqual);var lastResult,lastArgs=[],calledOnce=!1;return function(){for(var newArgs=[],_i=0;_i<arguments.length;_i++)newArgs[_i]=arguments[_i];return calledOnce&&lastThis===this&&isEqual(newArgs,lastArgs)||(lastResult=resultFn.apply(this,newArgs),calledOnce=!0,lastThis=this,lastArgs=newArgs),lastResult}}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__5__},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DefaultNodeElement=void 0;var _react=_interopRequireDefault(__webpack_require__(1)),_propTypes=_interopRequireDefault(__webpack_require__(2)),_memoizeOne=_interopRequireDefault(__webpack_require__(4)),_underscore=_interopRequireDefault(__webpack_require__(3)),_parsingFunctions=__webpack_require__(7);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var obj,key,value,DefaultNodeElement=function(_React$PureComponent){_inherits(DefaultNodeElement,_React$PureComponent);var _super=_createSuper(DefaultNodeElement);function DefaultNodeElement(){return _classCallCheck(this,DefaultNodeElement),_super.apply(this,arguments)}return _createClass(DefaultNodeElement,[{key:"icon",value:function(){var iconClass,_this$props$node=this.props.node,type=_this$props$node.type,format=_this$props$node.format;if("input"===type||"output"===type){var formats=format;void 0===formats?iconClass="question":"string"==typeof formats&&((formats=formats.toLowerCase()).indexOf("file")>-1?iconClass="file-text-o":(formats.indexOf("parameter")>-1||formats.indexOf("int")>-1||formats.indexOf("string")>-1)&&(iconClass="wrench"))}else"step"===type&&(iconClass="cogs");return iconClass?_react.default.createElement("i",{className:"icon icon-fw icon-"+iconClass}):null}},{key:"tooltip",value:function(){var node=this.props.node,output="";if("step"===node.nodeType)output+="<small>Step "+((node.column-1)/2+1)+"</small>";else{var nodeType=node.nodeType;output+="<small>"+(nodeType=nodeType.charAt(0).toUpperCase()+nodeType.slice(1))+"</small>"}return output+='<h5 class="text-600 tooltip-title">'+(node.title||node.name)+"</h5>",("string"==typeof node.description||node.meta&&"string"==typeof node.meta.description)&&(output+="<div>"+(node.description||node.meta.description)+"</div>"),output}},{key:"render",value:function(){var _this$props=this.props,node=_this$props.node,title=_this$props.title,columnWidth=_this$props.columnWidth,style="input"===node.nodeType||"output"===node.nodeType?{width:columnWidth||100}:null;return _react.default.createElement("div",{className:"node-visible-element","data-tip":this.tooltip(),"data-place":"top","data-html":!0,style:style},_react.default.createElement("div",{className:"node-name"},this.icon(),title||node.title||node.name))}}]),DefaultNodeElement}(_react.default.PureComponent);exports.DefaultNodeElement=DefaultNodeElement,obj=DefaultNodeElement,key="propTypes",value={node:_propTypes.default.object,disabled:_propTypes.default.bool,selected:_propTypes.default.bool,related:_propTypes.default.oneOfType([_propTypes.default.bool,_propTypes.default.string]),columnWidth:_propTypes.default.number},key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;var Node=function(_React$Component){_inherits(Node,_React$Component);var _super2=_createSuper(Node);function Node(props){var _this;return _classCallCheck(this,Node),(_this=_super2.call(this,props)).isInSelectionPath=(0,_memoizeOne.default)(Node.isInSelectionPath.bind(_assertThisInitialized(_this))),_this.isRelated=(0,_memoizeOne.default)(Node.isRelated.bind(_assertThisInitialized(_this))),_this.isDisabled=(0,_memoizeOne.default)(_this.isDisabled.bind(_assertThisInitialized(_this))),_this}return _createClass(Node,[{key:"componentDidMount",value:function(){var _this$props2=this.props,countInActiveContext=_this$props2.countInActiveContext,lastActiveContextNode=_this$props2.lastActiveContextNode,node=_this$props2.node,scrollContainerWrapperElement=_this$props2.scrollContainerWrapperElement,columnWidth=_this$props2.columnWidth,columnSpacing=_this$props2.columnSpacing,sw=scrollContainerWrapperElement;if(node.isCurrentContext&&sw&&(1===countInActiveContext||countInActiveContext>1&&lastActiveContextNode===node)){var scrollLeft=sw.scrollLeft,containerWidth=sw.offsetWidth||sw.clientWidth,nodeXEnd=node.x+columnWidth+columnSpacing;nodeXEnd>containerWidth+scrollLeft&&(sw.scrollLeft=nodeXEnd-containerWidth)}}},{key:"isDisabled",value:function(node,isNodeDisabled){return"function"==typeof isNodeDisabled?isNodeDisabled(node):"boolean"==typeof isNodeDisabled&&isNodeDisabled}},{key:"render",value:function(){var _this$props3=this.props,node=_this$props3.node,isNodeDisabled=_this$props3.isNodeDisabled,className=_this$props3.className,columnWidth=_this$props3.columnWidth,renderNodeElement=_this$props3.renderNodeElement,selectedNode=_this$props3.selectedNode,disabled=void 0!==node.disabled?node.disabled:this.isDisabled(node,isNodeDisabled),isCurrentContext=void 0!==node.isCurrentContext?node.isCurrentContext:null,classNameList=["node","node-type-"+node.nodeType],selected=!disabled&&Node.isSelected(node,selectedNode)||!1,related=!disabled&&this.isRelated(node,selectedNode)||!1,inSelectionPath=selected||!disabled&&this.isInSelectionPath(node,selectedNode)||!1;disabled&&classNameList.push("disabled"),isCurrentContext&&classNameList.push("current-context"),"function"==typeof className?classNameList.push(className(node)):"string"==typeof className&&classNameList.push(className);var visibleNodeProps=_underscore.default.extend(_underscore.default.omit(this.props,"children","onMouseEnter","onMouseLeave","onClick","className","nodeElement"),{disabled:disabled,selected:selected,related:related,isCurrentContext:isCurrentContext,inSelectionPath:inSelectionPath});return _react.default.createElement("div",{className:classNameList.join(" "),"data-node-key":node.id||node.name,"data-node-type":node.nodeType,"data-node-global":node.meta&&!0===node.meta.global,"data-node-selected":selected,"data-node-in-selection-path":inSelectionPath,"data-node-related":related,"data-node-type-detail":node.ioType&&node.ioType.toLowerCase(),"data-node-column":node.column,style:{top:node.y,left:node.x,width:columnWidth||100,zIndex:2+(node.indexInColumn||0)}},_react.default.createElement("div",_extends({className:"inner",children:renderNodeElement(node,visibleNodeProps)},_underscore.default.pick(this.props,"onMouseEnter","onMouseLeave"),{onClick:disabled?null:this.props.onClick})))}}],[{key:"isSelected",value:function(currentNode,selectedNode){return!!selectedNode&&selectedNode===currentNode}},{key:"isInSelectionPath",value:function(currentNode,selectedNode){if(!selectedNode)return!1;function check(nodeBeingTraversed){return Node.isSelected(currentNode,nodeBeingTraversed)}var results,selectedInputs=selectedNode&&(selectedNode.inputNodes||selectedNode.outputOf&&[selectedNode.outputOf])||null,selectedOutputs=selectedNode&&(selectedNode.outputNodes||selectedNode.inputOf)||null;return!!(Array.isArray(selectedInputs)&&selectedInputs.length>0&&(results=_underscore.default.flatten(_underscore.default.map(selectedInputs,(function(sI){return(0,_parsingFunctions.traceNodePathAndRun)(sI,check,"input",selectedNode)})),!1),_underscore.default.any(results)))||!!(Array.isArray(selectedOutputs)&&selectedOutputs.length>0&&(results=_underscore.default.flatten(_underscore.default.map(selectedOutputs,(function(sO){return(0,_parsingFunctions.traceNodePathAndRun)(sO,check,"output",selectedNode)})),!1),_underscore.default.any(results)))}},{key:"findCommonStepNodesInputInto",value:function(){var nodes=Array.from(arguments),nodeInputOfLists=_underscore.default.filter(_underscore.default.pluck(nodes,"inputOf"),(function(ioList){return Array.isArray(ioList)&&ioList.length>0}));return nodeInputOfLists.length===nodes.length&&_underscore.default.intersection.apply(_underscore.default,_toConsumableArray(nodeInputOfLists))}},{key:"isInputOfSameStep",value:function(){return Node.findCommonStepNodesInputInto.apply(Node,arguments).length>0}},{key:"isRelated",value:function(currentNode,selectedNode){if(!selectedNode)return!1;if(selectedNode.name===currentNode.name||_underscore.default.any((currentNode._source||[]).concat(currentNode._target||[]),(function(s){return s.name===selectedNode.name}))){if("input"===currentNode.nodeType||"output"===currentNode.nodeType)return Node.isInputOfSameStep(currentNode,selectedNode);if("input-group"===currentNode.nodeType)return Node.isInputOfSameStep(currentNode,selectedNode)&&Node.isFromSameWorkflowType(currentNode,selectedNode)}return!1}},{key:"isFromSameWorkflowType",value:function(currentNode,selectedNode){return"string"==typeof currentNode.meta.workflow&&"string"==typeof selectedNode.meta.workflow&&selectedNode.meta.workflow===currentNode.meta.workflow||(!("string"!=typeof selectedNode.meta.workflow||!Array.isArray(currentNode._source)||!_underscore.default.any(currentNode._source,(function(s){return"string"==typeof s.workflow&&s.workflow===selectedNode.meta.workflow})))||!("string"!=typeof currentNode.meta.workflow||!Array.isArray(selectedNode._source)||!_underscore.default.any(selectedNode._source,(function(s){return"string"==typeof s.workflow&&s.workflow===currentNode.meta.workflow}))))}}]),Node}(_react.default.Component);exports.default=Node},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_PARSING_OPTIONS=void 0,exports.correctColumnAssignments=correctColumnAssignments,exports.filterOutIndirectFilesFromGraphData=filterOutIndirectFilesFromGraphData,exports.filterOutParametersFromGraphData=filterOutParametersFromGraphData,exports.filterOutReferenceFilesFromGraphData=filterOutReferenceFilesFromGraphData,exports.nodesInColumnPostSortFxn=nodesInColumnPostSortFxn,exports.nodesInColumnSortFxn=nodesInColumnSortFxn,exports.nodesPreSortFxn=nodesPreSortFxn,exports.parseAnalysisSteps=parseAnalysisSteps,exports.parseBasicIOAnalysisSteps=function(analysis_steps,workflowItem,parsingOptions){function checkIfGlobal(io){return io.meta&&io.meta.global||_underscore.default.any(io.source||io.target||[],(function(tg){return tg.name&&!tg.step}))||!1}return parseAnalysisSteps([_objectSpread(_objectSpread({},workflowItem),{},{inputs:_underscore.default.filter(_underscore.default.flatten(_underscore.default.pluck(analysis_steps,"inputs"),!0),checkIfGlobal),outputs:_underscore.default.filter(_underscore.default.flatten(_underscore.default.pluck(analysis_steps,"outputs"),!0),checkIfGlobal)})],parsingOptions)},exports.traceNodePathAndRun=traceNodePathAndRun;var _underscore=_interopRequireDefault(__webpack_require__(3));_interopRequireDefault(__webpack_require__(4));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DEFAULT_PARSING_OPTIONS={direction:"output",skipSortOnColumns:[1],dontCorrectColumns:!1,nodesPreSortFxn:nodesPreSortFxn,nodesInColumnSortFxn:nodesInColumnSortFxn,nodesInColumnPostSortFxn:nodesInColumnPostSortFxn,showReferenceFiles:!0,showParameters:!0,showIndirectFiles:!0};function parseAnalysisSteps(analysis_steps){var parsingOptions=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},parsingOpts=_objectSpread(_objectSpread({},DEFAULT_PARSING_OPTIONS),parsingOptions),nodes=[],edges=[],ioIdsUsed={},processedSteps={};function ioNodeID(stepIOArg){var readOnly=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return preventDuplicateNodeID(stepIOArg.id||stepIOArg.name,readOnly)}function ioNodeName(stepIOArg){var nameToUse=stepIOArg.name||null;if(stepIOArg.meta&&!0===stepIOArg.meta.global){var i,list=null;if(Array.isArray(stepIOArg.target)&&(list=stepIOArg.target),Array.isArray(stepIOArg.source)&&(list=list?list.concat(stepIOArg.source):stepIOArg.source),!list)return nameToUse;var listLength=list.length;for(i=0;i<listLength;i++)if(list[i]&&void 0===list[i].step&&"string"==typeof list[i].name){nameToUse=list[i].name;break}}return nameToUse}function preventDuplicateNodeID(id){var readOnly=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"!=typeof id)throw new Error("param id is not a string.");return id=id.replace(/(~\d+)/,""),readOnly?"number"==typeof ioIdsUsed[id]&&ioIdsUsed[id]>1?id+"~"+ioIdsUsed[id]:id:void 0===ioIdsUsed[id]?(ioIdsUsed[id]=1,id):id+"~"+ ++ioIdsUsed[id]}function compareTwoFilesByID(file1,file2){return!(!file1||!file2)&&("string"==typeof file1&&"string"==typeof file2&&file1===file2||("object"===_typeof(file1)&&"object"===_typeof(file2)&&(file1["@id"]||"a")===(file2["@id"]||"b")||("object"===_typeof(file1)&&"string"==typeof file2&&(file1["@id"]||"a")===file2||"string"==typeof file1&&"object"===_typeof(file2)&&file1===(file2["@id"]||"b"))))}function generateStepNode(step,column){return{nodeType:"step",name:step.name,_inputs:step.inputs,_outputs:step.outputs,meta:_underscore.default.extend({},step.meta||{},_underscore.default.omit(step,"inputs","outputs","meta")),column:column}}function generateIONode(stepIOArgument,column,stepNode,nodeType){var readOnly=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if("input"!==nodeType&&"output"!==nodeType)throw new Error("Incorrect type, must be one of input or output.");var namesOnSteps={};namesOnSteps[stepNode.name]=stepIOArgument.name;var ioType=stepIOArgument.meta&&"string"==typeof stepIOArgument.meta.type&&stepIOArgument.meta.type.toLowerCase(),ioNode={column:column,ioType:ioType,id:ioNodeID(stepIOArgument,readOnly),name:ioNodeName(stepIOArgument),argNamesOnSteps:namesOnSteps,nodeType:nodeType,_source:stepIOArgument.source,_target:stepIOArgument.target,meta:_underscore.default.extend({},stepIOArgument.meta||{},_underscore.default.omit(stepIOArgument,"name","meta","source","target"))};return"input"===nodeType?ioNode.inputOf=[stepNode]:"output"===nodeType&&(ioNode.outputOf=stepNode),ioNode}function expandIONodes(stepIOArgument,column,stepNode,nodeType,readOnly){var valuesForArgument,isParameterArgument,stepIORunData=stepIOArgument.run_data,_ref=stepIORunData||{},runDataFile=_ref.file,runDataValue=_ref.value,runDataMeta=_ref.meta;if(!runDataFile&&!runDataValue||runDataFile&&(!Array.isArray(runDataFile)||0===runDataFile.length)||runDataValue&&(!Array.isArray(runDataValue)||0===runDataValue.length))return[generateIONode(stepIOArgument,column,stepNode,nodeType,readOnly)];function expandRunDataArraysToIndividualNodes(value_list){var propertyToExpand=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file";return value_list.map((function(val,idx){Array.isArray(val)&&(idx=val[0],val=val[1]);var generatedNodeName=ioNodeName(stepIOArgument);val||console.error("No value(s) on",value_list,stepNode);var id=generatedNodeName+".",run_data=_objectSpread(_objectSpread({},stepIORunData),{},{meta:runDataMeta&&runDataMeta[idx]||null});return"file"===propertyToExpand?(id+=val&&val.accession||val&&val.uuid||idx,run_data.file=val):"value"===propertyToExpand&&(id+=idx,run_data.value=val),generateIONode(_objectSpread(_objectSpread({},stepIOArgument),{},{id:id,run_data:run_data,name:generatedNodeName}),column,stepNode,nodeType,readOnly)}))}stepIOArgument.run_data&&Array.isArray(stepIOArgument.run_data.value)&&!stepIOArgument.run_data.file?(isParameterArgument=!0,valuesForArgument=stepIOArgument.run_data.value):(isParameterArgument=!1,valuesForArgument=stepIOArgument.run_data.file);var groupSources=_underscore.default.filter(stepIOArgument.source||[],(function(s){return"string"==typeof s.grouped_by&&void 0!==s[s.grouped_by]&&"string"==typeof s.for_file}));if(groupSources.length>0){var groups=_underscore.default.reduce(groupSources,(function(filesByGroup,groupSource){return void 0===filesByGroup[groupSource.grouped_by]&&(filesByGroup[groupSource.grouped_by]={}),void 0===filesByGroup[groupSource.grouped_by][groupSource[groupSource.grouped_by]]&&(filesByGroup[groupSource.grouped_by][groupSource[groupSource.grouped_by]]=new Set),filesByGroup[groupSource.grouped_by][groupSource[groupSource.grouped_by]].add(groupSource.for_file),filesByGroup}),{}),groupKeys=_underscore.default.keys(groups),filesNotInGroups=[],filesByGroup=_underscore.default.reduce(stepIOArgument.run_data.file,(function(m,file,idx){var incl=!1;return _underscore.default.forEach(groupKeys,(function(groupingTypeKey){_underscore.default.forEach(_underscore.default.keys(groups[groupingTypeKey]),(function(group){groups[groupingTypeKey][group].has(file["@id"]||file)&&(void 0===m[groupingTypeKey]&&(m[groupingTypeKey]={}),void 0===m[groupingTypeKey][group]&&(m[groupingTypeKey][group]=new Set),m[groupingTypeKey][group].add(file),incl=!0)}))})),incl||filesNotInGroups.push([idx,file]),m}),{}),groupNodes=_underscore.default.reduce(_underscore.default.pairs(filesByGroup.workflow),(function(m,wfPair){var namesOnSteps={};namesOnSteps[stepNode.name]=stepIOArgument.name;var groupNode={column:column,ioType:stepIOArgument.meta&&stepIOArgument.meta.type||"group",id:ioNodeName(stepIOArgument)+".group:workflow."+wfPair[0],name:ioNodeName(stepIOArgument),argNamesOnSteps:namesOnSteps,nodeType:nodeType+"-group",_source:stepIOArgument.source,_target:stepIOArgument.target,meta:_underscore.default.extend({},stepIOArgument.meta||{},_underscore.default.omit(stepIOArgument,"name","meta","source","target")),inputOf:[stepNode]};return groupNode.meta.workflow=wfPair[0],m.push(groupNode),m}),[]);return expandRunDataArraysToIndividualNodes(filesNotInGroups).concat(groupNodes)}return expandRunDataArraysToIndividualNodes(valuesForArgument,isParameterArgument?"value":"file")}function generateIONodesFromStep(step,column,stepNode){var stepIOTargetType,oppIOTargetType,ioNodeType=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input";"input"===ioNodeType?(stepIOTargetType="source",oppIOTargetType="target"):(stepIOTargetType="target",oppIOTargetType="source");var ioNodesMatched=[],ioNodesCreated=[];function areInputRunDataPresentAndEqual(node,stepIO){return!(stepIO[stepIOTargetType].length>1||void 0!==stepIO[stepIOTargetType][0].step)&&areAnyRunDataPresentAndEqual(node,stepIO)}function areAnyRunDataPresentAndEqual(node,stepIO){var _node$meta=node.meta,nodeRunData=(_node$meta=void 0===_node$meta?{}:_node$meta).run_data,ioRunData=stepIO.run_data;if(!nodeRunData)return!1;var stepIOFiles=ioRunData&&Array.isArray(ioRunData.file)&&ioRunData.file||[];return!!(nodeRunData.file&&_underscore.default.any(stepIOFiles,compareTwoFilesByID.bind(null,nodeRunData.file))||void 0!==nodeRunData.value&&ioRunData&&void 0!==ioRunData.value&&nodeRunData.value===ioRunData.value)}return step[ioNodeType+"s"].forEach((function(stepIO){if(Array.isArray(stepIO[stepIOTargetType])){var isGlobalInputArg=1===stepIO[stepIOTargetType].length&&void 0===stepIO[stepIOTargetType][0].step&&!(stepIO.meta&&"array"===stepIO.meta.cardinality),ioNodeIDsMatched={},existingIONodesMatched=nodes.filter((function(n){if("step"===n.nodeType)return!1;if("input"===ioNodeType&&isGlobalInputArg){if(Array.isArray(n["_"+stepIOTargetType])&&1===n["_"+stepIOTargetType].length&&void 0===n["_"+stepIOTargetType][0].step&&(n["_"+stepIOTargetType][0].name===stepIO[stepIOTargetType][0].name||areInputRunDataPresentAndEqual(n,stepIO))&&(!n.meta||!n.meta.run_data||!stepIO.run_data||areInputRunDataPresentAndEqual(n,stepIO)))return ioNodeIDsMatched[n.id]=ioNodeIDsMatched[n.id]||new Set,ioNodeIDsMatched[n.id].add(ioNodeName(stepIO)),!0}else if(!isGlobalInputArg&&_underscore.default.any(stepIO[stepIOTargetType],(function(s){if(s.step&&n.argNamesOnSteps[s.step]===s.name&&Array.isArray(n["_"+oppIOTargetType])&&_underscore.default.any(n["_"+oppIOTargetType],(function(t){return t.step===step.name}))&&(!n.meta||!n.meta.run_data||!stepIO.run_data||areAnyRunDataPresentAndEqual(n,stepIO)))return!0;if(Array.isArray(n["_"+oppIOTargetType])&&_underscore.default.any(n["_"+oppIOTargetType],(function(t){return!(!t.step||t.step!==step.name||stepIO.name!==t.name||n.meta&&n.meta.run_data&&stepIO.run_data&&!areAnyRunDataPresentAndEqual(n,stepIO))})))return!0;if("input"===ioNodeType&&"string"==typeof s.grouped_by&&"string"==typeof s[s.grouped_by]&&n.meta&&Array.isArray(n["_"+stepIOTargetType])&&_underscore.default.any(n["_"+stepIOTargetType],(function(nodeSource){return"string"==typeof nodeSource.grouped_by&&"string"==typeof nodeSource[nodeSource.grouped_by]&&nodeSource[nodeSource.grouped_by]===s[s.grouped_by]}))){var nodeBeingCheckedGroupFiles=_underscore.default.pluck(_underscore.default.filter(n["_"+stepIOTargetType],(function(nS){return"string"==typeof nS.for_file})),"for_file");return!(!s.for_file||!_underscore.default.contains(nodeBeingCheckedGroupFiles,s.for_file))}return!1})))return ioNodeIDsMatched[n.id]=ioNodeIDsMatched[n.id]||new Set,ioNodeIDsMatched[n.id].add(ioNodeName(stepIO)),!0;return!1})),ioNodesToCreate=expandIONodes(stepIO,column,stepNode,ioNodeType,!0);if(existingIONodesMatched.length>0&&(ioNodesMatched=ioNodesMatched.concat(existingIONodesMatched),existingIONodesMatched.forEach((function(n){for(var inNode=null,inNodesFound=[],ioNodesToCreateLen=ioNodesToCreate.length,i=0;i<ioNodesToCreateLen;i++){var nodeToCreate=ioNodesToCreate[i];ioNodeIDsMatched[n.id].has(nodeToCreate.name)&&inNodesFound.push([i,nodeToCreate])}if(1===inNodesFound.length)inNode=inNodesFound[0];else{var _n$meta=n.meta,_n$meta$run_data=(_n$meta=void 0===_n$meta?{}:_n$meta).run_data,fileFromNode=(_n$meta$run_data=void 0===_n$meta$run_data?{}:_n$meta$run_data).file;fileFromNode&&(inNode=inNodesFound.find((function(_ref2){var _ref3=_slicedToArray(_ref2,2),_nodeToCreate$meta=(_ref3[0],_ref3[1].meta),_nodeToCreate$meta$ru=(_nodeToCreate$meta=void 0===_nodeToCreate$meta?{}:_nodeToCreate$meta).run_data,fileToCheck=(_nodeToCreate$meta$ru=void 0===_nodeToCreate$meta$ru?{}:_nodeToCreate$meta$ru).file;if(fileToCheck&&fileFromNode){if(!Array.isArray(fileFromNode)&&!Array.isArray(fileToCheck))return compareTwoFilesByID(fileFromNode,fileToCheck);if(Array.isArray(fileFromNode)&&!Array.isArray(fileToCheck))return _underscore.default.any(fileFromNode,(function(oF){return compareTwoFilesByID(oF,fileToCheck)}));if(!Array.isArray(fileFromNode)&&Array.isArray(fileToCheck))return _underscore.default.any(fileToCheck,(function(fTC){return compareTwoFilesByID(fileFromNode,fTC)}));if(Array.isArray(fileFromNode)&&Array.isArray(fileToCheck))return _underscore.default.any(fileToCheck,(function(fTC){return _underscore.default.any(fileFromNode,(function(oF){return compareTwoFilesByID(oF,fTC)}))}))}return!1})))}if(!inNode)return console.error(n.id+" new node version not found"),void console.warn("Didn't find newly-created temporary node to extend from which was previously matched against node",n,stepIO,stepNode);ioNodesToCreate.splice(inNode[0],1),inNode=inNode[1];var combinedMeta=_objectSpread(_objectSpread(_objectSpread({},n.meta),inNode.meta),{},{global:n.meta.global||inNode.meta.global||!1,type:n.meta&&n.meta.type||inNode.meta&&inNode.meta.type,file_format:n.meta&&n.meta.file_format||inNode.meta&&inNode.meta.file_format});if(n.meta.run_data&&Array.isArray(n.meta.run_data.file)){var runDataToUse=n.meta.run_data,runDataToUseFileIDs=_underscore.default.pluck(runDataToUse.file,"@id");Array.isArray(inNode.meta.run_data.file)?_underscore.default.forEach(inNode.meta.run_data.file,(function(f,idx){-1===runDataToUseFileIDs.indexOf(f["@id"])&&(runDataToUse.file.push(f),runDataToUse.meta.push(inNode.meta.run_data.meta[idx]))})):-1===runDataToUseFileIDs.indexOf(inNode.meta.run_data.file["@id"])&&(runDataToUse.file.push(inNode.meta.run_data.file),runDataToUse.meta.push(inNode.meta.run_data.meta)),combinedMeta.run_data=runDataToUse}_underscore.default.extend(n,{meta:combinedMeta,name:"output"===ioNodeType?inNode.name||n.name:n.name||inNode.name,argNamesOnSteps:_underscore.default.extend(n.argNamesOnSteps,inNode.argNamesOnSteps),_source:n._source||inNode._source,_target:n._target||inNode._target,ioType:n.ioType||inNode.ioType,inputOf:_underscore.default.sortBy((n.inputOf||[]).concat(inNode.inputOf||[]),"id"),nodeType:"output"===n.nodeType||"output"===inNode.nodeType?"output":n.nodeType||inNode.nodeType}),"input"===ioNodeType?n.wasMatchedAsInputOf=(n.wasMatchedAsInputOf||[]).concat(stepNode.name):(n.wasMatchedAsOutputOf=stepNode.name,n.outputOf=stepNode)}))),ioNodesToCreate.length){var unmatchedIONodesToCreate=ioNodesToCreate.map((function(n){return n.id=preventDuplicateNodeID(n.id,!1),"input"===ioNodeType?n.generatedAsInputOf=(n.generatedAsInputOf||[]).concat(stepNode.name):n.generatedAsOutputOf=(n.generatedAsOutputOf||[]).concat(stepNode.name),n}));nodes=nodes.concat(unmatchedIONodesToCreate),ioNodesCreated=ioNodesCreated.concat(unmatchedIONodesToCreate)}stepNode[ioNodeType+"Nodes"]=_underscore.default.sortBy(ioNodesCreated.concat(ioNodesMatched),"id"),stepNode[ioNodeType+"Nodes"].length>0&&_underscore.default.forEach(stepNode[ioNodeType+"Nodes"],(function(n){if(!_underscore.default.find(edges,(function(e){if(e[stepIOTargetType]===n&&e[oppIOTargetType]===stepNode)return!0}))){var newEdge={};newEdge[stepIOTargetType]=n,newEdge[oppIOTargetType]=stepNode,newEdge.capacity=ioNodeType,edges.push(newEdge)}}))}})),{created:ioNodesCreated,matched:ioNodesMatched}}function findNextStepsFromIONode(ioNodes){var targetPropertyName="output"===parsingOpts.direction?"_target":"_source",nextSteps=new Set;return ioNodes.forEach((function(n){Array.isArray(n[targetPropertyName])&&n[targetPropertyName].forEach((function(t){if("string"==typeof t.step){var matchedStep=_underscore.default.findWhere(analysis_steps,{name:t.step});matchedStep&&nextSteps.add(matchedStep)}}))})),_toConsumableArray(nextSteps)}function processStepInPath(step){var level=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,stepNode=generateStepNode(step,2*(level+1)-1);if("output"===parsingOpts.direction){generateIONodesFromStep(step,2*(level+1)-2,stepNode,"input");var outputNodes=generateIONodesFromStep(step,2*(level+1),stepNode,"output");return nodes.push(stepNode),processedSteps[stepNode.name]=stepNode,findNextStepsFromIONode(outputNodes.created).forEach((function(nextStep){void 0===processedSteps[nextStep.name]?processStepInPath(nextStep,level+1):generateIONodesFromStep(nextStep,2*(level+2)-2,processedSteps[nextStep.name],"input")})),stepNode}throw new Error("Input-direction drawing not currently supported.")}!function(){if(Array.isArray(analysis_steps)&&analysis_steps.length>0){processStepInPath(analysis_steps[0]);for(var i=0;i<1e3&&Object.keys(processedSteps).length<analysis_steps.length;i++){var nextSteps=analysis_steps.filter((function(s){return void 0===processedSteps[s.name]}));nextSteps.length>0&&processStepInPath(nextSteps[0])}}}();var graphData={nodes:nodes,edges:edges};parsingOpts.showParameters||(graphData=filterOutParametersFromGraphData(graphData)),parsingOpts.showReferenceFiles||(graphData=filterOutReferenceFilesFromGraphData(graphData)),parsingOpts.showIndirectFiles||(graphData=filterOutIndirectFilesFromGraphData(graphData));var sortedNodes=_underscore.default.sortBy(graphData.nodes,"column");"function"==typeof parsingOpts.nodesPreSortFxn&&(sortedNodes=parsingOpts.nodesPreSortFxn(sortedNodes));var nodesByColumnPairs=_underscore.default.pairs(_underscore.default.groupBy(correctColumnAssignments(sortedNodes),"column"));return nodesByColumnPairs=nodesByColumnPairs.map((function(columnGroupPair){return columnGroupPair[1].forEach((function(n,i){n.origIndexInColumn=i})),[parseInt(columnGroupPair[0]),columnGroupPair[1]]})),"function"==typeof parsingOpts.nodesInColumnSortFxn&&(nodesByColumnPairs=nodesByColumnPairs.map((function(_ref4){var nodesInColumn,_ref5=_slicedToArray(_ref4,2),columnGroupIdx=_ref5[0],columnGroupNodes=_ref5[1];return(nodesInColumn=Array.isArray(parsingOpts.skipSortOnColumns)&&parsingOpts.skipSortOnColumns.indexOf(columnGroupIdx)>-1?columnGroupNodes.slice(0):columnGroupNodes.sort(parsingOpts.nodesInColumnSortFxn)).forEach((function(n,i){n.indexInColumn=i})),"function"==typeof parsingOpts.nodesInColumnPostSortFxn&&(nodesInColumn=parsingOpts.nodesInColumnPostSortFxn(nodesInColumn,columnGroupIdx)).forEach((function(n,i){n.indexInColumn=i})),[columnGroupIdx,nodesInColumn]}))),{nodes:sortedNodes=nodesByColumnPairs.reduce((function(m,_ref6){var _ref7=_slicedToArray(_ref6,2),nodesInColumn=(_ref7[0],_ref7[1]);return m.concat(nodesInColumn)}),[]),edges:graphData.edges}}function traceNodePathAndRun(nextNode,fxn){var direction=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"output",lastNode=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,depth=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if("function"!=typeof fxn)return null;var nextNodes="output"===direction?Array.isArray(nextNode.outputNodes)?nextNode.outputNodes:Array.isArray(nextNode.inputOf)?nextNode.inputOf:[]:"input"===direction?Array.isArray(nextNode.inputNodes)?nextNode.inputNodes:nextNode.outputOf?[nextNode.outputOf]:[]:[],fxnResult=fxn(nextNode,lastNode,nextNodes);if(depth>1e3)return console.error("Reached max depth (1000) at node ",nextNode),[fxnResult,null];var nextResults=_underscore.default.map(nextNodes,(function(n){return traceNodePathAndRun(n,fxn,direction,nextNode,depth+1)}));return[fxnResult,nextResults]}function correctColumnAssignments(graphData){var nodes;if(Array.isArray(graphData))nodes=graphData;else{if(!Array.isArray(graphData.nodes))throw new Error("No nodes provided.");nodes=graphData.nodes}var colCorrectFxn=function(node,lastNode){if("number"==typeof node.column&&"number"==typeof lastNode.column){if(node.column-lastNode.column<1){var colDifferenceToAdd=Math.abs(lastNode.column-node.column)+1;node.column+=colDifferenceToAdd}}else console.error("No column number on one of theses nodes",node,lastNode)};return _underscore.default.forEach(nodes,(function(node){if("number"==typeof node.column){if(Array.isArray(node.outputNodes)&&node.outputNodes.length>0){var laggingOutputNodes=_underscore.default.filter(node.outputNodes,(function(oN){return"number"==typeof oN.column&&oN.column<=node.column}));_underscore.default.forEach(laggingOutputNodes,(function(loN){traceNodePathAndRun(loN,colCorrectFxn,"output",node)}))}if(Array.isArray(node.inputOf)&&node.inputOf.length>0){var laggingStepNodes=_underscore.default.filter(node.inputOf,(function(sN){return"number"==typeof sN.column&&sN.column<=node.column}));_underscore.default.forEach(laggingStepNodes,(function(lsN){traceNodePathAndRun(lsN,colCorrectFxn,"output",node)}))}}else console.error("No column number on node",node)})),graphData}function cleanEdgesByDeletedNodes(edges,deletedNodesObj){return _underscore.default.filter(edges,(function(e){return!(!0===deletedNodesObj[e.source.id]||!0===deletedNodesObj[e.target.id])}))}function cleanNodeReferencesByDeletedNodes(nodes,deletedNodesObj){return _underscore.default.forEach(nodes,(function(n){Array.isArray(n.inputNodes)&&n.inputNodes.length>0&&(n.inputNodes=_underscore.default.filter(n.inputNodes,(function(iN){return!0!==deletedNodesObj[iN.id]}))),Array.isArray(n.outputNodes)&&n.outputNodes.length>0&&(n.outputNodes=_underscore.default.filter(n.outputNodes,(function(oN){return!0!==deletedNodesObj[oN.id]})))})),nodes}function filterOutParametersFromGraphData(graphData){var deleted={};return{nodes:cleanNodeReferencesByDeletedNodes(_underscore.default.filter(graphData.nodes,(function(n){return"input"!==n.nodeType||!n.ioType||"parameter"!==n.ioType||(deleted[n.id]=!0,!1)})),deleted),edges:cleanEdgesByDeletedNodes(graphData.edges,deleted)}}function filterOutReferenceFilesFromGraphData(graphData){var deleted={};return{nodes:cleanNodeReferencesByDeletedNodes(_underscore.default.filter(graphData.nodes,(function(n){return"reference file"!==n.ioType||(deleted[n.id]=!0,!1)})),deleted),edges:cleanEdgesByDeletedNodes(graphData.edges,deleted)}}function filterOutIndirectFilesFromGraphData(graphData){var deleted={};return{nodes:cleanNodeReferencesByDeletedNodes(_underscore.default.filter(graphData.nodes,(function(n){return"input"!==n.nodeType&&"output"!==n.nodeType||(!(!n||!n.meta||!0!==n.meta.in_path)||(deleted[n.id]=!0,!1))})),deleted),edges:cleanEdgesByDeletedNodes(graphData.edges,deleted)}}function nodesPreSortFxn(nodes){return _underscore.default.forEach(nodes,(function(node){"input"===node.nodeType&&node.meta&&node.meta.global&&!node.outputOf&&0!==node.column&&(node.column=0)})),nodes}function nodesInColumnSortFxn(node1,node2){function isNodeFileReference(n){return"string"==typeof n.ioType&&"reference file"===n.ioType}function isNodeParameter(n){return"string"==typeof n.ioType&&"parameter"===n.ioType}function getNodeFromListForComparison(nodeList){var averaged=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],highestColumn=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],ownColumnFilter=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!Array.isArray(nodeList)||0===nodeList.length)return null;if(1===nodeList.length)return nodeList[0];if(averaged){if("number"==typeof ownColumnFilter&&ownColumnFilter>1){var nodeListFiltered=_underscore.default.filter(nodeList,(function(n){return n.column===ownColumnFilter}));nodeListFiltered.length>0&&(nodeList=nodeListFiltered)}return _underscore.default.extend({},nodeList[0],{indexInColumn:_underscore.default.reduce(nodeList,(function(m,n){return m+("number"==typeof n.indexInColumn?n.indexInColumn:n.origIndexInColumn)}),0)/nodeList.length})}var sortedList=_underscore.default.sortBy(nodeList.slice(0),(function(n){return"number"==typeof n.indexInColumn?n.indexInColumn:n.origIndexInColumn}));return sortedList=_underscore.default.sortBy(sortedList,(function(n){return highestColumn?-n.column:n.column})),_underscore.default.find(sortedList,(function(n){return"number"==typeof n.indexInColumn||"number"==typeof n.origIndexInColumn}))||sortedList[0]||null}function compareNodesBySameColumnIndex(n1,n2){if(n1&&!n2)return-1;if(!n1&&n2)return 1;if(n1&&n2&&n1.column===n2.column){var n1idx="number"==typeof n1.indexInColumn?n1.indexInColumn:n1.origIndexInColumn,n2idx="number"==typeof n2.indexInColumn?n2.indexInColumn:n2.origIndexInColumn;if(n1idx<n2idx)return-1;if(n1idx>n2idx)return 1}return 0}function compareNodeInputOf(n1,n2){var n1ClosestColumnDiff=(("step"===n1.nodeType?n1.outputNodes:n1.inputOf)||[]).reduce((function(m,inputOfNode){return Math.min(m,inputOfNode.column-n1.column)}),1/0),n2ClosestColumnDiff=(("step"===n2.nodeType?n2.outputNodes:n2.inputOf)||[]).reduce((function(m,inputOfNode){return Math.min(m,inputOfNode.column-n2.column)}),1/0);if(n1ClosestColumnDiff!==n2ClosestColumnDiff)return n1ClosestColumnDiff-n2ClosestColumnDiff;var n1FurthestColumnDiff=(("step"===n1.nodeType?n1.outputNodes:n1.inputOf)||[]).reduce((function(m,inputOfNode){return Math.max(m,inputOfNode.column-n1.column)}),0),n2FurthestColumnDiff=(("step"===n2.nodeType?n2.outputNodes:n2.inputOf)||[]).reduce((function(m,inputOfNode){return Math.max(m,inputOfNode.column-n2.column)}),0);if(n1FurthestColumnDiff!==n2FurthestColumnDiff)return n1FurthestColumnDiff-n2FurthestColumnDiff;var ioResult=compareNodesBySameColumnIndex(getNodeFromListForComparison("step"===n1.nodeType?n1.outputNodes:n1.inputOf,!0,!1),getNodeFromListForComparison("step"===n2.nodeType?n2.outputNodes:n2.inputOf,!0,!1));return 0!==ioResult?ioResult:n1.name===n2.name?0:n1.name<n2.name?-1:1}var ioResult;if("step"===node1.nodeType&&"step"===node2.nodeType){if(node1.inputNodes&&!node2.inputNodes)return-1;if(!node1.inputNodes&&node2.inputNodes)return 1;if(node1.inputNodes&&node2.inputNodes){if(0!==(ioResult=compareNodesBySameColumnIndex(getNodeFromListForComparison(node1.inputNodes,!0,!0,node1.column-1),getNodeFromListForComparison(node2.inputNodes,!0,!0,node1.column-1))))return ioResult;if(0!==(ioResult=compareNodesBySameColumnIndex(getNodeFromListForComparison(node1.inputNodes,!1),getNodeFromListForComparison(node2.inputNodes,!1))))return ioResult}return 0}if("output"===node1.nodeType&&"input"===node2.nodeType)return-1;if("input"===node1.nodeType&&"output"===node2.nodeType)return 1;if("input-group"===node1.nodeType&&"input-group"!==node2.nodeType)return 1;if("input-group"!==node1.nodeType&&"input-group"===node2.nodeType)return-1;if(node1.nodeType===node2.nodeType){if("output"===node1.nodeType)return ioResult=function(n1,n2){var n1OutputOf="step"===n1.nodeType?n1.inputNodes&&getNodeFromListForComparison(n1.inputNodes):n1.outputOf,n2OutputOf="step"===n2.nodeType?n2.inputNodes&&getNodeFromListForComparison(n2.inputNodes):n2.outputOf;if(n1OutputOf&&"number"==typeof n1OutputOf.indexInColumn&&n2OutputOf&&"number"==typeof n2OutputOf.indexInColumn&&n1OutputOf.column===n2OutputOf.column){if(n1OutputOf.indexInColumn<n2OutputOf.indexInColumn)return-1;if(n1OutputOf.indexInColumn>n2OutputOf.indexInColumn)return 1}return n1OutputOf&&n1OutputOf.name&&n2OutputOf&&n2OutputOf.name?n1OutputOf.name===n2OutputOf.name?void 0!==n1.inputOf&&void 0===n2.inputOf?-3:void 0===n1.inputOf&&void 0!==n2.inputOf?3:n1.name<n2.name?-1:n1.name>n2.name?1:0:n1OutputOf.name<n2OutputOf.name?-3:3:0}(node1,node2);if("input"===node1.nodeType){if(isNodeParameter(node1)&&isNodeParameter(node2))return compareNodeInputOf(node1,node2);if(isNodeParameter(node1))return 5;if(isNodeParameter(node2))return-5;if(isNodeFileReference(node1)){if(!isNodeFileReference(node2))return 7}else if(isNodeFileReference(node2))return-7;return ioResult=compareNodeInputOf(node1,node2)}}return 0}function nodesInColumnPostSortFxn(nodesInColumn){var groupNodes=_underscore.default.filter(nodesInColumn,{nodeType:"input-group"});return groupNodes.length>0&&_underscore.default.forEach(groupNodes,(function(gN){var relatedFileSource=_underscore.default.find(gN._source,(function(s){return void 0===s.grouped_by&&"string"==typeof s.name&&s.for_file})),relatedFileNode=relatedFileSource&&_underscore.default.find(nodesInColumn,(function(n){return!!(n&&n.meta&&n.meta.run_data&&n.meta.run_data.file&&(n.meta.run_data.file["@id"]||n.meta.run_data.file)===(relatedFileSource.for_file||"x"))}));if(relatedFileNode){var oldIdx=nodesInColumn.indexOf(gN);nodesInColumn.splice(oldIdx,1);var afterThisIdx=nodesInColumn.indexOf(relatedFileNode);nodesInColumn.splice(afterThisIdx+1,0,gN)}})),nodesInColumn}exports.DEFAULT_PARSING_OPTIONS=DEFAULT_PARSING_OPTIONS},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"version",(function(){return version})),__webpack_require__.d(__webpack_exports__,"bisect",(function(){return bisect})),__webpack_require__.d(__webpack_exports__,"bisectRight",(function(){return bisectRight})),__webpack_require__.d(__webpack_exports__,"bisectLeft",(function(){return bisectLeft})),__webpack_require__.d(__webpack_exports__,"bisectCenter",(function(){return bisectCenter})),__webpack_require__.d(__webpack_exports__,"ascending",(function(){return ascending})),__webpack_require__.d(__webpack_exports__,"bisector",(function(){return bisector})),__webpack_require__.d(__webpack_exports__,"count",(function(){return count_count})),__webpack_require__.d(__webpack_exports__,"cross",(function(){return cross})),__webpack_require__.d(__webpack_exports__,"cumsum",(function(){return cumsum})),__webpack_require__.d(__webpack_exports__,"descending",(function(){return descending})),__webpack_require__.d(__webpack_exports__,"deviation",(function(){return deviation})),__webpack_require__.d(__webpack_exports__,"extent",(function(){return src_extent})),__webpack_require__.d(__webpack_exports__,"Adder",(function(){return Adder})),__webpack_require__.d(__webpack_exports__,"fsum",(function(){return fsum})),__webpack_require__.d(__webpack_exports__,"fcumsum",(function(){return fcumsum})),__webpack_require__.d(__webpack_exports__,"group",(function(){return group_group})),__webpack_require__.d(__webpack_exports__,"groups",(function(){return group_groups})),__webpack_require__.d(__webpack_exports__,"index",(function(){return group_index})),__webpack_require__.d(__webpack_exports__,"indexes",(function(){return group_indexes})),__webpack_require__.d(__webpack_exports__,"rollup",(function(){return rollup})),__webpack_require__.d(__webpack_exports__,"rollups",(function(){return rollups})),__webpack_require__.d(__webpack_exports__,"groupSort",(function(){return groupSort})),__webpack_require__.d(__webpack_exports__,"bin",(function(){return src_bin})),__webpack_require__.d(__webpack_exports__,"histogram",(function(){return src_bin})),__webpack_require__.d(__webpack_exports__,"thresholdFreedmanDiaconis",(function(){return freedmanDiaconis})),__webpack_require__.d(__webpack_exports__,"thresholdScott",(function(){return scott})),__webpack_require__.d(__webpack_exports__,"thresholdSturges",(function(){return sturges})),__webpack_require__.d(__webpack_exports__,"max",(function(){return max_max})),__webpack_require__.d(__webpack_exports__,"maxIndex",(function(){return maxIndex})),__webpack_require__.d(__webpack_exports__,"mean",(function(){return mean})),__webpack_require__.d(__webpack_exports__,"median",(function(){return median})),__webpack_require__.d(__webpack_exports__,"merge",(function(){return merge_merge})),__webpack_require__.d(__webpack_exports__,"min",(function(){return min_min})),__webpack_require__.d(__webpack_exports__,"minIndex",(function(){return minIndex})),__webpack_require__.d(__webpack_exports__,"nice",(function(){return nice})),__webpack_require__.d(__webpack_exports__,"pairs",(function(){return pairs})),__webpack_require__.d(__webpack_exports__,"permute",(function(){return permute})),__webpack_require__.d(__webpack_exports__,"quantile",(function(){return quantile})),__webpack_require__.d(__webpack_exports__,"quantileSorted",(function(){return quantileSorted})),__webpack_require__.d(__webpack_exports__,"quickselect",(function(){return quickselect})),__webpack_require__.d(__webpack_exports__,"range",(function(){return src_range})),__webpack_require__.d(__webpack_exports__,"least",(function(){return least})),__webpack_require__.d(__webpack_exports__,"leastIndex",(function(){return leastIndex})),__webpack_require__.d(__webpack_exports__,"greatest",(function(){return greatest})),__webpack_require__.d(__webpack_exports__,"greatestIndex",(function(){return greatestIndex})),__webpack_require__.d(__webpack_exports__,"scan",(function(){return scan})),__webpack_require__.d(__webpack_exports__,"shuffle",(function(){return shuffle})),__webpack_require__.d(__webpack_exports__,"shuffler",(function(){return shuffler})),__webpack_require__.d(__webpack_exports__,"sum",(function(){return sum_sum})),__webpack_require__.d(__webpack_exports__,"ticks",(function(){return src_ticks})),__webpack_require__.d(__webpack_exports__,"tickIncrement",(function(){return tickIncrement})),__webpack_require__.d(__webpack_exports__,"tickStep",(function(){return tickStep})),__webpack_require__.d(__webpack_exports__,"transpose",(function(){return src_transpose})),__webpack_require__.d(__webpack_exports__,"variance",(function(){return variance})),__webpack_require__.d(__webpack_exports__,"zip",(function(){return zip})),__webpack_require__.d(__webpack_exports__,"every",(function(){return every})),__webpack_require__.d(__webpack_exports__,"some",(function(){return some})),__webpack_require__.d(__webpack_exports__,"filter",(function(){return filter_filter})),__webpack_require__.d(__webpack_exports__,"map",(function(){return map_map})),__webpack_require__.d(__webpack_exports__,"reduce",(function(){return reduce_reduce})),__webpack_require__.d(__webpack_exports__,"reverse",(function(){return reverse_reverse})),__webpack_require__.d(__webpack_exports__,"sort",(function(){return sort_sort})),__webpack_require__.d(__webpack_exports__,"difference",(function(){return difference})),__webpack_require__.d(__webpack_exports__,"disjoint",(function(){return disjoint})),__webpack_require__.d(__webpack_exports__,"intersection",(function(){return intersection_intersection})),__webpack_require__.d(__webpack_exports__,"subset",(function(){return subset})),__webpack_require__.d(__webpack_exports__,"superset",(function(){return superset})),__webpack_require__.d(__webpack_exports__,"union",(function(){return union})),__webpack_require__.d(__webpack_exports__,"InternMap",(function(){return InternMap})),__webpack_require__.d(__webpack_exports__,"InternSet",(function(){return InternSet})),__webpack_require__.d(__webpack_exports__,"axisTop",(function(){return axisTop})),__webpack_require__.d(__webpack_exports__,"axisRight",(function(){return axisRight})),__webpack_require__.d(__webpack_exports__,"axisBottom",(function(){return axisBottom})),__webpack_require__.d(__webpack_exports__,"axisLeft",(function(){return axisLeft})),__webpack_require__.d(__webpack_exports__,"brush",(function(){return src_brush})),__webpack_require__.d(__webpack_exports__,"brushX",(function(){return brushX})),__webpack_require__.d(__webpack_exports__,"brushY",(function(){return brushY})),__webpack_require__.d(__webpack_exports__,"brushSelection",(function(){return brushSelection})),__webpack_require__.d(__webpack_exports__,"chord",(function(){return src_chord})),__webpack_require__.d(__webpack_exports__,"chordTranspose",(function(){return chordTranspose})),__webpack_require__.d(__webpack_exports__,"chordDirected",(function(){return chordDirected})),__webpack_require__.d(__webpack_exports__,"ribbon",(function(){return src_ribbon})),__webpack_require__.d(__webpack_exports__,"ribbonArrow",(function(){return ribbonArrow})),__webpack_require__.d(__webpack_exports__,"color",(function(){return color_color})),__webpack_require__.d(__webpack_exports__,"rgb",(function(){return color_rgb})),__webpack_require__.d(__webpack_exports__,"hsl",(function(){return hsl})),__webpack_require__.d(__webpack_exports__,"lab",(function(){return lab})),__webpack_require__.d(__webpack_exports__,"hcl",(function(){return hcl})),__webpack_require__.d(__webpack_exports__,"lch",(function(){return lch})),__webpack_require__.d(__webpack_exports__,"gray",(function(){return gray})),__webpack_require__.d(__webpack_exports__,"cubehelix",(function(){return cubehelix_cubehelix})),__webpack_require__.d(__webpack_exports__,"contours",(function(){return src_contours})),__webpack_require__.d(__webpack_exports__,"contourDensity",(function(){return src_density})),__webpack_require__.d(__webpack_exports__,"Delaunay",(function(){return delaunay_Delaunay})),__webpack_require__.d(__webpack_exports__,"Voronoi",(function(){return voronoi_Voronoi})),__webpack_require__.d(__webpack_exports__,"dispatch",(function(){return src_dispatch})),__webpack_require__.d(__webpack_exports__,"drag",(function(){return src_drag})),__webpack_require__.d(__webpack_exports__,"dragDisable",(function(){return nodrag})),__webpack_require__.d(__webpack_exports__,"dragEnable",(function(){return yesdrag})),__webpack_require__.d(__webpack_exports__,"dsvFormat",(function(){return dsv})),__webpack_require__.d(__webpack_exports__,"csvParse",(function(){return csvParse})),__webpack_require__.d(__webpack_exports__,"csvParseRows",(function(){return csvParseRows})),__webpack_require__.d(__webpack_exports__,"csvFormat",(function(){return csvFormat})),__webpack_require__.d(__webpack_exports__,"csvFormatBody",(function(){return csvFormatBody})),__webpack_require__.d(__webpack_exports__,"csvFormatRows",(function(){return csvFormatRows})),__webpack_require__.d(__webpack_exports__,"csvFormatRow",(function(){return csvFormatRow})),__webpack_require__.d(__webpack_exports__,"csvFormatValue",(function(){return csvFormatValue})),__webpack_require__.d(__webpack_exports__,"tsvParse",(function(){return tsvParse})),__webpack_require__.d(__webpack_exports__,"tsvParseRows",(function(){return tsvParseRows})),__webpack_require__.d(__webpack_exports__,"tsvFormat",(function(){return tsvFormat})),__webpack_require__.d(__webpack_exports__,"tsvFormatBody",(function(){return tsvFormatBody})),__webpack_require__.d(__webpack_exports__,"tsvFormatRows",(function(){return tsvFormatRows})),__webpack_require__.d(__webpack_exports__,"tsvFormatRow",(function(){return tsvFormatRow})),__webpack_require__.d(__webpack_exports__,"tsvFormatValue",(function(){return tsvFormatValue})),__webpack_require__.d(__webpack_exports__,"autoType",(function(){return autoType})),__webpack_require__.d(__webpack_exports__,"easeLinear",(function(){return linear_linear})),__webpack_require__.d(__webpack_exports__,"easeQuad",(function(){return quadInOut})),__webpack_require__.d(__webpack_exports__,"easeQuadIn",(function(){return quadIn})),__webpack_require__.d(__webpack_exports__,"easeQuadOut",(function(){return quadOut})),__webpack_require__.d(__webpack_exports__,"easeQuadInOut",(function(){return quadInOut})),__webpack_require__.d(__webpack_exports__,"easeCubic",(function(){return cubicInOut})),__webpack_require__.d(__webpack_exports__,"easeCubicIn",(function(){return cubicIn})),__webpack_require__.d(__webpack_exports__,"easeCubicOut",(function(){return cubicOut})),__webpack_require__.d(__webpack_exports__,"easeCubicInOut",(function(){return cubicInOut})),__webpack_require__.d(__webpack_exports__,"easePoly",(function(){return polyInOut})),__webpack_require__.d(__webpack_exports__,"easePolyIn",(function(){return polyIn})),__webpack_require__.d(__webpack_exports__,"easePolyOut",(function(){return polyOut})),__webpack_require__.d(__webpack_exports__,"easePolyInOut",(function(){return polyInOut})),__webpack_require__.d(__webpack_exports__,"easeSin",(function(){return sinInOut})),__webpack_require__.d(__webpack_exports__,"easeSinIn",(function(){return sinIn})),__webpack_require__.d(__webpack_exports__,"easeSinOut",(function(){return sinOut})),__webpack_require__.d(__webpack_exports__,"easeSinInOut",(function(){return sinInOut})),__webpack_require__.d(__webpack_exports__,"easeExp",(function(){return expInOut})),__webpack_require__.d(__webpack_exports__,"easeExpIn",(function(){return expIn})),__webpack_require__.d(__webpack_exports__,"easeExpOut",(function(){return expOut})),__webpack_require__.d(__webpack_exports__,"easeExpInOut",(function(){return expInOut})),__webpack_require__.d(__webpack_exports__,"easeCircle",(function(){return circleInOut})),__webpack_require__.d(__webpack_exports__,"easeCircleIn",(function(){return circleIn})),__webpack_require__.d(__webpack_exports__,"easeCircleOut",(function(){return circleOut})),__webpack_require__.d(__webpack_exports__,"easeCircleInOut",(function(){return circleInOut})),__webpack_require__.d(__webpack_exports__,"easeBounce",(function(){return bounceOut})),__webpack_require__.d(__webpack_exports__,"easeBounceIn",(function(){return bounceIn})),__webpack_require__.d(__webpack_exports__,"easeBounceOut",(function(){return bounceOut})),__webpack_require__.d(__webpack_exports__,"easeBounceInOut",(function(){return bounceInOut})),__webpack_require__.d(__webpack_exports__,"easeBack",(function(){return backInOut})),__webpack_require__.d(__webpack_exports__,"easeBackIn",(function(){return backIn})),__webpack_require__.d(__webpack_exports__,"easeBackOut",(function(){return backOut})),__webpack_require__.d(__webpack_exports__,"easeBackInOut",(function(){return backInOut})),__webpack_require__.d(__webpack_exports__,"easeElastic",(function(){return elastic_elasticOut})),__webpack_require__.d(__webpack_exports__,"easeElasticIn",(function(){return elastic_elasticIn})),__webpack_require__.d(__webpack_exports__,"easeElasticOut",(function(){return elastic_elasticOut})),__webpack_require__.d(__webpack_exports__,"easeElasticInOut",(function(){return elastic_elasticInOut})),__webpack_require__.d(__webpack_exports__,"blob",(function(){return blob})),__webpack_require__.d(__webpack_exports__,"buffer",(function(){return src_buffer})),__webpack_require__.d(__webpack_exports__,"dsv",(function(){return dsv_dsv})),__webpack_require__.d(__webpack_exports__,"csv",(function(){return dsv_csv})),__webpack_require__.d(__webpack_exports__,"tsv",(function(){return dsv_tsv})),__webpack_require__.d(__webpack_exports__,"image",(function(){return src_image})),__webpack_require__.d(__webpack_exports__,"json",(function(){return json})),__webpack_require__.d(__webpack_exports__,"text",(function(){return src_text})),__webpack_require__.d(__webpack_exports__,"xml",(function(){return xml})),__webpack_require__.d(__webpack_exports__,"html",(function(){return xml_html})),__webpack_require__.d(__webpack_exports__,"svg",(function(){return xml_svg})),__webpack_require__.d(__webpack_exports__,"forceCenter",(function(){return src_center})),__webpack_require__.d(__webpack_exports__,"forceCollide",(function(){return collide})),__webpack_require__.d(__webpack_exports__,"forceLink",(function(){return src_link})),__webpack_require__.d(__webpack_exports__,"forceManyBody",(function(){return manyBody})),__webpack_require__.d(__webpack_exports__,"forceRadial",(function(){return radial})),__webpack_require__.d(__webpack_exports__,"forceSimulation",(function(){return src_simulation})),__webpack_require__.d(__webpack_exports__,"forceX",(function(){return d3_force_src_x})),__webpack_require__.d(__webpack_exports__,"forceY",(function(){return d3_force_src_y})),__webpack_require__.d(__webpack_exports__,"formatDefaultLocale",(function(){return defaultLocale})),__webpack_require__.d(__webpack_exports__,"format",(function(){return defaultLocale_format})),__webpack_require__.d(__webpack_exports__,"formatPrefix",(function(){return defaultLocale_formatPrefix})),__webpack_require__.d(__webpack_exports__,"formatLocale",(function(){return src_locale})),__webpack_require__.d(__webpack_exports__,"formatSpecifier",(function(){return formatSpecifier})),__webpack_require__.d(__webpack_exports__,"FormatSpecifier",(function(){return FormatSpecifier})),__webpack_require__.d(__webpack_exports__,"precisionFixed",(function(){return precisionFixed})),__webpack_require__.d(__webpack_exports__,"precisionPrefix",(function(){return precisionPrefix})),__webpack_require__.d(__webpack_exports__,"precisionRound",(function(){return precisionRound})),__webpack_require__.d(__webpack_exports__,"geoArea",(function(){return d3_geo_src_area})),__webpack_require__.d(__webpack_exports__,"geoBounds",(function(){return src_bounds})),__webpack_require__.d(__webpack_exports__,"geoCentroid",(function(){return src_centroid})),__webpack_require__.d(__webpack_exports__,"geoCircle",(function(){return src_circle})),__webpack_require__.d(__webpack_exports__,"geoClipAntimeridian",(function(){return clip_antimeridian})),__webpack_require__.d(__webpack_exports__,"geoClipCircle",(function(){return clip_circle})),__webpack_require__.d(__webpack_exports__,"geoClipExtent",(function(){return clip_extent})),__webpack_require__.d(__webpack_exports__,"geoClipRectangle",(function(){return clipRectangle})),__webpack_require__.d(__webpack_exports__,"geoContains",(function(){return src_contains})),__webpack_require__.d(__webpack_exports__,"geoDistance",(function(){return src_distance})),__webpack_require__.d(__webpack_exports__,"geoGraticule",(function(){return graticule_graticule})),__webpack_require__.d(__webpack_exports__,"geoGraticule10",(function(){return graticule10})),__webpack_require__.d(__webpack_exports__,"geoInterpolate",(function(){return src_interpolate})),__webpack_require__.d(__webpack_exports__,"geoLength",(function(){return src_length})),__webpack_require__.d(__webpack_exports__,"geoPath",(function(){return d3_geo_src_path})),__webpack_require__.d(__webpack_exports__,"geoAlbers",(function(){return albers})),__webpack_require__.d(__webpack_exports__,"geoAlbersUsa",(function(){return projection_albersUsa})),__webpack_require__.d(__webpack_exports__,"geoAzimuthalEqualArea",(function(){return azimuthalEqualArea})),__webpack_require__.d(__webpack_exports__,"geoAzimuthalEqualAreaRaw",(function(){return azimuthalEqualAreaRaw})),__webpack_require__.d(__webpack_exports__,"geoAzimuthalEquidistant",(function(){return azimuthalEquidistant})),__webpack_require__.d(__webpack_exports__,"geoAzimuthalEquidistantRaw",(function(){return azimuthalEquidistantRaw})),__webpack_require__.d(__webpack_exports__,"geoConicConformal",(function(){return conicConformal})),__webpack_require__.d(__webpack_exports__,"geoConicConformalRaw",(function(){return conicConformalRaw})),__webpack_require__.d(__webpack_exports__,"geoConicEqualArea",(function(){return conicEqualArea})),__webpack_require__.d(__webpack_exports__,"geoConicEqualAreaRaw",(function(){return conicEqualAreaRaw})),__webpack_require__.d(__webpack_exports__,"geoConicEquidistant",(function(){return conicEquidistant})),__webpack_require__.d(__webpack_exports__,"geoConicEquidistantRaw",(function(){return conicEquidistantRaw})),__webpack_require__.d(__webpack_exports__,"geoEqualEarth",(function(){return equalEarth})),__webpack_require__.d(__webpack_exports__,"geoEqualEarthRaw",(function(){return equalEarthRaw})),__webpack_require__.d(__webpack_exports__,"geoEquirectangular",(function(){return equirectangular})),__webpack_require__.d(__webpack_exports__,"geoEquirectangularRaw",(function(){return equirectangularRaw})),__webpack_require__.d(__webpack_exports__,"geoGnomonic",(function(){return gnomonic})),__webpack_require__.d(__webpack_exports__,"geoGnomonicRaw",(function(){return gnomonicRaw})),__webpack_require__.d(__webpack_exports__,"geoIdentity",(function(){return projection_identity})),__webpack_require__.d(__webpack_exports__,"geoProjection",(function(){return projection_projection})),__webpack_require__.d(__webpack_exports__,"geoProjectionMutator",(function(){return projectionMutator})),__webpack_require__.d(__webpack_exports__,"geoMercator",(function(){return mercator})),__webpack_require__.d(__webpack_exports__,"geoMercatorRaw",(function(){return mercatorRaw})),__webpack_require__.d(__webpack_exports__,"geoNaturalEarth1",(function(){return naturalEarth1})),__webpack_require__.d(__webpack_exports__,"geoNaturalEarth1Raw",(function(){return naturalEarth1Raw})),__webpack_require__.d(__webpack_exports__,"geoOrthographic",(function(){return orthographic})),__webpack_require__.d(__webpack_exports__,"geoOrthographicRaw",(function(){return orthographicRaw})),__webpack_require__.d(__webpack_exports__,"geoStereographic",(function(){return stereographic})),__webpack_require__.d(__webpack_exports__,"geoStereographicRaw",(function(){return stereographicRaw})),__webpack_require__.d(__webpack_exports__,"geoTransverseMercator",(function(){return transverseMercator})),__webpack_require__.d(__webpack_exports__,"geoTransverseMercatorRaw",(function(){return transverseMercatorRaw})),__webpack_require__.d(__webpack_exports__,"geoRotation",(function(){return src_rotation})),__webpack_require__.d(__webpack_exports__,"geoStream",(function(){return src_stream})),__webpack_require__.d(__webpack_exports__,"geoTransform",(function(){return src_transform})),__webpack_require__.d(__webpack_exports__,"cluster",(function(){return cluster})),__webpack_require__.d(__webpack_exports__,"hierarchy",(function(){return hierarchy})),__webpack_require__.d(__webpack_exports__,"pack",(function(){return src_pack})),__webpack_require__.d(__webpack_exports__,"packSiblings",(function(){return siblings})),__webpack_require__.d(__webpack_exports__,"packEnclose",(function(){return enclose})),__webpack_require__.d(__webpack_exports__,"partition",(function(){return src_partition})),__webpack_require__.d(__webpack_exports__,"stratify",(function(){return src_stratify})),__webpack_require__.d(__webpack_exports__,"tree",(function(){return src_tree})),__webpack_require__.d(__webpack_exports__,"treemap",(function(){return src_treemap})),__webpack_require__.d(__webpack_exports__,"treemapBinary",(function(){return binary})),__webpack_require__.d(__webpack_exports__,"treemapDice",(function(){return dice})),__webpack_require__.d(__webpack_exports__,"treemapSlice",(function(){return treemap_slice})),__webpack_require__.d(__webpack_exports__,"treemapSliceDice",(function(){return sliceDice})),__webpack_require__.d(__webpack_exports__,"treemapSquarify",(function(){return squarify})),__webpack_require__.d(__webpack_exports__,"treemapResquarify",(function(){return treemap_resquarify})),__webpack_require__.d(__webpack_exports__,"interpolate",(function(){return src_value})),__webpack_require__.d(__webpack_exports__,"interpolateArray",(function(){return d3_interpolate_src_array})),__webpack_require__.d(__webpack_exports__,"interpolateBasis",(function(){return src_basis})),__webpack_require__.d(__webpack_exports__,"interpolateBasisClosed",(function(){return basisClosed})),__webpack_require__.d(__webpack_exports__,"interpolateDate",(function(){return src_date})),__webpack_require__.d(__webpack_exports__,"interpolateDiscrete",(function(){return discrete})),__webpack_require__.d(__webpack_exports__,"interpolateHue",(function(){return src_hue})),__webpack_require__.d(__webpack_exports__,"interpolateNumber",(function(){return src_number})),__webpack_require__.d(__webpack_exports__,"interpolateNumberArray",(function(){return numberArray})),__webpack_require__.d(__webpack_exports__,"interpolateObject",(function(){return src_object})),__webpack_require__.d(__webpack_exports__,"interpolateRound",(function(){return src_round})),__webpack_require__.d(__webpack_exports__,"interpolateString",(function(){return src_string})),__webpack_require__.d(__webpack_exports__,"interpolateTransformCss",(function(){return interpolateTransformCss})),__webpack_require__.d(__webpack_exports__,"interpolateTransformSvg",(function(){return interpolateTransformSvg})),__webpack_require__.d(__webpack_exports__,"interpolateZoom",(function(){return src_zoom})),__webpack_require__.d(__webpack_exports__,"interpolateRgb",(function(){return src_rgb})),__webpack_require__.d(__webpack_exports__,"interpolateRgbBasis",(function(){return rgbBasis})),__webpack_require__.d(__webpack_exports__,"interpolateRgbBasisClosed",(function(){return rgbBasisClosed})),__webpack_require__.d(__webpack_exports__,"interpolateHsl",(function(){return src_hsl})),__webpack_require__.d(__webpack_exports__,"interpolateHslLong",(function(){return hslLong})),__webpack_require__.d(__webpack_exports__,"interpolateLab",(function(){return lab_lab})),__webpack_require__.d(__webpack_exports__,"interpolateHcl",(function(){return src_hcl})),__webpack_require__.d(__webpack_exports__,"interpolateHclLong",(function(){return hclLong})),__webpack_require__.d(__webpack_exports__,"interpolateCubehelix",(function(){return src_cubehelix})),__webpack_require__.d(__webpack_exports__,"interpolateCubehelixLong",(function(){return cubehelixLong})),__webpack_require__.d(__webpack_exports__,"piecewise",(function(){return piecewise_piecewise})),__webpack_require__.d(__webpack_exports__,"quantize",(function(){return quantize})),__webpack_require__.d(__webpack_exports__,"path",(function(){return src_path})),__webpack_require__.d(__webpack_exports__,"polygonArea",(function(){return d3_polygon_src_area})),__webpack_require__.d(__webpack_exports__,"polygonCentroid",(function(){return d3_polygon_src_centroid})),__webpack_require__.d(__webpack_exports__,"polygonHull",(function(){return src_hull})),__webpack_require__.d(__webpack_exports__,"polygonContains",(function(){return d3_polygon_src_contains})),__webpack_require__.d(__webpack_exports__,"polygonLength",(function(){return d3_polygon_src_length})),__webpack_require__.d(__webpack_exports__,"quadtree",(function(){return quadtree})),__webpack_require__.d(__webpack_exports__,"randomUniform",(function(){return uniform})),__webpack_require__.d(__webpack_exports__,"randomInt",(function(){return src_int})),__webpack_require__.d(__webpack_exports__,"randomNormal",(function(){return src_normal})),__webpack_require__.d(__webpack_exports__,"randomLogNormal",(function(){return logNormal})),__webpack_require__.d(__webpack_exports__,"randomBates",(function(){return bates})),__webpack_require__.d(__webpack_exports__,"randomIrwinHall",(function(){return irwinHall})),__webpack_require__.d(__webpack_exports__,"randomExponential",(function(){return src_exponential})),__webpack_require__.d(__webpack_exports__,"randomPareto",(function(){return pareto})),__webpack_require__.d(__webpack_exports__,"randomBernoulli",(function(){return bernoulli})),__webpack_require__.d(__webpack_exports__,"randomGeometric",(function(){return geometric})),__webpack_require__.d(__webpack_exports__,"randomBinomial",(function(){return binomial})),__webpack_require__.d(__webpack_exports__,"randomGamma",(function(){return src_gamma})),__webpack_require__.d(__webpack_exports__,"randomBeta",(function(){return src_beta})),__webpack_require__.d(__webpack_exports__,"randomWeibull",(function(){return weibull})),__webpack_require__.d(__webpack_exports__,"randomCauchy",(function(){return cauchy})),__webpack_require__.d(__webpack_exports__,"randomLogistic",(function(){return logistic})),__webpack_require__.d(__webpack_exports__,"randomPoisson",(function(){return poisson})),__webpack_require__.d(__webpack_exports__,"randomLcg",(function(){return lcg_lcg})),__webpack_require__.d(__webpack_exports__,"scaleBand",(function(){return band})),__webpack_require__.d(__webpack_exports__,"scalePoint",(function(){return band_point})),__webpack_require__.d(__webpack_exports__,"scaleIdentity",(function(){return identity_identity})),__webpack_require__.d(__webpack_exports__,"scaleLinear",(function(){return src_linear_linear})),__webpack_require__.d(__webpack_exports__,"scaleLog",(function(){return log_log})),__webpack_require__.d(__webpack_exports__,"scaleSymlog",(function(){return symlog})),__webpack_require__.d(__webpack_exports__,"scaleOrdinal",(function(){return ordinal})),__webpack_require__.d(__webpack_exports__,"scaleImplicit",(function(){return implicit})),__webpack_require__.d(__webpack_exports__,"scalePow",(function(){return pow_pow})),__webpack_require__.d(__webpack_exports__,"scaleSqrt",(function(){return pow_sqrt})),__webpack_require__.d(__webpack_exports__,"scaleRadial",(function(){return radial_radial})),__webpack_require__.d(__webpack_exports__,"scaleQuantile",(function(){return quantile_quantile})),__webpack_require__.d(__webpack_exports__,"scaleQuantize",(function(){return quantize_quantize})),__webpack_require__.d(__webpack_exports__,"scaleThreshold",(function(){return threshold_threshold})),__webpack_require__.d(__webpack_exports__,"scaleTime",(function(){return time_time})),__webpack_require__.d(__webpack_exports__,"scaleUtc",(function(){return utcTime})),__webpack_require__.d(__webpack_exports__,"scaleSequential",(function(){return sequential})),__webpack_require__.d(__webpack_exports__,"scaleSequentialLog",(function(){return sequentialLog})),__webpack_require__.d(__webpack_exports__,"scaleSequentialPow",(function(){return sequentialPow})),__webpack_require__.d(__webpack_exports__,"scaleSequentialSqrt",(function(){return sequentialSqrt})),__webpack_require__.d(__webpack_exports__,"scaleSequentialSymlog",(function(){return sequentialSymlog})),__webpack_require__.d(__webpack_exports__,"scaleSequentialQuantile",(function(){return sequentialQuantile})),__webpack_require__.d(__webpack_exports__,"scaleDiverging",(function(){return diverging})),__webpack_require__.d(__webpack_exports__,"scaleDivergingLog",(function(){return divergingLog})),__webpack_require__.d(__webpack_exports__,"scaleDivergingPow",(function(){return divergingPow})),__webpack_require__.d(__webpack_exports__,"scaleDivergingSqrt",(function(){return divergingSqrt})),__webpack_require__.d(__webpack_exports__,"scaleDivergingSymlog",(function(){return divergingSymlog})),__webpack_require__.d(__webpack_exports__,"tickFormat",(function(){return tickFormat_tickFormat})),__webpack_require__.d(__webpack_exports__,"schemeCategory10",(function(){return category10})),__webpack_require__.d(__webpack_exports__,"schemeAccent",(function(){return Accent})),__webpack_require__.d(__webpack_exports__,"schemeDark2",(function(){return Dark2})),__webpack_require__.d(__webpack_exports__,"schemePaired",(function(){return Paired})),__webpack_require__.d(__webpack_exports__,"schemePastel1",(function(){return Pastel1})),__webpack_require__.d(__webpack_exports__,"schemePastel2",(function(){return Pastel2})),__webpack_require__.d(__webpack_exports__,"schemeSet1",(function(){return Set1})),__webpack_require__.d(__webpack_exports__,"schemeSet2",(function(){return Set2})),__webpack_require__.d(__webpack_exports__,"schemeSet3",(function(){return Set3})),__webpack_require__.d(__webpack_exports__,"schemeTableau10",(function(){return Tableau10})),__webpack_require__.d(__webpack_exports__,"interpolateBrBG",(function(){return BrBG})),__webpack_require__.d(__webpack_exports__,"schemeBrBG",(function(){return BrBG_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePRGn",(function(){return PRGn})),__webpack_require__.d(__webpack_exports__,"schemePRGn",(function(){return PRGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePiYG",(function(){return PiYG})),__webpack_require__.d(__webpack_exports__,"schemePiYG",(function(){return PiYG_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuOr",(function(){return PuOr})),__webpack_require__.d(__webpack_exports__,"schemePuOr",(function(){return PuOr_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdBu",(function(){return RdBu})),__webpack_require__.d(__webpack_exports__,"schemeRdBu",(function(){return RdBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdGy",(function(){return RdGy})),__webpack_require__.d(__webpack_exports__,"schemeRdGy",(function(){return RdGy_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdYlBu",(function(){return RdYlBu})),__webpack_require__.d(__webpack_exports__,"schemeRdYlBu",(function(){return RdYlBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdYlGn",(function(){return RdYlGn})),__webpack_require__.d(__webpack_exports__,"schemeRdYlGn",(function(){return RdYlGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateSpectral",(function(){return Spectral})),__webpack_require__.d(__webpack_exports__,"schemeSpectral",(function(){return Spectral_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateBuGn",(function(){return BuGn})),__webpack_require__.d(__webpack_exports__,"schemeBuGn",(function(){return BuGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateBuPu",(function(){return BuPu})),__webpack_require__.d(__webpack_exports__,"schemeBuPu",(function(){return BuPu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateGnBu",(function(){return GnBu})),__webpack_require__.d(__webpack_exports__,"schemeGnBu",(function(){return GnBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateOrRd",(function(){return OrRd})),__webpack_require__.d(__webpack_exports__,"schemeOrRd",(function(){return OrRd_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuBuGn",(function(){return PuBuGn})),__webpack_require__.d(__webpack_exports__,"schemePuBuGn",(function(){return PuBuGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuBu",(function(){return PuBu})),__webpack_require__.d(__webpack_exports__,"schemePuBu",(function(){return PuBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePuRd",(function(){return PuRd})),__webpack_require__.d(__webpack_exports__,"schemePuRd",(function(){return PuRd_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateRdPu",(function(){return RdPu})),__webpack_require__.d(__webpack_exports__,"schemeRdPu",(function(){return RdPu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlGnBu",(function(){return YlGnBu})),__webpack_require__.d(__webpack_exports__,"schemeYlGnBu",(function(){return YlGnBu_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlGn",(function(){return YlGn})),__webpack_require__.d(__webpack_exports__,"schemeYlGn",(function(){return YlGn_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlOrBr",(function(){return YlOrBr})),__webpack_require__.d(__webpack_exports__,"schemeYlOrBr",(function(){return YlOrBr_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateYlOrRd",(function(){return YlOrRd})),__webpack_require__.d(__webpack_exports__,"schemeYlOrRd",(function(){return YlOrRd_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateBlues",(function(){return Blues})),__webpack_require__.d(__webpack_exports__,"schemeBlues",(function(){return Blues_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateGreens",(function(){return Greens})),__webpack_require__.d(__webpack_exports__,"schemeGreens",(function(){return Greens_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateGreys",(function(){return Greys})),__webpack_require__.d(__webpack_exports__,"schemeGreys",(function(){return Greys_scheme})),__webpack_require__.d(__webpack_exports__,"interpolatePurples",(function(){return Purples})),__webpack_require__.d(__webpack_exports__,"schemePurples",(function(){return Purples_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateReds",(function(){return Reds})),__webpack_require__.d(__webpack_exports__,"schemeReds",(function(){return Reds_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateOranges",(function(){return Oranges})),__webpack_require__.d(__webpack_exports__,"schemeOranges",(function(){return Oranges_scheme})),__webpack_require__.d(__webpack_exports__,"interpolateCividis",(function(){return cividis})),__webpack_require__.d(__webpack_exports__,"interpolateCubehelixDefault",(function(){return sequential_multi_cubehelix})),__webpack_require__.d(__webpack_exports__,"interpolateRainbow",(function(){return rainbow})),__webpack_require__.d(__webpack_exports__,"interpolateWarm",(function(){return warm})),__webpack_require__.d(__webpack_exports__,"interpolateCool",(function(){return cool})),__webpack_require__.d(__webpack_exports__,"interpolateSinebow",(function(){return sinebow})),__webpack_require__.d(__webpack_exports__,"interpolateTurbo",(function(){return turbo})),__webpack_require__.d(__webpack_exports__,"interpolateViridis",(function(){return viridis})),__webpack_require__.d(__webpack_exports__,"interpolateMagma",(function(){return magma})),__webpack_require__.d(__webpack_exports__,"interpolateInferno",(function(){return inferno})),__webpack_require__.d(__webpack_exports__,"interpolatePlasma",(function(){return plasma})),__webpack_require__.d(__webpack_exports__,"create",(function(){return src_create})),__webpack_require__.d(__webpack_exports__,"creator",(function(){return creator})),__webpack_require__.d(__webpack_exports__,"local",(function(){return local_local})),__webpack_require__.d(__webpack_exports__,"matcher",(function(){return matcher})),__webpack_require__.d(__webpack_exports__,"namespace",(function(){return namespace})),__webpack_require__.d(__webpack_exports__,"namespaces",(function(){return namespaces})),__webpack_require__.d(__webpack_exports__,"pointer",(function(){return pointer})),__webpack_require__.d(__webpack_exports__,"pointers",(function(){return pointers})),__webpack_require__.d(__webpack_exports__,"select",(function(){return src_select})),__webpack_require__.d(__webpack_exports__,"selectAll",(function(){return src_selectAll})),__webpack_require__.d(__webpack_exports__,"selection",(function(){return src_selection})),__webpack_require__.d(__webpack_exports__,"selector",(function(){return src_selector})),__webpack_require__.d(__webpack_exports__,"selectorAll",(function(){return selectorAll})),__webpack_require__.d(__webpack_exports__,"style",(function(){return styleValue})),__webpack_require__.d(__webpack_exports__,"window",(function(){return src_window})),__webpack_require__.d(__webpack_exports__,"arc",(function(){return src_arc})),__webpack_require__.d(__webpack_exports__,"area",(function(){return d3_shape_src_area})),__webpack_require__.d(__webpack_exports__,"line",(function(){return src_line})),__webpack_require__.d(__webpack_exports__,"pie",(function(){return src_pie})),__webpack_require__.d(__webpack_exports__,"areaRadial",(function(){return areaRadial})),__webpack_require__.d(__webpack_exports__,"radialArea",(function(){return areaRadial})),__webpack_require__.d(__webpack_exports__,"lineRadial",(function(){return src_lineRadial})),__webpack_require__.d(__webpack_exports__,"radialLine",(function(){return src_lineRadial})),__webpack_require__.d(__webpack_exports__,"pointRadial",(function(){return pointRadial})),__webpack_require__.d(__webpack_exports__,"linkHorizontal",(function(){return linkHorizontal})),__webpack_require__.d(__webpack_exports__,"linkVertical",(function(){return linkVertical})),__webpack_require__.d(__webpack_exports__,"linkRadial",(function(){return linkRadial})),__webpack_require__.d(__webpack_exports__,"symbol",(function(){return src_symbol})),__webpack_require__.d(__webpack_exports__,"symbols",(function(){return symbols})),__webpack_require__.d(__webpack_exports__,"symbolCircle",(function(){return symbol_circle})),__webpack_require__.d(__webpack_exports__,"symbolCross",(function(){return symbol_cross})),__webpack_require__.d(__webpack_exports__,"symbolDiamond",(function(){return diamond})),__webpack_require__.d(__webpack_exports__,"symbolSquare",(function(){return symbol_square})),__webpack_require__.d(__webpack_exports__,"symbolStar",(function(){return star})),__webpack_require__.d(__webpack_exports__,"symbolTriangle",(function(){return triangle})),__webpack_require__.d(__webpack_exports__,"symbolWye",(function(){return wye})),__webpack_require__.d(__webpack_exports__,"curveBasisClosed",(function(){return curve_basisClosed})),__webpack_require__.d(__webpack_exports__,"curveBasisOpen",(function(){return basisOpen})),__webpack_require__.d(__webpack_exports__,"curveBasis",(function(){return curve_basis})),__webpack_require__.d(__webpack_exports__,"curveBumpX",(function(){return bumpX})),__webpack_require__.d(__webpack_exports__,"curveBumpY",(function(){return bumpY})),__webpack_require__.d(__webpack_exports__,"curveBundle",(function(){return curve_bundle})),__webpack_require__.d(__webpack_exports__,"curveCardinalClosed",(function(){return cardinalClosed})),__webpack_require__.d(__webpack_exports__,"curveCardinalOpen",(function(){return cardinalOpen})),__webpack_require__.d(__webpack_exports__,"curveCardinal",(function(){return cardinal})),__webpack_require__.d(__webpack_exports__,"curveCatmullRomClosed",(function(){return catmullRomClosed})),__webpack_require__.d(__webpack_exports__,"curveCatmullRomOpen",(function(){return catmullRomOpen})),__webpack_require__.d(__webpack_exports__,"curveCatmullRom",(function(){return curve_catmullRom})),__webpack_require__.d(__webpack_exports__,"curveLinearClosed",(function(){return linearClosed})),__webpack_require__.d(__webpack_exports__,"curveLinear",(function(){return curve_linear})),__webpack_require__.d(__webpack_exports__,"curveMonotoneX",(function(){return monotoneX})),__webpack_require__.d(__webpack_exports__,"curveMonotoneY",(function(){return monotoneY})),__webpack_require__.d(__webpack_exports__,"curveNatural",(function(){return natural})),__webpack_require__.d(__webpack_exports__,"curveStep",(function(){return curve_step})),__webpack_require__.d(__webpack_exports__,"curveStepAfter",(function(){return stepAfter})),__webpack_require__.d(__webpack_exports__,"curveStepBefore",(function(){return stepBefore})),__webpack_require__.d(__webpack_exports__,"stack",(function(){return src_stack})),__webpack_require__.d(__webpack_exports__,"stackOffsetExpand",(function(){return expand})),__webpack_require__.d(__webpack_exports__,"stackOffsetDiverging",(function(){return offset_diverging})),__webpack_require__.d(__webpack_exports__,"stackOffsetNone",(function(){return offset_none})),__webpack_require__.d(__webpack_exports__,"stackOffsetSilhouette",(function(){return silhouette})),__webpack_require__.d(__webpack_exports__,"stackOffsetWiggle",(function(){return wiggle})),__webpack_require__.d(__webpack_exports__,"stackOrderAppearance",(function(){return appearance})),__webpack_require__.d(__webpack_exports__,"stackOrderAscending",(function(){return order_ascending})),__webpack_require__.d(__webpack_exports__,"stackOrderDescending",(function(){return order_descending})),__webpack_require__.d(__webpack_exports__,"stackOrderInsideOut",(function(){return insideOut})),__webpack_require__.d(__webpack_exports__,"stackOrderNone",(function(){return order_none})),__webpack_require__.d(__webpack_exports__,"stackOrderReverse",(function(){return order_reverse})),__webpack_require__.d(__webpack_exports__,"timeInterval",(function(){return newInterval})),__webpack_require__.d(__webpack_exports__,"timeMillisecond",(function(){return src_millisecond})),__webpack_require__.d(__webpack_exports__,"timeMilliseconds",(function(){return milliseconds})),__webpack_require__.d(__webpack_exports__,"utcMillisecond",(function(){return src_millisecond})),__webpack_require__.d(__webpack_exports__,"utcMilliseconds",(function(){return milliseconds})),__webpack_require__.d(__webpack_exports__,"timeSecond",(function(){return src_second})),__webpack_require__.d(__webpack_exports__,"timeSeconds",(function(){return seconds})),__webpack_require__.d(__webpack_exports__,"utcSecond",(function(){return src_second})),__webpack_require__.d(__webpack_exports__,"utcSeconds",(function(){return seconds})),__webpack_require__.d(__webpack_exports__,"timeMinute",(function(){return src_minute})),__webpack_require__.d(__webpack_exports__,"timeMinutes",(function(){return minutes})),__webpack_require__.d(__webpack_exports__,"timeHour",(function(){return src_hour})),__webpack_require__.d(__webpack_exports__,"timeHours",(function(){return hours})),__webpack_require__.d(__webpack_exports__,"timeDay",(function(){return src_day})),__webpack_require__.d(__webpack_exports__,"timeDays",(function(){return days})),__webpack_require__.d(__webpack_exports__,"timeWeek",(function(){return sunday})),__webpack_require__.d(__webpack_exports__,"timeWeeks",(function(){return sundays})),__webpack_require__.d(__webpack_exports__,"timeSunday",(function(){return sunday})),__webpack_require__.d(__webpack_exports__,"timeSundays",(function(){return sundays})),__webpack_require__.d(__webpack_exports__,"timeMonday",(function(){return monday})),__webpack_require__.d(__webpack_exports__,"timeMondays",(function(){return mondays})),__webpack_require__.d(__webpack_exports__,"timeTuesday",(function(){return tuesday})),__webpack_require__.d(__webpack_exports__,"timeTuesdays",(function(){return tuesdays})),__webpack_require__.d(__webpack_exports__,"timeWednesday",(function(){return wednesday})),__webpack_require__.d(__webpack_exports__,"timeWednesdays",(function(){return wednesdays})),__webpack_require__.d(__webpack_exports__,"timeThursday",(function(){return thursday})),__webpack_require__.d(__webpack_exports__,"timeThursdays",(function(){return thursdays})),__webpack_require__.d(__webpack_exports__,"timeFriday",(function(){return friday})),__webpack_require__.d(__webpack_exports__,"timeFridays",(function(){return fridays})),__webpack_require__.d(__webpack_exports__,"timeSaturday",(function(){return saturday})),__webpack_require__.d(__webpack_exports__,"timeSaturdays",(function(){return saturdays})),__webpack_require__.d(__webpack_exports__,"timeMonth",(function(){return src_month})),__webpack_require__.d(__webpack_exports__,"timeMonths",(function(){return months})),__webpack_require__.d(__webpack_exports__,"timeYear",(function(){return src_year})),__webpack_require__.d(__webpack_exports__,"timeYears",(function(){return years})),__webpack_require__.d(__webpack_exports__,"utcMinute",(function(){return src_utcMinute})),__webpack_require__.d(__webpack_exports__,"utcMinutes",(function(){return utcMinutes})),__webpack_require__.d(__webpack_exports__,"utcHour",(function(){return src_utcHour})),__webpack_require__.d(__webpack_exports__,"utcHours",(function(){return utcHours})),__webpack_require__.d(__webpack_exports__,"utcDay",(function(){return src_utcDay})),__webpack_require__.d(__webpack_exports__,"utcDays",(function(){return utcDays})),__webpack_require__.d(__webpack_exports__,"utcWeek",(function(){return utcSunday})),__webpack_require__.d(__webpack_exports__,"utcWeeks",(function(){return utcSundays})),__webpack_require__.d(__webpack_exports__,"utcSunday",(function(){return utcSunday})),__webpack_require__.d(__webpack_exports__,"utcSundays",(function(){return utcSundays})),__webpack_require__.d(__webpack_exports__,"utcMonday",(function(){return utcMonday})),__webpack_require__.d(__webpack_exports__,"utcMondays",(function(){return utcMondays})),__webpack_require__.d(__webpack_exports__,"utcTuesday",(function(){return utcTuesday})),__webpack_require__.d(__webpack_exports__,"utcTuesdays",(function(){return utcTuesdays})),__webpack_require__.d(__webpack_exports__,"utcWednesday",(function(){return utcWednesday})),__webpack_require__.d(__webpack_exports__,"utcWednesdays",(function(){return utcWednesdays})),__webpack_require__.d(__webpack_exports__,"utcThursday",(function(){return utcThursday})),__webpack_require__.d(__webpack_exports__,"utcThursdays",(function(){return utcThursdays})),__webpack_require__.d(__webpack_exports__,"utcFriday",(function(){return utcFriday})),__webpack_require__.d(__webpack_exports__,"utcFridays",(function(){return utcFridays})),__webpack_require__.d(__webpack_exports__,"utcSaturday",(function(){return utcSaturday})),__webpack_require__.d(__webpack_exports__,"utcSaturdays",(function(){return utcSaturdays})),__webpack_require__.d(__webpack_exports__,"utcMonth",(function(){return src_utcMonth})),__webpack_require__.d(__webpack_exports__,"utcMonths",(function(){return utcMonths})),__webpack_require__.d(__webpack_exports__,"utcYear",(function(){return src_utcYear})),__webpack_require__.d(__webpack_exports__,"utcYears",(function(){return utcYears})),__webpack_require__.d(__webpack_exports__,"utcTicks",(function(){return utcTicks})),__webpack_require__.d(__webpack_exports__,"utcTickInterval",(function(){return utcTickInterval})),__webpack_require__.d(__webpack_exports__,"timeTicks",(function(){return timeTicks})),__webpack_require__.d(__webpack_exports__,"timeTickInterval",(function(){return timeTickInterval})),__webpack_require__.d(__webpack_exports__,"timeFormatDefaultLocale",(function(){return defaultLocale_defaultLocale})),__webpack_require__.d(__webpack_exports__,"timeFormat",(function(){return timeFormat})),__webpack_require__.d(__webpack_exports__,"timeParse",(function(){return timeParse})),__webpack_require__.d(__webpack_exports__,"utcFormat",(function(){return utcFormat})),__webpack_require__.d(__webpack_exports__,"utcParse",(function(){return utcParse})),__webpack_require__.d(__webpack_exports__,"timeFormatLocale",(function(){return formatLocale})),__webpack_require__.d(__webpack_exports__,"isoFormat",(function(){return isoFormat})),__webpack_require__.d(__webpack_exports__,"isoParse",(function(){return isoParse})),__webpack_require__.d(__webpack_exports__,"now",(function(){return now})),__webpack_require__.d(__webpack_exports__,"timer",(function(){return timer})),__webpack_require__.d(__webpack_exports__,"timerFlush",(function(){return timerFlush})),__webpack_require__.d(__webpack_exports__,"timeout",(function(){return src_timeout})),__webpack_require__.d(__webpack_exports__,"interval",(function(){return src_interval})),__webpack_require__.d(__webpack_exports__,"transition",(function(){return src_transition_transition})),__webpack_require__.d(__webpack_exports__,"active",(function(){return src_active})),__webpack_require__.d(__webpack_exports__,"interrupt",(function(){return interrupt})),__webpack_require__.d(__webpack_exports__,"zoom",(function(){return d3_zoom_src_zoom})),__webpack_require__.d(__webpack_exports__,"zoomTransform",(function(){return transform_transform})),__webpack_require__.d(__webpack_exports__,"zoomIdentity",(function(){return transform_identity}));var version="6.7.0",ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN},bisector=function(f){let delta=f,compare=f;function left(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){const mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo}return 1===f.length&&(delta=(d,x)=>f(d)-x,compare=function(f){return(d,x)=>ascending(f(d),x)}(f)),{left:left,center:function(a,x,lo,hi){null==lo&&(lo=0),null==hi&&(hi=a.length);const i=left(a,x,lo,hi-1);return i>lo&&delta(a[i-1],x)>-delta(a[i],x)?i-1:i},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){const mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}};var number=function(x){return null===x?NaN:+x};const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left,bisectCenter=bisector(number).center;var bisect=bisectRight;function count_count(values,valueof){let count=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&++count;else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&++count}return count}function cross_length(array){return 0|array.length}function cross_empty(length){return!(length>0)}function arrayify(values){return"object"!=typeof values||"length"in values?values:Array.from(values)}function cross(...values){const reduce="function"==typeof values[values.length-1]&&function(reduce){return values=>reduce(...values)}(values.pop()),lengths=(values=values.map(arrayify)).map(cross_length),j=values.length-1,index=new Array(j+1).fill(0),product=[];if(j<0||lengths.some(cross_empty))return product;for(;;){product.push(index.map(((j,i)=>values[i][j])));let i=j;for(;++index[i]===lengths[i];){if(0===i)return reduce?product.map(reduce):product;index[i--]=0}}}function cumsum(values,valueof){var sum=0,index=0;return Float64Array.from(values,void 0===valueof?v=>sum+=+v||0:v=>sum+=+valueof(v,index++,values)||0)}var descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};function variance(values,valueof){let delta,count=0,mean=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(delta=value-mean,mean+=delta/++count,sum+=delta*(value-mean));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(delta=value-mean,mean+=delta/++count,sum+=delta*(value-mean))}if(count>1)return sum/(count-1)}function deviation(values,valueof){const v=variance(values,valueof);return v?Math.sqrt(v):v}var src_extent=function(values,valueof){let min,max;if(void 0===valueof)for(const value of values)null!=value&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(void 0===min?value>=value&&(min=max=value):(min>value&&(min=value),max<value&&(max=value)))}return[min,max]};class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(x){const p=this._partials;let i=0;for(let j=0;j<this._n&&j<32;j++){const y=p[j],hi=x+y,lo=Math.abs(x)<Math.abs(y)?x-(hi-y):y-(hi-x);lo&&(p[i++]=lo),x=hi}return p[i]=x,this._n=i+1,this}valueOf(){const p=this._partials;let x,y,lo,n=this._n,hi=0;if(n>0){for(hi=p[--n];n>0&&(x=hi,y=p[--n],hi=x+y,lo=y-(hi-x),!lo););n>0&&(lo<0&&p[n-1]<0||lo>0&&p[n-1]>0)&&(y=2*lo,x=hi+y,y==x-hi&&(hi=x))}return hi}}function fsum(values,valueof){const adder=new Adder;if(void 0===valueof)for(let value of values)(value=+value)&&adder.add(value);else{let index=-1;for(let value of values)(value=+valueof(value,++index,values))&&adder.add(value)}return+adder}function fcumsum(values,valueof){const adder=new Adder;let index=-1;return Float64Array.from(values,void 0===valueof?v=>adder.add(+v||0):v=>adder.add(+valueof(v,++index,values)||0))}class InternMap extends Map{constructor(entries,key=src_keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}}),null!=entries)for(const[key,value]of entries)this.set(key,value)}get(key){return super.get(intern_get(this,key))}has(key){return super.has(intern_get(this,key))}set(key,value){return super.set(intern_set(this,key),value)}delete(key){return super.delete(intern_delete(this,key))}}class InternSet extends Set{constructor(values,key=src_keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}}),null!=values)for(const value of values)this.add(value)}has(value){return super.has(intern_get(this,value))}add(value){return super.add(intern_set(this,value))}delete(value){return super.delete(intern_delete(this,value))}}function intern_get({_intern:_intern,_key:_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):value}function intern_set({_intern:_intern,_key:_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):(_intern.set(key,value),value)}function intern_delete({_intern:_intern,_key:_key},value){const key=_key(value);return _intern.has(key)&&(value=_intern.get(value),_intern.delete(key)),value}function src_keyof(value){return null!==value&&"object"==typeof value?value.valueOf():value}var identity=function(x){return x};function group_group(values,...keys){return nest(values,identity,identity,keys)}function group_groups(values,...keys){return nest(values,Array.from,identity,keys)}function rollup(values,reduce,...keys){return nest(values,identity,reduce,keys)}function rollups(values,reduce,...keys){return nest(values,Array.from,reduce,keys)}function group_index(values,...keys){return nest(values,identity,unique,keys)}function group_indexes(values,...keys){return nest(values,Array.from,unique,keys)}function unique(values){if(1!==values.length)throw new Error("duplicate key");return values[0]}function nest(values,map,reduce,keys){return function regroup(values,i){if(i>=keys.length)return reduce(values);const groups=new InternMap,keyof=keys[i++];let index=-1;for(const value of values){const key=keyof(value,++index,values),group=groups.get(key);group?group.push(value):groups.set(key,[value])}for(const[key,values]of groups)groups.set(key,regroup(values,i));return map(groups)}(values,0)}var permute=function(source,keys){return Array.from(keys,(key=>source[key]))};function sort_sort(values,...F){if("function"!=typeof values[Symbol.iterator])throw new TypeError("values is not iterable");values=Array.from(values);let[f=ascending]=F;if(1===f.length||F.length>1){const index=Uint32Array.from(values,((d,i)=>i));return F.length>1?(F=F.map((f=>values.map(f))),index.sort(((i,j)=>{for(const f of F){const c=ascending(f[i],f[j]);if(c)return c}}))):(f=values.map(f),index.sort(((i,j)=>ascending(f[i],f[j])))),permute(values,index)}return values.sort(f)}function groupSort(values,reduce,key){return(1===reduce.length?sort_sort(rollup(values,reduce,key),(([ak,av],[bk,bv])=>ascending(av,bv)||ascending(ak,bk))):sort_sort(group_group(values,key),(([ak,av],[bk,bv])=>reduce(av,bv)||ascending(ak,bk)))).map((([key])=>key))}var array_array=Array.prototype,slice=array_array.slice,constant=(array_array.map,function(x){return function(){return x}}),e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2),src_ticks=function(start,stop,count){var reverse,n,ticks,step,i=-1;if(count=+count,(start=+start)===(stop=+stop)&&count>0)return[start];if((reverse=stop<start)&&(n=start,start=stop,stop=n),0===(step=tickIncrement(start,stop,count))||!isFinite(step))return[];if(step>0){let r0=Math.round(start/step),r1=Math.round(stop/step);for(r0*step<start&&++r0,r1*step>stop&&--r1,ticks=new Array(n=r1-r0+1);++i<n;)ticks[i]=(r0+i)*step}else{step=-step;let r0=Math.round(start*step),r1=Math.round(stop*step);for(r0/step<start&&++r0,r1/step>stop&&--r1,ticks=new Array(n=r1-r0+1);++i<n;)ticks[i]=(r0+i)/step}return reverse&&ticks.reverse(),ticks};function tickIncrement(start,stop,count){var step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log(step)/Math.LN10),error=step/Math.pow(10,power);return power>=0?(error>=e10?10:error>=e5?5:error>=e2?2:1)*Math.pow(10,power):-Math.pow(10,-power)/(error>=e10?10:error>=e5?5:error>=e2?2:1)}function tickStep(start,stop,count){var step0=Math.abs(stop-start)/Math.max(0,count),step1=Math.pow(10,Math.floor(Math.log(step0)/Math.LN10)),error=step0/step1;return error>=e10?step1*=10:error>=e5?step1*=5:error>=e2&&(step1*=2),stop<start?-step1:step1}function nice(start,stop,count){let prestep;for(;;){const step=tickIncrement(start,stop,count);if(step===prestep||0===step||!isFinite(step))return[start,stop];step>0?(start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step):step<0&&(start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step),prestep=step}}var sturges=function(values){return Math.ceil(Math.log(count_count(values))/Math.LN2)+1},src_bin=function(){var value=identity,domain=src_extent,threshold=sturges;function histogram(data){Array.isArray(data)||(data=Array.from(data));var i,x,n=data.length,values=new Array(n);for(i=0;i<n;++i)values[i]=value(data[i],i,data);var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);if(!Array.isArray(tz)){const max=x1,tn=+tz;if(domain===src_extent&&([x0,x1]=nice(x0,x1,tn)),(tz=src_ticks(x0,x1,tn))[tz.length-1]>=x1)if(max>=x1&&domain===src_extent){const step=tickIncrement(x0,x1,tn);isFinite(step)&&(step>0?x1=(Math.floor(x1/step)+1)*step:step<0&&(x1=(Math.ceil(x1*-step)+1)/-step))}else tz.pop()}for(var m=tz.length;tz[0]<=x0;)tz.shift(),--m;for(;tz[m-1]>x1;)tz.pop(),--m;var bin,bins=new Array(m+1);for(i=0;i<=m;++i)(bin=bins[i]=[]).x0=i>0?tz[i-1]:x0,bin.x1=i<m?tz[i]:x1;for(i=0;i<n;++i)x0<=(x=values[i])&&x<=x1&&bins[bisect(tz,x,0,m)].push(data[i]);return bins}return histogram.value=function(_){return arguments.length?(value="function"==typeof _?_:constant(_),histogram):value},histogram.domain=function(_){return arguments.length?(domain="function"==typeof _?_:constant([_[0],_[1]]),histogram):domain},histogram.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:Array.isArray(_)?constant(slice.call(_)):constant(_),histogram):threshold},histogram};function max_max(values,valueof){let max;if(void 0===valueof)for(const value of values)null!=value&&(max<value||void 0===max&&value>=value)&&(max=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value)}return max}function min_min(values,valueof){let min;if(void 0===valueof)for(const value of values)null!=value&&(min>value||void 0===min&&value>=value)&&(min=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(min>value||void 0===min&&value>=value)&&(min=value)}return min}function quickselect(array,k,left=0,right=array.length-1,compare=ascending){for(;right>left;){if(right-left>600){const n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);quickselect(array,k,Math.max(left,Math.floor(k-m*s/n+sd)),Math.min(right,Math.floor(k+(n-m)*s/n+sd)),compare)}const t=array[k];let i=left,j=right;for(swap(array,left,k),compare(array[right],t)>0&&swap(array,left,right);i<j;){for(swap(array,i,j),++i,--j;compare(array[i],t)<0;)++i;for(;compare(array[j],t)>0;)--j}0===compare(array[left],t)?swap(array,left,j):(++j,swap(array,j,right)),j<=k&&(left=j+1),k<=j&&(right=j-1)}return array}function swap(array,i,j){const t=array[i];array[i]=array[j],array[j]=t}function quantile(values,p,valueof){if(values=Float64Array.from(function*(values,valueof){if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(yield value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(yield value)}}(values,valueof)),n=values.length){if((p=+p)<=0||n<2)return min_min(values);if(p>=1)return max_max(values);var n,i=(n-1)*p,i0=Math.floor(i),value0=max_max(quickselect(values,i0).subarray(0,i0+1));return value0+(min_min(values.subarray(i0+1))-value0)*(i-i0)}}function quantileSorted(values,p,valueof=number){if(n=values.length){if((p=+p)<=0||n<2)return+valueof(values[0],0,values);if(p>=1)return+valueof(values[n-1],n-1,values);var n,i=(n-1)*p,i0=Math.floor(i),value0=+valueof(values[i0],i0,values);return value0+(+valueof(values[i0+1],i0+1,values)-value0)*(i-i0)}}var freedmanDiaconis=function(values,min,max){return Math.ceil((max-min)/(2*(quantile(values,.75)-quantile(values,.25))*Math.pow(count_count(values),-1/3)))},scott=function(values,min,max){return Math.ceil((max-min)/(3.5*deviation(values)*Math.pow(count_count(values),-1/3)))};function maxIndex(values,valueof){let max,maxIndex=-1,index=-1;if(void 0===valueof)for(const value of values)++index,null!=value&&(max<value||void 0===max&&value>=value)&&(max=value,maxIndex=index);else for(let value of values)null!=(value=valueof(value,++index,values))&&(max<value||void 0===max&&value>=value)&&(max=value,maxIndex=index);return maxIndex}function mean(values,valueof){let count=0,sum=0;if(void 0===valueof)for(let value of values)null!=value&&(value=+value)>=value&&(++count,sum+=value);else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&(value=+value)>=value&&(++count,sum+=value)}if(count)return sum/count}var median=function(values,valueof){return quantile(values,.5,valueof)};function merge_merge(arrays){return Array.from(function*(arrays){for(const array of arrays)yield*array}(arrays))}function minIndex(values,valueof){let min,minIndex=-1,index=-1;if(void 0===valueof)for(const value of values)++index,null!=value&&(min>value||void 0===min&&value>=value)&&(min=value,minIndex=index);else for(let value of values)null!=(value=valueof(value,++index,values))&&(min>value||void 0===min&&value>=value)&&(min=value,minIndex=index);return minIndex}function pairs(values,pairof=pair){const pairs=[];let previous,first=!1;for(const value of values)first&&pairs.push(pairof(previous,value)),previous=value,first=!0;return pairs}function pair(a,b){return[a,b]}var src_range=function(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range};function least(values,compare=ascending){let min,defined=!1;if(1===compare.length){let minValue;for(const element of values){const value=compare(element);(defined?ascending(value,minValue)<0:0===ascending(value,value))&&(min=element,minValue=value,defined=!0)}}else for(const value of values)(defined?compare(value,min)<0:0===compare(value,value))&&(min=value,defined=!0);return min}function leastIndex(values,compare=ascending){if(1===compare.length)return minIndex(values,compare);let minValue,min=-1,index=-1;for(const value of values)++index,(min<0?0===compare(value,value):compare(value,minValue)<0)&&(minValue=value,min=index);return min}function greatest(values,compare=ascending){let max,defined=!1;if(1===compare.length){let maxValue;for(const element of values){const value=compare(element);(defined?ascending(value,maxValue)>0:0===ascending(value,value))&&(max=element,maxValue=value,defined=!0)}}else for(const value of values)(defined?compare(value,max)>0:0===compare(value,value))&&(max=value,defined=!0);return max}function greatestIndex(values,compare=ascending){if(1===compare.length)return maxIndex(values,compare);let maxValue,max=-1,index=-1;for(const value of values)++index,(max<0?0===compare(value,value):compare(value,maxValue)>0)&&(maxValue=value,max=index);return max}function scan(values,compare){const index=leastIndex(values,compare);return index<0?void 0:index}var shuffle=shuffler(Math.random);function shuffler(random){return function(array,i0=0,i1=array.length){let m=i1-(i0=+i0);for(;m;){const i=random()*m--|0,t=array[m+i0];array[m+i0]=array[i+i0],array[i+i0]=t}return array}}function sum_sum(values,valueof){let sum=0;if(void 0===valueof)for(let value of values)(value=+value)&&(sum+=value);else{let index=-1;for(let value of values)(value=+valueof(value,++index,values))&&(sum+=value)}return sum}var src_transpose=function(matrix){if(!(n=matrix.length))return[];for(var i=-1,m=min_min(matrix,transpose_length),transpose=new Array(m);++i<m;)for(var n,j=-1,row=transpose[i]=new Array(n);++j<n;)row[j]=matrix[j][i];return transpose};function transpose_length(d){return d.length}var zip=function(){return src_transpose(arguments)};function every(values,test){if("function"!=typeof test)throw new TypeError("test is not a function");let index=-1;for(const value of values)if(!test(value,++index,values))return!1;return!0}function some(values,test){if("function"!=typeof test)throw new TypeError("test is not a function");let index=-1;for(const value of values)if(test(value,++index,values))return!0;return!1}function filter_filter(values,test){if("function"!=typeof test)throw new TypeError("test is not a function");const array=[];let index=-1;for(const value of values)test(value,++index,values)&&array.push(value);return array}function map_map(values,mapper){if("function"!=typeof values[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof mapper)throw new TypeError("mapper is not a function");return Array.from(values,((value,index)=>mapper(value,index,values)))}function reduce_reduce(values,reducer,value){if("function"!=typeof reducer)throw new TypeError("reducer is not a function");const iterator=values[Symbol.iterator]();let done,next,index=-1;if(arguments.length<3){if(({done:done,value:value}=iterator.next()),done)return;++index}for(;({done:done,value:next}=iterator.next()),!done;)value=reducer(value,next,++index,values);return value}function reverse_reverse(values){if("function"!=typeof values[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(values).reverse()}function difference(values,...others){values=new Set(values);for(const other of others)for(const value of other)values.delete(value);return values}function disjoint(values,other){const iterator=other[Symbol.iterator](),set=new Set;for(const v of values){if(set.has(v))return!1;let value,done;for(;({value:value,done:done}=iterator.next())&&!done;){if(Object.is(v,value))return!1;set.add(value)}}return!0}function set(values){return values instanceof Set?values:new Set(values)}function intersection_intersection(values,...others){values=new Set(values),others=others.map(set);out:for(const value of values)for(const other of others)if(!other.has(value)){values.delete(value);continue out}return values}function superset(values,other){const iterator=values[Symbol.iterator](),set=new Set;for(const o of other){if(set.has(o))continue;let value,done;for(;({value:value,done:done}=iterator.next());){if(done)return!1;if(set.add(value),Object.is(o,value))break}}return!0}function subset(values,other){return superset(other,values)}function union(...others){const set=new Set;for(const other of others)for(const o of other)set.add(o);return set}var array_slice=Array.prototype.slice,src_identity=function(x){return x};function translateX(x){return"translate("+x+",0)"}function translateY(y){return"translate(0,"+y+")"}function axis_number(scale){return d=>+scale(d)}function axis_center(scale,offset){return offset=Math.max(0,scale.bandwidth()-2*offset)/2,scale.round()&&(offset=Math.round(offset)),d=>+scale(d)+offset}function entering(){return!this.__axis}function axis_axis(orient,scale){var tickArguments=[],tickValues=null,tickFormat=null,tickSizeInner=6,tickSizeOuter=6,tickPadding=3,offset="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,k=1===orient||4===orient?-1:1,x=4===orient||2===orient?"x":"y",transform=1===orient||3===orient?translateX:translateY;function axis(context){var values=null==tickValues?scale.ticks?scale.ticks.apply(scale,tickArguments):scale.domain():tickValues,format=null==tickFormat?scale.tickFormat?scale.tickFormat.apply(scale,tickArguments):src_identity:tickFormat,spacing=Math.max(tickSizeInner,0)+tickPadding,range=scale.range(),range0=+range[0]+offset,range1=+range[range.length-1]+offset,position=(scale.bandwidth?axis_center:axis_number)(scale.copy(),offset),selection=context.selection?context.selection():context,path=selection.selectAll(".domain").data([null]),tick=selection.selectAll(".tick").data(values,scale).order(),tickExit=tick.exit(),tickEnter=tick.enter().append("g").attr("class","tick"),line=tick.select("line"),text=tick.select("text");path=path.merge(path.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),tick=tick.merge(tickEnter),line=line.merge(tickEnter.append("line").attr("stroke","currentColor").attr(x+"2",k*tickSizeInner)),text=text.merge(tickEnter.append("text").attr("fill","currentColor").attr(x,k*spacing).attr("dy",1===orient?"0em":3===orient?"0.71em":"0.32em")),context!==selection&&(path=path.transition(context),tick=tick.transition(context),line=line.transition(context),text=text.transition(context),tickExit=tickExit.transition(context).attr("opacity",1e-6).attr("transform",(function(d){return isFinite(d=position(d))?transform(d+offset):this.getAttribute("transform")})),tickEnter.attr("opacity",1e-6).attr("transform",(function(d){var p=this.parentNode.__axis;return transform((p&&isFinite(p=p(d))?p:position(d))+offset)}))),tickExit.remove(),path.attr("d",4===orient||2===orient?tickSizeOuter?"M"+k*tickSizeOuter+","+range0+"H"+offset+"V"+range1+"H"+k*tickSizeOuter:"M"+offset+","+range0+"V"+range1:tickSizeOuter?"M"+range0+","+k*tickSizeOuter+"V"+offset+"H"+range1+"V"+k*tickSizeOuter:"M"+range0+","+offset+"H"+range1),tick.attr("opacity",1).attr("transform",(function(d){return transform(position(d)+offset)})),line.attr(x+"2",k*tickSizeInner),text.attr(x,k*spacing).text(format),selection.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===orient?"start":4===orient?"end":"middle"),selection.each((function(){this.__axis=position}))}return axis.scale=function(_){return arguments.length?(scale=_,axis):scale},axis.ticks=function(){return tickArguments=array_slice.call(arguments),axis},axis.tickArguments=function(_){return arguments.length?(tickArguments=null==_?[]:array_slice.call(_),axis):tickArguments.slice()},axis.tickValues=function(_){return arguments.length?(tickValues=null==_?null:array_slice.call(_),axis):tickValues&&tickValues.slice()},axis.tickFormat=function(_){return arguments.length?(tickFormat=_,axis):tickFormat},axis.tickSize=function(_){return arguments.length?(tickSizeInner=tickSizeOuter=+_,axis):tickSizeInner},axis.tickSizeInner=function(_){return arguments.length?(tickSizeInner=+_,axis):tickSizeInner},axis.tickSizeOuter=function(_){return arguments.length?(tickSizeOuter=+_,axis):tickSizeOuter},axis.tickPadding=function(_){return arguments.length?(tickPadding=+_,axis):tickPadding},axis.offset=function(_){return arguments.length?(offset=+_,axis):offset},axis}function axisTop(scale){return axis_axis(1,scale)}function axisRight(scale){return axis_axis(2,scale)}function axisBottom(scale){return axis_axis(3,scale)}function axisLeft(scale){return axis_axis(4,scale)}var noop={value:()=>{}};function dispatch_dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}}))}function get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function dispatch_set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch.prototype=dispatch_dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=parseTypenames(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=dispatch_set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=dispatch_set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var src_dispatch=dispatch_dispatch;function none(){}var src_selector=function(selector){return null==selector?none:function(){return this.querySelector(selector)}},src_array=function(x){return"object"==typeof x&&"length"in x?x:Array.from(x)};function selectorAll_empty(){return[]}var selectorAll=function(selector){return null==selector?selectorAll_empty:function(){return this.querySelectorAll(selector)}};var matcher=function(selector){return function(){return this.matches(selector)}};function childMatcher(selector){return function(node){return node.matches(selector)}}var find=Array.prototype.find;function childFirst(){return this.firstElementChild}var selectChildren_filter=Array.prototype.filter;function selectChildren_children(){return this.children}var sparse=function(update){return new Array(update.length)};function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var src_constant=function(x){return function(){return x}};function bindIndex(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue=new Map,groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=key.call(node,node.__data__,i,group)+"",nodeByKeyValue.has(keyValue)?exit[i]=node:nodeByKeyValue.set(keyValue,node));for(i=0;i<dataLength;++i)keyValue=key.call(parent,data[i],i,data)+"",(node=nodeByKeyValue.get(keyValue))?(update[i]=node,node.__data__=data[i],nodeByKeyValue.delete(keyValue)):enter[i]=new EnterNode(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue.get(keyValues[i])===node&&(exit[i]=node)}function datum(node){return node.__data__}function sort_ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},namespace=function(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name}:name};function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}var src_window=function(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView};function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue(node,name){return node.style.getPropertyValue(name)||src_window(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node,this._names=classArray(node.getAttribute("class")||"")}function classedAdd(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}ClassList.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};function textRemove(){this.textContent=""}function textConstant(value){return function(){this.textContent=value}}function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove(){this.innerHTML=""}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}var creator=function(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)};function constantNull(){return null}function remove_remove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow(){var clone=this.cloneNode(!1),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep(){var clone=this.cloneNode(!0),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function on_parseTypenames(typenames){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name:name}}))}function onRemove(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.options);++i?on.length=i:delete this.__on}}}function onAdd(typename,value,options){return function(){var o,on=this.__on,listener=function(listener){return function(event){listener.call(this,event,this.__data__)}}(value);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=listener,o.options=options),void(o.value=value);this.addEventListener(typename.type,listener,options),o={type:typename.type,name:typename.name,value:value,listener:listener,options:options},on?on.push(o):this.__on=[o]}}function dispatchEvent(node,type,params){var window=src_window(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}var selection_root=[null];function Selection(groups,parents){this._groups=groups,this._parents=parents}function selection_selection(){return new Selection([[document.documentElement]],selection_root)}Selection.prototype=selection_selection.prototype={constructor:Selection,select:function(select){"function"!=typeof select&&(select=src_selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection(subgroups,this._parents)},selectAll:function(select){select="function"==typeof select?function(select){return function(){var group=select.apply(this,arguments);return null==group?[]:src_array(group)}}(select):selectorAll(select);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection(subgroups,parents)},selectChild:function(match){return this.select(null==match?childFirst:function(match){return function(){return find.call(this.children,match)}}("function"==typeof match?match:childMatcher(match)))},selectChildren:function(match){return this.selectAll(null==match?selectChildren_children:function(match){return function(){return selectChildren_filter.call(this.children,match)}}("function"==typeof match?match:childMatcher(match)))},filter:function(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection(subgroups,this._parents)},data:function(value,key){if(!arguments.length)return Array.from(this,datum);var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;"function"!=typeof value&&(value=src_constant(value));for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=src_array(value.call(parent,parent&&parent.__data__,j,parents)),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength),exitGroup=exit[j]=new Array(groupLength);bind(parent,group,enterGroup,updateGroup,exitGroup,data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection(update,parents))._enter=enter,update._exit=exit,update},enter:function(){return new Selection(this._enter||this._groups.map(sparse),this._parents)},exit:function(){return new Selection(this._exit||this._groups.map(sparse),this._parents)},join:function(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return enter="function"==typeof onenter?onenter(enter):enter.append(onenter+""),null!=onupdate&&(update=onupdate(update)),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function(selection){if(!(selection instanceof Selection))throw new Error("invalid merge");for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection(merges,this._parents)},selection:function(){return this},order:function(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=sort_ascending);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection(sortgroups,this._parents).order()},call:function(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function(){let size=0;for(const node of this)++size;return size},empty:function(){return!this.node()},each:function(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function(name,value){var fullname=namespace(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS:attrRemove:"function"==typeof value?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value))},style:function(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove:"function"==typeof value?styleFunction:styleConstant)(name,value,null==priority?"":priority)):styleValue(this.node(),name)},property:function(name,value){return arguments.length>1?this.each((null==value?propertyRemove:"function"==typeof value?propertyFunction:propertyConstant)(name,value)):this.node()[name]},classed:function(name,value){var names=classArray(name+"");if(arguments.length<2){for(var list=classList(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction:value?classedTrue:classedFalse)(names,value))},text:function(value){return arguments.length?this.each(null==value?textRemove:("function"==typeof value?textFunction:textConstant)(value)):this.node().textContent},html:function(value){return arguments.length?this.each(null==value?htmlRemove:("function"==typeof value?htmlFunction:htmlConstant)(value)):this.node().innerHTML},raise:function(){return this.each(raise)},lower:function(){return this.each(lower)},append:function(name){var create="function"==typeof name?name:creator(name);return this.select((function(){return this.appendChild(create.apply(this,arguments))}))},insert:function(name,before){var create="function"==typeof name?name:creator(name),select=null==before?constantNull:"function"==typeof before?before:src_selector(before);return this.select((function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)}))},remove:function(){return this.each(remove_remove)},clone:function(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)},datum:function(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function(typename,value,options){var i,t,typenames=on_parseTypenames(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd:onRemove,i=0;i<n;++i)this.each(on(typenames[i],value,options));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function(type,params){return this.each(("function"==typeof params?dispatchFunction:dispatchConstant)(type,params))},[Symbol.iterator]:function*(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&(yield node)}};var src_selection=selection_selection,src_select=function(selector){return"string"==typeof selector?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],selection_root)};function nopropagation(event){event.stopImmediatePropagation()}var noevent=function(event){event.preventDefault(),event.stopImmediatePropagation()},nodrag=function(view){var root=view.document.documentElement,selection=src_select(view).on("dragstart.drag",noevent,!0);"onselectstart"in root?selection.on("selectstart.drag",noevent,!0):(root.__noselect=root.style.MozUserSelect,root.style.MozUserSelect="none")};function yesdrag(view,noclick){var root=view.document.documentElement,selection=src_select(view).on("dragstart.drag",null);noclick&&(selection.on("click.drag",noevent,!0),setTimeout((function(){selection.on("click.drag",null)}),0)),"onselectstart"in root?selection.on("selectstart.drag",null):(root.style.MozUserSelect=root.__noselect,delete root.__noselect)}var define=function(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor};function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color_color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color_color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function color_rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function hex(value){return((value=Math.max(0,Math.min(255,Math.round(value)||0)))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color_color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}define(Color,color_color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,color_rgb,extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,hsl,extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var src_basis=function(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}},basisClosed=function(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}},d3_interpolate_src_constant=x=>()=>x;function linear(a,d){return function(t){return a+t*d}}function color_hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):d3_interpolate_src_constant(isNaN(a)?b:a)}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):d3_interpolate_src_constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):d3_interpolate_src_constant(isNaN(a)?b:a)}var src_rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=color_rgb(start)).r,(end=color_rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=color_rgb(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}var rgbBasis=rgbSpline(src_basis),rgbBasisClosed=rgbSpline(basisClosed),numberArray=function(a,b){b||(b=[]);var i,n=a?Math.min(b.length,a.length):0,c=b.slice();return function(t){for(i=0;i<n;++i)c[i]=a[i]*(1-t)+b[i]*t;return c}};function isNumberArray(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}var d3_interpolate_src_array=function(a,b){return(isNumberArray(b)?numberArray:genericArray)(a,b)};function genericArray(a,b){var i,nb=b?b.length:0,na=a?Math.min(nb,a.length):0,x=new Array(na),c=new Array(nb);for(i=0;i<na;++i)x[i]=src_value(a[i],b[i]);for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<na;++i)c[i]=x[i](t);return c}}var src_date=function(a,b){var d=new Date;return a=+a,b=+b,function(t){return d.setTime(a*(1-t)+b*t),d}},src_number=function(a,b){return a=+a,b=+b,function(t){return a*(1-t)+b*t}},src_object=function(a,b){var k,i={},c={};for(k in null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={}),b)k in a?i[k]=src_value(a[k],b[k]):c[k]=b[k];return function(t){for(k in i)c[k]=i[k](t);return c}},reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");var taskHead,taskTail,src_string=function(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:src_number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function(b){return function(t){return b(t)+""}}(q[0].x):function(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})},src_value=function(a,b){var c,t=typeof b;return null==b||"boolean"===t?d3_interpolate_src_constant(b):("number"===t?src_number:"string"===t?(c=color_color(b))?(b=c,src_rgb):src_string:b instanceof color_color?src_rgb:b instanceof Date?src_date:isNumberArray(b)?numberArray:Array.isArray(b)?genericArray:"function"!=typeof b.valueOf&&"function"!=typeof b.toString||isNaN(b)?src_object:src_number)(a,b)},sourceEvent=function(event){let sourceEvent;for(;sourceEvent=event.sourceEvent;)event=sourceEvent;return event},pointer=function(event,node){if(event=sourceEvent(event),void 0===node&&(node=event.currentTarget),node){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();return point.x=event.clientX,point.y=event.clientY,[(point=point.matrixTransform(node.getScreenCTM().inverse())).x,point.y]}if(node.getBoundingClientRect){var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}}return[event.pageX,event.pageY]},timer_frame=0,timeout=0,timer_interval=0,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function timerFlush(){now(),++timer_frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(null,e),t=t._next;--timer_frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,timer_frame=timeout=0;try{timerFlush()}finally{timer_frame=0,function(){var t0,t2,t1=taskHead,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>1e3&&(clockSkew-=delay,clockLast=now)}function sleep(time){timer_frame||(timeout&&(timeout=clearTimeout(timeout)),time-clockNow>24?(time<1/0&&(timeout=setTimeout(wake,time-clock.now()-clockSkew)),timer_interval&&(timer_interval=clearInterval(timer_interval))):(timer_interval||(clockLast=clock.now(),timer_interval=setInterval(poke,1e3)),timer_frame=1,setFrame(wake)))}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var src_timeout=function(callback,delay,time){var t=new Timer;return delay=null==delay?0:+delay,t.restart((elapsed=>{t.stop(),callback(elapsed+delay)}),delay,time),t},emptyOn=src_dispatch("start","end","cancel","interrupt"),emptyTween=[],transition_schedule=function(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function(node,id,self){var tween,schedules=node.__transition;function schedule(elapsed){self.state=1,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)}function start(elapsed){var i,j,n,o;if(1!==self.state)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(3===o.state)return src_timeout(start);4===o.state?(o.state=6,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=6,o.timer.stop(),o.on.call("cancel",node,node.__data__,o.index,o.group),delete schedules[i])}if(src_timeout((function(){3===self.state&&(self.state=4,self.timer.restart(tick,self.delay,self.time),tick(elapsed))})),self.state=2,self.on.call("start",node,node.__data__,self.index,self.group),2===self.state){for(self.state=3,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=5,1),i=-1,n=tween.length;++i<n;)tween[i].call(node,t);5===self.state&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=6,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer(schedule,0,self.time)}(node,id,{name:name,index:index,group:group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:0})};function schedule_init(node,id){var schedule=schedule_get(node,id);if(schedule.state>0)throw new Error("too late; already scheduled");return schedule}function schedule_set(node,id){var schedule=schedule_get(node,id);if(schedule.state>3)throw new Error("too late; already running");return schedule}function schedule_get(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}var svgNode,interrupt=function(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>2&&schedule.state<5,schedule.state=6,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}},degrees=180/Math.PI,decompose_identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},decompose=function(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}};function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:src_number(xa,xb)},{i:i-2,x:src_number(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:src_number(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:src_number(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:src_number(xa,xb)},{i:i-2,x:src_number(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform((function(value){const m=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(value+"");return m.isIdentity?decompose_identity:decompose(m.a,m.b,m.c,m.d,m.e,m.f)}),"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform((function(value){return null==value?decompose_identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?(value=value.matrix,decompose(value.a,value.b,value.c,value.d,value.e,value.f)):decompose_identity)}),", ",")",")");function tweenRemove(id,name){var tween0,tween1;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,value:value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue(transition,name,value){var id=transition._id;return transition.each((function(){var schedule=schedule_set(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)})),function(node){return schedule_get(node,id).value[name]}}var transition_interpolate=function(a,b){var c;return("number"==typeof b?src_number:b instanceof color_color?src_rgb:(c=color_color(b))?(b=c,src_rgb):src_string)(a,b)};function attr_attrRemove(name){return function(){this.removeAttribute(name)}}function attr_attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attr_attrConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attr_attrConstantNS(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attr_attrFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attr_attrFunctionNS(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attrInterpolate(name,i){return function(t){this.setAttribute(name,i.call(this,t))}}function attrInterpolateNS(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i.call(this,t))}}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&attrInterpolateNS(fullname,i)),t0}return tween._value=value,tween}function attrTween(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&attrInterpolate(name,i)),t0}return tween._value=value,tween}function delayFunction(id,value){return function(){schedule_init(this,id).delay=+value.apply(this,arguments)}}function delayConstant(id,value){return value=+value,function(){schedule_init(this,id).delay=value}}function durationFunction(id,value){return function(){schedule_set(this,id).duration=+value.apply(this,arguments)}}function durationConstant(id,value){return value=+value,function(){schedule_set(this,id).duration=value}}function easeConstant(id,value){if("function"!=typeof value)throw new Error;return function(){schedule_set(this,id).ease=value}}function onFunction(id,name,listener){var on0,on1,sit=function(name){return(name+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(name)?schedule_init:schedule_set;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}var selection_Selection=src_selection.prototype.constructor;function style_styleRemove(name){return function(){this.style.removeProperty(name)}}function styleInterpolate(name,i,priority){return function(t){this.style.setProperty(name,i.call(this,t),priority)}}function styleTween(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t=(i0=i)&&styleInterpolate(name,i,priority)),t}return tween._value=value,tween}function textInterpolate(i){return function(t){this.textContent=i.call(this,t)}}function textTween(value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&textInterpolate(i)),t0}return tween._value=value,tween}var transition_id=0;function Transition(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function src_transition_transition(name){return src_selection().transition(name)}function newId(){return++transition_id}var selection_prototype=src_selection.prototype;function cubicIn(t){return t*t*t}function cubicOut(t){return--t*t*t+1}function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Transition.prototype=src_transition_transition.prototype={constructor:Transition,select:function(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=src_selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,transition_schedule(subgroup[i],name,id,i,subgroup,schedule_get(node,id)));return new Transition(subgroups,this._parents,name,id)},selectAll:function(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=schedule_get(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&transition_schedule(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new Transition(subgroups,parents,name,id)},filter:function(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Transition(subgroups,this._parents,this._name,this._id)},merge:function(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Transition(merges,this._parents,this._name,this._id)},selection:function(){return new selection_Selection(this._groups,this._parents)},transition:function(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=schedule_get(node,id0);transition_schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new Transition(groups,this._parents,name,id1)},call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:function(name,listener){var id=this._id;return arguments.length<2?schedule_get(this.node(),id).on.on(name):this.each(onFunction(id,name,listener))},attr:function(name,value){var fullname=namespace(name),i="transform"===fullname?interpolateTransformSvg:transition_interpolate;return this.attrTween(name,"function"==typeof value?(fullname.local?attr_attrFunctionNS:attr_attrFunction)(fullname,i,tweenValue(this,"attr."+name,value)):null==value?(fullname.local?attr_attrRemoveNS:attr_attrRemove)(fullname):(fullname.local?attr_attrConstantNS:attr_attrConstant)(fullname,i,value))},attrTween:function(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value))},style:function(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss:transition_interpolate;return null==value?this.styleTween(name,function(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),string1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}(name,i)).on("end.style."+name,style_styleRemove(name)):"function"==typeof value?this.styleTween(name,function(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=styleValue(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}(name,i,tweenValue(this,"style."+name,value))).each(function(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=schedule_set(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=style_styleRemove(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}(this._id,name)):this.styleTween(name,function(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=styleValue(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}(name,i,value),priority).on("end.style."+name,null)},styleTween:function(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,styleTween(name,value,null==priority?"":priority))},text:function(value){return this.tween("text","function"==typeof value?function(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue(this,"text",value)):function(value){return function(){this.textContent=value}}(null==value?"":value+""))},textTween:function(value){var key="text";if(arguments.length<1)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,textTween(value))},remove:function(){return this.on("end.remove",(id=this._id,function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}));var id},tween:function(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=schedule_get(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove:tweenFunction)(id,name,value))},delay:function(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction:delayConstant)(id,value)):schedule_get(this.node(),id).delay},duration:function(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction:durationConstant)(id,value)):schedule_get(this.node(),id).duration},ease:function(value){var id=this._id;return arguments.length?this.each(easeConstant(id,value)):schedule_get(this.node(),id).ease},easeVarying:function(value){if("function"!=typeof value)throw new Error;return this.each(function(id,value){return function(){var v=value.apply(this,arguments);if("function"!=typeof v)throw new Error;schedule_set(this,id).ease=v}}(this._id,value))},end:function(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise((function(resolve,reject){var cancel={value:reject},end={value:function(){0==--size&&resolve()}};that.each((function(){var schedule=schedule_set(this,id),on=schedule.on;on!==on0&&((on1=(on0=on).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end)),schedule.on=on1})),0===size&&resolve()}))},[Symbol.iterator]:selection_prototype[Symbol.iterator]};var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function transition_inherit(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))throw new Error(`transition ${id} not found`);return timing}src_selection.prototype.interrupt=function(name){return this.each((function(){interrupt(this,name)}))},src_selection.prototype.transition=function(name){var id,timing;name instanceof Transition?(id=name._id,name=name._name):(id=newId(),(timing=defaultTiming).time=now(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&transition_schedule(node,name,id,i,group,timing||transition_inherit(node,id));return new Transition(groups,this._parents,name,id)};var active_root=[null],src_active=function(node,name){var schedule,i,schedules=node.__transition;if(schedules)for(i in name=null==name?null:name+"",schedules)if((schedule=schedules[i]).state>1&&schedule.name===name)return new Transition([[node]],active_root,name,+i);return null},d3_brush_src_constant=x=>()=>x;function BrushEvent(type,{sourceEvent:sourceEvent,target:target,selection:selection,mode:mode,dispatch:dispatch}){Object.defineProperties(this,{type:{value:type,enumerable:!0,configurable:!0},sourceEvent:{value:sourceEvent,enumerable:!0,configurable:!0},target:{value:target,enumerable:!0,configurable:!0},selection:{value:selection,enumerable:!0,configurable:!0},mode:{value:mode,enumerable:!0,configurable:!0},_:{value:dispatch}})}function noevent_nopropagation(event){event.stopImmediatePropagation()}var src_noevent=function(event){event.preventDefault(),event.stopImmediatePropagation()},MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};const{abs:abs,max:brush_max,min:brush_min}=Math;function number1(e){return[+e[0],+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}var brush_X={name:"x",handles:["w","e"].map(brush_type),input:function(x,e){return null==x?null:[[+x[0],e[0][1]],[+x[1],e[1][1]]]},output:function(xy){return xy&&[xy[0][0],xy[1][0]]}},brush_Y={name:"y",handles:["n","s"].map(brush_type),input:function(y,e){return null==y?null:[[e[0][0],+y[0]],[e[1][0],+y[1]]]},output:function(xy){return xy&&[xy[0][1],xy[1][1]]}},XY={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(brush_type),input:function(xy){return null==xy?null:number2(xy)},output:function(xy){return xy}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function brush_type(t){return{type:t}}function defaultFilter(event){return!event.ctrlKey&&!event.button}function defaultExtent(){var svg=this.ownerSVGElement||this;return svg.hasAttribute("viewBox")?[[(svg=svg.viewBox.baseVal).x,svg.y],[svg.x+svg.width,svg.y+svg.height]]:[[0,0],[svg.width.baseVal.value,svg.height.baseVal.value]]}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(node){for(;!node.__brush;)if(!(node=node.parentNode))return;return node.__brush}function brush_empty(extent){return extent[0][0]===extent[1][0]||extent[0][1]===extent[1][1]}function brushSelection(node){var state=node.__brush;return state?state.dim.output(state.selection):null}function brushX(){return brush_brush(brush_X)}function brushY(){return brush_brush(brush_Y)}var src_brush=function(){return brush_brush(XY)};function brush_brush(dim){var touchending,extent=defaultExtent,filter=defaultFilter,touchable=defaultTouchable,keys=!0,listeners=src_dispatch("start","brush","end"),handleSize=6;function brush(group){var overlay=group.property("__brush",initialize).selectAll(".overlay").data([brush_type("overlay")]);overlay.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(overlay).each((function(){var extent=local(this).extent;src_select(this).attr("x",extent[0][0]).attr("y",extent[0][1]).attr("width",extent[1][0]-extent[0][0]).attr("height",extent[1][1]-extent[0][1])})),group.selectAll(".selection").data([brush_type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var handle=group.selectAll(".handle").data(dim.handles,(function(d){return d.type}));handle.exit().remove(),handle.enter().append("rect").attr("class",(function(d){return"handle handle--"+d.type})).attr("cursor",(function(d){return cursors[d.type]})),group.each(redraw).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",started).filter(touchable).on("touchstart.brush",started).on("touchmove.brush",touchmoved).on("touchend.brush touchcancel.brush",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function redraw(){var group=src_select(this),selection=local(this).selection;selection?(group.selectAll(".selection").style("display",null).attr("x",selection[0][0]).attr("y",selection[0][1]).attr("width",selection[1][0]-selection[0][0]).attr("height",selection[1][1]-selection[0][1]),group.selectAll(".handle").style("display",null).attr("x",(function(d){return"e"===d.type[d.type.length-1]?selection[1][0]-handleSize/2:selection[0][0]-handleSize/2})).attr("y",(function(d){return"s"===d.type[0]?selection[1][1]-handleSize/2:selection[0][1]-handleSize/2})).attr("width",(function(d){return"n"===d.type||"s"===d.type?selection[1][0]-selection[0][0]+handleSize:handleSize})).attr("height",(function(d){return"e"===d.type||"w"===d.type?selection[1][1]-selection[0][1]+handleSize:handleSize}))):group.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function emitter(that,args,clean){var emit=that.__brush.emitter;return!emit||clean&&emit.clean?new Emitter(that,args,clean):emit}function Emitter(that,args,clean){this.that=that,this.args=args,this.state=that.__brush,this.active=0,this.clean=clean}function started(event){if((!touchending||event.touches)&&filter.apply(this,arguments)){var w0,w1,n0,n1,e0,e1,s0,s1,moving,lockX,lockY,that=this,type=event.target.__data__.type,mode="selection"===(keys&&event.metaKey?type="overlay":type)?MODE_DRAG:keys&&event.altKey?MODE_CENTER:MODE_HANDLE,signX=dim===brush_Y?null:signsX[type],signY=dim===brush_X?null:signsY[type],state=local(that),extent=state.extent,selection=state.selection,W=extent[0][0],N=extent[0][1],E=extent[1][0],S=extent[1][1],dx=0,dy=0,shifting=signX&&signY&&keys&&event.shiftKey,points=Array.from(event.touches||[event],(t=>{const i=t.identifier;return(t=pointer(t,that)).point0=t.slice(),t.identifier=i,t}));if("overlay"===type){selection&&(moving=!0);const pts=[points[0],points[1]||points[0]];state.selection=selection=[[w0=dim===brush_Y?W:brush_min(pts[0][0],pts[1][0]),n0=dim===brush_X?N:brush_min(pts[0][1],pts[1][1])],[e0=dim===brush_Y?E:brush_max(pts[0][0],pts[1][0]),s0=dim===brush_X?S:brush_max(pts[0][1],pts[1][1])]],points.length>1&&move()}else w0=selection[0][0],n0=selection[0][1],e0=selection[1][0],s0=selection[1][1];w1=w0,n1=n0,e1=e0,s1=s0;var group=src_select(that).attr("pointer-events","none"),overlay=group.selectAll(".overlay").attr("cursor",cursors[type]);interrupt(that);var emit=emitter(that,arguments,!0).beforestart();if(event.touches)emit.moved=moved,emit.ended=ended;else{var view=src_select(event.view).on("mousemove.brush",moved,!0).on("mouseup.brush",ended,!0);keys&&view.on("keydown.brush",keydowned,!0).on("keyup.brush",keyupped,!0),nodrag(event.view)}redraw.call(that),emit.start(event,mode.name)}function moved(event){for(const p of event.changedTouches||[event])for(const d of points)d.identifier===p.identifier&&(d.cur=pointer(p,that));if(shifting&&!lockX&&!lockY&&1===points.length){const point=points[0];abs(point.cur[0]-point[0])>abs(point.cur[1]-point[1])?lockY=!0:lockX=!0}for(const point of points)point.cur&&(point[0]=point.cur[0],point[1]=point.cur[1]);moving=!0,src_noevent(event),move(event)}function move(event){const point=points[0],point0=point.point0;var t;switch(dx=point[0]-point0[0],dy=point[1]-point0[1],mode){case MODE_SPACE:case MODE_DRAG:signX&&(dx=brush_max(W-w0,brush_min(E-e0,dx)),w1=w0+dx,e1=e0+dx),signY&&(dy=brush_max(N-n0,brush_min(S-s0,dy)),n1=n0+dy,s1=s0+dy);break;case MODE_HANDLE:points[1]?(signX&&(w1=brush_max(W,brush_min(E,points[0][0])),e1=brush_max(W,brush_min(E,points[1][0])),signX=1),signY&&(n1=brush_max(N,brush_min(S,points[0][1])),s1=brush_max(N,brush_min(S,points[1][1])),signY=1)):(signX<0?(dx=brush_max(W-w0,brush_min(E-w0,dx)),w1=w0+dx,e1=e0):signX>0&&(dx=brush_max(W-e0,brush_min(E-e0,dx)),w1=w0,e1=e0+dx),signY<0?(dy=brush_max(N-n0,brush_min(S-n0,dy)),n1=n0+dy,s1=s0):signY>0&&(dy=brush_max(N-s0,brush_min(S-s0,dy)),n1=n0,s1=s0+dy));break;case MODE_CENTER:signX&&(w1=brush_max(W,brush_min(E,w0-dx*signX)),e1=brush_max(W,brush_min(E,e0+dx*signX))),signY&&(n1=brush_max(N,brush_min(S,n0-dy*signY)),s1=brush_max(N,brush_min(S,s0+dy*signY)))}e1<w1&&(signX*=-1,t=w0,w0=e0,e0=t,t=w1,w1=e1,e1=t,type in flipX&&overlay.attr("cursor",cursors[type=flipX[type]])),s1<n1&&(signY*=-1,t=n0,n0=s0,s0=t,t=n1,n1=s1,s1=t,type in flipY&&overlay.attr("cursor",cursors[type=flipY[type]])),state.selection&&(selection=state.selection),lockX&&(w1=selection[0][0],e1=selection[1][0]),lockY&&(n1=selection[0][1],s1=selection[1][1]),selection[0][0]===w1&&selection[0][1]===n1&&selection[1][0]===e1&&selection[1][1]===s1||(state.selection=[[w1,n1],[e1,s1]],redraw.call(that),emit.brush(event,mode.name))}function ended(event){if(noevent_nopropagation(event),event.touches){if(event.touches.length)return;touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500)}else yesdrag(event.view,moving),view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);group.attr("pointer-events","all"),overlay.attr("cursor",cursors.overlay),state.selection&&(selection=state.selection),brush_empty(selection)&&(state.selection=null,redraw.call(that)),emit.end(event,mode.name)}function keydowned(event){switch(event.keyCode){case 16:shifting=signX&&signY;break;case 18:mode===MODE_HANDLE&&(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER,move());break;case 32:mode!==MODE_HANDLE&&mode!==MODE_CENTER||(signX<0?e0=e1-dx:signX>0&&(w0=w1-dx),signY<0?s0=s1-dy:signY>0&&(n0=n1-dy),mode=MODE_SPACE,overlay.attr("cursor",cursors.selection),move());break;default:return}src_noevent(event)}function keyupped(event){switch(event.keyCode){case 16:shifting&&(lockX=lockY=shifting=!1,move());break;case 18:mode===MODE_CENTER&&(signX<0?e0=e1:signX>0&&(w0=w1),signY<0?s0=s1:signY>0&&(n0=n1),mode=MODE_HANDLE,move());break;case 32:mode===MODE_SPACE&&(event.altKey?(signX&&(e0=e1-dx*signX,w0=w1+dx*signX),signY&&(s0=s1-dy*signY,n0=n1+dy*signY),mode=MODE_CENTER):(signX<0?e0=e1:signX>0&&(w0=w1),signY<0?s0=s1:signY>0&&(n0=n1),mode=MODE_HANDLE),overlay.attr("cursor",cursors[type]),move());break;default:return}src_noevent(event)}}function touchmoved(event){emitter(this,arguments).moved(event)}function touchended(event){emitter(this,arguments).ended(event)}function initialize(){var state=this.__brush||{selection:null};return state.extent=number2(extent.apply(this,arguments)),state.dim=dim,state}return brush.move=function(group,selection){group.tween?group.on("start.brush",(function(event){emitter(this,arguments).beforestart().start(event)})).on("interrupt.brush end.brush",(function(event){emitter(this,arguments).end(event)})).tween("brush",(function(){var that=this,state=that.__brush,emit=emitter(that,arguments),selection0=state.selection,selection1=dim.input("function"==typeof selection?selection.apply(this,arguments):selection,state.extent),i=src_value(selection0,selection1);function tween(t){state.selection=1===t&&null===selection1?null:i(t),redraw.call(that),emit.brush()}return null!==selection0&&null!==selection1?tween:tween(1)})):group.each((function(){var that=this,args=arguments,state=that.__brush,selection1=dim.input("function"==typeof selection?selection.apply(that,args):selection,state.extent),emit=emitter(that,args).beforestart();interrupt(that),state.selection=null===selection1?null:selection1,redraw.call(that),emit.start().brush().end()}))},brush.clear=function(group){brush.move(group,null)},Emitter.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(event,mode){return this.starting?(this.starting=!1,this.emit("start",event,mode)):this.emit("brush",event),this},brush:function(event,mode){return this.emit("brush",event,mode),this},end:function(event,mode){return 0==--this.active&&(delete this.state.emitter,this.emit("end",event,mode)),this},emit:function(type,event,mode){var d=src_select(this.that).datum();listeners.call(type,this.that,new BrushEvent(type,{sourceEvent:event,target:brush,selection:dim.output(this.state.selection),mode:mode,dispatch:listeners}),d)}},brush.extent=function(_){return arguments.length?(extent="function"==typeof _?_:d3_brush_src_constant(number2(_)),brush):extent},brush.filter=function(_){return arguments.length?(filter="function"==typeof _?_:d3_brush_src_constant(!!_),brush):filter},brush.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:d3_brush_src_constant(!!_),brush):touchable},brush.handleSize=function(_){return arguments.length?(handleSize=+_,brush):handleSize},brush.keyModifiers=function(_){return arguments.length?(keys=!!_,brush):keys},brush.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?brush:value},brush}var math_abs=Math.abs,cos=Math.cos,sin=Math.sin,pi=Math.PI,halfPi=pi/2,tau=2*pi,math_max=Math.max;function chord_range(i,j){return Array.from({length:j-i},((_,k)=>i+k))}function compareValue(compare){return function(a,b){return compare(a.source.value+a.target.value,b.source.value+b.target.value)}}var src_chord=function(){return chord_chord(!1,!1)};function chordTranspose(){return chord_chord(!1,!0)}function chordDirected(){return chord_chord(!0,!1)}function chord_chord(directed,transpose){var padAngle=0,sortGroups=null,sortSubgroups=null,sortChords=null;function chord(matrix){var dx,n=matrix.length,groupSums=new Array(n),groupIndex=chord_range(0,n),chords=new Array(n*n),groups=new Array(n),k=0;matrix=Float64Array.from({length:n*n},transpose?(_,i)=>matrix[i%n][i/n|0]:(_,i)=>matrix[i/n|0][i%n]);for(let i=0;i<n;++i){let x=0;for(let j=0;j<n;++j)x+=matrix[i*n+j]+directed*matrix[j*n+i];k+=groupSums[i]=x}dx=(k=math_max(0,tau-padAngle*n)/k)?padAngle:tau/n;{let x=0;sortGroups&&groupIndex.sort(((a,b)=>sortGroups(groupSums[a],groupSums[b])));for(const i of groupIndex){const x0=x;if(directed){const subgroupIndex=chord_range(1+~n,n).filter((j=>j<0?matrix[~j*n+i]:matrix[i*n+j]));sortSubgroups&&subgroupIndex.sort(((a,b)=>sortSubgroups(a<0?-matrix[~a*n+i]:matrix[i*n+a],b<0?-matrix[~b*n+i]:matrix[i*n+b])));for(const j of subgroupIndex)if(j<0){(chords[~j*n+i]||(chords[~j*n+i]={source:null,target:null})).target={index:i,startAngle:x,endAngle:x+=matrix[~j*n+i]*k,value:matrix[~j*n+i]}}else{(chords[i*n+j]||(chords[i*n+j]={source:null,target:null})).source={index:i,startAngle:x,endAngle:x+=matrix[i*n+j]*k,value:matrix[i*n+j]}}groups[i]={index:i,startAngle:x0,endAngle:x,value:groupSums[i]}}else{const subgroupIndex=chord_range(0,n).filter((j=>matrix[i*n+j]||matrix[j*n+i]));sortSubgroups&&subgroupIndex.sort(((a,b)=>sortSubgroups(matrix[i*n+a],matrix[i*n+b])));for(const j of subgroupIndex){let chord;if(i<j?(chord=chords[i*n+j]||(chords[i*n+j]={source:null,target:null}),chord.source={index:i,startAngle:x,endAngle:x+=matrix[i*n+j]*k,value:matrix[i*n+j]}):(chord=chords[j*n+i]||(chords[j*n+i]={source:null,target:null}),chord.target={index:i,startAngle:x,endAngle:x+=matrix[i*n+j]*k,value:matrix[i*n+j]},i===j&&(chord.source=chord.target)),chord.source&&chord.target&&chord.source.value<chord.target.value){const source=chord.source;chord.source=chord.target,chord.target=source}}groups[i]={index:i,startAngle:x0,endAngle:x,value:groupSums[i]}}x+=dx}}return(chords=Object.values(chords)).groups=groups,sortChords?chords.sort(sortChords):chords}return chord.padAngle=function(_){return arguments.length?(padAngle=math_max(0,_),chord):padAngle},chord.sortGroups=function(_){return arguments.length?(sortGroups=_,chord):sortGroups},chord.sortSubgroups=function(_){return arguments.length?(sortSubgroups=_,chord):sortSubgroups},chord.sortChords=function(_){return arguments.length?(null==_?sortChords=null:(sortChords=compareValue(_))._=_,chord):sortChords&&sortChords._},chord}const path_pi=Math.PI,path_tau=2*path_pi,tauEpsilon=path_tau-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path_path(){return new Path}Path.prototype=path_path.prototype={constructor:Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r){var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((path_pi-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y,ccw=!!ccw;var dx=(r=+r)*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(da<0&&(da=da%path_tau+path_tau),da>tauEpsilon?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r+","+r+",0,"+ +(da>=path_pi)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};var src_path=path_path,src_array_slice=Array.prototype.slice,d3_chord_src_constant=function(x){return function(){return x}};function defaultSource(d){return d.source}function defaultTarget(d){return d.target}function defaultRadius(d){return d.radius}function defaultStartAngle(d){return d.startAngle}function defaultEndAngle(d){return d.endAngle}function defaultPadAngle(){return 0}function defaultArrowheadRadius(){return 10}function ribbon_ribbon(headRadius){var source=defaultSource,target=defaultTarget,sourceRadius=defaultRadius,targetRadius=defaultRadius,startAngle=defaultStartAngle,endAngle=defaultEndAngle,padAngle=defaultPadAngle,context=null;function ribbon(){var buffer,s=source.apply(this,arguments),t=target.apply(this,arguments),ap=padAngle.apply(this,arguments)/2,argv=src_array_slice.call(arguments),sr=+sourceRadius.apply(this,(argv[0]=s,argv)),sa0=startAngle.apply(this,argv)-halfPi,sa1=endAngle.apply(this,argv)-halfPi,tr=+targetRadius.apply(this,(argv[0]=t,argv)),ta0=startAngle.apply(this,argv)-halfPi,ta1=endAngle.apply(this,argv)-halfPi;if(context||(context=buffer=src_path()),ap>1e-12&&(math_abs(sa1-sa0)>2*ap+1e-12?sa1>sa0?(sa0+=ap,sa1-=ap):(sa0-=ap,sa1+=ap):sa0=sa1=(sa0+sa1)/2,math_abs(ta1-ta0)>2*ap+1e-12?ta1>ta0?(ta0+=ap,ta1-=ap):(ta0-=ap,ta1+=ap):ta0=ta1=(ta0+ta1)/2),context.moveTo(sr*cos(sa0),sr*sin(sa0)),context.arc(0,0,sr,sa0,sa1),sa0!==ta0||sa1!==ta1)if(headRadius){var hr=+headRadius.apply(this,arguments),tr2=tr-hr,ta2=(ta0+ta1)/2;context.quadraticCurveTo(0,0,tr2*cos(ta0),tr2*sin(ta0)),context.lineTo(tr*cos(ta2),tr*sin(ta2)),context.lineTo(tr2*cos(ta1),tr2*sin(ta1))}else context.quadraticCurveTo(0,0,tr*cos(ta0),tr*sin(ta0)),context.arc(0,0,tr,ta0,ta1);if(context.quadraticCurveTo(0,0,sr*cos(sa0),sr*sin(sa0)),context.closePath(),buffer)return context=null,buffer+""||null}return headRadius&&(ribbon.headRadius=function(_){return arguments.length?(headRadius="function"==typeof _?_:d3_chord_src_constant(+_),ribbon):headRadius}),ribbon.radius=function(_){return arguments.length?(sourceRadius=targetRadius="function"==typeof _?_:d3_chord_src_constant(+_),ribbon):sourceRadius},ribbon.sourceRadius=function(_){return arguments.length?(sourceRadius="function"==typeof _?_:d3_chord_src_constant(+_),ribbon):sourceRadius},ribbon.targetRadius=function(_){return arguments.length?(targetRadius="function"==typeof _?_:d3_chord_src_constant(+_),ribbon):targetRadius},ribbon.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:d3_chord_src_constant(+_),ribbon):startAngle},ribbon.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:d3_chord_src_constant(+_),ribbon):endAngle},ribbon.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:d3_chord_src_constant(+_),ribbon):padAngle},ribbon.source=function(_){return arguments.length?(source=_,ribbon):source},ribbon.target=function(_){return arguments.length?(target=_,ribbon):target},ribbon.context=function(_){return arguments.length?(context=null==_?null:_,ribbon):context},ribbon}var src_ribbon=function(){return ribbon_ribbon()};function ribbonArrow(){return ribbon_ribbon(defaultArrowheadRadius)}const radians=Math.PI/180,math_degrees=180/Math.PI,lab_t1=6/29;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);o instanceof Rgb||(o=rgbConvert(o));var x,z,r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/1);return r===g&&g===b?x=z=y:(x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/.96422),z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/.82521)),new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function gray(l,opacity){return new Lab(l,0,0,null==opacity?1:opacity)}function lab(l,a,b,opacity){return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity)}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity}function xyz2lab(t){return t>.008856451679035631?Math.pow(t,1/3):t/.12841854934601665+.13793103448275862}function lab2xyz(t){return t>lab_t1?t*t*t:.12841854934601665*(t-.13793103448275862)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(o instanceof Lab||(o=labConvert(o)),0===o.a&&0===o.b)return new Hcl(NaN,0<o.l&&o.l<100?0:NaN,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*math_degrees;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function lch(l,c,h,opacity){return 1===arguments.length?hclConvert(l):new Hcl(h,c,l,null==opacity?1:opacity)}function hcl(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*radians;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+18*(null==k?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-18*(null==k?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(x=.96422*lab2xyz(x))-1.6168667*(y=1*lab2xyz(y))-.4906146*(z=.82521*lab2xyz(z))),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}})),define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+18*(null==k?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-18*(null==k?1:k),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}));var C=-.29227,ED=-1.7884503806,EB=3.5172982438,BC_DA=-.6557636667999999;function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof Rgb||(o=rgbConvert(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(1.97294*(g-l)-C*bl)/-.90649,s=Math.sqrt(k*k+bl*bl)/(1.97294*l*(1-l)),h=s?Math.atan2(k,bl)*math_degrees-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}function cubehelix_cubehelix(h,s,l,opacity){return 1===arguments.length?cubehelixConvert(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}define(Cubehelix,cubehelix_cubehelix,extend(Color,{brighter:function(k){return k=null==k?brighter:Math.pow(brighter,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*radians,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(-.14861*cosh+1.78277*sinh)),255*(l+a*(C*cosh+-.90649*sinh)),255*(l+a*(1.97294*cosh)),this.opacity)}}));var d3_contour_src_array_slice=Array.prototype.slice,src_ascending=function(a,b){return a-b},d3_contour_src_constant=x=>()=>x,contains=function(ring,hole){for(var c,i=-1,n=hole.length;++i<n;)if(c=ringContains(ring,hole[i]))return c;return 0};function ringContains(ring,point){for(var x=point[0],y=point[1],contains=-1,i=0,n=ring.length,j=n-1;i<n;j=i++){var pi=ring[i],xi=pi[0],yi=pi[1],pj=ring[j],xj=pj[0],yj=pj[1];if(segmentContains(pi,pj,point))return 0;yi>y!=yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi&&(contains=-contains)}return contains}function segmentContains(a,b,c){var i,p,q,r;return function(a,b,c){return(b[0]-a[0])*(c[1]-a[1])==(c[0]-a[0])*(b[1]-a[1])}(a,b,c)&&(p=a[i=+(a[0]===b[0])],q=c[i],r=b[i],p<=q&&q<=r||r<=q&&q<=p)}var src_noop=function(){},cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],src_contours=function(){var dx=1,dy=1,threshold=sturges,smooth=smoothLinear;function contours(values){var tz=threshold(values);if(Array.isArray(tz))tz=tz.slice().sort(src_ascending);else{var domain=src_extent(values),start=domain[0],stop=domain[1];tz=tickStep(start,stop,tz),tz=src_range(Math.floor(start/tz)*tz,Math.floor(stop/tz)*tz,tz)}return tz.map((function(value){return contour(values,value)}))}function contour(values,value){var polygons=[],holes=[];return function(values,value,callback){var x,y,t0,t1,t2,t3,fragmentByStart=new Array,fragmentByEnd=new Array;x=y=-1,t1=values[0]>=value,cases[t1<<1].forEach(stitch);for(;++x<dx-1;)t0=t1,t1=values[x+1]>=value,cases[t0|t1<<1].forEach(stitch);cases[t1<<0].forEach(stitch);for(;++y<dy-1;){for(x=-1,t1=values[y*dx+dx]>=value,t2=values[y*dx]>=value,cases[t1<<1|t2<<2].forEach(stitch);++x<dx-1;)t0=t1,t1=values[y*dx+dx+x+1]>=value,t3=t2,t2=values[y*dx+x+1]>=value,cases[t0|t1<<1|t2<<2|t3<<3].forEach(stitch);cases[t1|t2<<3].forEach(stitch)}x=-1,t2=values[y*dx]>=value,cases[t2<<2].forEach(stitch);for(;++x<dx-1;)t3=t2,t2=values[y*dx+x+1]>=value,cases[t2<<2|t3<<3].forEach(stitch);function stitch(line){var f,g,start=[line[0][0]+x,line[0][1]+y],end=[line[1][0]+x,line[1][1]+y],startIndex=index(start),endIndex=index(end);(f=fragmentByEnd[startIndex])?(g=fragmentByStart[endIndex])?(delete fragmentByEnd[f.end],delete fragmentByStart[g.start],f===g?(f.ring.push(end),callback(f.ring)):fragmentByStart[f.start]=fragmentByEnd[g.end]={start:f.start,end:g.end,ring:f.ring.concat(g.ring)}):(delete fragmentByEnd[f.end],f.ring.push(end),fragmentByEnd[f.end=endIndex]=f):(f=fragmentByStart[endIndex])?(g=fragmentByEnd[startIndex])?(delete fragmentByStart[f.start],delete fragmentByEnd[g.end],f===g?(f.ring.push(end),callback(f.ring)):fragmentByStart[g.start]=fragmentByEnd[f.end]={start:g.start,end:f.end,ring:g.ring.concat(f.ring)}):(delete fragmentByStart[f.start],f.ring.unshift(start),fragmentByStart[f.start=startIndex]=f):fragmentByStart[startIndex]=fragmentByEnd[endIndex]={start:startIndex,end:endIndex,ring:[start,end]}}cases[t2<<3].forEach(stitch)}(values,value,(function(ring){smooth(ring,values,value),function(ring){for(var i=0,n=ring.length,area=ring[n-1][1]*ring[0][0]-ring[n-1][0]*ring[0][1];++i<n;)area+=ring[i-1][1]*ring[i][0]-ring[i-1][0]*ring[i][1];return area}(ring)>0?polygons.push([ring]):holes.push(ring)})),holes.forEach((function(hole){for(var polygon,i=0,n=polygons.length;i<n;++i)if(-1!==contains((polygon=polygons[i])[0],hole))return void polygon.push(hole)})),{type:"MultiPolygon",value:value,coordinates:polygons}}function index(point){return 2*point[0]+point[1]*(dx+1)*4}function smoothLinear(ring,values,value){ring.forEach((function(point){var v0,x=point[0],y=point[1],xt=0|x,yt=0|y,v1=values[yt*dx+xt];x>0&&x<dx&&xt===x&&(v0=values[yt*dx+xt-1],point[0]=x+(value-v0)/(v1-v0)-.5),y>0&&y<dy&&yt===y&&(v0=values[(yt-1)*dx+xt],point[1]=y+(value-v0)/(v1-v0)-.5)}))}return contours.contour=contour,contours.size=function(_){if(!arguments.length)return[dx,dy];var _0=Math.floor(_[0]),_1=Math.floor(_[1]);if(!(_0>=0&&_1>=0))throw new Error("invalid size");return dx=_0,dy=_1,contours},contours.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:Array.isArray(_)?d3_contour_src_constant(d3_contour_src_array_slice.call(_)):d3_contour_src_constant(_),contours):threshold},contours.smooth=function(_){return arguments.length?(smooth=_?smoothLinear:src_noop,contours):smooth===smoothLinear},contours};function blurX(source,target,r){for(var n=source.width,m=source.height,w=1+(r<<1),j=0;j<m;++j)for(var i=0,sr=0;i<n+r;++i)i<n&&(sr+=source.data[i+j*n]),i>=r&&(i>=w&&(sr-=source.data[i-w+j*n]),target.data[i-r+j*n]=sr/Math.min(i+1,n-1+w-i,w))}function blurY(source,target,r){for(var n=source.width,m=source.height,w=1+(r<<1),i=0;i<n;++i)for(var j=0,sr=0;j<m+r;++j)j<m&&(sr+=source.data[i+j*n]),j>=r&&(j>=w&&(sr-=source.data[i+(j-w)*n]),target.data[i+(j-r)*n]=sr/Math.min(j+1,m-1+w-j,w))}function defaultX(d){return d[0]}function defaultY(d){return d[1]}function defaultWeight(){return 1}var src_density=function(){var x=defaultX,y=defaultY,weight=defaultWeight,dx=960,dy=500,r=20,k=2,o=3*r,n=dx+2*o>>k,m=dy+2*o>>k,threshold=d3_contour_src_constant(20);function density(data){var values0=new Float32Array(n*m),values1=new Float32Array(n*m);data.forEach((function(d,i,data){var xi=+x(d,i,data)+o>>k,yi=+y(d,i,data)+o>>k,wi=+weight(d,i,data);xi>=0&&xi<n&&yi>=0&&yi<m&&(values0[xi+yi*n]+=wi)})),blurX({width:n,height:m,data:values0},{width:n,height:m,data:values1},r>>k),blurY({width:n,height:m,data:values1},{width:n,height:m,data:values0},r>>k),blurX({width:n,height:m,data:values0},{width:n,height:m,data:values1},r>>k),blurY({width:n,height:m,data:values1},{width:n,height:m,data:values0},r>>k),blurX({width:n,height:m,data:values0},{width:n,height:m,data:values1},r>>k),blurY({width:n,height:m,data:values1},{width:n,height:m,data:values0},r>>k);var tz=threshold(values0);if(!Array.isArray(tz)){var stop=max_max(values0);tz=tickStep(0,stop,tz),(tz=src_range(0,Math.floor(stop/tz)*tz,tz)).shift()}return src_contours().thresholds(tz).size([n,m])(values0).map(transform)}function transform(geometry){return geometry.value*=Math.pow(2,-2*k),geometry.coordinates.forEach(transformPolygon),geometry}function transformPolygon(coordinates){coordinates.forEach(transformRing)}function transformRing(coordinates){coordinates.forEach(transformPoint)}function transformPoint(coordinates){coordinates[0]=coordinates[0]*Math.pow(2,k)-o,coordinates[1]=coordinates[1]*Math.pow(2,k)-o}function resize(){return n=dx+2*(o=3*r)>>k,m=dy+2*o>>k,density}return density.x=function(_){return arguments.length?(x="function"==typeof _?_:d3_contour_src_constant(+_),density):x},density.y=function(_){return arguments.length?(y="function"==typeof _?_:d3_contour_src_constant(+_),density):y},density.weight=function(_){return arguments.length?(weight="function"==typeof _?_:d3_contour_src_constant(+_),density):weight},density.size=function(_){if(!arguments.length)return[dx,dy];var _0=+_[0],_1=+_[1];if(!(_0>=0&&_1>=0))throw new Error("invalid size");return dx=_0,dy=_1,resize()},density.cellSize=function(_){if(!arguments.length)return 1<<k;if(!((_=+_)>=1))throw new Error("invalid cell size");return k=Math.floor(Math.log(_)/Math.LN2),resize()},density.thresholds=function(_){return arguments.length?(threshold="function"==typeof _?_:Array.isArray(_)?d3_contour_src_constant(d3_contour_src_array_slice.call(_)):d3_contour_src_constant(_),density):threshold},density.bandwidth=function(_){if(!arguments.length)return Math.sqrt(r*(r+1));if(!((_=+_)>=0))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*_*_+1)-1)/2),resize()},density};const EPSILON=Math.pow(2,-52),EDGE_STACK=new Uint32Array(512);class Delaunator{static from(points,getX=defaultGetX,getY=defaultGetY){const n=points.length,coords=new Float64Array(2*n);for(let i=0;i<n;i++){const p=points[i];coords[2*i]=getX(p),coords[2*i+1]=getY(p)}return new Delaunator(coords)}constructor(coords){const n=coords.length>>1;if(n>0&&"number"!=typeof coords[0])throw new Error("Expected coords to contain numbers.");this.coords=coords;const maxTriangles=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*maxTriangles),this._halfedges=new Int32Array(3*maxTriangles),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:coords,_hullPrev:hullPrev,_hullNext:hullNext,_hullTri:hullTri,_hullHash:hullHash}=this,n=coords.length>>1;let minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0;for(let i=0;i<n;i++){const x=coords[2*i],y=coords[2*i+1];x<minX&&(minX=x),y<minY&&(minY=y),x>maxX&&(maxX=x),y>maxY&&(maxY=y),this._ids[i]=i}const cx=(minX+maxX)/2,cy=(minY+maxY)/2;let i0,i1,i2,minDist=1/0;for(let i=0;i<n;i++){const d=dist(cx,cy,coords[2*i],coords[2*i+1]);d<minDist&&(i0=i,minDist=d)}const i0x=coords[2*i0],i0y=coords[2*i0+1];minDist=1/0;for(let i=0;i<n;i++){if(i===i0)continue;const d=dist(i0x,i0y,coords[2*i],coords[2*i+1]);d<minDist&&d>0&&(i1=i,minDist=d)}let i1x=coords[2*i1],i1y=coords[2*i1+1],minRadius=1/0;for(let i=0;i<n;i++){if(i===i0||i===i1)continue;const r=circumradius(i0x,i0y,i1x,i1y,coords[2*i],coords[2*i+1]);r<minRadius&&(i2=i,minRadius=r)}let i2x=coords[2*i2],i2y=coords[2*i2+1];if(minRadius===1/0){for(let i=0;i<n;i++)this._dists[i]=coords[2*i]-coords[0]||coords[2*i+1]-coords[1];quicksort(this._ids,this._dists,0,n-1);const hull=new Uint32Array(n);let j=0;for(let i=0,d0=-1/0;i<n;i++){const id=this._ids[i];this._dists[id]>d0&&(hull[j++]=id,d0=this._dists[id])}return this.hull=hull.subarray(0,j),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(delaunator_orient(i0x,i0y,i1x,i1y,i2x,i2y)){const i=i1,x=i1x,y=i1y;i1=i2,i1x=i2x,i1y=i2y,i2=i,i2x=x,i2y=y}const center=function(ax,ay,bx,by,cx,cy){const dx=bx-ax,dy=by-ay,ex=cx-ax,ey=cy-ay,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,d=.5/(dx*ey-dy*ex);return{x:ax+(ey*bl-dy*cl)*d,y:ay+(dx*cl-ex*bl)*d}}(i0x,i0y,i1x,i1y,i2x,i2y);this._cx=center.x,this._cy=center.y;for(let i=0;i<n;i++)this._dists[i]=dist(coords[2*i],coords[2*i+1],center.x,center.y);quicksort(this._ids,this._dists,0,n-1),this._hullStart=i0;let hullSize=3;hullNext[i0]=hullPrev[i2]=i1,hullNext[i1]=hullPrev[i0]=i2,hullNext[i2]=hullPrev[i1]=i0,hullTri[i0]=0,hullTri[i1]=1,hullTri[i2]=2,hullHash.fill(-1),hullHash[this._hashKey(i0x,i0y)]=i0,hullHash[this._hashKey(i1x,i1y)]=i1,hullHash[this._hashKey(i2x,i2y)]=i2,this.trianglesLen=0,this._addTriangle(i0,i1,i2,-1,-1,-1);for(let xp,yp,k=0;k<this._ids.length;k++){const i=this._ids[k],x=coords[2*i],y=coords[2*i+1];if(k>0&&Math.abs(x-xp)<=EPSILON&&Math.abs(y-yp)<=EPSILON)continue;if(xp=x,yp=y,i===i0||i===i1||i===i2)continue;let start=0;for(let j=0,key=this._hashKey(x,y);j<this._hashSize&&(start=hullHash[(key+j)%this._hashSize],-1===start||start===hullNext[start]);j++);start=hullPrev[start];let q,e=start;for(;q=hullNext[e],!delaunator_orient(x,y,coords[2*e],coords[2*e+1],coords[2*q],coords[2*q+1]);)if(e=q,e===start){e=-1;break}if(-1===e)continue;let t=this._addTriangle(e,i,hullNext[e],-1,-1,hullTri[e]);hullTri[i]=this._legalize(t+2),hullTri[e]=t,hullSize++;let n=hullNext[e];for(;q=hullNext[n],delaunator_orient(x,y,coords[2*n],coords[2*n+1],coords[2*q],coords[2*q+1]);)t=this._addTriangle(n,i,q,hullTri[i],-1,hullTri[n]),hullTri[i]=this._legalize(t+2),hullNext[n]=n,hullSize--,n=q;if(e===start)for(;q=hullPrev[e],delaunator_orient(x,y,coords[2*q],coords[2*q+1],coords[2*e],coords[2*e+1]);)t=this._addTriangle(q,i,e,-1,hullTri[e],hullTri[q]),this._legalize(t+2),hullTri[q]=t,hullNext[e]=e,hullSize--,e=q;this._hullStart=hullPrev[i]=e,hullNext[e]=hullPrev[n]=i,hullNext[i]=n,hullHash[this._hashKey(x,y)]=i,hullHash[this._hashKey(coords[2*e],coords[2*e+1])]=e}this.hull=new Uint32Array(hullSize);for(let i=0,e=this._hullStart;i<hullSize;i++)this.hull[i]=e,e=hullNext[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(x,y){return Math.floor(function(dx,dy){const p=dx/(Math.abs(dx)+Math.abs(dy));return(dy>0?3-p:1+p)/4}(x-this._cx,y-this._cy)*this._hashSize)%this._hashSize}_legalize(a){const{_triangles:triangles,_halfedges:halfedges,coords:coords}=this;let i=0,ar=0;for(;;){const b=halfedges[a],a0=a-a%3;if(ar=a0+(a+2)%3,-1===b){if(0===i)break;a=EDGE_STACK[--i];continue}const b0=b-b%3,al=a0+(a+1)%3,bl=b0+(b+2)%3,p0=triangles[ar],pr=triangles[a],pl=triangles[al],p1=triangles[bl];if(inCircle(coords[2*p0],coords[2*p0+1],coords[2*pr],coords[2*pr+1],coords[2*pl],coords[2*pl+1],coords[2*p1],coords[2*p1+1])){triangles[a]=p1,triangles[b]=p0;const hbl=halfedges[bl];if(-1===hbl){let e=this._hullStart;do{if(this._hullTri[e]===bl){this._hullTri[e]=a;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(a,hbl),this._link(b,halfedges[ar]),this._link(ar,bl);const br=b0+(b+1)%3;i<EDGE_STACK.length&&(EDGE_STACK[i++]=br)}else{if(0===i)break;a=EDGE_STACK[--i]}}return ar}_link(a,b){this._halfedges[a]=b,-1!==b&&(this._halfedges[b]=a)}_addTriangle(i0,i1,i2,a,b,c){const t=this.trianglesLen;return this._triangles[t]=i0,this._triangles[t+1]=i1,this._triangles[t+2]=i2,this._link(t,a),this._link(t+1,b),this._link(t+2,c),this.trianglesLen+=3,t}}function dist(ax,ay,bx,by){const dx=ax-bx,dy=ay-by;return dx*dx+dy*dy}function orientIfSure(px,py,rx,ry,qx,qy){const l=(ry-py)*(qx-px),r=(rx-px)*(qy-py);return Math.abs(l-r)>=33306690738754716e-32*Math.abs(l+r)?l-r:0}function delaunator_orient(rx,ry,qx,qy,px,py){return(orientIfSure(px,py,rx,ry,qx,qy)||orientIfSure(rx,ry,qx,qy,px,py)||orientIfSure(qx,qy,px,py,rx,ry))<0}function inCircle(ax,ay,bx,by,cx,cy,px,py){const dx=ax-px,dy=ay-py,ex=bx-px,ey=by-py,fx=cx-px,fy=cy-py,bp=ex*ex+ey*ey,cp=fx*fx+fy*fy;return dx*(ey*cp-bp*fy)-dy*(ex*cp-bp*fx)+(dx*dx+dy*dy)*(ex*fy-ey*fx)<0}function circumradius(ax,ay,bx,by,cx,cy){const dx=bx-ax,dy=by-ay,ex=cx-ax,ey=cy-ay,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,d=.5/(dx*ey-dy*ex),x=(ey*bl-dy*cl)*d,y=(dx*cl-ex*bl)*d;return x*x+y*y}function quicksort(ids,dists,left,right){if(right-left<=20)for(let i=left+1;i<=right;i++){const temp=ids[i],tempDist=dists[temp];let j=i-1;for(;j>=left&&dists[ids[j]]>tempDist;)ids[j+1]=ids[j--];ids[j+1]=temp}else{let i=left+1,j=right;delaunator_swap(ids,left+right>>1,i),dists[ids[left]]>dists[ids[right]]&&delaunator_swap(ids,left,right),dists[ids[i]]>dists[ids[right]]&&delaunator_swap(ids,i,right),dists[ids[left]]>dists[ids[i]]&&delaunator_swap(ids,left,i);const temp=ids[i],tempDist=dists[temp];for(;;){do{i++}while(dists[ids[i]]<tempDist);do{j--}while(dists[ids[j]]>tempDist);if(j<i)break;delaunator_swap(ids,i,j)}ids[left+1]=ids[j],ids[j]=temp,right-i+1>=j-left?(quicksort(ids,dists,i,right),quicksort(ids,dists,left,j-1)):(quicksort(ids,dists,left,j-1),quicksort(ids,dists,i,right))}}function delaunator_swap(arr,i,j){const tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function defaultGetX(p){return p[0]}function defaultGetY(p){return p[1]}class path_Path{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(x,y){this._+=`M${this._x0=this._x1=+x},${this._y0=this._y1=+y}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(x,y){this._+=`L${this._x1=+x},${this._y1=+y}`}arc(x,y,r){const x0=(x=+x)+(r=+r),y0=y=+y;if(r<0)throw new Error("negative radius");null===this._x1?this._+=`M${x0},${y0}`:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(this._+=`A${r},${r},0,1,1,${x-r},${y}A${r},${r},0,1,1,${this._x1=x0},${this._y1=y0}`)}rect(x,y,w,h){this._+=`M${this._x0=this._x1=+x},${this._y0=this._y1=+y}h${+w}v${+h}h${-w}Z`}value(){return this._||null}}class Polygon{constructor(){this._=[]}moveTo(x,y){this._.push([x,y])}closePath(){this._.push(this._[0].slice())}lineTo(x,y){this._.push([x,y])}value(){return this._.length?this._:null}}class voronoi_Voronoi{constructor(delaunay,[xmin,ymin,xmax,ymax]=[0,0,960,500]){if(!((xmax=+xmax)>=(xmin=+xmin)&&(ymax=+ymax)>=(ymin=+ymin)))throw new Error("invalid bounds");this.delaunay=delaunay,this._circumcenters=new Float64Array(2*delaunay.points.length),this.vectors=new Float64Array(2*delaunay.points.length),this.xmax=xmax,this.xmin=xmin,this.ymax=ymax,this.ymin=ymin,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:points,hull:hull,triangles:triangles},vectors:vectors}=this,circumcenters=this.circumcenters=this._circumcenters.subarray(0,triangles.length/3*2);for(let x,y,i=0,j=0,n=triangles.length;i<n;i+=3,j+=2){const t1=2*triangles[i],t2=2*triangles[i+1],t3=2*triangles[i+2],x1=points[t1],y1=points[t1+1],x2=points[t2],y2=points[t2+1],x3=points[t3],y3=points[t3+1],dx=x2-x1,dy=y2-y1,ex=x3-x1,ey=y3-y1,bl=dx*dx+dy*dy,cl=ex*ex+ey*ey,ab=2*(dx*ey-dy*ex);if(ab)if(Math.abs(ab)<1e-8)x=(x1+x3)/2,y=(y1+y3)/2;else{const d=1/ab;x=x1+(ey*bl-dy*cl)*d,y=y1+(dx*cl-ex*bl)*d}else x=(x1+x3)/2-1e8*ey,y=(y1+y3)/2+1e8*ex;circumcenters[j]=x,circumcenters[j+1]=y}let p0,x0,y0,h=hull[hull.length-1],p1=4*h,x1=points[2*h],y1=points[2*h+1];vectors.fill(0);for(let i=0;i<hull.length;++i)h=hull[i],p0=p1,x0=x1,y0=y1,p1=4*h,x1=points[2*h],y1=points[2*h+1],vectors[p0+2]=vectors[p1]=y0-y1,vectors[p0+3]=vectors[p1+1]=x1-x0}render(context){const buffer=null==context?context=new path_Path:void 0,{delaunay:{halfedges:halfedges,inedges:inedges,hull:hull},circumcenters:circumcenters,vectors:vectors}=this;if(hull.length<=1)return null;for(let i=0,n=halfedges.length;i<n;++i){const j=halfedges[i];if(j<i)continue;const ti=2*Math.floor(i/3),tj=2*Math.floor(j/3),xi=circumcenters[ti],yi=circumcenters[ti+1],xj=circumcenters[tj],yj=circumcenters[tj+1];this._renderSegment(xi,yi,xj,yj,context)}let h0,h1=hull[hull.length-1];for(let i=0;i<hull.length;++i){h0=h1,h1=hull[i];const t=2*Math.floor(inedges[h1]/3),x=circumcenters[t],y=circumcenters[t+1],v=4*h0,p=this._project(x,y,vectors[v+2],vectors[v+3]);p&&this._renderSegment(x,y,p[0],p[1],context)}return buffer&&buffer.value()}renderBounds(context){const buffer=null==context?context=new path_Path:void 0;return context.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),buffer&&buffer.value()}renderCell(i,context){const buffer=null==context?context=new path_Path:void 0,points=this._clip(i);if(null===points||!points.length)return;context.moveTo(points[0],points[1]);let n=points.length;for(;points[0]===points[n-2]&&points[1]===points[n-1]&&n>1;)n-=2;for(let i=2;i<n;i+=2)points[i]===points[i-2]&&points[i+1]===points[i-1]||context.lineTo(points[i],points[i+1]);return context.closePath(),buffer&&buffer.value()}*cellPolygons(){const{delaunay:{points:points}}=this;for(let i=0,n=points.length/2;i<n;++i){const cell=this.cellPolygon(i);cell&&(cell.index=i,yield cell)}}cellPolygon(i){const polygon=new Polygon;return this.renderCell(i,polygon),polygon.value()}_renderSegment(x0,y0,x1,y1,context){let S;const c0=this._regioncode(x0,y0),c1=this._regioncode(x1,y1);0===c0&&0===c1?(context.moveTo(x0,y0),context.lineTo(x1,y1)):(S=this._clipSegment(x0,y0,x1,y1,c0,c1))&&(context.moveTo(S[0],S[1]),context.lineTo(S[2],S[3]))}contains(i,x,y){return(x=+x)==x&&(y=+y)==y&&this.delaunay._step(i,x,y)===i}*neighbors(i){const ci=this._clip(i);if(ci)for(const j of this.delaunay.neighbors(i)){const cj=this._clip(j);if(cj)loop:for(let ai=0,li=ci.length;ai<li;ai+=2)for(let aj=0,lj=cj.length;aj<lj;aj+=2)if(ci[ai]==cj[aj]&&ci[ai+1]==cj[aj+1]&&ci[(ai+2)%li]==cj[(aj+lj-2)%lj]&&ci[(ai+3)%li]==cj[(aj+lj-1)%lj]){yield j;break loop}}}_cell(i){const{circumcenters:circumcenters,delaunay:{inedges:inedges,halfedges:halfedges,triangles:triangles}}=this,e0=inedges[i];if(-1===e0)return null;const points=[];let e=e0;do{const t=Math.floor(e/3);if(points.push(circumcenters[2*t],circumcenters[2*t+1]),e=e%3==2?e-2:e+1,triangles[e]!==i)break;e=halfedges[e]}while(e!==e0&&-1!==e);return points}_clip(i){if(0===i&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const points=this._cell(i);if(null===points)return null;const{vectors:V}=this,v=4*i;return V[v]||V[v+1]?this._clipInfinite(i,points,V[v],V[v+1],V[v+2],V[v+3]):this._clipFinite(i,points)}_clipFinite(i,points){const n=points.length;let x0,y0,c0,e0,e1,P=null,x1=points[n-2],y1=points[n-1],c1=this._regioncode(x1,y1);for(let j=0;j<n;j+=2)if(x0=x1,y0=y1,x1=points[j],y1=points[j+1],c0=c1,c1=this._regioncode(x1,y1),0===c0&&0===c1)e0=e1,e1=0,P?P.push(x1,y1):P=[x1,y1];else{let S,sx0,sy0,sx1,sy1;if(0===c0){if(null===(S=this._clipSegment(x0,y0,x1,y1,c0,c1)))continue;[sx0,sy0,sx1,sy1]=S}else{if(null===(S=this._clipSegment(x1,y1,x0,y0,c1,c0)))continue;[sx1,sy1,sx0,sy0]=S,e0=e1,e1=this._edgecode(sx0,sy0),e0&&e1&&this._edge(i,e0,e1,P,P.length),P?P.push(sx0,sy0):P=[sx0,sy0]}e0=e1,e1=this._edgecode(sx1,sy1),e0&&e1&&this._edge(i,e0,e1,P,P.length),P?P.push(sx1,sy1):P=[sx1,sy1]}if(P)e0=e1,e1=this._edgecode(P[0],P[1]),e0&&e1&&this._edge(i,e0,e1,P,P.length);else if(this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return P}_clipSegment(x0,y0,x1,y1,c0,c1){for(;;){if(0===c0&&0===c1)return[x0,y0,x1,y1];if(c0&c1)return null;let x,y,c=c0||c1;8&c?(x=x0+(x1-x0)*(this.ymax-y0)/(y1-y0),y=this.ymax):4&c?(x=x0+(x1-x0)*(this.ymin-y0)/(y1-y0),y=this.ymin):2&c?(y=y0+(y1-y0)*(this.xmax-x0)/(x1-x0),x=this.xmax):(y=y0+(y1-y0)*(this.xmin-x0)/(x1-x0),x=this.xmin),c0?(x0=x,y0=y,c0=this._regioncode(x0,y0)):(x1=x,y1=y,c1=this._regioncode(x1,y1))}}_clipInfinite(i,points,vx0,vy0,vxn,vyn){let p,P=Array.from(points);if((p=this._project(P[0],P[1],vx0,vy0))&&P.unshift(p[0],p[1]),(p=this._project(P[P.length-2],P[P.length-1],vxn,vyn))&&P.push(p[0],p[1]),P=this._clipFinite(i,P))for(let c0,j=0,n=P.length,c1=this._edgecode(P[n-2],P[n-1]);j<n;j+=2)c0=c1,c1=this._edgecode(P[j],P[j+1]),c0&&c1&&(j=this._edge(i,c0,c1,P,j),n=P.length);else this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(P=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return P}_edge(i,e0,e1,P,j){for(;e0!==e1;){let x,y;switch(e0){case 5:e0=4;continue;case 4:e0=6,x=this.xmax,y=this.ymin;break;case 6:e0=2;continue;case 2:e0=10,x=this.xmax,y=this.ymax;break;case 10:e0=8;continue;case 8:e0=9,x=this.xmin,y=this.ymax;break;case 9:e0=1;continue;case 1:e0=5,x=this.xmin,y=this.ymin}P[j]===x&&P[j+1]===y||!this.contains(i,x,y)||(P.splice(j,0,x,y),j+=2)}if(P.length>4)for(let i=0;i<P.length;i+=2){const j=(i+2)%P.length,k=(i+4)%P.length;(P[i]===P[j]&&P[j]===P[k]||P[i+1]===P[j+1]&&P[j+1]===P[k+1])&&(P.splice(j,2),i-=2)}return j}_project(x0,y0,vx,vy){let c,x,y,t=1/0;if(vy<0){if(y0<=this.ymin)return null;(c=(this.ymin-y0)/vy)<t&&(y=this.ymin,x=x0+(t=c)*vx)}else if(vy>0){if(y0>=this.ymax)return null;(c=(this.ymax-y0)/vy)<t&&(y=this.ymax,x=x0+(t=c)*vx)}if(vx>0){if(x0>=this.xmax)return null;(c=(this.xmax-x0)/vx)<t&&(x=this.xmax,y=y0+(t=c)*vy)}else if(vx<0){if(x0<=this.xmin)return null;(c=(this.xmin-x0)/vx)<t&&(x=this.xmin,y=y0+(t=c)*vy)}return[x,y]}_edgecode(x,y){return(x===this.xmin?1:x===this.xmax?2:0)|(y===this.ymin?4:y===this.ymax?8:0)}_regioncode(x,y){return(x<this.xmin?1:x>this.xmax?2:0)|(y<this.ymin?4:y>this.ymax?8:0)}}const delaunay_tau=2*Math.PI,pow=Math.pow;function pointX(p){return p[0]}function pointY(p){return p[1]}function jitter(x,y,r){return[x+Math.sin(x+y)*r,y+Math.cos(x-y)*r]}class delaunay_Delaunay{static from(points,fx=pointX,fy=pointY,that){return new delaunay_Delaunay("length"in points?function(points,fx,fy,that){const n=points.length,array=new Float64Array(2*n);for(let i=0;i<n;++i){const p=points[i];array[2*i]=fx.call(that,p,i,points),array[2*i+1]=fy.call(that,p,i,points)}return array}(points,fx,fy,that):Float64Array.from(function*(points,fx,fy,that){let i=0;for(const p of points)yield fx.call(that,p,i,points),yield fy.call(that,p,i,points),++i}(points,fx,fy,that)))}constructor(points){this._delaunator=new Delaunator(points),this.inedges=new Int32Array(points.length/2),this._hullIndex=new Int32Array(points.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const d=this._delaunator,points=this.points;if(d.hull&&d.hull.length>2&&function(d){const{triangles:triangles,coords:coords}=d;for(let i=0;i<triangles.length;i+=3){const a=2*triangles[i],b=2*triangles[i+1],c=2*triangles[i+2];if((coords[c]-coords[a])*(coords[b+1]-coords[a+1])-(coords[b]-coords[a])*(coords[c+1]-coords[a+1])>1e-10)return!1}return!0}(d)){this.collinear=Int32Array.from({length:points.length/2},((_,i)=>i)).sort(((i,j)=>points[2*i]-points[2*j]||points[2*i+1]-points[2*j+1]));const e=this.collinear[0],f=this.collinear[this.collinear.length-1],bounds=[points[2*e],points[2*e+1],points[2*f],points[2*f+1]],r=1e-8*Math.hypot(bounds[3]-bounds[1],bounds[2]-bounds[0]);for(let i=0,n=points.length/2;i<n;++i){const p=jitter(points[2*i],points[2*i+1],r);points[2*i]=p[0],points[2*i+1]=p[1]}this._delaunator=new Delaunator(points)}else delete this.collinear;const halfedges=this.halfedges=this._delaunator.halfedges,hull=this.hull=this._delaunator.hull,triangles=this.triangles=this._delaunator.triangles,inedges=this.inedges.fill(-1),hullIndex=this._hullIndex.fill(-1);for(let e=0,n=halfedges.length;e<n;++e){const p=triangles[e%3==2?e-2:e+1];-1!==halfedges[e]&&-1!==inedges[p]||(inedges[p]=e)}for(let i=0,n=hull.length;i<n;++i)hullIndex[hull[i]]=i;hull.length<=2&&hull.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=hull[0],this.triangles[1]=hull[1],this.triangles[2]=hull[1],inedges[hull[0]]=1,2===hull.length&&(inedges[hull[1]]=0))}voronoi(bounds){return new voronoi_Voronoi(this,bounds)}*neighbors(i){const{inedges:inedges,hull:hull,_hullIndex:_hullIndex,halfedges:halfedges,triangles:triangles,collinear:collinear}=this;if(collinear){const l=collinear.indexOf(i);return l>0&&(yield collinear[l-1]),void(l<collinear.length-1&&(yield collinear[l+1]))}const e0=inedges[i];if(-1===e0)return;let e=e0,p0=-1;do{if(yield p0=triangles[e],e=e%3==2?e-2:e+1,triangles[e]!==i)return;if(e=halfedges[e],-1===e){const p=hull[(_hullIndex[i]+1)%hull.length];return void(p!==p0&&(yield p))}}while(e!==e0)}find(x,y,i=0){if((x=+x)!=x||(y=+y)!=y)return-1;const i0=i;let c;for(;(c=this._step(i,x,y))>=0&&c!==i&&c!==i0;)i=c;return c}_step(i,x,y){const{inedges:inedges,hull:hull,_hullIndex:_hullIndex,halfedges:halfedges,triangles:triangles,points:points}=this;if(-1===inedges[i]||!points.length)return(i+1)%(points.length>>1);let c=i,dc=pow(x-points[2*i],2)+pow(y-points[2*i+1],2);const e0=inedges[i];let e=e0;do{let t=triangles[e];const dt=pow(x-points[2*t],2)+pow(y-points[2*t+1],2);if(dt<dc&&(dc=dt,c=t),e=e%3==2?e-2:e+1,triangles[e]!==i)break;if(e=halfedges[e],-1===e){if(e=hull[(_hullIndex[i]+1)%hull.length],e!==t&&pow(x-points[2*e],2)+pow(y-points[2*e+1],2)<dc)return e;break}}while(e!==e0);return c}render(context){const buffer=null==context?context=new path_Path:void 0,{points:points,halfedges:halfedges,triangles:triangles}=this;for(let i=0,n=halfedges.length;i<n;++i){const j=halfedges[i];if(j<i)continue;const ti=2*triangles[i],tj=2*triangles[j];context.moveTo(points[ti],points[ti+1]),context.lineTo(points[tj],points[tj+1])}return this.renderHull(context),buffer&&buffer.value()}renderPoints(context,r=2){const buffer=null==context?context=new path_Path:void 0,{points:points}=this;for(let i=0,n=points.length;i<n;i+=2){const x=points[i],y=points[i+1];context.moveTo(x+r,y),context.arc(x,y,r,0,delaunay_tau)}return buffer&&buffer.value()}renderHull(context){const buffer=null==context?context=new path_Path:void 0,{hull:hull,points:points}=this,h=2*hull[0],n=hull.length;context.moveTo(points[h],points[h+1]);for(let i=1;i<n;++i){const h=2*hull[i];context.lineTo(points[h],points[h+1])}return context.closePath(),buffer&&buffer.value()}hullPolygon(){const polygon=new Polygon;return this.renderHull(polygon),polygon.value()}renderTriangle(i,context){const buffer=null==context?context=new path_Path:void 0,{points:points,triangles:triangles}=this,t0=2*triangles[i*=3],t1=2*triangles[i+1],t2=2*triangles[i+2];return context.moveTo(points[t0],points[t0+1]),context.lineTo(points[t1],points[t1+1]),context.lineTo(points[t2],points[t2+1]),context.closePath(),buffer&&buffer.value()}*trianglePolygons(){const{triangles:triangles}=this;for(let i=0,n=triangles.length/3;i<n;++i)yield this.trianglePolygon(i)}trianglePolygon(i){const polygon=new Polygon;return this.renderTriangle(i,polygon),polygon.value()}}var d3_drag_src_constant=x=>()=>x;function DragEvent(type,{sourceEvent:sourceEvent,subject:subject,target:target,identifier:identifier,active:active,x:x,y:y,dx:dx,dy:dy,dispatch:dispatch}){Object.defineProperties(this,{type:{value:type,enumerable:!0,configurable:!0},sourceEvent:{value:sourceEvent,enumerable:!0,configurable:!0},subject:{value:subject,enumerable:!0,configurable:!0},target:{value:target,enumerable:!0,configurable:!0},identifier:{value:identifier,enumerable:!0,configurable:!0},active:{value:active,enumerable:!0,configurable:!0},x:{value:x,enumerable:!0,configurable:!0},y:{value:y,enumerable:!0,configurable:!0},dx:{value:dx,enumerable:!0,configurable:!0},dy:{value:dy,enumerable:!0,configurable:!0},_:{value:dispatch}})}function drag_defaultFilter(event){return!event.ctrlKey&&!event.button}function defaultContainer(){return this.parentNode}function defaultSubject(event,d){return null==d?{x:event.x,y:event.y}:d}function drag_defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}DragEvent.prototype.on=function(){var value=this._.on.apply(this._,arguments);return value===this._?this:value};var src_drag=function(){var mousedownx,mousedowny,mousemoving,touchending,filter=drag_defaultFilter,container=defaultContainer,subject=defaultSubject,touchable=drag_defaultTouchable,gestures={},listeners=src_dispatch("start","drag","end"),active=0,clickDistance2=0;function drag(selection){selection.on("mousedown.drag",mousedowned).filter(touchable).on("touchstart.drag",touchstarted).on("touchmove.drag",touchmoved).on("touchend.drag touchcancel.drag",touchended).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function mousedowned(event,d){if(!touchending&&filter.call(this,event,d)){var gesture=beforestart(this,container.call(this,event,d),event,d,"mouse");gesture&&(src_select(event.view).on("mousemove.drag",mousemoved,!0).on("mouseup.drag",mouseupped,!0),nodrag(event.view),nopropagation(event),mousemoving=!1,mousedownx=event.clientX,mousedowny=event.clientY,gesture("start",event))}}function mousemoved(event){if(noevent(event),!mousemoving){var dx=event.clientX-mousedownx,dy=event.clientY-mousedowny;mousemoving=dx*dx+dy*dy>clickDistance2}gestures.mouse("drag",event)}function mouseupped(event){src_select(event.view).on("mousemove.drag mouseup.drag",null),yesdrag(event.view,mousemoving),noevent(event),gestures.mouse("end",event)}function touchstarted(event,d){if(filter.call(this,event,d)){var i,gesture,touches=event.changedTouches,c=container.call(this,event,d),n=touches.length;for(i=0;i<n;++i)(gesture=beforestart(this,c,event,d,touches[i].identifier,touches[i]))&&(nopropagation(event),gesture("start",event,touches[i]))}}function touchmoved(event){var i,gesture,touches=event.changedTouches,n=touches.length;for(i=0;i<n;++i)(gesture=gestures[touches[i].identifier])&&(noevent(event),gesture("drag",event,touches[i]))}function touchended(event){var i,gesture,touches=event.changedTouches,n=touches.length;for(touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500),i=0;i<n;++i)(gesture=gestures[touches[i].identifier])&&(nopropagation(event),gesture("end",event,touches[i]))}function beforestart(that,container,event,d,identifier,touch){var dx,dy,s,dispatch=listeners.copy(),p=pointer(touch||event,container);if(null!=(s=subject.call(that,new DragEvent("beforestart",{sourceEvent:event,target:drag,identifier:identifier,active:active,x:p[0],y:p[1],dx:0,dy:0,dispatch:dispatch}),d)))return dx=s.x-p[0]||0,dy=s.y-p[1]||0,function gesture(type,event,touch){var n,p0=p;switch(type){case"start":gestures[identifier]=gesture,n=active++;break;case"end":delete gestures[identifier],--active;case"drag":p=pointer(touch||event,container),n=active}dispatch.call(type,that,new DragEvent(type,{sourceEvent:event,subject:s,target:drag,identifier:identifier,active:n,x:p[0]+dx,y:p[1]+dy,dx:p[0]-p0[0],dy:p[1]-p0[1],dispatch:dispatch}),d)}}return drag.filter=function(_){return arguments.length?(filter="function"==typeof _?_:d3_drag_src_constant(!!_),drag):filter},drag.container=function(_){return arguments.length?(container="function"==typeof _?_:d3_drag_src_constant(_),drag):container},drag.subject=function(_){return arguments.length?(subject="function"==typeof _?_:d3_drag_src_constant(_),drag):subject},drag.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:d3_drag_src_constant(!!_),drag):touchable},drag.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?drag:value},drag.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,drag):Math.sqrt(clickDistance2)},drag},EOL={},EOF={};function objectConverter(columns){return new Function("d","return {"+columns.map((function(name,i){return JSON.stringify(name)+": d["+i+'] || ""'})).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach((function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)})),columns}function pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var year,hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":((year=date.getUTCFullYear())<0?"-"+pad(-year,6):year>9999?"+"+pad(year,6):pad(year,4))+"-"+pad(date.getUTCMonth()+1,2)+"-"+pad(date.getUTCDate(),2)+(milliseconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"."+pad(milliseconds,3)+"Z":seconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"Z":minutes||hours?"T"+pad(hours,2)+":"+pad(minutes,2)+"Z":"")}var dsv=function(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(34===text.charCodeAt(j)){for(;I++<N&&34!==text.charCodeAt(I)||34===text.charCodeAt(++I););return(i=I)>=N?eof=!0:10===(c=text.charCodeAt(I++))?eol=!0:13===c&&(eol=!0,10===text.charCodeAt(I)&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if(10===(c=text.charCodeAt(i=I++)))eol=!0;else if(13===c)eol=!0,10===text.charCodeAt(I)&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(10===text.charCodeAt(N-1)&&--N,13===text.charCodeAt(N-1)&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map((function(row){return columns.map((function(column){return formatValue(row[column])})).join(delimiter)}))}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function(text,f){var convert,columns,rows=parseRows(text,(function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)}));return rows.columns=columns||[],rows},parseRows:parseRows,format:function(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function(rows){return rows.map(formatRow).join("\n")},formatRow:formatRow,formatValue:formatValue}},csv=dsv(","),csvParse=csv.parse,csvParseRows=csv.parseRows,csvFormat=csv.format,csvFormatBody=csv.formatBody,csvFormatRows=csv.formatRows,csvFormatRow=csv.formatRow,csvFormatValue=csv.formatValue,tsv=dsv("\t"),tsvParse=tsv.parse,tsvParseRows=tsv.parseRows,tsvFormat=tsv.format,tsvFormatBody=tsv.formatBody,tsvFormatRows=tsv.formatRows,tsvFormatRow=tsv.formatRow,tsvFormatValue=tsv.formatValue;function autoType(object){for(var key in object){var number,m,value=object[key].trim();if(value)if("true"===value)value=!0;else if("false"===value)value=!1;else if("NaN"===value)value=NaN;else if(isNaN(number=+value)){if(!(m=value.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;fixtz&&m[4]&&!m[7]&&(value=value.replace(/-/g,"/").replace(/T/," ")),value=new Date(value)}else value=number;else value=null;object[key]=value}return object}const fixtz=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),linear_linear=t=>+t;function quadIn(t){return t*t}function quadOut(t){return t*(2-t)}function quadInOut(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var polyIn=function custom(e){function polyIn(t){return Math.pow(t,e)}return e=+e,polyIn.exponent=custom,polyIn}(3),polyOut=function custom(e){function polyOut(t){return 1-Math.pow(1-t,e)}return e=+e,polyOut.exponent=custom,polyOut}(3),polyInOut=function custom(e){function polyInOut(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,polyInOut.exponent=custom,polyInOut}(3),sin_pi=Math.PI,sin_halfPi=sin_pi/2;function sinIn(t){return 1==+t?1:1-Math.cos(t*sin_halfPi)}function sinOut(t){return Math.sin(t*sin_halfPi)}function sinInOut(t){return(1-Math.cos(sin_pi*t))/2}function tpmt(x){return 1.0009775171065494*(Math.pow(2,-10*x)-.0009765625)}function expIn(t){return tpmt(1-+t)}function expOut(t){return 1-tpmt(t)}function expInOut(t){return((t*=2)<=1?tpmt(1-t):2-tpmt(t-1))/2}function circleIn(t){return 1-Math.sqrt(1-t*t)}function circleOut(t){return Math.sqrt(1- --t*t)}function circleInOut(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function bounceIn(t){return 1-bounceOut(1-t)}function bounceOut(t){return(t=+t)<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375}function bounceInOut(t){return((t*=2)<=1?1-bounceOut(1-t):bounceOut(t-1)+1)/2}var backIn=function custom(s){function backIn(t){return(t=+t)*t*(s*(t-1)+t)}return s=+s,backIn.overshoot=custom,backIn}(1.70158),backOut=function custom(s){function backOut(t){return--t*t*((t+1)*s+t)+1}return s=+s,backOut.overshoot=custom,backOut}(1.70158),backInOut=function custom(s){function backInOut(t){return((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2}return s=+s,backInOut.overshoot=custom,backInOut}(1.70158),elastic_tau=2*Math.PI,elastic_elasticIn=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=elastic_tau);function elasticIn(t){return a*tpmt(- --t)*Math.sin((s-t)/p)}return elasticIn.amplitude=function(a){return custom(a,p*elastic_tau)},elasticIn.period=function(p){return custom(a,p)},elasticIn}(1,.3),elastic_elasticOut=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=elastic_tau);function elasticOut(t){return 1-a*tpmt(t=+t)*Math.sin((t+s)/p)}return elasticOut.amplitude=function(a){return custom(a,p*elastic_tau)},elasticOut.period=function(p){return custom(a,p)},elasticOut}(1,.3),elastic_elasticInOut=function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=elastic_tau);function elasticInOut(t){return((t=2*t-1)<0?a*tpmt(-t)*Math.sin((s-t)/p):2-a*tpmt(t)*Math.sin((s+t)/p))/2}return elasticInOut.amplitude=function(a){return custom(a,p*elastic_tau)},elasticInOut.period=function(p){return custom(a,p)},elasticInOut}(1,.3);function responseBlob(response){if(!response.ok)throw new Error(response.status+" "+response.statusText);return response.blob()}var blob=function(input,init){return fetch(input,init).then(responseBlob)};function responseArrayBuffer(response){if(!response.ok)throw new Error(response.status+" "+response.statusText);return response.arrayBuffer()}var src_buffer=function(input,init){return fetch(input,init).then(responseArrayBuffer)};function responseText(response){if(!response.ok)throw new Error(response.status+" "+response.statusText);return response.text()}var src_text=function(input,init){return fetch(input,init).then(responseText)};function dsvParse(parse){return function(input,init,row){return 2===arguments.length&&"function"==typeof init&&(row=init,init=void 0),src_text(input,init).then((function(response){return parse(response,row)}))}}function dsv_dsv(delimiter,input,init,row){3===arguments.length&&"function"==typeof init&&(row=init,init=void 0);var format=dsv(delimiter);return src_text(input,init).then((function(response){return format.parse(response,row)}))}var dsv_csv=dsvParse(csvParse),dsv_tsv=dsvParse(tsvParse),src_image=function(input,init){return new Promise((function(resolve,reject){var image=new Image;for(var key in init)image[key]=init[key];image.onerror=reject,image.onload=function(){resolve(image)},image.src=input}))};function responseJson(response){if(!response.ok)throw new Error(response.status+" "+response.statusText);if(204!==response.status&&205!==response.status)return response.json()}var json=function(input,init){return fetch(input,init).then(responseJson)};function parser(type){return(input,init)=>src_text(input,init).then((text=>(new DOMParser).parseFromString(text,type)))}var xml=parser("application/xml"),xml_html=parser("text/html"),xml_svg=parser("image/svg+xml"),src_center=function(x,y){var nodes,strength=1;function force(){var i,node,n=nodes.length,sx=0,sy=0;for(i=0;i<n;++i)sx+=(node=nodes[i]).x,sy+=node.y;for(sx=(sx/n-x)*strength,sy=(sy/n-y)*strength,i=0;i<n;++i)(node=nodes[i]).x-=sx,node.y-=sy}return null==x&&(x=0),null==y&&(y=0),force.initialize=function(_){nodes=_},force.x=function(_){return arguments.length?(x=+_,force):x},force.y=function(_){return arguments.length?(y=+_,force):y},force.strength=function(_){return arguments.length?(strength=+_,force):strength},force};function add_add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,xm,ym,xp,yp,right,bottom,i,j,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1;if(!node)return tree._root=leaf,tree;for(;node.length;)if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,tree;if(xp=+tree._x.call(null,node.data),yp=+tree._y.call(null,node.data),x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,tree;do{parent=parent?parent[i]=new Array(4):tree._root=new Array(4),(right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym}while((i=bottom<<1|right)==(j=(yp>=ym)<<1|xp>=xm));return parent[j]=node,parent[i]=leaf,tree}var src_quad=function(node,x0,y0,x1,y1){this.node=node,this.x0=x0,this.y0=y0,this.x1=x1,this.y1=y1};function x_defaultX(d){return d[0]}function y_defaultY(d){return d[1]}function quadtree(nodes,x,y){var tree=new Quadtree(null==x?x_defaultX:x,null==y?y_defaultY:y,NaN,NaN,NaN,NaN);return null==nodes?tree:tree.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x=x,this._y=y,this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this._root=void 0}function leaf_copy(leaf){for(var copy={data:leaf.data},next=copy;leaf=leaf.next;)next=next.next={data:leaf.data};return copy}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var nodes,child,copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root;if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),copy;for(nodes=[{source:node,target:copy._root=new Array(4)}];node=nodes.pop();)for(var i=0;i<4;++i)(child=node.source[i])&&(child.length?nodes.push({source:child,target:node.target[i]=new Array(4)}):node.target[i]=leaf_copy(child));return copy},treeProto.add=function(d){const x=+this._x.call(null,d),y=+this._y.call(null,d);return add_add(this.cover(x,y),x,y,d)},treeProto.addAll=function(data){var d,i,x,y,n=data.length,xz=new Array(n),yz=new Array(n),x0=1/0,y0=1/0,x1=-1/0,y1=-1/0;for(i=0;i<n;++i)isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d))||(xz[i]=x,yz[i]=y,x<x0&&(x0=x),x>x1&&(x1=x),y<y0&&(y0=y),y>y1&&(y1=y));if(x0>x1||y0>y1)return this;for(this.cover(x0,y0).cover(x1,y1),i=0;i<n;++i)add_add(this,xz[i],yz[i],data[i]);return this},treeProto.cover=function(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0))x1=(x0=Math.floor(x))+1,y1=(y0=Math.floor(y))+1;else{for(var parent,i,z=x1-x0||1,node=this._root;x0>x||x>=x1||y0>y||y>=y1;)switch(i=(y<y0)<<1|x<x0,(parent=new Array(4))[i]=node,node=parent,z*=2,i){case 0:x1=x0+z,y1=y0+z;break;case 1:x0=x1-z,y1=y0+z;break;case 2:x1=x0+z,y0=y1-z;break;case 3:x0=x1-z,y0=y1-z}this._root&&this._root.length&&(this._root=node)}return this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this},treeProto.data=function(){var data=[];return this.visit((function(node){if(!node.length)do{data.push(node.data)}while(node=node.next)})),data},treeProto.extent=function(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},treeProto.find=function(x,y,radius){var data,x1,y1,x2,y2,q,i,x0=this._x0,y0=this._y0,x3=this._x1,y3=this._y1,quads=[],node=this._root;for(node&&quads.push(new src_quad(node,x0,y0,x3,y3)),null==radius?radius=1/0:(x0=x-radius,y0=y-radius,x3=x+radius,y3=y+radius,radius*=radius);q=quads.pop();)if(!(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0))if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new src_quad(node[3],xm,ym,x2,y2),new src_quad(node[2],x1,ym,xm,y2),new src_quad(node[1],xm,y1,x2,ym),new src_quad(node[0],x1,y1,xm,ym)),(i=(y>=ym)<<1|x>=xm)&&(q=quads[quads.length-1],quads[quads.length-1]=quads[quads.length-1-i],quads[quads.length-1-i]=q)}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d,x3=x+d,y3=y+d,data=node.data}}return data},treeProto.remove=function(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var parent,retainer,previous,next,x,y,xm,ym,right,bottom,i,j,node=this._root,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(!node)return this;if(node.length)for(;;){if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return this;if(!node.length)break;(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])&&(retainer=parent,j=i)}for(;node.data!==d;)if(previous=node,!(node=node.next))return this;return(next=node.next)&&delete node.next,previous?(next?previous.next=next:delete previous.next,this):parent?(next?parent[i]=next:delete parent[i],(node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length&&(retainer?retainer[j]=node:this._root=node),this):(this._root=next,this)},treeProto.removeAll=function(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this},treeProto.root=function(){return this._root},treeProto.size=function(){var size=0;return this.visit((function(node){if(!node.length)do{++size}while(node=node.next)})),size},treeProto.visit=function(callback){var q,child,x0,y0,x1,y1,quads=[],node=this._root;for(node&&quads.push(new src_quad(node,this._x0,this._y0,this._x1,this._y1));q=quads.pop();)if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[3])&&quads.push(new src_quad(child,xm,ym,x1,y1)),(child=node[2])&&quads.push(new src_quad(child,x0,ym,xm,y1)),(child=node[1])&&quads.push(new src_quad(child,xm,y0,x1,ym)),(child=node[0])&&quads.push(new src_quad(child,x0,y0,xm,ym))}return this},treeProto.visitAfter=function(callback){var q,quads=[],next=[];for(this._root&&quads.push(new src_quad(this._root,this._x0,this._y0,this._x1,this._y1));q=quads.pop();){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[0])&&quads.push(new src_quad(child,x0,y0,xm,ym)),(child=node[1])&&quads.push(new src_quad(child,xm,y0,x1,ym)),(child=node[2])&&quads.push(new src_quad(child,x0,ym,xm,y1)),(child=node[3])&&quads.push(new src_quad(child,xm,ym,x1,y1))}next.push(q)}for(;q=next.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);return this},treeProto.x=function(_){return arguments.length?(this._x=_,this):this._x},treeProto.y=function(_){return arguments.length?(this._y=_,this):this._y};var d3_force_src_constant=function(x){return function(){return x}},jiggle=function(random){return 1e-6*(random()-.5)};function collide_x(d){return d.x+d.vx}function collide_y(d){return d.y+d.vy}var collide=function(radius){var nodes,radii,random,strength=1,iterations=1;function force(){for(var i,tree,node,xi,yi,ri,ri2,n=nodes.length,k=0;k<iterations;++k)for(tree=quadtree(nodes,collide_x,collide_y).visitAfter(prepare),i=0;i<n;++i)node=nodes[i],ri=radii[node.index],ri2=ri*ri,xi=node.x+node.vx,yi=node.y+node.vy,tree.visit(apply);function apply(quad,x0,y0,x1,y1){var data=quad.data,rj=quad.r,r=ri+rj;if(!data)return x0>xi+r||x1<xi-r||y0>yi+r||y1<yi-r;if(data.index>node.index){var x=xi-data.x-data.vx,y=yi-data.y-data.vy,l=x*x+y*y;l<r*r&&(0===x&&(l+=(x=jiggle(random))*x),0===y&&(l+=(y=jiggle(random))*y),l=(r-(l=Math.sqrt(l)))/l*strength,node.vx+=(x*=l)*(r=(rj*=rj)/(ri2+rj)),node.vy+=(y*=l)*r,data.vx-=x*(r=1-r),data.vy-=y*r)}}}function prepare(quad){if(quad.data)return quad.r=radii[quad.data.index];for(var i=quad.r=0;i<4;++i)quad[i]&&quad[i].r>quad.r&&(quad.r=quad[i].r)}function initialize(){if(nodes){var i,node,n=nodes.length;for(radii=new Array(n),i=0;i<n;++i)node=nodes[i],radii[node.index]=+radius(node,i,nodes)}}return"function"!=typeof radius&&(radius=d3_force_src_constant(null==radius?1:+radius)),force.initialize=function(_nodes,_random){nodes=_nodes,random=_random,initialize()},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength=+_,force):strength},force.radius=function(_){return arguments.length?(radius="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):radius},force};function link_index(d){return d.index}function link_find(nodeById,nodeId){var node=nodeById.get(nodeId);if(!node)throw new Error("node not found: "+nodeId);return node}var src_link=function(links){var strengths,distances,nodes,count,bias,random,id=link_index,strength=function(link){return 1/Math.min(count[link.source.index],count[link.target.index])},distance=d3_force_src_constant(30),iterations=1;function force(alpha){for(var k=0,n=links.length;k<iterations;++k)for(var link,source,target,x,y,l,b,i=0;i<n;++i)source=(link=links[i]).source,x=(target=link.target).x+target.vx-source.x-source.vx||jiggle(random),y=target.y+target.vy-source.y-source.vy||jiggle(random),x*=l=((l=Math.sqrt(x*x+y*y))-distances[i])/l*alpha*strengths[i],y*=l,target.vx-=x*(b=bias[i]),target.vy-=y*b,source.vx+=x*(b=1-b),source.vy+=y*b}function initialize(){if(nodes){var i,link,n=nodes.length,m=links.length,nodeById=new Map(nodes.map(((d,i)=>[id(d,i,nodes),d])));for(i=0,count=new Array(n);i<m;++i)(link=links[i]).index=i,"object"!=typeof link.source&&(link.source=link_find(nodeById,link.source)),"object"!=typeof link.target&&(link.target=link_find(nodeById,link.target)),count[link.source.index]=(count[link.source.index]||0)+1,count[link.target.index]=(count[link.target.index]||0)+1;for(i=0,bias=new Array(m);i<m;++i)link=links[i],bias[i]=count[link.source.index]/(count[link.source.index]+count[link.target.index]);strengths=new Array(m),initializeStrength(),distances=new Array(m),initializeDistance()}}function initializeStrength(){if(nodes)for(var i=0,n=links.length;i<n;++i)strengths[i]=+strength(links[i],i,links)}function initializeDistance(){if(nodes)for(var i=0,n=links.length;i<n;++i)distances[i]=+distance(links[i],i,links)}return null==links&&(links=[]),force.initialize=function(_nodes,_random){nodes=_nodes,random=_random,initialize()},force.links=function(_){return arguments.length?(links=_,initialize(),force):links},force.id=function(_){return arguments.length?(id=_,force):id},force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initializeStrength(),force):strength},force.distance=function(_){return arguments.length?(distance="function"==typeof _?_:d3_force_src_constant(+_),initializeDistance(),force):distance},force};function simulation_x(d){return d.x}function simulation_y(d){return d.y}var initialAngle=Math.PI*(3-Math.sqrt(5)),src_simulation=function(nodes){var simulation,alpha=1,alphaMin=.001,alphaDecay=1-Math.pow(alphaMin,1/300),alphaTarget=0,velocityDecay=.6,forces=new Map,stepper=timer(step),event=src_dispatch("tick","end"),random=function(){let s=1;return()=>(s=(1664525*s+1013904223)%4294967296)/4294967296}();function step(){tick(),event.call("tick",simulation),alpha<alphaMin&&(stepper.stop(),event.call("end",simulation))}function tick(iterations){var i,node,n=nodes.length;void 0===iterations&&(iterations=1);for(var k=0;k<iterations;++k)for(alpha+=(alphaTarget-alpha)*alphaDecay,forces.forEach((function(force){force(alpha)})),i=0;i<n;++i)null==(node=nodes[i]).fx?node.x+=node.vx*=velocityDecay:(node.x=node.fx,node.vx=0),null==node.fy?node.y+=node.vy*=velocityDecay:(node.y=node.fy,node.vy=0);return simulation}function initializeNodes(){for(var node,i=0,n=nodes.length;i<n;++i){if((node=nodes[i]).index=i,null!=node.fx&&(node.x=node.fx),null!=node.fy&&(node.y=node.fy),isNaN(node.x)||isNaN(node.y)){var radius=10*Math.sqrt(.5+i),angle=i*initialAngle;node.x=radius*Math.cos(angle),node.y=radius*Math.sin(angle)}(isNaN(node.vx)||isNaN(node.vy))&&(node.vx=node.vy=0)}}function initializeForce(force){return force.initialize&&force.initialize(nodes,random),force}return null==nodes&&(nodes=[]),initializeNodes(),simulation={tick:tick,restart:function(){return stepper.restart(step),simulation},stop:function(){return stepper.stop(),simulation},nodes:function(_){return arguments.length?(nodes=_,initializeNodes(),forces.forEach(initializeForce),simulation):nodes},alpha:function(_){return arguments.length?(alpha=+_,simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin=+_,simulation):alphaMin},alphaDecay:function(_){return arguments.length?(alphaDecay=+_,simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget=+_,simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay=1-_,simulation):1-velocityDecay},randomSource:function(_){return arguments.length?(random=_,forces.forEach(initializeForce),simulation):random},force:function(name,_){return arguments.length>1?(null==_?forces.delete(name):forces.set(name,initializeForce(_)),simulation):forces.get(name)},find:function(x,y,radius){var dx,dy,d2,node,closest,i=0,n=nodes.length;for(null==radius?radius=1/0:radius*=radius,i=0;i<n;++i)(d2=(dx=x-(node=nodes[i]).x)*dx+(dy=y-node.y)*dy)<radius&&(closest=node,radius=d2);return closest},on:function(name,_){return arguments.length>1?(event.on(name,_),simulation):event.on(name)}}},manyBody=function(){var nodes,node,random,alpha,strengths,strength=d3_force_src_constant(-30),distanceMin2=1,distanceMax2=1/0,theta2=.81;function force(_){var i,n=nodes.length,tree=quadtree(nodes,simulation_x,simulation_y).visitAfter(accumulate);for(alpha=_,i=0;i<n;++i)node=nodes[i],tree.visit(apply)}function initialize(){if(nodes){var i,node,n=nodes.length;for(strengths=new Array(n),i=0;i<n;++i)node=nodes[i],strengths[node.index]=+strength(node,i,nodes)}}function accumulate(quad){var q,c,x,y,i,strength=0,weight=0;if(quad.length){for(x=y=i=0;i<4;++i)(q=quad[i])&&(c=Math.abs(q.value))&&(strength+=q.value,weight+=c,x+=c*q.x,y+=c*q.y);quad.x=x/weight,quad.y=y/weight}else{(q=quad).x=q.data.x,q.y=q.data.y;do{strength+=strengths[q.data.index]}while(q=q.next)}quad.value=strength}function apply(quad,x1,_,x2){if(!quad.value)return!0;var x=quad.x-node.x,y=quad.y-node.y,w=x2-x1,l=x*x+y*y;if(w*w/theta2<l)return l<distanceMax2&&(0===x&&(l+=(x=jiggle(random))*x),0===y&&(l+=(y=jiggle(random))*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)),node.vx+=x*quad.value*alpha/l,node.vy+=y*quad.value*alpha/l),!0;if(!(quad.length||l>=distanceMax2)){(quad.data!==node||quad.next)&&(0===x&&(l+=(x=jiggle(random))*x),0===y&&(l+=(y=jiggle(random))*y),l<distanceMin2&&(l=Math.sqrt(distanceMin2*l)));do{quad.data!==node&&(w=strengths[quad.data.index]*alpha/l,node.vx+=x*w,node.vy+=y*w)}while(quad=quad.next)}}return force.initialize=function(_nodes,_random){nodes=_nodes,random=_random,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):strength},force.distanceMin=function(_){return arguments.length?(distanceMin2=_*_,force):Math.sqrt(distanceMin2)},force.distanceMax=function(_){return arguments.length?(distanceMax2=_*_,force):Math.sqrt(distanceMax2)},force.theta=function(_){return arguments.length?(theta2=_*_,force):Math.sqrt(theta2)},force},radial=function(radius,x,y){var nodes,strengths,radiuses,strength=d3_force_src_constant(.1);function force(alpha){for(var i=0,n=nodes.length;i<n;++i){var node=nodes[i],dx=node.x-x||1e-6,dy=node.y-y||1e-6,r=Math.sqrt(dx*dx+dy*dy),k=(radiuses[i]-r)*strengths[i]*alpha/r;node.vx+=dx*k,node.vy+=dy*k}}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),radiuses=new Array(n),i=0;i<n;++i)radiuses[i]=+radius(nodes[i],i,nodes),strengths[i]=isNaN(radiuses[i])?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof radius&&(radius=d3_force_src_constant(+radius)),null==x&&(x=0),null==y&&(y=0),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):strength},force.radius=function(_){return arguments.length?(radius="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):radius},force.x=function(_){return arguments.length?(x=+_,force):x},force.y=function(_){return arguments.length?(y=+_,force):y},force},d3_force_src_x=function(x){var nodes,strengths,xz,strength=d3_force_src_constant(.1);function force(alpha){for(var node,i=0,n=nodes.length;i<n;++i)(node=nodes[i]).vx+=(xz[i]-node.x)*strengths[i]*alpha}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),xz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(xz[i]=+x(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof x&&(x=d3_force_src_constant(null==x?0:+x)),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):strength},force.x=function(_){return arguments.length?(x="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):x},force},d3_force_src_y=function(y){var nodes,strengths,yz,strength=d3_force_src_constant(.1);function force(alpha){for(var node,i=0,n=nodes.length;i<n;++i)(node=nodes[i]).vy+=(yz[i]-node.y)*strengths[i]*alpha}function initialize(){if(nodes){var i,n=nodes.length;for(strengths=new Array(n),yz=new Array(n),i=0;i<n;++i)strengths[i]=isNaN(yz[i]=+y(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}return"function"!=typeof y&&(y=d3_force_src_constant(null==y?0:+y)),force.initialize=function(_){nodes=_,initialize()},force.strength=function(_){return arguments.length?(strength="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):strength},force.y=function(_){return arguments.length?(y="function"==typeof _?_:d3_force_src_constant(+_),initialize(),force):y},force};function formatDecimalParts(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]}var src_exponent=function(x){return(x=formatDecimalParts(Math.abs(x)))?x[1]:NaN},re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;return new FormatSpecifier({fill:match[1],align:match[2],sign:match[3],symbol:match[4],zero:match[5],width:match[6],comma:match[7],precision:match[8]&&match[8].slice(1),trim:match[9],type:match[10]})}function FormatSpecifier(specifier){this.fill=void 0===specifier.fill?" ":specifier.fill+"",this.align=void 0===specifier.align?">":specifier.align+"",this.sign=void 0===specifier.sign?"-":specifier.sign+"",this.symbol=void 0===specifier.symbol?"":specifier.symbol+"",this.zero=!!specifier.zero,this.width=void 0===specifier.width?void 0:+specifier.width,this.comma=!!specifier.comma,this.precision=void 0===specifier.precision?void 0:+specifier.precision,this.trim=!!specifier.trim,this.type=void 0===specifier.type?"":specifier.type+""}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var prefixExponent,defaultLocale_locale,defaultLocale_format,defaultLocale_formatPrefix,formatRounded=function(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")},formatTypes={"%":(x,p)=>(100*x).toFixed(p),b:x=>Math.round(x).toString(2),c:x=>x+"",d:function(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)},e:(x,p)=>x.toExponential(p),f:(x,p)=>x.toFixed(p),g:(x,p)=>x.toPrecision(p),o:x=>Math.round(x).toString(8),p:(x,p)=>formatRounded(100*x,p),r:formatRounded,s:function(x,p){var d=formatDecimalParts(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimalParts(x,Math.max(0,p+i-1))[0]},X:x=>Math.round(x).toString(16).toUpperCase(),x:x=>Math.round(x).toString(16)},d3_format_src_identity=function(x){return x},locale_map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],src_locale=function(locale){var grouping,thousands,group=void 0===locale.grouping||void 0===locale.thousands?d3_format_src_identity:(grouping=locale_map.call(locale.grouping,Number),thousands=locale.thousands+"",function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}),currencyPrefix=void 0===locale.currency?"":locale.currency[0]+"",currencySuffix=void 0===locale.currency?"":locale.currency[1]+"",decimal=void 0===locale.decimal?".":locale.decimal+"",numerals=void 0===locale.numerals?d3_format_src_identity:function(numerals){return function(value){return value.replace(/[0-9]/g,(function(i){return numerals[+i]}))}}(locale_map.call(locale.numerals,String)),percent=void 0===locale.percent?"%":locale.percent+"",minus=void 0===locale.minus?"":locale.minus+"",nan=void 0===locale.nan?"NaN":locale.nan+"";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(void 0===precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currencyPrefix:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currencySuffix:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0||1/value<0;if(value=isNaN(value)?nan:formatType(Math.abs(value),precision),trim&&(value=function(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(!+s[i])break out;i0>0&&(i0=0)}return i0>0?s.slice(0,i0)+s.slice(i1+1):s}(value)),valueNegative&&0==+value&&"+"!==sign&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:minus:"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=void 0===precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(src_exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}};function defaultLocale(definition){return defaultLocale_locale=src_locale(definition),defaultLocale_format=defaultLocale_locale.format,defaultLocale_formatPrefix=defaultLocale_locale.formatPrefix,defaultLocale_locale}defaultLocale({thousands:",",grouping:[3],currency:["$",""]});var precisionFixed=function(step){return Math.max(0,-src_exponent(Math.abs(step)))},precisionPrefix=function(step,value){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(src_exponent(value)/3)))-src_exponent(Math.abs(step)))},precisionRound=function(step,max){return step=Math.abs(step),max=Math.abs(max)-step,Math.max(0,src_exponent(max)-src_exponent(step))+1},math_pi=Math.PI,math_halfPi=math_pi/2,quarterPi=math_pi/4,math_tau=2*math_pi,src_math_degrees=180/math_pi,math_radians=math_pi/180,src_math_abs=Math.abs,atan=Math.atan,atan2=Math.atan2,math_cos=Math.cos,ceil=Math.ceil,exp=Math.exp,hypot=(Math.floor,Math.hypot),log=Math.log,math_pow=Math.pow,math_sin=Math.sin,math_sign=Math.sign||function(x){return x>0?1:x<0?-1:0},sqrt=Math.sqrt,tan=Math.tan;function acos(x){return x>1?0:x<-1?math_pi:Math.acos(x)}function asin(x){return x>1?math_halfPi:x<-1?-math_halfPi:Math.asin(x)}function haversin(x){return(x=math_sin(x/2))*x}function noop_noop(){}function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream)}var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream)}},streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}var area_lambda00,phi00,area_lambda0,area_cosPhi0,area_sinPhi0,src_stream=function(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream)},areaRingSum=new Adder,areaSum=new Adder,areaStream={point:noop_noop,lineStart:noop_noop,lineEnd:noop_noop,polygonStart:function(){areaRingSum=new Adder,areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){var areaRing=+areaRingSum;areaSum.add(areaRing<0?math_tau+areaRing:areaRing),this.lineStart=this.lineEnd=this.point=noop_noop},sphere:function(){areaSum.add(math_tau)}};function areaRingStart(){areaStream.point=areaPointFirst}function areaRingEnd(){areaPoint(area_lambda00,phi00)}function areaPointFirst(lambda,phi){areaStream.point=areaPoint,area_lambda00=lambda,phi00=phi,area_lambda0=lambda*=math_radians,area_cosPhi0=math_cos(phi=(phi*=math_radians)/2+quarterPi),area_sinPhi0=math_sin(phi)}function areaPoint(lambda,phi){var dLambda=(lambda*=math_radians)-area_lambda0,sdLambda=dLambda>=0?1:-1,adLambda=sdLambda*dLambda,cosPhi=math_cos(phi=(phi*=math_radians)/2+quarterPi),sinPhi=math_sin(phi),k=area_sinPhi0*sinPhi,u=area_cosPhi0*cosPhi+k*math_cos(adLambda),v=k*sdLambda*math_sin(adLambda);areaRingSum.add(atan2(v,u)),area_lambda0=lambda,area_cosPhi0=cosPhi,area_sinPhi0=sinPhi}var bounds_lambda0,bounds_phi0,bounds_lambda1,bounds_phi1,bounds_lambda2,bounds_lambda00,bounds_phi00,bounds_p0,deltaSum,ranges,bounds_range,d3_geo_src_area=function(object){return areaSum=new Adder,src_stream(object,areaStream),2*areaSum};function cartesian_spherical(cartesian){return[atan2(cartesian[1],cartesian[0]),asin(cartesian[2])]}function cartesian_cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=math_cos(phi);return[cosPhi*math_cos(lambda),cosPhi*math_sin(lambda),math_sin(phi)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function cartesianNormalizeInPlace(d){var l=sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}var boundsStream={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream.point=boundsRingPoint,boundsStream.lineStart=boundsRingStart,boundsStream.lineEnd=boundsRingEnd,deltaSum=new Adder,areaStream.polygonStart()},polygonEnd:function(){areaStream.polygonEnd(),boundsStream.point=boundsPoint,boundsStream.lineStart=boundsLineStart,boundsStream.lineEnd=boundsLineEnd,areaRingSum<0?(bounds_lambda0=-(bounds_lambda1=180),bounds_phi0=-(bounds_phi1=90)):deltaSum>1e-6?bounds_phi1=90:deltaSum<-1e-6&&(bounds_phi0=-90),bounds_range[0]=bounds_lambda0,bounds_range[1]=bounds_lambda1},sphere:function(){bounds_lambda0=-(bounds_lambda1=180),bounds_phi0=-(bounds_phi1=90)}};function boundsPoint(lambda,phi){ranges.push(bounds_range=[bounds_lambda0=lambda,bounds_lambda1=lambda]),phi<bounds_phi0&&(bounds_phi0=phi),phi>bounds_phi1&&(bounds_phi1=phi)}function bounds_linePoint(lambda,phi){var p=cartesian_cartesian([lambda*math_radians,phi*math_radians]);if(bounds_p0){var normal=cartesianCross(bounds_p0,p),inflection=cartesianCross([normal[1],-normal[0],0],normal);cartesianNormalizeInPlace(inflection),inflection=cartesian_spherical(inflection);var phii,delta=lambda-bounds_lambda2,sign=delta>0?1:-1,lambdai=inflection[0]*src_math_degrees*sign,antimeridian=src_math_abs(delta)>180;antimeridian^(sign*bounds_lambda2<lambdai&&lambdai<sign*lambda)?(phii=inflection[1]*src_math_degrees)>bounds_phi1&&(bounds_phi1=phii):antimeridian^(sign*bounds_lambda2<(lambdai=(lambdai+360)%360-180)&&lambdai<sign*lambda)?(phii=-inflection[1]*src_math_degrees)<bounds_phi0&&(bounds_phi0=phii):(phi<bounds_phi0&&(bounds_phi0=phi),phi>bounds_phi1&&(bounds_phi1=phi)),antimeridian?lambda<bounds_lambda2?bounds_angle(bounds_lambda0,lambda)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda1=lambda):bounds_angle(lambda,bounds_lambda1)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda0=lambda):bounds_lambda1>=bounds_lambda0?(lambda<bounds_lambda0&&(bounds_lambda0=lambda),lambda>bounds_lambda1&&(bounds_lambda1=lambda)):lambda>bounds_lambda2?bounds_angle(bounds_lambda0,lambda)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda1=lambda):bounds_angle(lambda,bounds_lambda1)>bounds_angle(bounds_lambda0,bounds_lambda1)&&(bounds_lambda0=lambda)}else ranges.push(bounds_range=[bounds_lambda0=lambda,bounds_lambda1=lambda]);phi<bounds_phi0&&(bounds_phi0=phi),phi>bounds_phi1&&(bounds_phi1=phi),bounds_p0=p,bounds_lambda2=lambda}function boundsLineStart(){boundsStream.point=bounds_linePoint}function boundsLineEnd(){bounds_range[0]=bounds_lambda0,bounds_range[1]=bounds_lambda1,boundsStream.point=boundsPoint,bounds_p0=null}function boundsRingPoint(lambda,phi){if(bounds_p0){var delta=lambda-bounds_lambda2;deltaSum.add(src_math_abs(delta)>180?delta+(delta>0?360:-360):delta)}else bounds_lambda00=lambda,bounds_phi00=phi;areaStream.point(lambda,phi),bounds_linePoint(lambda,phi)}function boundsRingStart(){areaStream.lineStart()}function boundsRingEnd(){boundsRingPoint(bounds_lambda00,bounds_phi00),areaStream.lineEnd(),src_math_abs(deltaSum)>1e-6&&(bounds_lambda0=-(bounds_lambda1=180)),bounds_range[0]=bounds_lambda0,bounds_range[1]=bounds_lambda1,bounds_p0=null}function bounds_angle(lambda0,lambda1){return(lambda1-=lambda0)<0?lambda1+360:lambda1}function rangeCompare(a,b){return a[0]-b[0]}function rangeContains(range,x){return range[0]<=range[1]?range[0]<=x&&x<=range[1]:x<range[0]||range[1]<x}var W0,W1,centroid_X0,centroid_Y0,Z0,centroid_X1,centroid_Y1,Z1,X2,Y2,Z2,centroid_lambda00,centroid_phi00,centroid_x0,centroid_y0,z0,src_bounds=function(feature){var i,n,a,b,merged,deltaMax,delta;if(bounds_phi1=bounds_lambda1=-(bounds_lambda0=bounds_phi0=1/0),ranges=[],src_stream(feature,boundsStream),n=ranges.length){for(ranges.sort(rangeCompare),i=1,merged=[a=ranges[0]];i<n;++i)rangeContains(a,(b=ranges[i])[0])||rangeContains(a,b[1])?(bounds_angle(a[0],b[1])>bounds_angle(a[0],a[1])&&(a[1]=b[1]),bounds_angle(b[0],a[1])>bounds_angle(a[0],a[1])&&(a[0]=b[0])):merged.push(a=b);for(deltaMax=-1/0,i=0,a=merged[n=merged.length-1];i<=n;a=b,++i)b=merged[i],(delta=bounds_angle(a[1],b[0]))>deltaMax&&(deltaMax=delta,bounds_lambda0=b[0],bounds_lambda1=a[1])}return ranges=bounds_range=null,bounds_lambda0===1/0||bounds_phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[bounds_lambda0,bounds_phi0],[bounds_lambda1,bounds_phi1]]},centroidStream={sphere:noop_noop,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd}};function centroidPoint(lambda,phi){lambda*=math_radians;var cosPhi=math_cos(phi*=math_radians);centroidPointCartesian(cosPhi*math_cos(lambda),cosPhi*math_sin(lambda),math_sin(phi))}function centroidPointCartesian(x,y,z){++W0,centroid_X0+=(x-centroid_X0)/W0,centroid_Y0+=(y-centroid_Y0)/W0,Z0+=(z-Z0)/W0}function centroidLineStart(){centroidStream.point=centroidLinePointFirst}function centroidLinePointFirst(lambda,phi){lambda*=math_radians;var cosPhi=math_cos(phi*=math_radians);centroid_x0=cosPhi*math_cos(lambda),centroid_y0=cosPhi*math_sin(lambda),z0=math_sin(phi),centroidStream.point=centroidLinePoint,centroidPointCartesian(centroid_x0,centroid_y0,z0)}function centroidLinePoint(lambda,phi){lambda*=math_radians;var cosPhi=math_cos(phi*=math_radians),x=cosPhi*math_cos(lambda),y=cosPhi*math_sin(lambda),z=math_sin(phi),w=atan2(sqrt((w=centroid_y0*z-z0*y)*w+(w=z0*x-centroid_x0*z)*w+(w=centroid_x0*y-centroid_y0*x)*w),centroid_x0*x+centroid_y0*y+z0*z);W1+=w,centroid_X1+=w*(centroid_x0+(centroid_x0=x)),centroid_Y1+=w*(centroid_y0+(centroid_y0=y)),Z1+=w*(z0+(z0=z)),centroidPointCartesian(centroid_x0,centroid_y0,z0)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(centroid_lambda00,centroid_phi00),centroidStream.point=centroidPoint}function centroidRingPointFirst(lambda,phi){centroid_lambda00=lambda,centroid_phi00=phi,lambda*=math_radians,phi*=math_radians,centroidStream.point=centroidRingPoint;var cosPhi=math_cos(phi);centroid_x0=cosPhi*math_cos(lambda),centroid_y0=cosPhi*math_sin(lambda),z0=math_sin(phi),centroidPointCartesian(centroid_x0,centroid_y0,z0)}function centroidRingPoint(lambda,phi){lambda*=math_radians;var cosPhi=math_cos(phi*=math_radians),x=cosPhi*math_cos(lambda),y=cosPhi*math_sin(lambda),z=math_sin(phi),cx=centroid_y0*z-z0*y,cy=z0*x-centroid_x0*z,cz=centroid_x0*y-centroid_y0*x,m=hypot(cx,cy,cz),w=asin(m),v=m&&-w/m;X2.add(v*cx),Y2.add(v*cy),Z2.add(v*cz),W1+=w,centroid_X1+=w*(centroid_x0+(centroid_x0=x)),centroid_Y1+=w*(centroid_y0+(centroid_y0=y)),Z1+=w*(z0+(z0=z)),centroidPointCartesian(centroid_x0,centroid_y0,z0)}var src_centroid=function(object){W0=W1=centroid_X0=centroid_Y0=Z0=centroid_X1=centroid_Y1=Z1=0,X2=new Adder,Y2=new Adder,Z2=new Adder,src_stream(object,centroidStream);var x=+X2,y=+Y2,z=+Z2,m=hypot(x,y,z);return m<1e-12&&(x=centroid_X1,y=centroid_Y1,z=Z1,W1<1e-6&&(x=centroid_X0,y=centroid_Y0,z=Z0),(m=hypot(x,y,z))<1e-12)?[NaN,NaN]:[atan2(y,x)*src_math_degrees,asin(z/m)*src_math_degrees]},d3_geo_src_constant=function(x){return function(){return x}},compose=function(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose};function rotationIdentity(lambda,phi){return[src_math_abs(lambda)>math_pi?lambda+Math.round(-lambda/math_tau)*math_tau:lambda,phi]}function rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=math_tau)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return[(lambda+=deltaLambda)>math_pi?lambda-math_tau:lambda<-math_pi?lambda+math_tau:lambda,phi]}}function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);return rotation.invert=forwardRotationLambda(-deltaLambda),rotation}function rotationPhiGamma(deltaPhi,deltaGamma){var cosDeltaPhi=math_cos(deltaPhi),sinDeltaPhi=math_sin(deltaPhi),cosDeltaGamma=math_cos(deltaGamma),sinDeltaGamma=math_sin(deltaGamma);function rotation(lambda,phi){var cosPhi=math_cos(phi),x=math_cos(lambda)*cosPhi,y=math_sin(lambda)*cosPhi,z=math_sin(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;return[atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),asin(k*cosDeltaGamma+y*sinDeltaGamma)]}return rotation.invert=function(lambda,phi){var cosPhi=math_cos(phi),x=math_cos(lambda)*cosPhi,y=math_sin(lambda)*cosPhi,z=math_sin(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;return[atan2(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),asin(k*cosDeltaPhi-x*sinDeltaPhi)]},rotation}rotationIdentity.invert=rotationIdentity;var src_rotation=function(rotate){function forward(coordinates){return(coordinates=rotate(coordinates[0]*math_radians,coordinates[1]*math_radians))[0]*=src_math_degrees,coordinates[1]*=src_math_degrees,coordinates}return rotate=rotateRadians(rotate[0]*math_radians,rotate[1]*math_radians,rotate.length>2?rotate[2]*math_radians:0),forward.invert=function(coordinates){return(coordinates=rotate.invert(coordinates[0]*math_radians,coordinates[1]*math_radians))[0]*=src_math_degrees,coordinates[1]*=src_math_degrees,coordinates},forward};function circleStream(stream,radius,delta,direction,t0,t1){if(delta){var cosRadius=math_cos(radius),sinRadius=math_sin(radius),step=direction*delta;null==t0?(t0=radius+direction*math_tau,t1=radius-step/2):(t0=circleRadius(cosRadius,t0),t1=circleRadius(cosRadius,t1),(direction>0?t0<t1:t0>t1)&&(t0+=direction*math_tau));for(var point,t=t0;direction>0?t>t1:t<t1;t-=step)point=cartesian_spherical([cosRadius,-sinRadius*math_cos(t),-sinRadius*math_sin(t)]),stream.point(point[0],point[1])}}function circleRadius(cosRadius,point){(point=cartesian_cartesian(point))[0]-=cosRadius,cartesianNormalizeInPlace(point);var radius=acos(-point[1]);return((-point[2]<0?-radius:radius)+math_tau-1e-6)%math_tau}var src_circle=function(){var ring,rotate,center=d3_geo_src_constant([0,0]),radius=d3_geo_src_constant(90),precision=d3_geo_src_constant(6),stream={point:function(x,y){ring.push(x=rotate(x,y)),x[0]*=src_math_degrees,x[1]*=src_math_degrees}};function circle(){var c=center.apply(this,arguments),r=radius.apply(this,arguments)*math_radians,p=precision.apply(this,arguments)*math_radians;return ring=[],rotate=rotateRadians(-c[0]*math_radians,-c[1]*math_radians,0).invert,circleStream(stream,r,p,1),c={type:"Polygon",coordinates:[ring]},ring=rotate=null,c}return circle.center=function(_){return arguments.length?(center="function"==typeof _?_:d3_geo_src_constant([+_[0],+_[1]]),circle):center},circle.radius=function(_){return arguments.length?(radius="function"==typeof _?_:d3_geo_src_constant(+_),circle):radius},circle.precision=function(_){return arguments.length?(precision="function"==typeof _?_:d3_geo_src_constant(+_),circle):precision},circle},clip_buffer=function(){var line,lines=[];return{point:function(x,y,m){line.push([x,y,m])},lineStart:function(){lines.push(line=[])},lineEnd:noop_noop,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}},pointEqual=function(a,b){return src_math_abs(a[0]-b[0])<1e-6&&src_math_abs(a[1]-b[1])<1e-6};function Intersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}var rejoin=function(segments,compareIntersection,startInside,interpolate,stream){var i,n,subject=[],clip=[];if(segments.forEach((function(segment){if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];if(pointEqual(p0,p1)){if(!p0[2]&&!p1[2]){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);return void stream.lineEnd()}p1[0]+=2e-6}subject.push(x=new Intersection(p0,segment,null,!0)),clip.push(x.o=new Intersection(p0,null,x,!1)),subject.push(x=new Intersection(p1,segment,null,!1)),clip.push(x.o=new Intersection(p1,null,x,!0))}})),subject.length){for(clip.sort(compareIntersection),rejoin_link(subject),rejoin_link(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}};function rejoin_link(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}function longitude(point){return src_math_abs(point[0])<=math_pi?point[0]:math_sign(point[0])*((src_math_abs(point[0])+math_pi)%math_tau-math_pi)}var polygonContains=function(polygon,point){var lambda=longitude(point),phi=point[1],sinPhi=math_sin(phi),normal=[math_sin(lambda),-math_cos(lambda),0],angle=0,winding=0,sum=new Adder;1===sinPhi?phi=math_halfPi+1e-6:-1===sinPhi&&(phi=-math_halfPi-1e-6);for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=longitude(point0),phi0=point0[1]/2+quarterPi,sinPhi0=math_sin(phi0),cosPhi0=math_cos(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=longitude(point1),phi1=point1[1]/2+quarterPi,sinPhi1=math_sin(phi1),cosPhi1=math_cos(phi1),delta=lambda1-lambda0,sign=delta>=0?1:-1,absDelta=sign*delta,antimeridian=absDelta>math_pi,k=sinPhi0*sinPhi1;if(sum.add(atan2(k*sign*math_sin(absDelta),cosPhi0*cosPhi1+k*math_cos(absDelta))),angle+=antimeridian?delta+sign*math_tau:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian_cartesian(point0),cartesian_cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*asin(intersection[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle<-1e-6||angle<1e-6&&sum<-1e-12)^1&winding},src_clip=function(pointVisible,clipLine,interpolate,start){return function(sink){var polygon,segments,ring,line=clipLine(sink),ringBuffer=clip_buffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=merge_merge(segments);var startInside=polygonContains(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),rejoin(segments,clip_compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point(lambda,phi){pointVisible(lambda,phi)&&sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]),ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if((m=(segment=ringSegments[0]).length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}return clip}};function validSegment(segment){return segment.length>1}function clip_compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-math_halfPi-1e-6:math_halfPi-a[1])-((b=b.x)[0]<0?b[1]-math_halfPi-1e-6:math_halfPi-b[1])}var clip_antimeridian=src_clip((function(){return!0}),(function(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?math_pi:-math_pi,delta=src_math_abs(lambda1-lambda0);src_math_abs(delta-math_pi)<1e-6?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?math_halfPi:-math_halfPi),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=math_pi&&(src_math_abs(lambda0-sign0)<1e-6&&(lambda0-=1e-6*sign0),src_math_abs(lambda1-sign1)<1e-6&&(lambda1-=1e-6*sign1),phi0=function(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=math_sin(lambda0-lambda1);return src_math_abs(sinLambda0Lambda1)>1e-6?atan((math_sin(phi0)*(cosPhi1=math_cos(phi1))*math_sin(lambda1)-math_sin(phi1)*(cosPhi0=math_cos(phi0))*math_sin(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}}),(function(from,to,direction,stream){var phi;if(null==from)phi=direction*math_halfPi,stream.point(-math_pi,phi),stream.point(0,phi),stream.point(math_pi,phi),stream.point(math_pi,0),stream.point(math_pi,-phi),stream.point(0,-phi),stream.point(-math_pi,-phi),stream.point(-math_pi,0),stream.point(-math_pi,phi);else if(src_math_abs(from[0]-to[0])>1e-6){var lambda=from[0]<to[0]?math_pi:-math_pi;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])}),[-math_pi,-math_halfPi]);var clip_circle=function(radius){var cr=math_cos(radius),delta=6*math_radians,smallRadius=cr>0,notHemisphere=src_math_abs(cr)>1e-6;function visible(lambda,phi){return math_cos(lambda)*math_cos(phi)>cr}function intersect(a,b,two){var n1=[1,0,0],n2=cartesianCross(cartesian_cartesian(a),cartesian_cartesian(b)),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1);cartesianAddInPlace(A,cartesianScale(n2,c2));var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);if(!(t2<0)){var t=sqrt(t2),q=cartesianScale(u,(-w-t)/uu);if(cartesianAddInPlace(q,A),q=cartesian_spherical(q),!two)return q;var z,lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1];lambda1<lambda0&&(z=lambda0,lambda0=lambda1,lambda1=z);var delta=lambda1-lambda0,polar=src_math_abs(delta-math_pi)<1e-6;if(!polar&&phi1<phi0&&(z=phi0,phi0=phi1,phi1=z),polar||delta<1e-6?polar?phi0+phi1>0^q[1]<(src_math_abs(q[0]-lambda0)<1e-6?phi0:phi1):phi0<=q[1]&&q[1]<=phi1:delta>math_pi^(lambda0<=q[0]&&q[0]<=lambda1)){var q1=cartesianScale(u,(-w+t)/uu);return cartesianAddInPlace(q1,A),[q,cartesian_spherical(q1)]}}}function code(lambda,phi){var r=smallRadius?radius:math_pi-radius,code=0;return lambda<-r?code|=1:lambda>r&&(code|=2),phi<-r?code|=4:phi>r&&(code|=8),code}return src_clip(visible,(function(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(lambda,phi){var point2,point1=[lambda,phi],v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?math_pi:-math_pi),phi):0;if(!point0&&(v00=v0=v)&&stream.lineStart(),v!==v0&&(!(point2=intersect(point0,point1))||pointEqual(point0,point2)||pointEqual(point1,point2))&&(point1[2]=1),v!==v0)clean=0,v?(stream.lineStart(),point2=intersect(point1,point0),stream.point(point2[0],point2[1])):(point2=intersect(point0,point1),stream.point(point2[0],point2[1],2),stream.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(stream.lineStart(),stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1],3)))}!v||point0&&pointEqual(point0,point1)||stream.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&stream.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}),(function(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to)}),smallRadius?[0,-radius]:[-math_pi,radius-math_pi])};function clipRectangle(x0,y0,x1,y1){function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function interpolate(from,to,direction,stream){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoint(from,to)<0^direction>0)do{stream.point(0===a||3===a?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1);else stream.point(to[0],to[1])}function corner(p,direction){return src_math_abs(p[0]-x0)<1e-6?direction>0?0:3:src_math_abs(p[0]-x1)<1e-6?direction>0?2:1:src_math_abs(p[1]-y0)<1e-6?direction>0?1:0:direction>0?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(stream){var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,activeStream=stream,bufferStream=clip_buffer(),clipStream={point:point,lineStart:function(){clipStream.point=linePoint,polygon&&polygon.push(ring=[]);first=!0,v_=!1,x_=y_=NaN},lineEnd:function(){segments&&(linePoint(x__,y__),v__&&v_&&bufferStream.rejoin(),segments.push(bufferStream.result()));clipStream.point=point,v_&&activeStream.lineEnd()},polygonStart:function(){activeStream=bufferStream,segments=[],polygon=[],clean=!0},polygonEnd:function(){var startInside=function(){for(var winding=0,i=0,n=polygon.length;i<n;++i)for(var a0,a1,ring=polygon[i],j=1,m=ring.length,point=ring[0],b0=point[0],b1=point[1];j<m;++j)a0=b0,a1=b1,b0=(point=ring[j])[0],b1=point[1],a1<=y1?b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0)&&++winding:b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0)&&--winding;return winding}(),cleanInside=clean&&startInside,visible=(segments=merge_merge(segments)).length;(cleanInside||visible)&&(stream.polygonStart(),cleanInside&&(stream.lineStart(),interpolate(null,null,1,stream),stream.lineEnd()),visible&&rejoin(segments,compareIntersection,startInside,interpolate,stream),stream.polygonEnd());activeStream=stream,segments=polygon=ring=null}};function point(x,y){visible(x,y)&&activeStream.point(x,y)}function linePoint(x,y){var v=visible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(activeStream.lineStart(),activeStream.point(x,y));else if(v&&v_)activeStream.point(x,y);else{var a=[x_=Math.max(-1e9,Math.min(1e9,x_)),y_=Math.max(-1e9,Math.min(1e9,y_))],b=[x=Math.max(-1e9,Math.min(1e9,x)),y=Math.max(-1e9,Math.min(1e9,y))];!function(a,b,x0,y0,x1,y1){var r,ax=a[0],ay=a[1],t0=0,t1=1,dx=b[0]-ax,dy=b[1]-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(a[0]=ax+t0*dx,a[1]=ay+t0*dy),t1<1&&(b[0]=ax+t1*dx,b[1]=ay+t1*dy),!0}}}}}(a,b,x0,y0,x1,y1)?v&&(activeStream.lineStart(),activeStream.point(x,y),clean=!1):(v_||(activeStream.lineStart(),activeStream.point(a[0],a[1])),activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean=!1)}x_=x,y_=y,v_=v}return clipStream}}var lengthSum,length_lambda0,length_sinPhi0,length_cosPhi0,clip_extent=function(){var cache,cacheStream,clip,x0=0,y0=0,x1=960,y1=500;return clip={stream:function(stream){return cache&&cacheStream===stream?cache:cache=clipRectangle(x0,y0,x1,y1)(cacheStream=stream)},extent:function(_){return arguments.length?(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1],cache=cacheStream=null,clip):[[x0,y0],[x1,y1]]}}},lengthStream={sphere:noop_noop,point:noop_noop,lineStart:function(){lengthStream.point=lengthPointFirst,lengthStream.lineEnd=lengthLineEnd},lineEnd:noop_noop,polygonStart:noop_noop,polygonEnd:noop_noop};function lengthLineEnd(){lengthStream.point=lengthStream.lineEnd=noop_noop}function lengthPointFirst(lambda,phi){length_lambda0=lambda*=math_radians,length_sinPhi0=math_sin(phi*=math_radians),length_cosPhi0=math_cos(phi),lengthStream.point=lengthPoint}function lengthPoint(lambda,phi){lambda*=math_radians;var sinPhi=math_sin(phi*=math_radians),cosPhi=math_cos(phi),delta=src_math_abs(lambda-length_lambda0),cosDelta=math_cos(delta),x=cosPhi*math_sin(delta),y=length_cosPhi0*sinPhi-length_sinPhi0*cosPhi*cosDelta,z=length_sinPhi0*sinPhi+length_cosPhi0*cosPhi*cosDelta;lengthSum.add(atan2(sqrt(x*x+y*y),z)),length_lambda0=lambda,length_sinPhi0=sinPhi,length_cosPhi0=cosPhi}var src_length=function(object){return lengthSum=new Adder,src_stream(object,lengthStream),+lengthSum},distance_coordinates=[null,null],distance_object={type:"LineString",coordinates:distance_coordinates},src_distance=function(a,b){return distance_coordinates[0]=a,distance_coordinates[1]=b,src_length(distance_object)},containsObjectType={Feature:function(object,point){return containsGeometry(object.geometry,point)},FeatureCollection:function(object,point){for(var features=object.features,i=-1,n=features.length;++i<n;)if(containsGeometry(features[i].geometry,point))return!0;return!1}},containsGeometryType={Sphere:function(){return!0},Point:function(object,point){return containsPoint(object.coordinates,point)},MultiPoint:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsPoint(coordinates[i],point))return!0;return!1},LineString:function(object,point){return containsLine(object.coordinates,point)},MultiLineString:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsLine(coordinates[i],point))return!0;return!1},Polygon:function(object,point){return containsPolygon(object.coordinates,point)},MultiPolygon:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsPolygon(coordinates[i],point))return!0;return!1},GeometryCollection:function(object,point){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)if(containsGeometry(geometries[i],point))return!0;return!1}};function containsGeometry(geometry,point){return!(!geometry||!containsGeometryType.hasOwnProperty(geometry.type))&&containsGeometryType[geometry.type](geometry,point)}function containsPoint(coordinates,point){return 0===src_distance(coordinates,point)}function containsLine(coordinates,point){for(var ao,bo,ab,i=0,n=coordinates.length;i<n;i++){if(0===(bo=src_distance(coordinates[i],point)))return!0;if(i>0&&(ab=src_distance(coordinates[i],coordinates[i-1]))>0&&ao<=ab&&bo<=ab&&(ao+bo-ab)*(1-Math.pow((ao-bo)/ab,2))<1e-12*ab)return!0;ao=bo}return!1}function containsPolygon(coordinates,point){return!!polygonContains(coordinates.map(ringRadians),pointRadians(point))}function ringRadians(ring){return(ring=ring.map(pointRadians)).pop(),ring}function pointRadians(point){return[point[0]*math_radians,point[1]*math_radians]}var src_contains=function(object,point){return(object&&containsObjectType.hasOwnProperty(object.type)?containsObjectType[object.type]:containsGeometry)(object,point)};function graticuleX(y0,y1,dy){var y=src_range(y0,y1-1e-6,dy).concat(y1);return function(x){return y.map((function(y){return[x,y]}))}}function graticuleY(x0,x1,dx){var x=src_range(x0,x1-1e-6,dx).concat(x1);return function(y){return x.map((function(x){return[x,y]}))}}function graticule_graticule(){var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return src_range(ceil(X0/DX)*DX,X1,DX).map(X).concat(src_range(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(src_range(ceil(x0/dx)*dx,x1,dx).filter((function(x){return src_math_abs(x%DX)>1e-6})).map(x)).concat(src_range(ceil(y0/dy)*dy,y1,dy).filter((function(y){return src_math_abs(y%DY)>1e-6})).map(y))}return graticule.lines=function(){return lines().map((function(coordinates){return{type:"LineString",coordinates:coordinates}}))},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.extentMajor(_).extentMinor(_):graticule.extentMinor()},graticule.extentMajor=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.extentMinor=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.stepMajor(_).stepMinor(_):graticule.stepMinor()},graticule.stepMajor=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.stepMinor=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=graticuleX(y0,y1,90),y=graticuleY(x0,x1,precision),X=graticuleX(Y0,Y1,90),Y=graticuleY(X0,X1,precision),graticule):precision},graticule.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function graticule10(){return graticule_graticule()()}var area_x00,area_y00,area_x0,area_y0,src_interpolate=function(a,b){var x0=a[0]*math_radians,y0=a[1]*math_radians,x1=b[0]*math_radians,y1=b[1]*math_radians,cy0=math_cos(y0),sy0=math_sin(y0),cy1=math_cos(y1),sy1=math_sin(y1),kx0=cy0*math_cos(x0),ky0=cy0*math_sin(x0),kx1=cy1*math_cos(x1),ky1=cy1*math_sin(x1),d=2*asin(sqrt(haversin(y1-y0)+cy0*cy1*haversin(x1-x0))),k=math_sin(d),interpolate=d?function(t){var B=math_sin(t*=d)/k,A=math_sin(d-t)/k,x=A*kx0+B*kx1,y=A*ky0+B*ky1,z=A*sy0+B*sy1;return[atan2(y,x)*src_math_degrees,atan2(z,sqrt(x*x+y*y))*src_math_degrees]}:function(){return[x0*src_math_degrees,y0*src_math_degrees]};return interpolate.distance=d,interpolate},d3_geo_src_identity=x=>x,area_areaSum=new Adder,area_areaRingSum=new Adder,area_areaStream={point:noop_noop,lineStart:noop_noop,lineEnd:noop_noop,polygonStart:function(){area_areaStream.lineStart=area_areaRingStart,area_areaStream.lineEnd=area_areaRingEnd},polygonEnd:function(){area_areaStream.lineStart=area_areaStream.lineEnd=area_areaStream.point=noop_noop,area_areaSum.add(src_math_abs(area_areaRingSum)),area_areaRingSum=new Adder},result:function(){var area=area_areaSum/2;return area_areaSum=new Adder,area}};function area_areaRingStart(){area_areaStream.point=area_areaPointFirst}function area_areaPointFirst(x,y){area_areaStream.point=area_areaPoint,area_x00=area_x0=x,area_y00=area_y0=y}function area_areaPoint(x,y){area_areaRingSum.add(area_y0*x-area_x0*y),area_x0=x,area_y0=y}function area_areaRingEnd(){area_areaPoint(area_x00,area_y00)}var path_area=area_areaStream,bounds_x0=1/0,bounds_y0=bounds_x0,bounds_x1=-bounds_x0,bounds_y1=bounds_x1;var centroid_x00,centroid_y00,path_centroid_x0,path_centroid_y0,path_bounds={point:function(x,y){x<bounds_x0&&(bounds_x0=x);x>bounds_x1&&(bounds_x1=x);y<bounds_y0&&(bounds_y0=y);y>bounds_y1&&(bounds_y1=y)},lineStart:noop_noop,lineEnd:noop_noop,polygonStart:noop_noop,polygonEnd:noop_noop,result:function(){var bounds=[[bounds_x0,bounds_y0],[bounds_x1,bounds_y1]];return bounds_x1=bounds_y1=-(bounds_y0=bounds_x0=1/0),bounds}},path_centroid_X0=0,path_centroid_Y0=0,centroid_Z0=0,path_centroid_X1=0,path_centroid_Y1=0,centroid_Z1=0,centroid_X2=0,centroid_Y2=0,centroid_Z2=0,centroid_centroidStream={point:centroid_centroidPoint,lineStart:centroid_centroidLineStart,lineEnd:centroid_centroidLineEnd,polygonStart:function(){centroid_centroidStream.lineStart=centroid_centroidRingStart,centroid_centroidStream.lineEnd=centroid_centroidRingEnd},polygonEnd:function(){centroid_centroidStream.point=centroid_centroidPoint,centroid_centroidStream.lineStart=centroid_centroidLineStart,centroid_centroidStream.lineEnd=centroid_centroidLineEnd},result:function(){var centroid=centroid_Z2?[centroid_X2/centroid_Z2,centroid_Y2/centroid_Z2]:centroid_Z1?[path_centroid_X1/centroid_Z1,path_centroid_Y1/centroid_Z1]:centroid_Z0?[path_centroid_X0/centroid_Z0,path_centroid_Y0/centroid_Z0]:[NaN,NaN];return path_centroid_X0=path_centroid_Y0=centroid_Z0=path_centroid_X1=path_centroid_Y1=centroid_Z1=centroid_X2=centroid_Y2=centroid_Z2=0,centroid}};function centroid_centroidPoint(x,y){path_centroid_X0+=x,path_centroid_Y0+=y,++centroid_Z0}function centroid_centroidLineStart(){centroid_centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(x,y){centroid_centroidStream.point=centroidPointLine,centroid_centroidPoint(path_centroid_x0=x,path_centroid_y0=y)}function centroidPointLine(x,y){var dx=x-path_centroid_x0,dy=y-path_centroid_y0,z=sqrt(dx*dx+dy*dy);path_centroid_X1+=z*(path_centroid_x0+x)/2,path_centroid_Y1+=z*(path_centroid_y0+y)/2,centroid_Z1+=z,centroid_centroidPoint(path_centroid_x0=x,path_centroid_y0=y)}function centroid_centroidLineEnd(){centroid_centroidStream.point=centroid_centroidPoint}function centroid_centroidRingStart(){centroid_centroidStream.point=centroidPointFirstRing}function centroid_centroidRingEnd(){centroidPointRing(centroid_x00,centroid_y00)}function centroidPointFirstRing(x,y){centroid_centroidStream.point=centroidPointRing,centroid_centroidPoint(centroid_x00=path_centroid_x0=x,centroid_y00=path_centroid_y0=y)}function centroidPointRing(x,y){var dx=x-path_centroid_x0,dy=y-path_centroid_y0,z=sqrt(dx*dx+dy*dy);path_centroid_X1+=z*(path_centroid_x0+x)/2,path_centroid_Y1+=z*(path_centroid_y0+y)/2,centroid_Z1+=z,centroid_X2+=(z=path_centroid_y0*x-path_centroid_x0*y)*(path_centroid_x0+x),centroid_Y2+=z*(path_centroid_y0+y),centroid_Z2+=3*z,centroid_centroidPoint(path_centroid_x0=x,path_centroid_y0=y)}var path_centroid=centroid_centroidStream;function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y),this._point=1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,math_tau)}},result:noop_noop};var lengthRing,measure_x00,measure_y00,measure_x0,measure_y0,measure_lengthSum=new Adder,measure_lengthStream={point:noop_noop,lineStart:function(){measure_lengthStream.point=measure_lengthPointFirst},lineEnd:function(){lengthRing&&measure_lengthPoint(measure_x00,measure_y00),measure_lengthStream.point=noop_noop},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var length=+measure_lengthSum;return measure_lengthSum=new Adder,length}};function measure_lengthPointFirst(x,y){measure_lengthStream.point=measure_lengthPoint,measure_x00=measure_x0=x,measure_y00=measure_y0=y}function measure_lengthPoint(x,y){measure_x0-=x,measure_y0-=y,measure_lengthSum.add(sqrt(measure_x0*measure_x0+measure_y0*measure_y0)),measure_x0=x,measure_y0=y}var measure=measure_lengthStream;function PathString(){this._string=[]}function string_circle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}PathString.prototype={_radius:4.5,_circle:string_circle(4.5),pointRadius:function(_){return(_=+_)!==this._radius&&(this._radius=_,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._string.push("M",x,",",y),this._point=1;break;case 1:this._string.push("L",x,",",y);break;default:null==this._circle&&(this._circle=string_circle(this._radius)),this._string.push("M",x,",",y,this._circle)}},result:function(){if(this._string.length){var result=this._string.join("");return this._string=[],result}return null}};var d3_geo_src_path=function(projection,context){var projectionStream,contextStream,pointRadius=4.5;function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),src_stream(object,projectionStream(contextStream))),contextStream.result()}return path.area=function(object){return src_stream(object,projectionStream(path_area)),path_area.result()},path.measure=function(object){return src_stream(object,projectionStream(measure)),measure.result()},path.bounds=function(object){return src_stream(object,projectionStream(path_bounds)),path_bounds.result()},path.centroid=function(object){return src_stream(object,projectionStream(path_centroid)),path_centroid.result()},path.projection=function(_){return arguments.length?(projectionStream=null==_?(projection=null,d3_geo_src_identity):(projection=_).stream,path):projection},path.context=function(_){return arguments.length?(contextStream=null==_?(context=null,new PathString):new PathContext(context=_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),path):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.projection(projection).context(context)},src_transform=function(methods){return{stream:transformer(methods)}};function transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}function fit(projection,fitBounds,object){var clip=projection.clipExtent&&projection.clipExtent();return projection.scale(150).translate([0,0]),null!=clip&&projection.clipExtent(null),src_stream(object,projection.stream(path_bounds)),fitBounds(path_bounds.result()),null!=clip&&projection.clipExtent(clip),projection}function fitExtent(projection,extent,object){return fit(projection,(function(b){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object)}function fitWidth(projection,width,object){return fit(projection,(function(b){var w=+width,k=w/(b[1][0]-b[0][0]),x=(w-k*(b[1][0]+b[0][0]))/2,y=-k*b[0][1];projection.scale(150*k).translate([x,y])}),object)}function fitHeight(projection,height,object){return fit(projection,(function(b){var h=+height,k=h/(b[1][1]-b[0][1]),x=-k*b[0][0],y=(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cosMinDistance=math_cos(30*math_radians),resample=function(project,delta2){return+delta2?function(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=sqrt(a*a+b*b+c*c),phi2=asin(c/=m),lambda2=src_math_abs(src_math_abs(c)-1)<1e-6||src_math_abs(lambda0-lambda1)<1e-6?(lambda0+lambda1)/2:atan2(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>delta2||src_math_abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream))}}return function(stream){var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){stream.polygonStart(),resampleStream.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resampleStream.lineStart=lineStart}};function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resampleStream.point=linePoint,stream.lineStart()}function linePoint(lambda,phi){var c=cartesian_cartesian([lambda,phi]),p=project(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0=p[0],y0=p[1],lambda0=lambda,a0=c[0],b0=c[1],c0=c[2],16,stream),stream.point(x0,y0)}function lineEnd(){resampleStream.point=point,stream.lineEnd()}function ringStart(){lineStart(),resampleStream.point=ringPoint,resampleStream.lineEnd=ringEnd}function ringPoint(lambda,phi){linePoint(lambda00=lambda,phi),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resampleStream.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,16,stream),resampleStream.lineEnd=lineEnd,lineEnd()}return resampleStream}}(project,delta2):function(project){return transformer({point:function(x,y){x=project(x,y),this.stream.point(x[0],x[1])}})}(project)};var transformRadians=transformer({point:function(x,y){this.stream.point(x*math_radians,y*math_radians)}});function scaleTranslateRotate(k,dx,dy,sx,sy,alpha){if(!alpha)return function(k,dx,dy,sx,sy){function transform(x,y){return[dx+k*(x*=sx),dy-k*(y*=sy)]}return transform.invert=function(x,y){return[(x-dx)/k*sx,(dy-y)/k*sy]},transform}(k,dx,dy,sx,sy);var cosAlpha=math_cos(alpha),sinAlpha=math_sin(alpha),a=cosAlpha*k,b=sinAlpha*k,ai=cosAlpha/k,bi=sinAlpha/k,ci=(sinAlpha*dy-cosAlpha*dx)/k,fi=(sinAlpha*dx+cosAlpha*dy)/k;function transform(x,y){return[a*(x*=sx)-b*(y*=sy)+dx,dy-b*x-a*y]}return transform.invert=function(x,y){return[sx*(ai*x-bi*y+ci),sy*(fi-bi*x-ai*y)]},transform}function projection_projection(project){return projectionMutator((function(){return project}))()}function projectionMutator(projectAt){var project,rotate,y0,x1,y1,projectResample,projectTransform,projectRotateTransform,cache,cacheStream,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,alpha=0,sx=1,sy=1,theta=null,preclip=clip_antimeridian,x0=null,postclip=d3_geo_src_identity,delta2=.5;function projection(point){return projectRotateTransform(point[0]*math_radians,point[1]*math_radians)}function invert(point){return(point=projectRotateTransform.invert(point[0],point[1]))&&[point[0]*src_math_degrees,point[1]*src_math_degrees]}function recenter(){var center=scaleTranslateRotate(k,0,0,sx,sy,alpha).apply(null,project(lambda,phi)),transform=scaleTranslateRotate(k,x-center[0],y-center[1],sx,sy,alpha);return rotate=rotateRadians(deltaLambda,deltaPhi,deltaGamma),projectTransform=compose(project,transform),projectRotateTransform=compose(rotate,projectTransform),projectResample=resample(projectTransform,delta2),reset()}function reset(){return cache=cacheStream=null,projection}return projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transformRadians(function(rotate){return transformer({point:function(x,y){var r=rotate(x,y);return this.stream.point(r[0],r[1])}})}(rotate)(preclip(projectResample(postclip(cacheStream=stream)))))},projection.preclip=function(_){return arguments.length?(preclip=_,theta=void 0,reset()):preclip},projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},projection.clipAngle=function(_){return arguments.length?(preclip=+_?clip_circle(theta=_*math_radians):(theta=null,clip_antimeridian),reset()):theta*src_math_degrees},projection.clipExtent=function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,d3_geo_src_identity):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){return arguments.length?(k=+_,recenter()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],recenter()):[x,y]},projection.center=function(_){return arguments.length?(lambda=_[0]%360*math_radians,phi=_[1]%360*math_radians,recenter()):[lambda*src_math_degrees,phi*src_math_degrees]},projection.rotate=function(_){return arguments.length?(deltaLambda=_[0]%360*math_radians,deltaPhi=_[1]%360*math_radians,deltaGamma=_.length>2?_[2]%360*math_radians:0,recenter()):[deltaLambda*src_math_degrees,deltaPhi*src_math_degrees,deltaGamma*src_math_degrees]},projection.angle=function(_){return arguments.length?(alpha=_%360*math_radians,recenter()):alpha*src_math_degrees},projection.reflectX=function(_){return arguments.length?(sx=_?-1:1,recenter()):sx<0},projection.reflectY=function(_){return arguments.length?(sy=_?-1:1,recenter()):sy<0},projection.precision=function(_){return arguments.length?(projectResample=resample(projectTransform,delta2=_*_),reset()):sqrt(delta2)},projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){return fitSize(projection,size,object)},projection.fitWidth=function(width,object){return fitWidth(projection,width,object)},projection.fitHeight=function(height,object){return fitHeight(projection,height,object)},function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,recenter()}}function conicProjection(projectAt){var phi0=0,phi1=math_pi/3,m=projectionMutator(projectAt),p=m(phi0,phi1);return p.parallels=function(_){return arguments.length?m(phi0=_[0]*math_radians,phi1=_[1]*math_radians):[phi0*src_math_degrees,phi1*src_math_degrees]},p}function conicEqualAreaRaw(y0,y1){var sy0=math_sin(y0),n=(sy0+math_sin(y1))/2;if(src_math_abs(n)<1e-6)return function(phi0){var cosPhi0=math_cos(phi0);function forward(lambda,phi){return[lambda*cosPhi0,math_sin(phi)/cosPhi0]}return forward.invert=function(x,y){return[x/cosPhi0,asin(y*cosPhi0)]},forward}(y0);var c=1+sy0*(2*n-sy0),r0=sqrt(c)/n;function project(x,y){var r=sqrt(c-2*n*math_sin(y))/n;return[r*math_sin(x*=n),r0-r*math_cos(x)]}return project.invert=function(x,y){var r0y=r0-y,l=atan2(x,src_math_abs(r0y))*math_sign(r0y);return r0y*n<0&&(l-=math_pi*math_sign(x)*math_sign(r0y)),[l/n,asin((c-(x*x+r0y*r0y)*n*n)/(2*n))]},project}var conicEqualArea=function(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])},albers=function(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var projection_albersUsa=function(){var cache,cacheStream,lower48Point,alaskaPoint,hawaiiPoint,point,lower48=albers(),alaska=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point.point(x,y),point||(alaskaPoint.point(x,y),point)||(hawaiiPoint.point(x,y),point)}function reset(){return cache=cacheStream=null,albersUsa}return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){return cache&&cacheStream===stream?cache:(streams=[lower48.stream(cacheStream=stream),alaska.stream(stream),hawaii.stream(stream)],n=streams.length,cache={point:function(x,y){for(var i=-1;++i<n;)streams[i].point(x,y)},sphere:function(){for(var i=-1;++i<n;)streams[i].sphere()},lineStart:function(){for(var i=-1;++i<n;)streams[i].lineStart()},lineEnd:function(){for(var i=-1;++i<n;)streams[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<n;)streams[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<n;)streams[i].polygonEnd()}});var streams,n},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),reset()):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream),alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+1e-6,y+.12*k+1e-6],[x-.214*k-1e-6,y+.234*k-1e-6]]).stream(pointStream),hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+1e-6,y+.166*k+1e-6],[x-.115*k-1e-6,y+.234*k-1e-6]]).stream(pointStream),reset()},albersUsa.fitExtent=function(extent,object){return fitExtent(albersUsa,extent,object)},albersUsa.fitSize=function(size,object){return fitSize(albersUsa,size,object)},albersUsa.fitWidth=function(width,object){return fitWidth(albersUsa,width,object)},albersUsa.fitHeight=function(height,object){return fitHeight(albersUsa,height,object)},albersUsa.scale(1070)};function azimuthalRaw(scale){return function(x,y){var cx=math_cos(x),cy=math_cos(y),k=scale(cx*cy);return k===1/0?[2,0]:[k*cy*math_sin(x),k*math_sin(y)]}}function azimuthalInvert(angle){return function(x,y){var z=sqrt(x*x+y*y),c=angle(z),sc=math_sin(c),cc=math_cos(c);return[atan2(x*sc,z*cc),asin(z&&y*sc/z)]}}var azimuthalEqualAreaRaw=azimuthalRaw((function(cxcy){return sqrt(2/(1+cxcy))}));azimuthalEqualAreaRaw.invert=azimuthalInvert((function(z){return 2*asin(z/2)}));var azimuthalEqualArea=function(){return projection_projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999)},azimuthalEquidistantRaw=azimuthalRaw((function(c){return(c=acos(c))&&c/math_sin(c)}));azimuthalEquidistantRaw.invert=azimuthalInvert((function(z){return z}));var azimuthalEquidistant=function(){return projection_projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999)};function mercatorRaw(lambda,phi){return[lambda,log(tan((math_halfPi+phi)/2))]}mercatorRaw.invert=function(x,y){return[x,2*atan(exp(y))-math_halfPi]};var mercator=function(){return mercatorProjection(mercatorRaw).scale(961/math_tau)};function mercatorProjection(project){var y0,x1,y1,m=projection_projection(project),center=m.center,scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,x0=null;function reclip(){var k=math_pi*scale(),t=m(src_rotation(m.rotate()).invert([0,0]));return clipExtent(null==x0?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project===mercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]])}return m.scale=function(_){return arguments.length?(scale(_),reclip()):scale()},m.translate=function(_){return arguments.length?(translate(_),reclip()):translate()},m.center=function(_){return arguments.length?(center(_),reclip()):center()},m.clipExtent=function(_){return arguments.length?(null==_?x0=y0=x1=y1=null:(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reclip()):null==x0?null:[[x0,y0],[x1,y1]]},reclip()}function tany(y){return tan((math_halfPi+y)/2)}function conicConformalRaw(y0,y1){var cy0=math_cos(y0),n=y0===y1?math_sin(y0):log(cy0/math_cos(y1))/log(tany(y1)/tany(y0)),f=cy0*math_pow(tany(y0),n)/n;if(!n)return mercatorRaw;function project(x,y){f>0?y<1e-6-math_halfPi&&(y=1e-6-math_halfPi):y>math_halfPi-1e-6&&(y=math_halfPi-1e-6);var r=f/math_pow(tany(y),n);return[r*math_sin(n*x),f-r*math_cos(n*x)]}return project.invert=function(x,y){var fy=f-y,r=math_sign(n)*sqrt(x*x+fy*fy),l=atan2(x,src_math_abs(fy))*math_sign(fy);return fy*n<0&&(l-=math_pi*math_sign(x)*math_sign(fy)),[l/n,2*atan(math_pow(f/r,1/n))-math_halfPi]},project}var conicConformal=function(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])};function equirectangularRaw(lambda,phi){return[lambda,phi]}equirectangularRaw.invert=equirectangularRaw;var equirectangular=function(){return projection_projection(equirectangularRaw).scale(152.63)};function conicEquidistantRaw(y0,y1){var cy0=math_cos(y0),n=y0===y1?math_sin(y0):(cy0-math_cos(y1))/(y1-y0),g=cy0/n+y0;if(src_math_abs(n)<1e-6)return equirectangularRaw;function project(x,y){var gy=g-y,nx=n*x;return[gy*math_sin(nx),g-gy*math_cos(nx)]}return project.invert=function(x,y){var gy=g-y,l=atan2(x,src_math_abs(gy))*math_sign(gy);return gy*n<0&&(l-=math_pi*math_sign(x)*math_sign(gy)),[l/n,g-math_sign(n)*sqrt(x*x+gy*gy)]},project}var conicEquidistant=function(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])},A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt(3)/2;function equalEarthRaw(lambda,phi){var l=asin(M*math_sin(phi)),l2=l*l,l6=l2*l2*l2;return[lambda*math_cos(l)/(M*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))),l*(A1+A2*l2+l6*(A3+A4*l2))]}equalEarthRaw.invert=function(x,y){for(var delta,l=y,l2=l*l,l6=l2*l2*l2,i=0;i<12&&(l6=(l2=(l-=delta=(l*(A1+A2*l2+l6*(A3+A4*l2))-y)/(A1+3*A2*l2+l6*(7*A3+9*A4*l2)))*l)*l2*l2,!(src_math_abs(delta)<1e-12));++i);return[M*x*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))/math_cos(l),asin(math_sin(l)/M)]};var equalEarth=function(){return projection_projection(equalEarthRaw).scale(177.158)};function gnomonicRaw(x,y){var cy=math_cos(y),k=math_cos(x)*cy;return[cy*math_sin(x)/k,math_sin(y)/k]}gnomonicRaw.invert=azimuthalInvert(atan);var gnomonic=function(){return projection_projection(gnomonicRaw).scale(144.049).clipAngle(60)},projection_identity=function(){var ca,sa,y0,x1,y1,cache,cacheStream,k=1,tx=0,ty=0,sx=1,sy=1,alpha=0,x0=null,kx=1,ky=1,transform=transformer({point:function(x,y){var p=projection([x,y]);this.stream.point(p[0],p[1])}}),postclip=d3_geo_src_identity;function reset(){return kx=k*sx,ky=k*sy,cache=cacheStream=null,projection}function projection(p){var x=p[0]*kx,y=p[1]*ky;if(alpha){var t=y*ca-x*sa;x=x*ca+y*sa,y=t}return[x+tx,y+ty]}return projection.invert=function(p){var x=p[0]-tx,y=p[1]-ty;if(alpha){var t=y*ca+x*sa;x=x*ca-y*sa,y=t}return[x/kx,y/ky]},projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transform(postclip(cacheStream=stream))},projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},projection.clipExtent=function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,d3_geo_src_identity):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){return arguments.length?(k=+_,reset()):k},projection.translate=function(_){return arguments.length?(tx=+_[0],ty=+_[1],reset()):[tx,ty]},projection.angle=function(_){return arguments.length?(sa=math_sin(alpha=_%360*math_radians),ca=math_cos(alpha),reset()):alpha*src_math_degrees},projection.reflectX=function(_){return arguments.length?(sx=_?-1:1,reset()):sx<0},projection.reflectY=function(_){return arguments.length?(sy=_?-1:1,reset()):sy<0},projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){return fitSize(projection,size,object)},projection.fitWidth=function(width,object){return fitWidth(projection,width,object)},projection.fitHeight=function(height,object){return fitHeight(projection,height,object)},projection};function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(phi4*(.003971*phi2-.001529*phi4)-.013791)),phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))]}naturalEarth1Raw.invert=function(x,y){var delta,phi=y,i=25;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))-y)/(1.007226+phi2*(.045255+phi4*(.259866*phi2-.311325-.005916*11*phi4)))}while(src_math_abs(delta)>1e-6&&--i>0);return[x/(.8707+(phi2=phi*phi)*(phi2*(phi2*phi2*phi2*(.003971-.001529*phi2)-.013791)-.131979)),phi]};var naturalEarth1=function(){return projection_projection(naturalEarth1Raw).scale(175.295)};function orthographicRaw(x,y){return[math_cos(y)*math_sin(x),math_sin(y)]}orthographicRaw.invert=azimuthalInvert(asin);var orthographic=function(){return projection_projection(orthographicRaw).scale(249.5).clipAngle(90.000001)};function stereographicRaw(x,y){var cy=math_cos(y),k=1+math_cos(x)*cy;return[cy*math_sin(x)/k,math_sin(y)/k]}stereographicRaw.invert=azimuthalInvert((function(z){return 2*atan(z)}));var stereographic=function(){return projection_projection(stereographicRaw).scale(250).clipAngle(142)};function transverseMercatorRaw(lambda,phi){return[log(tan((math_halfPi+phi)/2)),-lambda]}transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(exp(x))-math_halfPi]};var transverseMercator=function(){var m=mercatorProjection(transverseMercatorRaw),center=m.center,rotate=m.rotate;return m.center=function(_){return arguments.length?center([-_[1],_[0]]):[(_=center())[1],-_[0]]},m.rotate=function(_){return arguments.length?rotate([_[0],_[1],_.length>2?_[2]+90:90]):[(_=rotate())[0],_[1],_[2]-90]},rotate([0,0,90]).scale(159.155)};function defaultSeparation(a,b){return a.parent===b.parent?1:2}function meanXReduce(x,c){return x+c.x}function maxYReduce(y,c){return Math.max(y,c.y)}var cluster=function(){var separation=defaultSeparation,dx=1,dy=1,nodeSize=!1;function cluster(root){var previousNode,x=0;root.eachAfter((function(node){var children=node.children;children?(node.x=function(children){return children.reduce(meanXReduce,0)/children.length}(children),node.y=function(children){return 1+children.reduce(maxYReduce,0)}(children)):(node.x=previousNode?x+=separation(node,previousNode):0,node.y=0,previousNode=node)}));var left=function(node){for(var children;children=node.children;)node=children[0];return node}(root),right=function(node){for(var children;children=node.children;)node=children[children.length-1];return node}(root),x0=left.x-separation(left,right)/2,x1=right.x+separation(right,left)/2;return root.eachAfter(nodeSize?function(node){node.x=(node.x-root.x)*dx,node.y=(root.y-node.y)*dy}:function(node){node.x=(node.x-x0)/(x1-x0)*dx,node.y=(1-(root.y?node.y/root.y:1))*dy})}return cluster.separation=function(x){return arguments.length?(separation=x,cluster):separation},cluster.size=function(x){return arguments.length?(nodeSize=!1,dx=+x[0],dy=+x[1],cluster):nodeSize?null:[dx,dy]},cluster.nodeSize=function(x){return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],cluster):nodeSize?[dx,dy]:null},cluster};function hierarchy_count_count(node){var sum=0,children=node.children,i=children&&children.length;if(i)for(;--i>=0;)sum+=children[i].value;else sum=1;node.value=sum}function hierarchy(data,children){data instanceof Map?(data=[void 0,data],void 0===children&&(children=mapChildren)):void 0===children&&(children=objectChildren);for(var node,child,childs,i,n,root=new Node(data),nodes=[root];node=nodes.pop();)if((childs=children(node.data))&&(n=(childs=Array.from(childs)).length))for(node.children=childs,i=n-1;i>=0;--i)nodes.push(child=childs[i]=new Node(childs[i])),child.parent=node,child.depth=node.depth+1;return root.eachBefore(computeHeight)}function objectChildren(d){return d.children}function mapChildren(d){return Array.isArray(d)?d[1]:null}function copyData(node){void 0!==node.data.value&&(node.value=node.data.value),node.data=node.data.data}function computeHeight(node){var height=0;do{node.height=height}while((node=node.parent)&&node.height<++height)}function Node(data){this.data=data,this.depth=this.height=0,this.parent=null}Node.prototype=hierarchy.prototype={constructor:Node,count:function(){return this.eachAfter(hierarchy_count_count)},each:function(callback,that){let index=-1;for(const node of this)callback.call(that,node,++index,this);return this},eachAfter:function(callback,that){for(var children,i,n,node=this,nodes=[node],next=[],index=-1;node=nodes.pop();)if(next.push(node),children=node.children)for(i=0,n=children.length;i<n;++i)nodes.push(children[i]);for(;node=next.pop();)callback.call(that,node,++index,this);return this},eachBefore:function(callback,that){for(var children,i,node=this,nodes=[node],index=-1;node=nodes.pop();)if(callback.call(that,node,++index,this),children=node.children)for(i=children.length-1;i>=0;--i)nodes.push(children[i]);return this},find:function(callback,that){let index=-1;for(const node of this)if(callback.call(that,node,++index,this))return node},sum:function(value){return this.eachAfter((function(node){for(var sum=+value(node.data)||0,children=node.children,i=children&&children.length;--i>=0;)sum+=children[i].value;node.value=sum}))},sort:function(compare){return this.eachBefore((function(node){node.children&&node.children.sort(compare)}))},path:function(end){for(var start=this,ancestor=function(a,b){if(a===b)return a;var aNodes=a.ancestors(),bNodes=b.ancestors(),c=null;a=aNodes.pop(),b=bNodes.pop();for(;a===b;)c=a,a=aNodes.pop(),b=bNodes.pop();return c}(start,end),nodes=[start];start!==ancestor;)start=start.parent,nodes.push(start);for(var k=nodes.length;end!==ancestor;)nodes.splice(k,0,end),end=end.parent;return nodes},ancestors:function(){for(var node=this,nodes=[node];node=node.parent;)nodes.push(node);return nodes},descendants:function(){return Array.from(this)},leaves:function(){var leaves=[];return this.eachBefore((function(node){node.children||leaves.push(node)})),leaves},links:function(){var root=this,links=[];return root.each((function(node){node!==root&&links.push({source:node.parent,target:node})})),links},copy:function(){return hierarchy(this).eachBefore(copyData)},[Symbol.iterator]:function*(){var current,children,i,n,node=this,next=[node];do{for(current=next.reverse(),next=[];node=current.pop();)if(yield node,children=node.children)for(i=0,n=children.length;i<n;++i)next.push(children[i])}while(next.length)}};var enclose=function(circles){for(var p,e,i=0,n=(circles=function(array){for(var t,i,m=array.length;m;)i=Math.random()*m--|0,t=array[m],array[m]=array[i],array[i]=t;return array}(Array.from(circles))).length,B=[];i<n;)p=circles[i],e&&enclosesWeak(e,p)?++i:(e=encloseBasis(B=extendBasis(B,p)),i=0);return e};function extendBasis(B,p){var i,j;if(enclosesWeakAll(p,B))return[p];for(i=0;i<B.length;++i)if(enclosesNot(p,B[i])&&enclosesWeakAll(encloseBasis2(B[i],p),B))return[B[i],p];for(i=0;i<B.length-1;++i)for(j=i+1;j<B.length;++j)if(enclosesNot(encloseBasis2(B[i],B[j]),p)&&enclosesNot(encloseBasis2(B[i],p),B[j])&&enclosesNot(encloseBasis2(B[j],p),B[i])&&enclosesWeakAll(encloseBasis3(B[i],B[j],p),B))return[B[i],B[j],p];throw new Error}function enclosesNot(a,b){var dr=a.r-b.r,dx=b.x-a.x,dy=b.y-a.y;return dr<0||dr*dr<dx*dx+dy*dy}function enclosesWeak(a,b){var dr=a.r-b.r+1e-9*Math.max(a.r,b.r,1),dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy}function enclosesWeakAll(a,B){for(var i=0;i<B.length;++i)if(!enclosesWeak(a,B[i]))return!1;return!0}function encloseBasis(B){switch(B.length){case 1:return{x:(a=B[0]).x,y:a.y,r:a.r};case 2:return encloseBasis2(B[0],B[1]);case 3:return encloseBasis3(B[0],B[1],B[2])}var a}function encloseBasis2(a,b){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x21=x2-x1,y21=y2-y1,r21=r2-r1,l=Math.sqrt(x21*x21+y21*y21);return{x:(x1+x2+x21/l*r21)/2,y:(y1+y2+y21/l*r21)/2,r:(l+r1+r2)/2}}function encloseBasis3(a,b,c){var x1=a.x,y1=a.y,r1=a.r,x2=b.x,y2=b.y,r2=b.r,x3=c.x,y3=c.y,r3=c.r,a2=x1-x2,a3=x1-x3,b2=y1-y2,b3=y1-y3,c2=r2-r1,c3=r3-r1,d1=x1*x1+y1*y1-r1*r1,d2=d1-x2*x2-y2*y2+r2*r2,d3=d1-x3*x3-y3*y3+r3*r3,ab=a3*b2-a2*b3,xa=(b2*d3-b3*d2)/(2*ab)-x1,xb=(b3*c2-b2*c3)/ab,ya=(a3*d2-a2*d3)/(2*ab)-y1,yb=(a2*c3-a3*c2)/ab,A=xb*xb+yb*yb-1,B=2*(r1+xa*xb+ya*yb),C=xa*xa+ya*ya-r1*r1,r=-(A?(B+Math.sqrt(B*B-4*A*C))/(2*A):C/B);return{x:x1+xa+xb*r,y:y1+ya+yb*r,r:r}}function place(b,a,c){var x,a2,y,b2,dx=b.x-a.x,dy=b.y-a.y,d2=dx*dx+dy*dy;d2?(a2=a.r+c.r,a2*=a2,b2=b.r+c.r,a2>(b2*=b2)?(x=(d2+b2-a2)/(2*d2),y=Math.sqrt(Math.max(0,b2/d2-x*x)),c.x=b.x-x*dx-y*dy,c.y=b.y-x*dy+y*dx):(x=(d2+a2-b2)/(2*d2),y=Math.sqrt(Math.max(0,a2/d2-x*x)),c.x=a.x+x*dx-y*dy,c.y=a.y+x*dy+y*dx)):(c.x=a.x+c.r,c.y=a.y)}function intersects(a,b){var dr=a.r+b.r-1e-6,dx=b.x-a.x,dy=b.y-a.y;return dr>0&&dr*dr>dx*dx+dy*dy}function score(node){var a=node._,b=node.next._,ab=a.r+b.r,dx=(a.x*b.r+b.x*a.r)/ab,dy=(a.y*b.r+b.y*a.r)/ab;return dx*dx+dy*dy}function siblings_Node(circle){this._=circle,this.next=null,this.previous=null}function packEnclose(circles){if(!(n=(x=circles,circles="object"==typeof x&&"length"in x?x:Array.from(x)).length))return 0;var x,a,b,c,n,aa,ca,i,j,k,sj,sk;if((a=circles[0]).x=0,a.y=0,!(n>1))return a.r;if(b=circles[1],a.x=-b.r,b.x=a.r,b.y=0,!(n>2))return a.r+b.r;place(b,a,c=circles[2]),a=new siblings_Node(a),b=new siblings_Node(b),c=new siblings_Node(c),a.next=c.previous=b,b.next=a.previous=c,c.next=b.previous=a;pack:for(i=3;i<n;++i){place(a._,b._,c=circles[i]),c=new siblings_Node(c),j=b.next,k=a.previous,sj=b._.r,sk=a._.r;do{if(sj<=sk){if(intersects(j._,c._)){b=j,a.next=b,b.previous=a,--i;continue pack}sj+=j._.r,j=j.next}else{if(intersects(k._,c._)){(a=k).next=b,b.previous=a,--i;continue pack}sk+=k._.r,k=k.previous}}while(j!==k.next);for(c.previous=a,c.next=b,a.next=b.previous=b=c,aa=score(a);(c=c.next)!==b;)(ca=score(c))<aa&&(a=c,aa=ca);b=a.next}for(a=[b._],c=b;(c=c.next)!==b;)a.push(c._);for(c=enclose(a),i=0;i<n;++i)(a=circles[i]).x-=c.x,a.y-=c.y;return c.r}var siblings=function(circles){return packEnclose(circles),circles};function optional(f){return null==f?null:required(f)}function required(f){if("function"!=typeof f)throw new Error;return f}function constantZero(){return 0}var d3_hierarchy_src_constant=function(x){return function(){return x}};function pack_defaultRadius(d){return Math.sqrt(d.value)}var src_pack=function(){var radius=null,dx=1,dy=1,padding=constantZero;function pack(root){return root.x=dx/2,root.y=dy/2,radius?root.eachBefore(radiusLeaf(radius)).eachAfter(packChildren(padding,.5)).eachBefore(translateChild(1)):root.eachBefore(radiusLeaf(pack_defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(padding,root.r/Math.min(dx,dy))).eachBefore(translateChild(Math.min(dx,dy)/(2*root.r))),root}return pack.radius=function(x){return arguments.length?(radius=optional(x),pack):radius},pack.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],pack):[dx,dy]},pack.padding=function(x){return arguments.length?(padding="function"==typeof x?x:d3_hierarchy_src_constant(+x),pack):padding},pack};function radiusLeaf(radius){return function(node){node.children||(node.r=Math.max(0,+radius(node)||0))}}function packChildren(padding,k){return function(node){if(children=node.children){var children,i,e,n=children.length,r=padding(node)*k||0;if(r)for(i=0;i<n;++i)children[i].r+=r;if(e=packEnclose(children),r)for(i=0;i<n;++i)children[i].r-=r;node.r=e+r}}}function translateChild(k){return function(node){var parent=node.parent;node.r*=k,parent&&(node.x=parent.x+k*node.x,node.y=parent.y+k*node.y)}}var treemap_round=function(node){node.x0=Math.round(node.x0),node.y0=Math.round(node.y0),node.x1=Math.round(node.x1),node.y1=Math.round(node.y1)},dice=function(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;++i<n;)(node=nodes[i]).y0=y0,node.y1=y1,node.x0=x0,node.x1=x0+=node.value*k},src_partition=function(){var dx=1,dy=1,padding=0,round=!1;function partition(root){var n=root.height+1;return root.x0=root.y0=padding,root.x1=dx,root.y1=dy/n,root.eachBefore(function(dy,n){return function(node){node.children&&dice(node,node.x0,dy*(node.depth+1)/n,node.x1,dy*(node.depth+2)/n);var x0=node.x0,y0=node.y0,x1=node.x1-padding,y1=node.y1-padding;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1}}(dy,n)),round&&root.eachBefore(treemap_round),root}return partition.round=function(x){return arguments.length?(round=!!x,partition):round},partition.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],partition):[dx,dy]},partition.padding=function(x){return arguments.length?(padding=+x,partition):padding},partition},preroot={depth:-1},ambiguous={};function defaultId(d){return d.id}function defaultParentId(d){return d.parentId}var src_stratify=function(){var id=defaultId,parentId=defaultParentId;function stratify(data){var d,i,root,parent,node,nodeId,nodeKey,nodes=Array.from(data),n=nodes.length,nodeByKey=new Map;for(i=0;i<n;++i)d=nodes[i],node=nodes[i]=new Node(d),null!=(nodeId=id(d,i,data))&&(nodeId+="")&&(nodeKey=node.id=nodeId,nodeByKey.set(nodeKey,nodeByKey.has(nodeKey)?ambiguous:node)),null!=(nodeId=parentId(d,i,data))&&(nodeId+="")&&(node.parent=nodeId);for(i=0;i<n;++i)if(nodeId=(node=nodes[i]).parent){if(!(parent=nodeByKey.get(nodeId)))throw new Error("missing: "+nodeId);if(parent===ambiguous)throw new Error("ambiguous: "+nodeId);parent.children?parent.children.push(node):parent.children=[node],node.parent=parent}else{if(root)throw new Error("multiple roots");root=node}if(!root)throw new Error("no root");if(root.parent=preroot,root.eachBefore((function(node){node.depth=node.parent.depth+1,--n})).eachBefore(computeHeight),root.parent=null,n>0)throw new Error("cycle");return root}return stratify.id=function(x){return arguments.length?(id=required(x),stratify):id},stratify.parentId=function(x){return arguments.length?(parentId=required(x),stratify):parentId},stratify};function tree_defaultSeparation(a,b){return a.parent===b.parent?1:2}function nextLeft(v){var children=v.children;return children?children[0]:v.t}function nextRight(v){var children=v.children;return children?children[children.length-1]:v.t}function moveSubtree(wm,wp,shift){var change=shift/(wp.i-wm.i);wp.c-=change,wp.s+=shift,wm.c+=change,wp.z+=shift,wp.m+=shift}function nextAncestor(vim,v,ancestor){return vim.a.parent===v.parent?vim.a:ancestor}function TreeNode(node,i){this._=node,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=i}TreeNode.prototype=Object.create(Node.prototype);var src_tree=function(){var separation=tree_defaultSeparation,dx=1,dy=1,nodeSize=null;function tree(root){var t=function(root){for(var node,child,children,i,n,tree=new TreeNode(root,0),nodes=[tree];node=nodes.pop();)if(children=node._.children)for(node.children=new Array(n=children.length),i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new TreeNode(children[i],i)),child.parent=node;return(tree.parent=new TreeNode(null,0)).children=[tree],tree}(root);if(t.eachAfter(firstWalk),t.parent.m=-t.z,t.eachBefore(secondWalk),nodeSize)root.eachBefore(sizeNode);else{var left=root,right=root,bottom=root;root.eachBefore((function(node){node.x<left.x&&(left=node),node.x>right.x&&(right=node),node.depth>bottom.depth&&(bottom=node)}));var s=left===right?1:separation(left,right)/2,tx=s-left.x,kx=dx/(right.x+s+tx),ky=dy/(bottom.depth||1);root.eachBefore((function(node){node.x=(node.x+tx)*kx,node.y=node.depth*ky}))}return root}function firstWalk(v){var children=v.children,siblings=v.parent.children,w=v.i?siblings[v.i-1]:null;if(children){!function(v){for(var w,shift=0,change=0,children=v.children,i=children.length;--i>=0;)(w=children[i]).z+=shift,w.m+=shift,shift+=w.s+(change+=w.c)}(v);var midpoint=(children[0].z+children[children.length-1].z)/2;w?(v.z=w.z+separation(v._,w._),v.m=v.z-midpoint):v.z=midpoint}else w&&(v.z=w.z+separation(v._,w._));v.parent.A=function(v,w,ancestor){if(w){for(var shift,vip=v,vop=v,vim=w,vom=vip.parent.children[0],sip=vip.m,sop=vop.m,sim=vim.m,som=vom.m;vim=nextRight(vim),vip=nextLeft(vip),vim&&vip;)vom=nextLeft(vom),(vop=nextRight(vop)).a=v,(shift=vim.z+sim-vip.z-sip+separation(vim._,vip._))>0&&(moveSubtree(nextAncestor(vim,v,ancestor),v,shift),sip+=shift,sop+=shift),sim+=vim.m,sip+=vip.m,som+=vom.m,sop+=vop.m;vim&&!nextRight(vop)&&(vop.t=vim,vop.m+=sim-sop),vip&&!nextLeft(vom)&&(vom.t=vip,vom.m+=sip-som,ancestor=v)}return ancestor}(v,w,v.parent.A||siblings[0])}function secondWalk(v){v._.x=v.z+v.parent.m,v.m+=v.parent.m}function sizeNode(node){node.x*=dx,node.y=node.depth*dy}return tree.separation=function(x){return arguments.length?(separation=x,tree):separation},tree.size=function(x){return arguments.length?(nodeSize=!1,dx=+x[0],dy=+x[1],tree):nodeSize?null:[dx,dy]},tree.nodeSize=function(x){return arguments.length?(nodeSize=!0,dx=+x[0],dy=+x[1],tree):nodeSize?[dx,dy]:null},tree},treemap_slice=function(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(y1-y0)/parent.value;++i<n;)(node=nodes[i]).x0=x0,node.x1=x1,node.y0=y0,node.y1=y0+=node.value*k},squarify_phi=(1+Math.sqrt(5))/2;function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var row,nodeValue,dx,dy,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta,rows=[],nodes=parent.children,i0=0,i1=0,n=nodes.length,value=parent.value;i0<n;){dx=x1-x0,dy=y1-y0;do{sumValue=nodes[i1++].value}while(!sumValue&&i1<n);for(minValue=maxValue=sumValue,beta=sumValue*sumValue*(alpha=Math.max(dy/dx,dx/dy)/(value*ratio)),minRatio=Math.max(maxValue/beta,beta/minValue);i1<n;++i1){if(sumValue+=nodeValue=nodes[i1].value,nodeValue<minValue&&(minValue=nodeValue),nodeValue>maxValue&&(maxValue=nodeValue),beta=sumValue*sumValue*alpha,(newRatio=Math.max(maxValue/beta,beta/minValue))>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}rows.push(row={value:sumValue,dice:dx<dy,children:nodes.slice(i0,i1)}),row.dice?dice(row,x0,y0,x1,value?y0+=dy*sumValue/value:y1):treemap_slice(row,x0,y0,value?x0+=dx*sumValue/value:x1,y1),value-=sumValue,i0=i1}return rows}var squarify=function custom(ratio){function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1)}return squarify.ratio=function(x){return custom((x=+x)>1?x:1)},squarify}(squarify_phi),src_treemap=function(){var tile=squarify,round=!1,dx=1,dy=1,paddingStack=[0],paddingInner=constantZero,paddingTop=constantZero,paddingRight=constantZero,paddingBottom=constantZero,paddingLeft=constantZero;function treemap(root){return root.x0=root.y0=0,root.x1=dx,root.y1=dy,root.eachBefore(positionNode),paddingStack=[0],round&&root.eachBefore(treemap_round),root}function positionNode(node){var p=paddingStack[node.depth],x0=node.x0+p,y0=node.y0+p,x1=node.x1-p,y1=node.y1-p;x1<x0&&(x0=x1=(x0+x1)/2),y1<y0&&(y0=y1=(y0+y1)/2),node.x0=x0,node.y0=y0,node.x1=x1,node.y1=y1,node.children&&(p=paddingStack[node.depth+1]=paddingInner(node)/2,x0+=paddingLeft(node)-p,y0+=paddingTop(node)-p,(x1-=paddingRight(node)-p)<x0&&(x0=x1=(x0+x1)/2),(y1-=paddingBottom(node)-p)<y0&&(y0=y1=(y0+y1)/2),tile(node,x0,y0,x1,y1))}return treemap.round=function(x){return arguments.length?(round=!!x,treemap):round},treemap.size=function(x){return arguments.length?(dx=+x[0],dy=+x[1],treemap):[dx,dy]},treemap.tile=function(x){return arguments.length?(tile=required(x),treemap):tile},treemap.padding=function(x){return arguments.length?treemap.paddingInner(x).paddingOuter(x):treemap.paddingInner()},treemap.paddingInner=function(x){return arguments.length?(paddingInner="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingInner},treemap.paddingOuter=function(x){return arguments.length?treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x):treemap.paddingTop()},treemap.paddingTop=function(x){return arguments.length?(paddingTop="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingTop},treemap.paddingRight=function(x){return arguments.length?(paddingRight="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingRight},treemap.paddingBottom=function(x){return arguments.length?(paddingBottom="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingBottom},treemap.paddingLeft=function(x){return arguments.length?(paddingLeft="function"==typeof x?x:d3_hierarchy_src_constant(+x),treemap):paddingLeft},treemap},binary=function(parent,x0,y0,x1,y1){var i,sum,nodes=parent.children,n=nodes.length,sums=new Array(n+1);for(sums[0]=sum=i=0;i<n;++i)sums[i+1]=sum+=nodes[i].value;!function partition(i,j,value,x0,y0,x1,y1){if(i>=j-1){var node=nodes[i];return node.x0=x0,node.y0=y0,node.x1=x1,void(node.y1=y1)}var valueOffset=sums[i],valueTarget=value/2+valueOffset,k=i+1,hi=j-1;for(;k<hi;){var mid=k+hi>>>1;sums[mid]<valueTarget?k=mid+1:hi=mid}valueTarget-sums[k-1]<sums[k]-valueTarget&&i+1<k&&--k;var valueLeft=sums[k]-valueOffset,valueRight=value-valueLeft;if(x1-x0>y1-y0){var xk=value?(x0*valueRight+x1*valueLeft)/value:x1;partition(i,k,valueLeft,x0,y0,xk,y1),partition(k,j,valueRight,xk,y0,x1,y1)}else{var yk=value?(y0*valueRight+y1*valueLeft)/value:y1;partition(i,k,valueLeft,x0,y0,x1,yk),partition(k,j,valueRight,x0,yk,x1,y1)}}(0,n,parent.value,x0,y0,x1,y1)},sliceDice=function(parent,x0,y0,x1,y1){(1&parent.depth?treemap_slice:dice)(parent,x0,y0,x1,y1)},treemap_resquarify=function custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows=parent._squarify)&&rows.ratio===ratio)for(var rows,row,nodes,i,n,j=-1,m=rows.length,value=parent.value;++j<m;){for(nodes=(row=rows[j]).children,i=row.value=0,n=nodes.length;i<n;++i)row.value+=nodes[i].value;row.dice?dice(row,x0,y0,x1,value?y0+=(y1-y0)*row.value/value:y1):treemap_slice(row,x0,y0,value?x0+=(x1-x0)*row.value/value:x1,y1),value-=row.value}else parent._squarify=rows=squarifyRatio(ratio,parent,x0,y0,x1,y1),rows.ratio=ratio}return resquarify.ratio=function(x){return custom((x=+x)>1?x:1)},resquarify}(squarify_phi),discrete=function(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}},src_hue=function(a,b){var i=color_hue(+a,+b);return function(t){var x=i(t);return x-360*Math.floor(x/360)}},src_round=function(a,b){return a=+a,b=+b,function(t){return Math.round(a*(1-t)+b*t)}};function zoom_cosh(x){return((x=Math.exp(x))+1/x)/2}var src_zoom=function zoomRho(rho,rho2,rho4){function zoom(p0,p1){var i,S,ux0=p0[0],uy0=p0[1],w0=p0[2],ux1=p1[0],uy1=p1[1],w1=p1[2],dx=ux1-ux0,dy=uy1-uy0,d2=dx*dx+dy*dy;if(d2<1e-12)S=Math.log(w1/w0)/rho,i=function(t){return[ux0+t*dx,uy0+t*dy,w0*Math.exp(rho*t*S)]};else{var d1=Math.sqrt(d2),b0=(w1*w1-w0*w0+rho4*d2)/(2*w0*rho2*d1),b1=(w1*w1-w0*w0-rho4*d2)/(2*w1*rho2*d1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);S=(r1-r0)/rho,i=function(t){var x,s=t*S,coshr0=zoom_cosh(r0),u=w0/(rho2*d1)*(coshr0*(x=rho*s+r0,((x=Math.exp(2*x))-1)/(x+1))-function(x){return((x=Math.exp(x))-1/x)/2}(r0));return[ux0+u*dx,uy0+u*dy,w0*coshr0/zoom_cosh(rho*s+r0)]}}return i.duration=1e3*S*rho/Math.SQRT2,i}return zoom.rho=function(_){var _1=Math.max(.001,+_),_2=_1*_1;return zoomRho(_1,_2,_2*_2)},zoom}(Math.SQRT2,2,4);function hsl_hsl(hue){return function(start,end){var h=hue((start=hsl(start)).h,(end=hsl(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(t),start.opacity=opacity(t),start+""}}}var src_hsl=hsl_hsl(color_hue),hslLong=hsl_hsl(nogamma);function lab_lab(start,end){var l=nogamma((start=lab(start)).l,(end=lab(end)).l),a=nogamma(start.a,end.a),b=nogamma(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.l=l(t),start.a=a(t),start.b=b(t),start.opacity=opacity(t),start+""}}function hcl_hcl(hue){return function(start,end){var h=hue((start=hcl(start)).h,(end=hcl(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.c=c(t),start.l=l(t),start.opacity=opacity(t),start+""}}}var src_hcl=hcl_hcl(color_hue),hclLong=hcl_hcl(nogamma);function src_cubehelix_cubehelix(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=cubehelix_cubehelix(start)).h,(end=cubehelix_cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}var src_cubehelix=src_cubehelix_cubehelix(color_hue),cubehelixLong=src_cubehelix_cubehelix(nogamma);function piecewise_piecewise(interpolate,values){void 0===values&&(values=interpolate,interpolate=src_value);for(var i=0,n=values.length-1,v=values[0],I=new Array(n<0?0:n);i<n;)I[i]=interpolate(v,v=values[++i]);return function(t){var i=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return I[i](t-i)}}var quantize=function(interpolator,n){for(var samples=new Array(n),i=0;i<n;++i)samples[i]=interpolator(i/(n-1));return samples},d3_polygon_src_area=function(polygon){for(var a,i=-1,n=polygon.length,b=polygon[n-1],area=0;++i<n;)a=b,b=polygon[i],area+=a[1]*b[0]-a[0]*b[1];return area/2},d3_polygon_src_centroid=function(polygon){for(var a,c,i=-1,n=polygon.length,x=0,y=0,b=polygon[n-1],k=0;++i<n;)a=b,b=polygon[i],k+=c=a[0]*b[1]-b[0]*a[1],x+=(a[0]+b[0])*c,y+=(a[1]+b[1])*c;return[x/(k*=3),y/k]};function lexicographicOrder(a,b){return a[0]-b[0]||a[1]-b[1]}function computeUpperHullIndexes(points){const n=points.length,indexes=[0,1];let i,size=2;for(i=2;i<n;++i){for(;size>1&&(a=points[indexes[size-2]],b=points[indexes[size-1]],c=points[i],(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])<=0);)--size;indexes[size++]=i}var a,b,c;return indexes.slice(0,size)}var src_hull=function(points){if((n=points.length)<3)return null;var i,n,sortedPoints=new Array(n),flippedPoints=new Array(n);for(i=0;i<n;++i)sortedPoints[i]=[+points[i][0],+points[i][1],i];for(sortedPoints.sort(lexicographicOrder),i=0;i<n;++i)flippedPoints[i]=[sortedPoints[i][0],-sortedPoints[i][1]];var upperIndexes=computeUpperHullIndexes(sortedPoints),lowerIndexes=computeUpperHullIndexes(flippedPoints),skipLeft=lowerIndexes[0]===upperIndexes[0],skipRight=lowerIndexes[lowerIndexes.length-1]===upperIndexes[upperIndexes.length-1],hull=[];for(i=upperIndexes.length-1;i>=0;--i)hull.push(points[sortedPoints[upperIndexes[i]][2]]);for(i=+skipLeft;i<lowerIndexes.length-skipRight;++i)hull.push(points[sortedPoints[lowerIndexes[i]][2]]);return hull},d3_polygon_src_contains=function(polygon,point){for(var x1,y1,n=polygon.length,p=polygon[n-1],x=point[0],y=point[1],x0=p[0],y0=p[1],inside=!1,i=0;i<n;++i)x1=(p=polygon[i])[0],(y1=p[1])>y!=y0>y&&x<(x0-x1)*(y-y1)/(y0-y1)+x1&&(inside=!inside),x0=x1,y0=y1;return inside},d3_polygon_src_length=function(polygon){for(var xa,ya,i=-1,n=polygon.length,b=polygon[n-1],xb=b[0],yb=b[1],perimeter=0;++i<n;)xa=xb,ya=yb,xa-=xb=(b=polygon[i])[0],ya-=yb=b[1],perimeter+=Math.hypot(xa,ya);return perimeter},src_defaultSource=Math.random,uniform=function sourceRandomUniform(source){function randomUniform(min,max){return min=null==min?0:+min,max=null==max?1:+max,1===arguments.length?(max=min,min=0):max-=min,function(){return source()*max+min}}return randomUniform.source=sourceRandomUniform,randomUniform}(src_defaultSource),src_int=function sourceRandomInt(source){function randomInt(min,max){return arguments.length<2&&(max=min,min=0),min=Math.floor(min),max=Math.floor(max)-min,function(){return Math.floor(source()*max+min)}}return randomInt.source=sourceRandomInt,randomInt}(src_defaultSource),src_normal=function sourceRandomNormal(source){function randomNormal(mu,sigma){var x,r;return mu=null==mu?0:+mu,sigma=null==sigma?1:+sigma,function(){var y;if(null!=x)y=x,x=null;else do{x=2*source()-1,y=2*source()-1,r=x*x+y*y}while(!r||r>1);return mu+sigma*y*Math.sqrt(-2*Math.log(r)/r)}}return randomNormal.source=sourceRandomNormal,randomNormal}(src_defaultSource),logNormal=function sourceRandomLogNormal(source){var N=src_normal.source(source);function randomLogNormal(){var randomNormal=N.apply(this,arguments);return function(){return Math.exp(randomNormal())}}return randomLogNormal.source=sourceRandomLogNormal,randomLogNormal}(src_defaultSource),irwinHall=function sourceRandomIrwinHall(source){function randomIrwinHall(n){return(n=+n)<=0?()=>0:function(){for(var sum=0,i=n;i>1;--i)sum+=source();return sum+i*source()}}return randomIrwinHall.source=sourceRandomIrwinHall,randomIrwinHall}(src_defaultSource),bates=function sourceRandomBates(source){var I=irwinHall.source(source);function randomBates(n){if(0==(n=+n))return source;var randomIrwinHall=I(n);return function(){return randomIrwinHall()/n}}return randomBates.source=sourceRandomBates,randomBates}(src_defaultSource),src_exponential=function sourceRandomExponential(source){function randomExponential(lambda){return function(){return-Math.log1p(-source())/lambda}}return randomExponential.source=sourceRandomExponential,randomExponential}(src_defaultSource),pareto=function sourceRandomPareto(source){function randomPareto(alpha){if((alpha=+alpha)<0)throw new RangeError("invalid alpha");return alpha=1/-alpha,function(){return Math.pow(1-source(),alpha)}}return randomPareto.source=sourceRandomPareto,randomPareto}(src_defaultSource),bernoulli=function sourceRandomBernoulli(source){function randomBernoulli(p){if((p=+p)<0||p>1)throw new RangeError("invalid p");return function(){return Math.floor(source()+p)}}return randomBernoulli.source=sourceRandomBernoulli,randomBernoulli}(src_defaultSource),geometric=function sourceRandomGeometric(source){function randomGeometric(p){if((p=+p)<0||p>1)throw new RangeError("invalid p");return 0===p?()=>1/0:1===p?()=>1:(p=Math.log1p(-p),function(){return 1+Math.floor(Math.log1p(-source())/p)})}return randomGeometric.source=sourceRandomGeometric,randomGeometric}(src_defaultSource),src_gamma=function sourceRandomGamma(source){var randomNormal=src_normal.source(source)();function randomGamma(k,theta){if((k=+k)<0)throw new RangeError("invalid k");if(0===k)return()=>0;if(theta=null==theta?1:+theta,1===k)return()=>-Math.log1p(-source())*theta;var d=(k<1?k+1:k)-1/3,c=1/(3*Math.sqrt(d)),multiplier=k<1?()=>Math.pow(source(),1/k):()=>1;return function(){do{do{var x=randomNormal(),v=1+c*x}while(v<=0);v*=v*v;var u=1-source()}while(u>=1-.0331*x*x*x*x&&Math.log(u)>=.5*x*x+d*(1-v+Math.log(v)));return d*v*multiplier()*theta}}return randomGamma.source=sourceRandomGamma,randomGamma}(src_defaultSource),src_beta=function sourceRandomBeta(source){var G=src_gamma.source(source);function randomBeta(alpha,beta){var X=G(alpha),Y=G(beta);return function(){var x=X();return 0===x?0:x/(x+Y())}}return randomBeta.source=sourceRandomBeta,randomBeta}(src_defaultSource),binomial=function sourceRandomBinomial(source){var G=geometric.source(source),B=src_beta.source(source);function randomBinomial(n,p){return n=+n,(p=+p)>=1?()=>n:p<=0?()=>0:function(){for(var acc=0,nn=n,pp=p;nn*pp>16&&nn*(1-pp)>16;){var i=Math.floor((nn+1)*pp),y=B(i,nn-i+1)();y<=pp?(acc+=i,nn-=i,pp=(pp-y)/(1-y)):(nn=i-1,pp/=y)}for(var sign=pp<.5,g=G(sign?pp:1-pp),s=g(),k=0;s<=nn;++k)s+=g();return acc+(sign?k:nn-k)}}return randomBinomial.source=sourceRandomBinomial,randomBinomial}(src_defaultSource),weibull=function sourceRandomWeibull(source){function randomWeibull(k,a,b){var outerFunc;return 0==(k=+k)?outerFunc=x=>-Math.log(x):(k=1/k,outerFunc=x=>Math.pow(x,k)),a=null==a?0:+a,b=null==b?1:+b,function(){return a+b*outerFunc(-Math.log1p(-source()))}}return randomWeibull.source=sourceRandomWeibull,randomWeibull}(src_defaultSource),cauchy=function sourceRandomCauchy(source){function randomCauchy(a,b){return a=null==a?0:+a,b=null==b?1:+b,function(){return a+b*Math.tan(Math.PI*source())}}return randomCauchy.source=sourceRandomCauchy,randomCauchy}(src_defaultSource),logistic=function sourceRandomLogistic(source){function randomLogistic(a,b){return a=null==a?0:+a,b=null==b?1:+b,function(){var u=source();return a+b*Math.log(u/(1-u))}}return randomLogistic.source=sourceRandomLogistic,randomLogistic}(src_defaultSource),poisson=function sourceRandomPoisson(source){var G=src_gamma.source(source),B=binomial.source(source);function randomPoisson(lambda){return function(){for(var acc=0,l=lambda;l>16;){var n=Math.floor(.875*l),t=G(n)();if(t>l)return acc+B(n-1,l/t)();acc+=n,l-=t}for(var s=-Math.log1p(-source()),k=0;s<=l;++k)s-=Math.log1p(-source());return acc+k}}return randomPoisson.source=sourceRandomPoisson,randomPoisson}(src_defaultSource);const eps=1/4294967296;function lcg_lcg(seed=Math.random()){let state=0|(0<=seed&&seed<1?seed/eps:Math.abs(seed));return()=>(state=1664525*state+1013904223|0,eps*(state>>>0))}function initRange(domain,range){switch(arguments.length){case 0:break;case 1:this.range(domain);break;default:this.range(range).domain(domain)}return this}function initInterpolator(domain,interpolator){switch(arguments.length){case 0:break;case 1:"function"==typeof domain?this.interpolator(domain):this.range(domain);break;default:this.domain(domain),"function"==typeof interpolator?this.interpolator(interpolator):this.range(interpolator)}return this}const implicit=Symbol("implicit");function ordinal(){var index=new Map,domain=[],range=[],unknown=implicit;function scale(d){var key=d+"",i=index.get(key);if(!i){if(unknown!==implicit)return unknown;index.set(key,i=domain.push(d))}return range[(i-1)%range.length]}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[],index=new Map;for(const value of _){const key=value+"";index.has(key)||index.set(key,domain.push(value))}return scale},scale.range=function(_){return arguments.length?(range=Array.from(_),scale):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return ordinal(domain,range).unknown(unknown)},initRange.apply(scale,arguments),scale}function band(){var step,bandwidth,scale=ordinal().unknown(void 0),domain=scale.domain,ordinalRange=scale.range,r0=0,r1=1,round=!1,paddingInner=0,paddingOuter=0,align=.5;function rescale(){var n=domain().length,reverse=r1<r0,start=reverse?r1:r0,stop=reverse?r0:r1;step=(stop-start)/Math.max(1,n-paddingInner+2*paddingOuter),round&&(step=Math.floor(step)),start+=(stop-start-step*(n-paddingInner))*align,bandwidth=step*(1-paddingInner),round&&(start=Math.round(start),bandwidth=Math.round(bandwidth));var values=src_range(n).map((function(i){return start+step*i}));return ordinalRange(reverse?values.reverse():values)}return delete scale.unknown,scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.range=function(_){return arguments.length?([r0,r1]=_,r0=+r0,r1=+r1,rescale()):[r0,r1]},scale.rangeRound=function(_){return[r0,r1]=_,r0=+r0,r1=+r1,round=!0,rescale()},scale.bandwidth=function(){return bandwidth},scale.step=function(){return step},scale.round=function(_){return arguments.length?(round=!!_,rescale()):round},scale.padding=function(_){return arguments.length?(paddingInner=Math.min(1,paddingOuter=+_),rescale()):paddingInner},scale.paddingInner=function(_){return arguments.length?(paddingInner=Math.min(1,_),rescale()):paddingInner},scale.paddingOuter=function(_){return arguments.length?(paddingOuter=+_,rescale()):paddingOuter},scale.align=function(_){return arguments.length?(align=Math.max(0,Math.min(1,_)),rescale()):align},scale.copy=function(){return band(domain(),[r0,r1]).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align)},initRange.apply(rescale(),arguments)}function pointish(scale){var copy=scale.copy;return scale.padding=scale.paddingOuter,delete scale.paddingInner,delete scale.paddingOuter,scale.copy=function(){return pointish(copy())},scale}function band_point(){return pointish(band.apply(null,arguments).paddingInner(1))}function number_number(x){return+x}var unit=[0,1];function continuous_identity(x){return x}function normalize(a,b){return(b-=a=+a)?function(x){return(x-a)/b}:(x=isNaN(b)?NaN:.5,function(){return x});var x}function bimap(domain,range,interpolate){var d0=domain[0],d1=domain[1],r0=range[0],r1=range[1];return d1<d0?(d0=normalize(d1,d0),r0=interpolate(r1,r0)):(d0=normalize(d0,d1),r0=interpolate(r0,r1)),function(x){return r0(d0(x))}}function polymap(domain,range,interpolate){var j=Math.min(domain.length,range.length)-1,d=new Array(j),r=new Array(j),i=-1;for(domain[j]<domain[0]&&(domain=domain.slice().reverse(),range=range.slice().reverse());++i<j;)d[i]=normalize(domain[i],domain[i+1]),r[i]=interpolate(range[i],range[i+1]);return function(x){var i=bisect(domain,x,1,j)-1;return r[i](d[i](x))}}function copy(source,target){return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown())}function continuous_transformer(){var transform,untransform,unknown,piecewise,output,input,domain=unit,range=unit,interpolate=src_value,clamp=continuous_identity;function rescale(){var a,b,t,n=Math.min(domain.length,range.length);return clamp!==continuous_identity&&(a=domain[0],b=domain[n-1],a>b&&(t=a,a=b,b=t),clamp=function(x){return Math.max(a,Math.min(b,x))}),piecewise=n>2?polymap:bimap,output=input=null,scale}function scale(x){return null==x||isNaN(x=+x)?unknown:(output||(output=piecewise(domain.map(transform),range,interpolate)))(transform(clamp(x)))}return scale.invert=function(y){return clamp(untransform((input||(input=piecewise(range,domain.map(transform),src_number)))(y)))},scale.domain=function(_){return arguments.length?(domain=Array.from(_,number_number),rescale()):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.rangeRound=function(_){return range=Array.from(_),interpolate=src_round,rescale()},scale.clamp=function(_){return arguments.length?(clamp=!!_||continuous_identity,rescale()):clamp!==continuous_identity},scale.interpolate=function(_){return arguments.length?(interpolate=_,rescale()):interpolate},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t,u){return transform=t,untransform=u,rescale()}}function continuous(){return continuous_transformer()(continuous_identity,continuous_identity)}function tickFormat_tickFormat(start,stop,count,specifier){var precision,step=tickStep(start,stop,count);switch((specifier=formatSpecifier(null==specifier?",f":specifier)).type){case"s":var value=Math.max(Math.abs(start),Math.abs(stop));return null!=specifier.precision||isNaN(precision=precisionPrefix(step,value))||(specifier.precision=precision),defaultLocale_formatPrefix(specifier,value);case"":case"e":case"g":case"p":case"r":null!=specifier.precision||isNaN(precision=precisionRound(step,Math.max(Math.abs(start),Math.abs(stop))))||(specifier.precision=precision-("e"===specifier.type));break;case"f":case"%":null!=specifier.precision||isNaN(precision=precisionFixed(step))||(specifier.precision=precision-2*("%"===specifier.type))}return defaultLocale_format(specifier)}function linearish(scale){var domain=scale.domain;return scale.ticks=function(count){var d=domain();return src_ticks(d[0],d[d.length-1],null==count?10:count)},scale.tickFormat=function(count,specifier){var d=domain();return tickFormat_tickFormat(d[0],d[d.length-1],null==count?10:count,specifier)},scale.nice=function(count){null==count&&(count=10);var prestep,step,d=domain(),i0=0,i1=d.length-1,start=d[i0],stop=d[i1],maxIter=10;for(stop<start&&(step=start,start=stop,stop=step,step=i0,i0=i1,i1=step);maxIter-- >0;){if((step=tickIncrement(start,stop,count))===prestep)return d[i0]=start,d[i1]=stop,domain(d);if(step>0)start=Math.floor(start/step)*step,stop=Math.ceil(stop/step)*step;else{if(!(step<0))break;start=Math.ceil(start*step)/step,stop=Math.floor(stop*step)/step}prestep=step}return scale},scale}function src_linear_linear(){var scale=continuous();return scale.copy=function(){return copy(scale,src_linear_linear())},initRange.apply(scale,arguments),linearish(scale)}function identity_identity(domain){var unknown;function scale(x){return null==x||isNaN(x=+x)?unknown:x}return scale.invert=scale,scale.domain=scale.range=function(_){return arguments.length?(domain=Array.from(_,number_number),scale):domain.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return identity_identity(domain).unknown(unknown)},domain=arguments.length?Array.from(domain,number_number):[0,1],linearish(scale)}function nice_nice(domain,interval){var t,i0=0,i1=(domain=domain.slice()).length-1,x0=domain[i0],x1=domain[i1];return x1<x0&&(t=i0,i0=i1,i1=t,t=x0,x0=x1,x1=t),domain[i0]=interval.floor(x0),domain[i1]=interval.ceil(x1),domain}function transformLog(x){return Math.log(x)}function transformExp(x){return Math.exp(x)}function transformLogn(x){return-Math.log(-x)}function transformExpn(x){return-Math.exp(-x)}function pow10(x){return isFinite(x)?+("1e"+x):x<0?0:x}function reflect(f){return function(x){return-f(-x)}}function loggish(transform){var logs,pows,scale=transform(transformLog,transformExp),domain=scale.domain,base=10;function rescale(){return logs=function(base){return base===Math.E?Math.log:10===base&&Math.log10||2===base&&Math.log2||(base=Math.log(base),function(x){return Math.log(x)/base})}(base),pows=function(base){return 10===base?pow10:base===Math.E?Math.exp:function(x){return Math.pow(base,x)}}(base),domain()[0]<0?(logs=reflect(logs),pows=reflect(pows),transform(transformLogn,transformExpn)):transform(transformLog,transformExp),scale}return scale.base=function(_){return arguments.length?(base=+_,rescale()):base},scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()},scale.ticks=function(count){var r,d=domain(),u=d[0],v=d[d.length-1];(r=v<u)&&(i=u,u=v,v=i);var p,k,t,i=logs(u),j=logs(v),n=null==count?10:+count,z=[];if(!(base%1)&&j-i<n){if(i=Math.floor(i),j=Math.ceil(j),u>0){for(;i<=j;++i)for(k=1,p=pows(i);k<base;++k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}}else for(;i<=j;++i)for(k=base-1,p=pows(i);k>=1;--k)if(!((t=p*k)<u)){if(t>v)break;z.push(t)}2*z.length<n&&(z=src_ticks(u,v,n))}else z=src_ticks(i,j,Math.min(j-i,n)).map(pows);return r?z.reverse():z},scale.tickFormat=function(count,specifier){if(null==specifier&&(specifier=10===base?".0e":","),"function"!=typeof specifier&&(specifier=defaultLocale_format(specifier)),count===1/0)return specifier;null==count&&(count=10);var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(Math.round(logs(d)));return i*base<base-.5&&(i*=base),i<=k?specifier(d):""}},scale.nice=function(){return domain(nice_nice(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))},scale}function log_log(){var scale=loggish(continuous_transformer()).domain([1,10]);return scale.copy=function(){return copy(scale,log_log()).base(scale.base())},initRange.apply(scale,arguments),scale}function transformSymlog(c){return function(x){return Math.sign(x)*Math.log1p(Math.abs(x/c))}}function transformSymexp(c){return function(x){return Math.sign(x)*Math.expm1(Math.abs(x))*c}}function symlogish(transform){var c=1,scale=transform(transformSymlog(c),transformSymexp(c));return scale.constant=function(_){return arguments.length?transform(transformSymlog(c=+_),transformSymexp(c)):c},linearish(scale)}function symlog(){var scale=symlogish(continuous_transformer());return scale.copy=function(){return copy(scale,symlog()).constant(scale.constant())},initRange.apply(scale,arguments)}function transformPow(exponent){return function(x){return x<0?-Math.pow(-x,exponent):Math.pow(x,exponent)}}function transformSqrt(x){return x<0?-Math.sqrt(-x):Math.sqrt(x)}function transformSquare(x){return x<0?-x*x:x*x}function powish(transform){var scale=transform(continuous_identity,continuous_identity),exponent=1;function rescale(){return 1===exponent?transform(continuous_identity,continuous_identity):.5===exponent?transform(transformSqrt,transformSquare):transform(transformPow(exponent),transformPow(1/exponent))}return scale.exponent=function(_){return arguments.length?(exponent=+_,rescale()):exponent},linearish(scale)}function pow_pow(){var scale=powish(continuous_transformer());return scale.copy=function(){return copy(scale,pow_pow()).exponent(scale.exponent())},initRange.apply(scale,arguments),scale}function pow_sqrt(){return pow_pow.apply(null,arguments).exponent(.5)}function square(x){return Math.sign(x)*x*x}function unsquare(x){return Math.sign(x)*Math.sqrt(Math.abs(x))}function radial_radial(){var unknown,squared=continuous(),range=[0,1],round=!1;function scale(x){var y=unsquare(squared(x));return isNaN(y)?unknown:round?Math.round(y):y}return scale.invert=function(y){return squared.invert(square(y))},scale.domain=function(_){return arguments.length?(squared.domain(_),scale):squared.domain()},scale.range=function(_){return arguments.length?(squared.range((range=Array.from(_,number_number)).map(square)),scale):range.slice()},scale.rangeRound=function(_){return scale.range(_).round(!0)},scale.round=function(_){return arguments.length?(round=!!_,scale):round},scale.clamp=function(_){return arguments.length?(squared.clamp(_),scale):squared.clamp()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return radial_radial(squared.domain(),range).round(round).clamp(squared.clamp()).unknown(unknown)},initRange.apply(scale,arguments),linearish(scale)}function quantile_quantile(){var unknown,domain=[],range=[],thresholds=[];function rescale(){var i=0,n=Math.max(1,range.length);for(thresholds=new Array(n-1);++i<n;)thresholds[i-1]=quantileSorted(domain,i/n);return scale}function scale(x){return null==x||isNaN(x=+x)?unknown:range[bisect(thresholds,x)]}return scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:[i>0?thresholds[i-1]:domain[0],i<thresholds.length?thresholds[i]:domain[domain.length-1]]},scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(let d of _)null==d||isNaN(d=+d)||domain.push(d);return domain.sort(ascending),rescale()},scale.range=function(_){return arguments.length?(range=Array.from(_),rescale()):range.slice()},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.quantiles=function(){return thresholds.slice()},scale.copy=function(){return quantile_quantile().domain(domain).range(range).unknown(unknown)},initRange.apply(scale,arguments)}function quantize_quantize(){var unknown,x0=0,x1=1,n=1,domain=[.5],range=[0,1];function scale(x){return null!=x&&x<=x?range[bisect(domain,x,0,n)]:unknown}function rescale(){var i=-1;for(domain=new Array(n);++i<n;)domain[i]=((i+1)*x1-(i-n)*x0)/(n+1);return scale}return scale.domain=function(_){return arguments.length?([x0,x1]=_,x0=+x0,x1=+x1,rescale()):[x0,x1]},scale.range=function(_){return arguments.length?(n=(range=Array.from(_)).length-1,rescale()):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return i<0?[NaN,NaN]:i<1?[x0,domain[0]]:i>=n?[domain[n-1],x1]:[domain[i-1],domain[i]]},scale.unknown=function(_){return arguments.length?(unknown=_,scale):scale},scale.thresholds=function(){return domain.slice()},scale.copy=function(){return quantize_quantize().domain([x0,x1]).range(range).unknown(unknown)},initRange.apply(linearish(scale),arguments)}function threshold_threshold(){var unknown,domain=[.5],range=[0,1],n=1;function scale(x){return null!=x&&x<=x?range[bisect(domain,x,0,n)]:unknown}return scale.domain=function(_){return arguments.length?(domain=Array.from(_),n=Math.min(domain.length,range.length-1),scale):domain.slice()},scale.range=function(_){return arguments.length?(range=Array.from(_),n=Math.min(domain.length,range.length-1),scale):range.slice()},scale.invertExtent=function(y){var i=range.indexOf(y);return[domain[i-1],domain[i]]},scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},scale.copy=function(){return threshold_threshold().domain(domain).range(range).unknown(unknown)},initRange.apply(scale,arguments)}var interval_t0=new Date,interval_t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=0===arguments.length?new Date:new Date(+date)),date}return interval.floor=function(date){return floori(date=new Date(+date)),date},interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval((function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)}),(function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););}))},count&&(interval.count=function(start,end){return interval_t0.setTime(+start),interval_t1.setTime(+end),floori(interval_t0),floori(interval_t1),Math.floor(count(interval_t0,interval_t1))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var millisecond=newInterval((function(){}),(function(date,step){date.setTime(+date+step)}),(function(start,end){return end-start}));millisecond.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval((function(date){date.setTime(Math.floor(date/k)*k)}),(function(date,step){date.setTime(+date+step*k)}),(function(start,end){return(end-start)/k})):millisecond:null};var src_millisecond=millisecond,milliseconds=millisecond.range,second_second=newInterval((function(date){date.setTime(date-date.getMilliseconds())}),(function(date,step){date.setTime(+date+1e3*step)}),(function(start,end){return(end-start)/1e3}),(function(date){return date.getUTCSeconds()})),src_second=second_second,seconds=second_second.range,minute_minute=newInterval((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds())}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getMinutes()})),src_minute=minute_minute,minutes=minute_minute.range,hour_hour=newInterval((function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds()-6e4*date.getMinutes())}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getHours()})),src_hour=hour_hour,hours=hour_hour.range,day_day=newInterval((date=>date.setHours(0,0,0,0)),((date,step)=>date.setDate(date.getDate()+step)),((start,end)=>(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/864e5),(date=>date.getDate()-1)),src_day=day_day,days=day_day.range;function weekday(i){return newInterval((function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)}),(function(date,step){date.setDate(date.getDate()+7*step)}),(function(start,end){return(end-start-6e4*(end.getTimezoneOffset()-start.getTimezoneOffset()))/6048e5}))}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),sundays=sunday.range,mondays=monday.range,tuesdays=tuesday.range,wednesdays=wednesday.range,thursdays=thursday.range,fridays=friday.range,saturdays=saturday.range,month_month=newInterval((function(date){date.setDate(1),date.setHours(0,0,0,0)}),(function(date,step){date.setMonth(date.getMonth()+step)}),(function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())}),(function(date){return date.getMonth()})),src_month=month_month,months=month_month.range,year_year=newInterval((function(date){date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step)}),(function(start,end){return end.getFullYear()-start.getFullYear()}),(function(date){return date.getFullYear()}));year_year.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)}),(function(date,step){date.setFullYear(date.getFullYear()+step*k)})):null};var src_year=year_year,years=year_year.range,utcMinute=newInterval((function(date){date.setUTCSeconds(0,0)}),(function(date,step){date.setTime(+date+6e4*step)}),(function(start,end){return(end-start)/6e4}),(function(date){return date.getUTCMinutes()})),src_utcMinute=utcMinute,utcMinutes=utcMinute.range,utcHour=newInterval((function(date){date.setUTCMinutes(0,0,0)}),(function(date,step){date.setTime(+date+36e5*step)}),(function(start,end){return(end-start)/36e5}),(function(date){return date.getUTCHours()})),src_utcHour=utcHour,utcHours=utcHour.range,utcDay=newInterval((function(date){date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+step)}),(function(start,end){return(end-start)/864e5}),(function(date){return date.getUTCDate()-1})),src_utcDay=utcDay,utcDays=utcDay.range;function utcWeekday(i){return newInterval((function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCDate(date.getUTCDate()+7*step)}),(function(start,end){return(end-start)/6048e5}))}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSundays=utcSunday.range,utcMondays=utcMonday.range,utcTuesdays=utcTuesday.range,utcWednesdays=utcWednesday.range,utcThursdays=utcThursday.range,utcFridays=utcFriday.range,utcSaturdays=utcSaturday.range,utcMonth=newInterval((function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCMonth(date.getUTCMonth()+step)}),(function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())}),(function(date){return date.getUTCMonth()})),src_utcMonth=utcMonth,utcMonths=utcMonth.range,utcYear=newInterval((function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)}),(function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()}),(function(date){return date.getUTCFullYear()}));utcYear.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval((function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)}),(function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)})):null};var src_utcYear=utcYear,utcYears=utcYear.range;function ticker(year,month,week,day,hour,minute){const tickIntervals=[[src_second,1,1e3],[src_second,5,5e3],[src_second,15,15e3],[src_second,30,3e4],[minute,1,6e4],[minute,5,3e5],[minute,15,9e5],[minute,30,18e5],[hour,1,36e5],[hour,3,108e5],[hour,6,216e5],[hour,12,432e5],[day,1,864e5],[day,2,1728e5],[week,1,6048e5],[month,1,2592e6],[month,3,7776e6],[year,1,31536e6]];function tickInterval(start,stop,count){const target=Math.abs(stop-start)/count,i=bisector((([,,step])=>step)).right(tickIntervals,target);if(i===tickIntervals.length)return year.every(tickStep(start/31536e6,stop/31536e6,count));if(0===i)return src_millisecond.every(Math.max(tickStep(start,stop,count),1));const[t,step]=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i];return t.every(step)}return[function(start,stop,count){const reverse=stop<start;reverse&&([start,stop]=[stop,start]);const interval=count&&"function"==typeof count.range?count:tickInterval(start,stop,count),ticks=interval?interval.range(start,+stop+1):[];return reverse?ticks.reverse():ticks},tickInterval]}const[utcTicks,utcTickInterval]=ticker(src_utcYear,src_utcMonth,utcSunday,src_utcDay,src_utcHour,src_utcMinute),[timeTicks,timeTickInterval]=ticker(src_year,src_month,sunday,src_day,src_hour,src_minute);function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newDate(y,m,d){return{y:y,m:m,d:d,H:0,M:0,S:0,L:0}}function formatLocale(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:function(d){return locale_shortWeekdays[d.getDay()]},A:function(d){return locale_weekdays[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(d){return locale_periods[+(d.getHours()>=12)]},q:function(d){return 1+~~(d.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:locale_formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:function(d){return locale_shortWeekdays[d.getUTCDay()]},A:function(d){return locale_weekdays[d.getUTCDay()]},b:function(d){return locale_shortMonths[d.getUTCMonth()]},B:function(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(d){return locale_periods[+(d.getUTCHours()>=12)]},q:function(d){return 1+~~(d.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:function(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},A:function(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup.get(n[0].toLowerCase()),i+n[0].length):-1},b:function(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup.get(n[0].toLowerCase()),i+n[0].length):-1},B:function(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1},c:function(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup.get(n[0].toLowerCase()),i+n[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,Z){return function(string){var week,day,d=newDate(1900,void 0,1);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(Z&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=utcDate(newDate(d.y,0,1))).getUTCDay(),week=day>4||0===day?utcMonday.ceil(week):utcMonday(week),week=src_utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=localDate(newDate(d.y,0,1))).getDay(),week=day>4||0===day?monday.ceil(week):monday(week),week=src_day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?utcDate(newDate(d.y,0,1)).getUTCDay():localDate(newDate(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)):localDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",!1);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier+="",!0);return p.toString=function(){return specifier},p}}}var src_defaultLocale_locale,timeFormat,timeParse,utcFormat,utcParse,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function locale_pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){return new Map(names.map(((name,i)=>[name.toLowerCase(),i])))}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseQuarter(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.q=3*n[0]-3,i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.s=+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return locale_pad(d.getDate(),p,2)}function formatHour24(d,p){return locale_pad(d.getHours(),p,2)}function formatHour12(d,p){return locale_pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return locale_pad(1+src_day.count(src_year(d),d),p,3)}function formatMilliseconds(d,p){return locale_pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return locale_pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return locale_pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return locale_pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function formatWeekNumberSunday(d,p){return locale_pad(sunday.count(src_year(d)-1,d),p,2)}function dISO(d){var day=d.getDay();return day>=4||0===day?thursday(d):thursday.ceil(d)}function formatWeekNumberISO(d,p){return d=dISO(d),locale_pad(thursday.count(src_year(d),d)+(4===src_year(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return locale_pad(monday.count(src_year(d)-1,d),p,2)}function locale_formatYear(d,p){return locale_pad(d.getFullYear()%100,p,2)}function formatYearISO(d,p){return locale_pad((d=dISO(d)).getFullYear()%100,p,2)}function formatFullYear(d,p){return locale_pad(d.getFullYear()%1e4,p,4)}function formatFullYearISO(d,p){var day=d.getDay();return locale_pad((d=day>=4||0===day?thursday(d):thursday.ceil(d)).getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+locale_pad(z/60|0,"0",2)+locale_pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return locale_pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return locale_pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return locale_pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return locale_pad(1+src_utcDay.count(src_utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return locale_pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return locale_pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return locale_pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return locale_pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday(d,p){return locale_pad(utcSunday.count(src_utcYear(d)-1,d),p,2)}function UTCdISO(d){var day=d.getUTCDay();return day>=4||0===day?utcThursday(d):utcThursday.ceil(d)}function formatUTCWeekNumberISO(d,p){return d=UTCdISO(d),locale_pad(utcThursday.count(src_utcYear(d),d)+(4===src_utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return locale_pad(utcMonday.count(src_utcYear(d)-1,d),p,2)}function formatUTCYear(d,p){return locale_pad(d.getUTCFullYear()%100,p,2)}function formatUTCYearISO(d,p){return locale_pad((d=UTCdISO(d)).getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return locale_pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCFullYearISO(d,p){var day=d.getUTCDay();return locale_pad((d=day>=4||0===day?utcThursday(d):utcThursday.ceil(d)).getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}function defaultLocale_defaultLocale(definition){return src_defaultLocale_locale=formatLocale(definition),timeFormat=src_defaultLocale_locale.format,timeParse=src_defaultLocale_locale.parse,utcFormat=src_defaultLocale_locale.utcFormat,utcParse=src_defaultLocale_locale.utcParse,src_defaultLocale_locale}function time_date(t){return new Date(t)}function time_number(t){return t instanceof Date?+t:+new Date(+t)}function calendar(ticks,tickInterval,year,month,week,day,hour,minute,second,format){var scale=continuous(),invert=scale.invert,domain=scale.domain,formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y");function tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?week(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}return scale.invert=function(y){return new Date(invert(y))},scale.domain=function(_){return arguments.length?domain(Array.from(_,time_number)):domain().map(time_date)},scale.ticks=function(interval){var d=domain();return ticks(d[0],d[d.length-1],null==interval?10:interval)},scale.tickFormat=function(count,specifier){return null==specifier?tickFormat:format(specifier)},scale.nice=function(interval){var d=domain();return interval&&"function"==typeof interval.range||(interval=tickInterval(d[0],d[d.length-1],null==interval?10:interval)),interval?domain(nice_nice(d,interval)):scale},scale.copy=function(){return copy(scale,calendar(ticks,tickInterval,year,month,week,day,hour,minute,second,format))},scale}function time_time(){return initRange.apply(calendar(timeTicks,timeTickInterval,src_year,src_month,sunday,src_day,src_hour,src_minute,src_second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,src_utcYear,src_utcMonth,utcSunday,src_utcDay,src_utcHour,src_utcMinute,src_second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sequential_transformer(){var t0,t1,k10,transform,unknown,x0=0,x1=1,interpolator=continuous_identity,clamp=!1;function scale(x){return null==x||isNaN(x=+x)?unknown:interpolator(0===k10?.5:(x=(transform(x)-t0)*k10,clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){var r0,r1;return arguments.length?([r0,r1]=_,interpolator=interpolate(r0,r1),scale):[interpolator(0),interpolator(1)]}}return scale.domain=function(_){return arguments.length?([x0,x1]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),k10=t0===t1?0:1/(t1-t0),scale):[x0,x1]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.range=range(src_value),scale.rangeRound=range(src_round),scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t){return transform=t,t0=t(x0),t1=t(x1),k10=t0===t1?0:1/(t1-t0),scale}}function sequential_copy(source,target){return target.domain(source.domain()).interpolator(source.interpolator()).clamp(source.clamp()).unknown(source.unknown())}function sequential(){var scale=linearish(sequential_transformer()(continuous_identity));return scale.copy=function(){return sequential_copy(scale,sequential())},initInterpolator.apply(scale,arguments)}function sequentialLog(){var scale=loggish(sequential_transformer()).domain([1,10]);return scale.copy=function(){return sequential_copy(scale,sequentialLog()).base(scale.base())},initInterpolator.apply(scale,arguments)}function sequentialSymlog(){var scale=symlogish(sequential_transformer());return scale.copy=function(){return sequential_copy(scale,sequentialSymlog()).constant(scale.constant())},initInterpolator.apply(scale,arguments)}function sequentialPow(){var scale=powish(sequential_transformer());return scale.copy=function(){return sequential_copy(scale,sequentialPow()).exponent(scale.exponent())},initInterpolator.apply(scale,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var domain=[],interpolator=continuous_identity;function scale(x){if(null!=x&&!isNaN(x=+x))return interpolator((bisect(domain,x,1)-1)/(domain.length-1))}return scale.domain=function(_){if(!arguments.length)return domain.slice();domain=[];for(let d of _)null==d||isNaN(d=+d)||domain.push(d);return domain.sort(ascending),scale},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.range=function(){return domain.map(((d,i)=>interpolator(i/(domain.length-1))))},scale.quantiles=function(n){return Array.from({length:n+1},((_,i)=>quantile(domain,i/n)))},scale.copy=function(){return sequentialQuantile(interpolator).domain(domain)},initInterpolator.apply(scale,arguments)}function diverging_transformer(){var t0,t1,t2,k10,k21,transform,unknown,x0=0,x1=.5,x2=1,s=1,interpolator=continuous_identity,clamp=!1;function scale(x){return isNaN(x=+x)?unknown:(x=.5+((x=+transform(x))-t1)*(s*x<s*t1?k10:k21),interpolator(clamp?Math.max(0,Math.min(1,x)):x))}function range(interpolate){return function(_){var r0,r1,r2;return arguments.length?([r0,r1,r2]=_,interpolator=piecewise_piecewise(interpolate,[r0,r1,r2]),scale):[interpolator(0),interpolator(.5),interpolator(1)]}}return scale.domain=function(_){return arguments.length?([x0,x1,x2]=_,t0=transform(x0=+x0),t1=transform(x1=+x1),t2=transform(x2=+x2),k10=t0===t1?0:.5/(t1-t0),k21=t1===t2?0:.5/(t2-t1),s=t1<t0?-1:1,scale):[x0,x1,x2]},scale.clamp=function(_){return arguments.length?(clamp=!!_,scale):clamp},scale.interpolator=function(_){return arguments.length?(interpolator=_,scale):interpolator},scale.range=range(src_value),scale.rangeRound=range(src_round),scale.unknown=function(_){return arguments.length?(unknown=_,scale):unknown},function(t){return transform=t,t0=t(x0),t1=t(x1),t2=t(x2),k10=t0===t1?0:.5/(t1-t0),k21=t1===t2?0:.5/(t2-t1),s=t1<t0?-1:1,scale}}function diverging(){var scale=linearish(diverging_transformer()(continuous_identity));return scale.copy=function(){return sequential_copy(scale,diverging())},initInterpolator.apply(scale,arguments)}function divergingLog(){var scale=loggish(diverging_transformer()).domain([.1,1,10]);return scale.copy=function(){return sequential_copy(scale,divergingLog()).base(scale.base())},initInterpolator.apply(scale,arguments)}function divergingSymlog(){var scale=symlogish(diverging_transformer());return scale.copy=function(){return sequential_copy(scale,divergingSymlog()).constant(scale.constant())},initInterpolator.apply(scale,arguments)}function divergingPow(){var scale=powish(diverging_transformer());return scale.copy=function(){return sequential_copy(scale,divergingPow()).exponent(scale.exponent())},initInterpolator.apply(scale,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}defaultLocale_defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var src_colors=function(specifier){for(var n=specifier.length/6|0,colors=new Array(n),i=0;i<n;)colors[i]="#"+specifier.slice(6*i,6*++i);return colors},category10=src_colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Accent=src_colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Dark2=src_colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Paired=src_colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Pastel1=src_colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Pastel2=src_colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Set1=src_colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Set2=src_colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Set3=src_colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Tableau10=src_colors("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ramp=scheme=>rgbBasis(scheme[scheme.length-1]),BrBG_scheme=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(src_colors),BrBG=ramp(BrBG_scheme),PRGn_scheme=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(src_colors),PRGn=ramp(PRGn_scheme),PiYG_scheme=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(src_colors),PiYG=ramp(PiYG_scheme),PuOr_scheme=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(src_colors),PuOr=ramp(PuOr_scheme),RdBu_scheme=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(src_colors),RdBu=ramp(RdBu_scheme),RdGy_scheme=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(src_colors),RdGy=ramp(RdGy_scheme),RdYlBu_scheme=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(src_colors),RdYlBu=ramp(RdYlBu_scheme),RdYlGn_scheme=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(src_colors),RdYlGn=ramp(RdYlGn_scheme),Spectral_scheme=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(src_colors),Spectral=ramp(Spectral_scheme),BuGn_scheme=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(src_colors),BuGn=ramp(BuGn_scheme),BuPu_scheme=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(src_colors),BuPu=ramp(BuPu_scheme),GnBu_scheme=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(src_colors),GnBu=ramp(GnBu_scheme),OrRd_scheme=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(src_colors),OrRd=ramp(OrRd_scheme),PuBuGn_scheme=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(src_colors),PuBuGn=ramp(PuBuGn_scheme),PuBu_scheme=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(src_colors),PuBu=ramp(PuBu_scheme),PuRd_scheme=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(src_colors),PuRd=ramp(PuRd_scheme),RdPu_scheme=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(src_colors),RdPu=ramp(RdPu_scheme),YlGnBu_scheme=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(src_colors),YlGnBu=ramp(YlGnBu_scheme),YlGn_scheme=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(src_colors),YlGn=ramp(YlGn_scheme),YlOrBr_scheme=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(src_colors),YlOrBr=ramp(YlOrBr_scheme),YlOrRd_scheme=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(src_colors),YlOrRd=ramp(YlOrRd_scheme),Blues_scheme=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(src_colors),Blues=ramp(Blues_scheme),Greens_scheme=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(src_colors),Greens=ramp(Greens_scheme),Greys_scheme=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(src_colors),Greys=ramp(Greys_scheme),Purples_scheme=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(src_colors),Purples=ramp(Purples_scheme),Reds_scheme=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(src_colors),Reds=ramp(Reds_scheme),Oranges_scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(src_colors),Oranges=ramp(Oranges_scheme),cividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},sequential_multi_cubehelix=cubehelixLong(cubehelix_cubehelix(300,.5,0),cubehelix_cubehelix(-240,.5,1)),warm=cubehelixLong(cubehelix_cubehelix(-100,.75,.35),cubehelix_cubehelix(80,1.5,.8)),cool=cubehelixLong(cubehelix_cubehelix(260,.75,.35),cubehelix_cubehelix(80,1.5,.8)),rainbow_c=cubehelix_cubehelix(),rainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var ts=Math.abs(t-.5);return rainbow_c.h=360*t-100,rainbow_c.s=1.5-1.5*ts,rainbow_c.l=.8-.9*ts,rainbow_c+""},sinebow_c=color_rgb(),pi_1_3=Math.PI/3,pi_2_3=2*Math.PI/3,sinebow=function(t){var x;return t=(.5-t)*Math.PI,sinebow_c.r=255*(x=Math.sin(t))*x,sinebow_c.g=255*(x=Math.sin(t+pi_1_3))*x,sinebow_c.b=255*(x=Math.sin(t+pi_2_3))*x,sinebow_c+""},turbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function viridis_ramp(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var viridis=viridis_ramp(src_colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),magma=viridis_ramp(src_colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=viridis_ramp(src_colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=viridis_ramp(src_colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),src_create=function(name){return src_select(creator(name).call(document.documentElement))},nextId=0;function local_local(){return new Local}function Local(){this._="@"+(++nextId).toString(36)}Local.prototype=local_local.prototype={constructor:Local,get:function(node){for(var id=this._;!(id in node);)if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}};var pointers=function(events,node){return events.target&&(events=sourceEvent(events),void 0===node&&(node=events.currentTarget),events=events.touches||[events]),Array.from(events,(event=>pointer(event,node)))},src_selectAll=function(selector){return"string"==typeof selector?new Selection([document.querySelectorAll(selector)],[document.documentElement]):new Selection([null==selector?[]:src_array(selector)],selection_root)},d3_shape_src_constant=function(x){return function(){return x}},d3_shape_src_math_abs=Math.abs,math_atan2=Math.atan2,src_math_cos=Math.cos,src_math_max=Math.max,math_min=Math.min,src_math_sin=Math.sin,math_sqrt=Math.sqrt,src_math_pi=Math.PI,src_math_halfPi=src_math_pi/2,src_math_tau=2*src_math_pi;function math_acos(x){return x>1?0:x<-1?src_math_pi:Math.acos(x)}function math_asin(x){return x>=1?src_math_halfPi:x<=-1?-src_math_halfPi:Math.asin(x)}function arcInnerRadius(d){return d.innerRadius}function arcOuterRadius(d){return d.outerRadius}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){return d.endAngle}function arcPadAngle(d){return d&&d.padAngle}function arc_intersect(x0,y0,x1,y1,x2,y2,x3,y3){var x10=x1-x0,y10=y1-y0,x32=x3-x2,y32=y3-y2,t=y32*x10-x32*y10;if(!(t*t<1e-12))return[x0+(t=(x32*(y0-y2)-y32*(x0-x2))/t)*x10,y0+t*y10]}function cornerTangents(x0,y0,x1,y1,r1,rc,cw){var x01=x0-x1,y01=y0-y1,lo=(cw?rc:-rc)/math_sqrt(x01*x01+y01*y01),ox=lo*y01,oy=-lo*x01,x11=x0+ox,y11=y0+oy,x10=x1+ox,y10=y1+oy,x00=(x11+x10)/2,y00=(y11+y10)/2,dx=x10-x11,dy=y10-y11,d2=dx*dx+dy*dy,r=r1-rc,D=x11*y10-x10*y11,d=(dy<0?-1:1)*math_sqrt(src_math_max(0,r*r*d2-D*D)),cx0=(D*dy-dx*d)/d2,cy0=(-D*dx-dy*d)/d2,cx1=(D*dy+dx*d)/d2,cy1=(-D*dx+dy*d)/d2,dx0=cx0-x00,dy0=cy0-y00,dx1=cx1-x00,dy1=cy1-y00;return dx0*dx0+dy0*dy0>dx1*dx1+dy1*dy1&&(cx0=cx1,cy0=cy1),{cx:cx0,cy:cy0,x01:-ox,y01:-oy,x11:cx0*(r1/r-1),y11:cy0*(r1/r-1)}}var src_arc=function(){var innerRadius=arcInnerRadius,outerRadius=arcOuterRadius,cornerRadius=d3_shape_src_constant(0),padRadius=null,startAngle=arcStartAngle,endAngle=arcEndAngle,padAngle=arcPadAngle,context=null;function arc(){var buffer,r,r0=+innerRadius.apply(this,arguments),r1=+outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)-src_math_halfPi,a1=endAngle.apply(this,arguments)-src_math_halfPi,da=d3_shape_src_math_abs(a1-a0),cw=a1>a0;if(context||(context=buffer=src_path()),r1<r0&&(r=r1,r1=r0,r0=r),r1>1e-12)if(da>src_math_tau-1e-12)context.moveTo(r1*src_math_cos(a0),r1*src_math_sin(a0)),context.arc(0,0,r1,a0,a1,!cw),r0>1e-12&&(context.moveTo(r0*src_math_cos(a1),r0*src_math_sin(a1)),context.arc(0,0,r0,a1,a0,cw));else{var t0,t1,a01=a0,a11=a1,a00=a0,a10=a1,da0=da,da1=da,ap=padAngle.apply(this,arguments)/2,rp=ap>1e-12&&(padRadius?+padRadius.apply(this,arguments):math_sqrt(r0*r0+r1*r1)),rc=math_min(d3_shape_src_math_abs(r1-r0)/2,+cornerRadius.apply(this,arguments)),rc0=rc,rc1=rc;if(rp>1e-12){var p0=math_asin(rp/r0*src_math_sin(ap)),p1=math_asin(rp/r1*src_math_sin(ap));(da0-=2*p0)>1e-12?(a00+=p0*=cw?1:-1,a10-=p0):(da0=0,a00=a10=(a0+a1)/2),(da1-=2*p1)>1e-12?(a01+=p1*=cw?1:-1,a11-=p1):(da1=0,a01=a11=(a0+a1)/2)}var x01=r1*src_math_cos(a01),y01=r1*src_math_sin(a01),x10=r0*src_math_cos(a10),y10=r0*src_math_sin(a10);if(rc>1e-12){var oc,x11=r1*src_math_cos(a11),y11=r1*src_math_sin(a11),x00=r0*src_math_cos(a00),y00=r0*src_math_sin(a00);if(da<src_math_pi&&(oc=arc_intersect(x01,y01,x00,y00,x11,y11,x10,y10))){var ax=x01-oc[0],ay=y01-oc[1],bx=x11-oc[0],by=y11-oc[1],kc=1/src_math_sin(math_acos((ax*bx+ay*by)/(math_sqrt(ax*ax+ay*ay)*math_sqrt(bx*bx+by*by)))/2),lc=math_sqrt(oc[0]*oc[0]+oc[1]*oc[1]);rc0=math_min(rc,(r0-lc)/(kc-1)),rc1=math_min(rc,(r1-lc)/(kc+1))}}da1>1e-12?rc1>1e-12?(t0=cornerTangents(x00,y00,x01,y01,r1,rc1,cw),t1=cornerTangents(x11,y11,x10,y10,r1,rc1,cw),context.moveTo(t0.cx+t0.x01,t0.cy+t0.y01),rc1<rc?context.arc(t0.cx,t0.cy,rc1,math_atan2(t0.y01,t0.x01),math_atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc1,math_atan2(t0.y01,t0.x01),math_atan2(t0.y11,t0.x11),!cw),context.arc(0,0,r1,math_atan2(t0.cy+t0.y11,t0.cx+t0.x11),math_atan2(t1.cy+t1.y11,t1.cx+t1.x11),!cw),context.arc(t1.cx,t1.cy,rc1,math_atan2(t1.y11,t1.x11),math_atan2(t1.y01,t1.x01),!cw))):(context.moveTo(x01,y01),context.arc(0,0,r1,a01,a11,!cw)):context.moveTo(x01,y01),r0>1e-12&&da0>1e-12?rc0>1e-12?(t0=cornerTangents(x10,y10,x11,y11,r0,-rc0,cw),t1=cornerTangents(x01,y01,x00,y00,r0,-rc0,cw),context.lineTo(t0.cx+t0.x01,t0.cy+t0.y01),rc0<rc?context.arc(t0.cx,t0.cy,rc0,math_atan2(t0.y01,t0.x01),math_atan2(t1.y01,t1.x01),!cw):(context.arc(t0.cx,t0.cy,rc0,math_atan2(t0.y01,t0.x01),math_atan2(t0.y11,t0.x11),!cw),context.arc(0,0,r0,math_atan2(t0.cy+t0.y11,t0.cx+t0.x11),math_atan2(t1.cy+t1.y11,t1.cx+t1.x11),cw),context.arc(t1.cx,t1.cy,rc0,math_atan2(t1.y11,t1.x11),math_atan2(t1.y01,t1.x01),!cw))):context.arc(0,0,r0,a10,a00,cw):context.lineTo(x10,y10)}else context.moveTo(0,0);if(context.closePath(),buffer)return context=null,buffer+""||null}return arc.centroid=function(){var r=(+innerRadius.apply(this,arguments)+ +outerRadius.apply(this,arguments))/2,a=(+startAngle.apply(this,arguments)+ +endAngle.apply(this,arguments))/2-src_math_pi/2;return[src_math_cos(a)*r,src_math_sin(a)*r]},arc.innerRadius=function(_){return arguments.length?(innerRadius="function"==typeof _?_:d3_shape_src_constant(+_),arc):innerRadius},arc.outerRadius=function(_){return arguments.length?(outerRadius="function"==typeof _?_:d3_shape_src_constant(+_),arc):outerRadius},arc.cornerRadius=function(_){return arguments.length?(cornerRadius="function"==typeof _?_:d3_shape_src_constant(+_),arc):cornerRadius},arc.padRadius=function(_){return arguments.length?(padRadius=null==_?null:"function"==typeof _?_:d3_shape_src_constant(+_),arc):padRadius},arc.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:d3_shape_src_constant(+_),arc):startAngle},arc.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:d3_shape_src_constant(+_),arc):endAngle},arc.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:d3_shape_src_constant(+_),arc):padAngle},arc.context=function(_){return arguments.length?(context=null==_?null:_,arc):context},arc},d3_shape_src_array_slice=Array.prototype.slice,d3_shape_src_array=function(x){return"object"==typeof x&&"length"in x?x:Array.from(x)};function Linear(context){this._context=context}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y)}}};var curve_linear=function(context){return new Linear(context)};function point_x(p){return p[0]}function point_y(p){return p[1]}var src_line=function(x,y){var defined=d3_shape_src_constant(!0),context=null,curve=curve_linear,output=null;function line(data){var i,d,buffer,n=(data=d3_shape_src_array(data)).length,defined0=!1;for(null==context&&(output=curve(buffer=src_path())),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&((defined0=!defined0)?output.lineStart():output.lineEnd()),defined0&&output.point(+x(d,i,data),+y(d,i,data));if(buffer)return output=null,buffer+""||null}return x="function"==typeof x?x:void 0===x?point_x:d3_shape_src_constant(x),y="function"==typeof y?y:void 0===y?point_y:d3_shape_src_constant(y),line.x=function(_){return arguments.length?(x="function"==typeof _?_:d3_shape_src_constant(+_),line):x},line.y=function(_){return arguments.length?(y="function"==typeof _?_:d3_shape_src_constant(+_),line):y},line.defined=function(_){return arguments.length?(defined="function"==typeof _?_:d3_shape_src_constant(!!_),line):defined},line.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),line):curve},line.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),line):context},line},d3_shape_src_area=function(x0,y0,y1){var x1=null,defined=d3_shape_src_constant(!0),context=null,curve=curve_linear,output=null;function area(data){var i,j,k,d,buffer,n=(data=d3_shape_src_array(data)).length,defined0=!1,x0z=new Array(n),y0z=new Array(n);for(null==context&&(output=curve(buffer=src_path())),i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0)if(defined0=!defined0)j=i,output.areaStart(),output.lineStart();else{for(output.lineEnd(),output.lineStart(),k=i-1;k>=j;--k)output.point(x0z[k],y0z[k]);output.lineEnd(),output.areaEnd()}defined0&&(x0z[i]=+x0(d,i,data),y0z[i]=+y0(d,i,data),output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]))}if(buffer)return output=null,buffer+""||null}function arealine(){return src_line().defined(defined).curve(curve).context(context)}return x0="function"==typeof x0?x0:void 0===x0?point_x:d3_shape_src_constant(+x0),y0="function"==typeof y0?y0:d3_shape_src_constant(void 0===y0?0:+y0),y1="function"==typeof y1?y1:void 0===y1?point_y:d3_shape_src_constant(+y1),area.x=function(_){return arguments.length?(x0="function"==typeof _?_:d3_shape_src_constant(+_),x1=null,area):x0},area.x0=function(_){return arguments.length?(x0="function"==typeof _?_:d3_shape_src_constant(+_),area):x0},area.x1=function(_){return arguments.length?(x1=null==_?null:"function"==typeof _?_:d3_shape_src_constant(+_),area):x1},area.y=function(_){return arguments.length?(y0="function"==typeof _?_:d3_shape_src_constant(+_),y1=null,area):y0},area.y0=function(_){return arguments.length?(y0="function"==typeof _?_:d3_shape_src_constant(+_),area):y0},area.y1=function(_){return arguments.length?(y1=null==_?null:"function"==typeof _?_:d3_shape_src_constant(+_),area):y1},area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0)},area.lineY1=function(){return arealine().x(x0).y(y1)},area.lineX1=function(){return arealine().x(x1).y(y0)},area.defined=function(_){return arguments.length?(defined="function"==typeof _?_:d3_shape_src_constant(!!_),area):defined},area.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),area):curve},area.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),area):context},area},src_descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},d3_shape_src_identity=function(d){return d},src_pie=function(){var value=d3_shape_src_identity,sortValues=src_descending,sort=null,startAngle=d3_shape_src_constant(0),endAngle=d3_shape_src_constant(src_math_tau),padAngle=d3_shape_src_constant(0);function pie(data){var i,j,k,a1,v,n=(data=d3_shape_src_array(data)).length,sum=0,index=new Array(n),arcs=new Array(n),a0=+startAngle.apply(this,arguments),da=Math.min(src_math_tau,Math.max(-src_math_tau,endAngle.apply(this,arguments)-a0)),p=Math.min(Math.abs(da)/n,padAngle.apply(this,arguments)),pa=p*(da<0?-1:1);for(i=0;i<n;++i)(v=arcs[index[i]=i]=+value(data[i],i,data))>0&&(sum+=v);for(null!=sortValues?index.sort((function(i,j){return sortValues(arcs[i],arcs[j])})):null!=sort&&index.sort((function(i,j){return sort(data[i],data[j])})),i=0,k=sum?(da-n*pa)/sum:0;i<n;++i,a0=a1)j=index[i],a1=a0+((v=arcs[j])>0?v*k:0)+pa,arcs[j]={data:data[j],index:i,value:v,startAngle:a0,endAngle:a1,padAngle:p};return arcs}return pie.value=function(_){return arguments.length?(value="function"==typeof _?_:d3_shape_src_constant(+_),pie):value},pie.sortValues=function(_){return arguments.length?(sortValues=_,sort=null,pie):sortValues},pie.sort=function(_){return arguments.length?(sort=_,sortValues=null,pie):sort},pie.startAngle=function(_){return arguments.length?(startAngle="function"==typeof _?_:d3_shape_src_constant(+_),pie):startAngle},pie.endAngle=function(_){return arguments.length?(endAngle="function"==typeof _?_:d3_shape_src_constant(+_),pie):endAngle},pie.padAngle=function(_){return arguments.length?(padAngle="function"==typeof _?_:d3_shape_src_constant(+_),pie):padAngle},pie},curveRadialLinear=curveRadial(curve_linear);function Radial(curve){this._curve=curve}function curveRadial(curve){function radial(context){return new Radial(curve(context))}return radial._curve=curve,radial}function lineRadial(l){var c=l.curve;return l.angle=l.x,delete l.x,l.radius=l.y,delete l.y,l.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve},l}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,r){this._curve.point(r*Math.sin(a),r*-Math.cos(a))}};var src_lineRadial=function(){return lineRadial(src_line().curve(curveRadialLinear))},areaRadial=function(){var a=d3_shape_src_area().curve(curveRadialLinear),c=a.curve,x0=a.lineX0,x1=a.lineX1,y0=a.lineY0,y1=a.lineY1;return a.angle=a.x,delete a.x,a.startAngle=a.x0,delete a.x0,a.endAngle=a.x1,delete a.x1,a.radius=a.y,delete a.y,a.innerRadius=a.y0,delete a.y0,a.outerRadius=a.y1,delete a.y1,a.lineStartAngle=function(){return lineRadial(x0())},delete a.lineX0,a.lineEndAngle=function(){return lineRadial(x1())},delete a.lineX1,a.lineInnerRadius=function(){return lineRadial(y0())},delete a.lineY0,a.lineOuterRadius=function(){return lineRadial(y1())},delete a.lineY1,a.curve=function(_){return arguments.length?c(curveRadial(_)):c()._curve},a},pointRadial=function(x,y){return[(y=+y)*Math.cos(x-=Math.PI/2),y*Math.sin(x)]};function linkSource(d){return d.source}function linkTarget(d){return d.target}function link_link(curve){var source=linkSource,target=linkTarget,x=point_x,y=point_y,context=null;function link(){var buffer,argv=d3_shape_src_array_slice.call(arguments),s=source.apply(this,argv),t=target.apply(this,argv);if(context||(context=buffer=src_path()),curve(context,+x.apply(this,(argv[0]=s,argv)),+y.apply(this,argv),+x.apply(this,(argv[0]=t,argv)),+y.apply(this,argv)),buffer)return context=null,buffer+""||null}return link.source=function(_){return arguments.length?(source=_,link):source},link.target=function(_){return arguments.length?(target=_,link):target},link.x=function(_){return arguments.length?(x="function"==typeof _?_:d3_shape_src_constant(+_),link):x},link.y=function(_){return arguments.length?(y="function"==typeof _?_:d3_shape_src_constant(+_),link):y},link.context=function(_){return arguments.length?(context=null==_?null:_,link):context},link}function curveHorizontal(context,x0,y0,x1,y1){context.moveTo(x0,y0),context.bezierCurveTo(x0=(x0+x1)/2,y0,x0,y1,x1,y1)}function curveVertical(context,x0,y0,x1,y1){context.moveTo(x0,y0),context.bezierCurveTo(x0,y0=(y0+y1)/2,x1,y0,x1,y1)}function link_curveRadial(context,x0,y0,x1,y1){var p0=pointRadial(x0,y0),p1=pointRadial(x0,y0=(y0+y1)/2),p2=pointRadial(x1,y0),p3=pointRadial(x1,y1);context.moveTo(p0[0],p0[1]),context.bezierCurveTo(p1[0],p1[1],p2[0],p2[1],p3[0],p3[1])}function linkHorizontal(){return link_link(curveHorizontal)}function linkVertical(){return link_link(curveVertical)}function linkRadial(){var l=link_link(link_curveRadial);return l.angle=l.x,delete l.x,l.radius=l.y,delete l.y,l}var symbol_circle={draw:function(context,size){var r=Math.sqrt(size/src_math_pi);context.moveTo(r,0),context.arc(0,0,r,0,src_math_tau)}},symbol_cross={draw:function(context,size){var r=Math.sqrt(size/5)/2;context.moveTo(-3*r,-r),context.lineTo(-r,-r),context.lineTo(-r,-3*r),context.lineTo(r,-3*r),context.lineTo(r,-r),context.lineTo(3*r,-r),context.lineTo(3*r,r),context.lineTo(r,r),context.lineTo(r,3*r),context.lineTo(-r,3*r),context.lineTo(-r,r),context.lineTo(-3*r,r),context.closePath()}},tan30=Math.sqrt(1/3),tan30_2=2*tan30,diamond={draw:function(context,size){var y=Math.sqrt(size/tan30_2),x=y*tan30;context.moveTo(0,-y),context.lineTo(x,0),context.lineTo(0,y),context.lineTo(-x,0),context.closePath()}},kr=Math.sin(src_math_pi/10)/Math.sin(7*src_math_pi/10),star_kx=Math.sin(src_math_tau/10)*kr,star_ky=-Math.cos(src_math_tau/10)*kr,star={draw:function(context,size){var r=Math.sqrt(.8908130915292852*size),x=star_kx*r,y=star_ky*r;context.moveTo(0,-r),context.lineTo(x,y);for(var i=1;i<5;++i){var a=src_math_tau*i/5,c=Math.cos(a),s=Math.sin(a);context.lineTo(s*r,-c*r),context.lineTo(c*x-s*y,s*x+c*y)}context.closePath()}},symbol_square={draw:function(context,size){var w=Math.sqrt(size),x=-w/2;context.rect(x,x,w,w)}},sqrt3=Math.sqrt(3),triangle={draw:function(context,size){var y=-Math.sqrt(size/(3*sqrt3));context.moveTo(0,2*y),context.lineTo(-sqrt3*y,-y),context.lineTo(sqrt3*y,-y),context.closePath()}},wye_s=Math.sqrt(3)/2,wye_k=1/Math.sqrt(12),wye_a=3*(wye_k/2+1),wye={draw:function(context,size){var r=Math.sqrt(size/wye_a),x0=r/2,y0=r*wye_k,x1=x0,y1=r*wye_k+r,x2=-x1,y2=y1;context.moveTo(x0,y0),context.lineTo(x1,y1),context.lineTo(x2,y2),context.lineTo(-.5*x0-wye_s*y0,wye_s*x0+-.5*y0),context.lineTo(-.5*x1-wye_s*y1,wye_s*x1+-.5*y1),context.lineTo(-.5*x2-wye_s*y2,wye_s*x2+-.5*y2),context.lineTo(-.5*x0+wye_s*y0,-.5*y0-wye_s*x0),context.lineTo(-.5*x1+wye_s*y1,-.5*y1-wye_s*x1),context.lineTo(-.5*x2+wye_s*y2,-.5*y2-wye_s*x2),context.closePath()}},symbols=[symbol_circle,symbol_cross,diamond,symbol_square,star,triangle,wye],src_symbol=function(type,size){var context=null;function symbol(){var buffer;if(context||(context=buffer=src_path()),type.apply(this,arguments).draw(context,+size.apply(this,arguments)),buffer)return context=null,buffer+""||null}return type="function"==typeof type?type:d3_shape_src_constant(type||symbol_circle),size="function"==typeof size?size:d3_shape_src_constant(void 0===size?64:+size),symbol.type=function(_){return arguments.length?(type="function"==typeof _?_:d3_shape_src_constant(_),symbol):type},symbol.size=function(_){return arguments.length?(size="function"==typeof _?_:d3_shape_src_constant(+_),symbol):size},symbol.context=function(_){return arguments.length?(context=null==_?null:_,symbol):context},symbol},d3_shape_src_noop=function(){};function basis_point(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis(context){this._context=context}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:basis_point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:basis_point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}};var curve_basis=function(context){return new Basis(context)};function BasisClosed(context){this._context=context}BasisClosed.prototype={areaStart:d3_shape_src_noop,areaEnd:d3_shape_src_noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x2=x,this._y2=y;break;case 1:this._point=2,this._x3=x,this._y3=y;break;case 2:this._point=3,this._x4=x,this._y4=y,this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:basis_point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}};var curve_basisClosed=function(context){return new BasisClosed(context)};function BasisOpen(context){this._context=context}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var x0=(this._x0+4*this._x1+x)/6,y0=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point=4;default:basis_point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}};var basisOpen=function(context){return new BasisOpen(context)};class Bump{constructor(context,x){this._context=context,this._x=x}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+x)/2,this._y0,this._x0,y,x,y):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+y)/2,x,this._y0,x,y)}this._x0=x,this._y0=y}}function bumpX(context){return new Bump(context,!0)}function bumpY(context){return new Bump(context,!1)}function Bundle(context,beta){this._basis=new Basis(context),this._beta=beta}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){this._x.push(+x),this._y.push(+y)}};var curve_bundle=function custom(beta){function bundle(context){return 1===beta?new Basis(context):new Bundle(context,beta)}return bundle.beta=function(beta){return custom(+beta)},bundle}(.85);function cardinal_point(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal(context,tension){this._context=context,this._k=(1-tension)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cardinal_point(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2,this._x1=x,this._y1=y;break;case 2:this._point=3;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinal=function custom(tension){function cardinal(context){return new Cardinal(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function CardinalClosed(context,tension){this._context=context,this._k=(1-tension)/6}CardinalClosed.prototype={areaStart:d3_shape_src_noop,areaEnd:d3_shape_src_noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalClosed=function custom(tension){function cardinal(context){return new CardinalClosed(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function CardinalOpen(context,tension){this._context=context,this._k=(1-tension)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var cardinalOpen=function custom(tension){function cardinal(context){return new CardinalOpen(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal}(0);function catmullRom_point(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>1e-12){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n,y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}if(that._l23_a>1e-12){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m,y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){this._context=context,this._alpha=alpha}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var curve_catmullRom=function custom(alpha){function catmullRom(context){return alpha?new CatmullRom(context,alpha):new Cardinal(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function CatmullRomClosed(context,alpha){this._context=context,this._alpha=alpha}CatmullRomClosed.prototype={areaStart:d3_shape_src_noop,areaEnd:d3_shape_src_noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomClosed=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function CatmullRomOpen(context,alpha){this._context=context,this._alpha=alpha}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};var catmullRomOpen=function custom(alpha){function catmullRom(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom}(.5);function LinearClosed(context){this._context=context}LinearClosed.prototype={areaStart:d3_shape_src_noop,areaEnd:d3_shape_src_noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(x,y){x=+x,y=+y,this._point?this._context.lineTo(x,y):(this._point=1,this._context.moveTo(x,y))}};var linearClosed=function(context){return new LinearClosed(context)};function monotone_sign(x){return x<0?-1:1}function slope3(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(monotone_sign(s0)+monotone_sign(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function monotone_point(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context=context}function MonotoneY(context){this._context=new ReflectContext(context)}function ReflectContext(context){this._context=context}function monotoneX(context){return new MonotoneX(context)}function monotoneY(context){return new MonotoneY(context)}function Natural(context){this._context=context}function controlPoints(x){var i,m,n=x.length-1,a=new Array(n),b=new Array(n),r=new Array(n);for(a[0]=0,b[0]=2,r[0]=x[0]+2*x[1],i=1;i<n-1;++i)a[i]=1,b[i]=4,r[i]=4*x[i]+2*x[i+1];for(a[n-1]=2,b[n-1]=7,r[n-1]=8*x[n-1]+x[n],i=1;i<n;++i)m=a[i]/b[i-1],b[i]-=m,r[i]-=m*r[i-1];for(a[n-1]=r[n-1]/b[n-1],i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];for(b[n-1]=(x[n]+a[n-1])/2,i=0;i<n-1;++i)b[i]=2*x[i+1]-a[i+1];return[a,b]}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:monotone_point(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){var t1=NaN;if(y=+y,(x=+x)!==this._x1||y!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,monotone_point(this,slope2(this,t1=slope3(this,x,y)),t1);break;default:monotone_point(this,this._t0,t1=slope3(this,x,y))}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y,this._t0=t1}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x,y){MonotoneX.prototype.point.call(this,y,x)},ReflectContext.prototype={moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x)}},Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var x=this._x,y=this._y,n=x.length;if(n)if(this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]),2===n)this._context.lineTo(x[1],y[1]);else for(var px=controlPoints(x),py=controlPoints(y),i0=0,i1=1;i1<n;++i0,++i1)this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(x,y){this._x.push(+x),this._y.push(+y)}};var natural=function(context){return new Natural(context)};function Step(context,t){this._context=context,this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,y),this._context.lineTo(x,y);else{var x1=this._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y),this._context.lineTo(x1,y)}}this._x=x,this._y=y}};var curve_step=function(context){return new Step(context,.5)};function stepBefore(context){return new Step(context,0)}function stepAfter(context){return new Step(context,1)}var offset_none=function(series,order){if((n=series.length)>1)for(var j,s0,n,i=1,s1=series[order[0]],m=s1.length;i<n;++i)for(s0=s1,s1=series[order[i]],j=0;j<m;++j)s1[j][1]+=s1[j][0]=isNaN(s0[j][1])?s0[j][0]:s0[j][1]},order_none=function(series){for(var n=series.length,o=new Array(n);--n>=0;)o[n]=n;return o};function stackValue(d,key){return d[key]}function stackSeries(key){const series=[];return series.key=key,series}var src_stack=function(){var keys=d3_shape_src_constant([]),order=order_none,offset=offset_none,value=stackValue;function stack(data){var i,oz,sz=Array.from(keys.apply(this,arguments),stackSeries),n=sz.length,j=-1;for(const d of data)for(i=0,++j;i<n;++i)(sz[i][j]=[0,+value(d,sz[i].key,j,data)]).data=d;for(i=0,oz=d3_shape_src_array(order(sz));i<n;++i)sz[oz[i]].index=i;return offset(sz,oz),sz}return stack.keys=function(_){return arguments.length?(keys="function"==typeof _?_:d3_shape_src_constant(Array.from(_)),stack):keys},stack.value=function(_){return arguments.length?(value="function"==typeof _?_:d3_shape_src_constant(+_),stack):value},stack.order=function(_){return arguments.length?(order=null==_?order_none:"function"==typeof _?_:d3_shape_src_constant(Array.from(_)),stack):order},stack.offset=function(_){return arguments.length?(offset=null==_?offset_none:_,stack):offset},stack},expand=function(series,order){if((n=series.length)>0){for(var i,n,y,j=0,m=series[0].length;j<m;++j){for(y=i=0;i<n;++i)y+=series[i][j][1]||0;if(y)for(i=0;i<n;++i)series[i][j][1]/=y}offset_none(series,order)}},offset_diverging=function(series,order){if((n=series.length)>0)for(var i,d,dy,yp,yn,n,j=0,m=series[order[0]].length;j<m;++j)for(yp=yn=0,i=0;i<n;++i)(dy=(d=series[order[i]][j])[1]-d[0])>0?(d[0]=yp,d[1]=yp+=dy):dy<0?(d[1]=yn,d[0]=yn+=dy):(d[0]=0,d[1]=dy)},silhouette=function(series,order){if((n=series.length)>0){for(var n,j=0,s0=series[order[0]],m=s0.length;j<m;++j){for(var i=0,y=0;i<n;++i)y+=series[i][j][1]||0;s0[j][1]+=s0[j][0]=-y/2}offset_none(series,order)}},wiggle=function(series,order){if((n=series.length)>0&&(m=(s0=series[order[0]]).length)>0){for(var s0,m,n,y=0,j=1;j<m;++j){for(var i=0,s1=0,s2=0;i<n;++i){for(var si=series[order[i]],sij0=si[j][1]||0,s3=(sij0-(si[j-1][1]||0))/2,k=0;k<i;++k){var sk=series[order[k]];s3+=(sk[j][1]||0)-(sk[j-1][1]||0)}s1+=sij0,s2+=s3*sij0}s0[j-1][1]+=s0[j-1][0]=y,s1&&(y-=s2/s1)}s0[j-1][1]+=s0[j-1][0]=y,offset_none(series,order)}},appearance=function(series){var peaks=series.map(peak);return order_none(series).sort((function(a,b){return peaks[a]-peaks[b]}))};function peak(series){for(var vi,i=-1,j=0,n=series.length,vj=-1/0;++i<n;)(vi=+series[i][1])>vj&&(vj=vi,j=i);return j}var order_ascending=function(series){var sums=series.map(ascending_sum);return order_none(series).sort((function(a,b){return sums[a]-sums[b]}))};function ascending_sum(series){for(var v,s=0,i=-1,n=series.length;++i<n;)(v=+series[i][1])&&(s+=v);return s}var order_descending=function(series){return order_ascending(series).reverse()},insideOut=function(series){var i,j,n=series.length,sums=series.map(ascending_sum),order=appearance(series),top=0,bottom=0,tops=[],bottoms=[];for(i=0;i<n;++i)j=order[i],top<bottom?(top+=sums[j],tops.push(j)):(bottom+=sums[j],bottoms.push(j));return bottoms.reverse().concat(tops)},order_reverse=function(series){return order_none(series).reverse()};var isoFormat=Date.prototype.toISOString?function(date){return date.toISOString()}:utcFormat("%Y-%m-%dT%H:%M:%S.%LZ");var isoParse=+new Date("2000-01-01T00:00:00.000Z")?function(string){var date=new Date(string);return isNaN(date)?null:date}:utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),src_interval=function(callback,delay,time){var t=new Timer,total=delay;return null==delay?(t.restart(callback,delay,time),t):(t._restart=t.restart,t.restart=function(callback,delay,time){delay=+delay,time=null==time?now():+time,t._restart((function tick(elapsed){elapsed+=total,t._restart(tick,total+=delay,time),callback(elapsed)}),delay,time)},t.restart(callback,delay,time),t)},d3_zoom_src_constant=x=>()=>x;function ZoomEvent(type,{sourceEvent:sourceEvent,target:target,transform:transform,dispatch:dispatch}){Object.defineProperties(this,{type:{value:type,enumerable:!0,configurable:!0},sourceEvent:{value:sourceEvent,enumerable:!0,configurable:!0},target:{value:target,enumerable:!0,configurable:!0},transform:{value:transform,enumerable:!0,configurable:!0},_:{value:dispatch}})}function Transform(k,x,y){this.k=k,this.x=x,this.y=y}Transform.prototype={constructor:Transform,scale:function(k){return 1===k?this:new Transform(this.k*k,this.x,this.y)},translate:function(x,y){return 0===x&0===y?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y)},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function(x){return x*this.k+this.x},applyY:function(y){return y*this.k+this.y},invert:function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},invertX:function(x){return(x-this.x)/this.k},invertY:function(y){return(y-this.y)/this.k},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var transform_identity=new Transform(1,0,0);function transform_transform(node){for(;!node.__zoom;)if(!(node=node.parentNode))return transform_identity;return node.__zoom}function src_noevent_nopropagation(event){event.stopImmediatePropagation()}transform_transform.prototype=Transform.prototype;var d3_zoom_src_noevent=function(event){event.preventDefault(),event.stopImmediatePropagation()};function zoom_defaultFilter(event){return!(event.ctrlKey&&"wheel"!==event.type||event.button)}function zoom_defaultExtent(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function defaultTransform(){return this.__zoom||transform_identity}function defaultWheelDelta(event){return-event.deltaY*(1===event.deltaMode?.05:event.deltaMode?1:.002)*(event.ctrlKey?10:1)}function zoom_defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(transform,extent,translateExtent){var dx0=transform.invertX(extent[0][0])-translateExtent[0][0],dx1=transform.invertX(extent[1][0])-translateExtent[1][0],dy0=transform.invertY(extent[0][1])-translateExtent[0][1],dy1=transform.invertY(extent[1][1])-translateExtent[1][1];return transform.translate(dx1>dx0?(dx0+dx1)/2:Math.min(0,dx0)||Math.max(0,dx1),dy1>dy0?(dy0+dy1)/2:Math.min(0,dy0)||Math.max(0,dy1))}var d3_zoom_src_zoom=function(){var touchstarting,touchfirst,touchending,filter=zoom_defaultFilter,extent=zoom_defaultExtent,constrain=defaultConstrain,wheelDelta=defaultWheelDelta,touchable=zoom_defaultTouchable,scaleExtent=[0,1/0],translateExtent=[[-1/0,-1/0],[1/0,1/0]],duration=250,interpolate=src_zoom,listeners=src_dispatch("start","zoom","end"),clickDistance2=0,tapDistance=10;function zoom(selection){selection.property("__zoom",defaultTransform).on("wheel.zoom",wheeled).on("mousedown.zoom",mousedowned).on("dblclick.zoom",dblclicked).filter(touchable).on("touchstart.zoom",touchstarted).on("touchmove.zoom",touchmoved).on("touchend.zoom touchcancel.zoom",touchended).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function scale(transform,k){return(k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],k)))===transform.k?transform:new Transform(k,transform.x,transform.y)}function translate(transform,p0,p1){var x=p0[0]-p1[0]*transform.k,y=p0[1]-p1[1]*transform.k;return x===transform.x&&y===transform.y?transform:new Transform(transform.k,x,y)}function centroid(extent){return[(+extent[0][0]+ +extent[1][0])/2,(+extent[0][1]+ +extent[1][1])/2]}function schedule(transition,transform,point,event){transition.on("start.zoom",(function(){gesture(this,arguments).event(event).start()})).on("interrupt.zoom end.zoom",(function(){gesture(this,arguments).event(event).end()})).tween("zoom",(function(){var that=this,args=arguments,g=gesture(that,args).event(event),e=extent.apply(that,args),p=null==point?centroid(e):"function"==typeof point?point.apply(that,args):point,w=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),a=that.__zoom,b="function"==typeof transform?transform.apply(that,args):transform,i=interpolate(a.invert(p).concat(w/a.k),b.invert(p).concat(w/b.k));return function(t){if(1===t)t=b;else{var l=i(t),k=w/l[2];t=new Transform(k,p[0]-l[0]*k,p[1]-l[1]*k)}g.zoom(null,t)}}))}function gesture(that,args,clean){return!clean&&that.__zooming||new Gesture(that,args)}function Gesture(that,args){this.that=that,this.args=args,this.active=0,this.sourceEvent=null,this.extent=extent.apply(that,args),this.taps=0}function wheeled(event,...args){if(filter.apply(this,arguments)){var g=gesture(this,args).event(event),t=this.__zoom,k=Math.max(scaleExtent[0],Math.min(scaleExtent[1],t.k*Math.pow(2,wheelDelta.apply(this,arguments)))),p=pointer(event);if(g.wheel)g.mouse[0][0]===p[0]&&g.mouse[0][1]===p[1]||(g.mouse[1]=t.invert(g.mouse[0]=p)),clearTimeout(g.wheel);else{if(t.k===k)return;g.mouse=[p,t.invert(p)],interrupt(this),g.start()}d3_zoom_src_noevent(event),g.wheel=setTimeout(wheelidled,150),g.zoom("mouse",constrain(translate(scale(t,k),g.mouse[0],g.mouse[1]),g.extent,translateExtent))}function wheelidled(){g.wheel=null,g.end()}}function mousedowned(event,...args){if(!touchending&&filter.apply(this,arguments)){var g=gesture(this,args,!0).event(event),v=src_select(event.view).on("mousemove.zoom",mousemoved,!0).on("mouseup.zoom",mouseupped,!0),p=pointer(event,currentTarget),currentTarget=event.currentTarget,x0=event.clientX,y0=event.clientY;nodrag(event.view),src_noevent_nopropagation(event),g.mouse=[p,this.__zoom.invert(p)],interrupt(this),g.start()}function mousemoved(event){if(d3_zoom_src_noevent(event),!g.moved){var dx=event.clientX-x0,dy=event.clientY-y0;g.moved=dx*dx+dy*dy>clickDistance2}g.event(event).zoom("mouse",constrain(translate(g.that.__zoom,g.mouse[0]=pointer(event,currentTarget),g.mouse[1]),g.extent,translateExtent))}function mouseupped(event){v.on("mousemove.zoom mouseup.zoom",null),yesdrag(event.view,g.moved),d3_zoom_src_noevent(event),g.event(event).end()}}function dblclicked(event,...args){if(filter.apply(this,arguments)){var t0=this.__zoom,p0=pointer(event.changedTouches?event.changedTouches[0]:event,this),p1=t0.invert(p0),k1=t0.k*(event.shiftKey?.5:2),t1=constrain(translate(scale(t0,k1),p0,p1),extent.apply(this,args),translateExtent);d3_zoom_src_noevent(event),duration>0?src_select(this).transition().duration(duration).call(schedule,t1,p0,event):src_select(this).call(zoom.transform,t1,p0,event)}}function touchstarted(event,...args){if(filter.apply(this,arguments)){var started,i,t,p,touches=event.touches,n=touches.length,g=gesture(this,args,event.changedTouches.length===n).event(event);for(src_noevent_nopropagation(event),i=0;i<n;++i)t=touches[i],p=[p=pointer(t,this),this.__zoom.invert(p),t.identifier],g.touch0?g.touch1||g.touch0[2]===p[2]||(g.touch1=p,g.taps=0):(g.touch0=p,started=!0,g.taps=1+!!touchstarting);touchstarting&&(touchstarting=clearTimeout(touchstarting)),started&&(g.taps<2&&(touchfirst=p[0],touchstarting=setTimeout((function(){touchstarting=null}),500)),interrupt(this),g.start())}}function touchmoved(event,...args){if(this.__zooming){var i,t,p,l,g=gesture(this,args).event(event),touches=event.changedTouches,n=touches.length;for(d3_zoom_src_noevent(event),i=0;i<n;++i)t=touches[i],p=pointer(t,this),g.touch0&&g.touch0[2]===t.identifier?g.touch0[0]=p:g.touch1&&g.touch1[2]===t.identifier&&(g.touch1[0]=p);if(t=g.that.__zoom,g.touch1){var p0=g.touch0[0],l0=g.touch0[1],p1=g.touch1[0],l1=g.touch1[1],dp=(dp=p1[0]-p0[0])*dp+(dp=p1[1]-p0[1])*dp,dl=(dl=l1[0]-l0[0])*dl+(dl=l1[1]-l0[1])*dl;t=scale(t,Math.sqrt(dp/dl)),p=[(p0[0]+p1[0])/2,(p0[1]+p1[1])/2],l=[(l0[0]+l1[0])/2,(l0[1]+l1[1])/2]}else{if(!g.touch0)return;p=g.touch0[0],l=g.touch0[1]}g.zoom("touch",constrain(translate(t,p,l),g.extent,translateExtent))}}function touchended(event,...args){if(this.__zooming){var i,t,g=gesture(this,args).event(event),touches=event.changedTouches,n=touches.length;for(src_noevent_nopropagation(event),touchending&&clearTimeout(touchending),touchending=setTimeout((function(){touchending=null}),500),i=0;i<n;++i)t=touches[i],g.touch0&&g.touch0[2]===t.identifier?delete g.touch0:g.touch1&&g.touch1[2]===t.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),2===g.taps&&(t=pointer(t,this),Math.hypot(touchfirst[0]-t[0],touchfirst[1]-t[1])<tapDistance)){var p=src_select(this).on("dblclick.zoom");p&&p.apply(this,arguments)}}}return zoom.transform=function(collection,transform,point,event){var selection=collection.selection?collection.selection():collection;selection.property("__zoom",defaultTransform),collection!==selection?schedule(collection,transform,point,event):selection.interrupt().each((function(){gesture(this,arguments).event(event).start().zoom(null,"function"==typeof transform?transform.apply(this,arguments):transform).end()}))},zoom.scaleBy=function(selection,k,p,event){zoom.scaleTo(selection,(function(){var k0=this.__zoom.k,k1="function"==typeof k?k.apply(this,arguments):k;return k0*k1}),p,event)},zoom.scaleTo=function(selection,k,p,event){zoom.transform(selection,(function(){var e=extent.apply(this,arguments),t0=this.__zoom,p0=null==p?centroid(e):"function"==typeof p?p.apply(this,arguments):p,p1=t0.invert(p0),k1="function"==typeof k?k.apply(this,arguments):k;return constrain(translate(scale(t0,k1),p0,p1),e,translateExtent)}),p,event)},zoom.translateBy=function(selection,x,y,event){zoom.transform(selection,(function(){return constrain(this.__zoom.translate("function"==typeof x?x.apply(this,arguments):x,"function"==typeof y?y.apply(this,arguments):y),extent.apply(this,arguments),translateExtent)}),null,event)},zoom.translateTo=function(selection,x,y,p,event){zoom.transform(selection,(function(){var e=extent.apply(this,arguments),t=this.__zoom,p0=null==p?centroid(e):"function"==typeof p?p.apply(this,arguments):p;return constrain(transform_identity.translate(p0[0],p0[1]).scale(t.k).translate("function"==typeof x?-x.apply(this,arguments):-x,"function"==typeof y?-y.apply(this,arguments):-y),e,translateExtent)}),p,event)},Gesture.prototype={event:function(event){return event&&(this.sourceEvent=event),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(key,transform){return this.mouse&&"mouse"!==key&&(this.mouse[1]=transform.invert(this.mouse[0])),this.touch0&&"touch"!==key&&(this.touch0[1]=transform.invert(this.touch0[0])),this.touch1&&"touch"!==key&&(this.touch1[1]=transform.invert(this.touch1[0])),this.that.__zoom=transform,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(type){var d=src_select(this.that).datum();listeners.call(type,this.that,new ZoomEvent(type,{sourceEvent:this.sourceEvent,target:zoom,type:type,transform:this.that.__zoom,dispatch:listeners}),d)}},zoom.wheelDelta=function(_){return arguments.length?(wheelDelta="function"==typeof _?_:d3_zoom_src_constant(+_),zoom):wheelDelta},zoom.filter=function(_){return arguments.length?(filter="function"==typeof _?_:d3_zoom_src_constant(!!_),zoom):filter},zoom.touchable=function(_){return arguments.length?(touchable="function"==typeof _?_:d3_zoom_src_constant(!!_),zoom):touchable},zoom.extent=function(_){return arguments.length?(extent="function"==typeof _?_:d3_zoom_src_constant([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),zoom):extent},zoom.scaleExtent=function(_){return arguments.length?(scaleExtent[0]=+_[0],scaleExtent[1]=+_[1],zoom):[scaleExtent[0],scaleExtent[1]]},zoom.translateExtent=function(_){return arguments.length?(translateExtent[0][0]=+_[0][0],translateExtent[1][0]=+_[1][0],translateExtent[0][1]=+_[0][1],translateExtent[1][1]=+_[1][1],zoom):[[translateExtent[0][0],translateExtent[0][1]],[translateExtent[1][0],translateExtent[1][1]]]},zoom.constrain=function(_){return arguments.length?(constrain=_,zoom):constrain},zoom.duration=function(_){return arguments.length?(duration=+_,zoom):duration},zoom.interpolate=function(_){return arguments.length?(interpolate=_,zoom):interpolate},zoom.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?zoom:value},zoom.clickDistance=function(_){return arguments.length?(clickDistance2=(_=+_)*_,zoom):Math.sqrt(clickDistance2)},zoom.tapDistance=function(_){return arguments.length?(tapDistance=+_,zoom):tapDistance},zoom}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultDetailPane=DefaultDetailPane;var _react=_interopRequireDefault(__webpack_require__(1)),_propTypes=_interopRequireDefault(__webpack_require__(2));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DefaultDetailPane(props){var node=props.selectedNode;if(!node)return null;console.log("selected node",node),"step"===node.nodeType||node.ioType||node.nodeType;var textContent=JSON.stringify(node.meta,null,4);return _react.default.createElement("div",{className:"detail-pane"},_react.default.createElement("h4",null,"Create your own detail pane component and pass in a ",_react.default.createElement("code",null,"renderDetailPane")," prop (function) which returns it."),_react.default.createElement("h5",null,"Could add ",_react.default.createElement("code",null,"display: flex")," & related CSS styling to visualization container & pane to have detail pane show at left or right, if desired."),_react.default.createElement("div",{className:"detail-pane-body"},_react.default.createElement("pre",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap"}},textContent)))}DefaultDetailPane.propTypes={selectedNode:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.oneOf([null])])},DefaultDetailPane.defaultProps={selectedNode:null}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}function replaceClassName(origClass,classToRemove){return origClass.replace(new RegExp("(^|\\s)"+classToRemove+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CSSTransition",(function(){return esm_CSSTransition})),__webpack_require__.d(__webpack_exports__,"ReplaceTransition",(function(){return esm_ReplaceTransition})),__webpack_require__.d(__webpack_exports__,"SwitchTransition",(function(){return esm_SwitchTransition})),__webpack_require__.d(__webpack_exports__,"TransitionGroup",(function(){return esm_TransitionGroup})),__webpack_require__.d(__webpack_exports__,"Transition",(function(){return esm_Transition})),__webpack_require__.d(__webpack_exports__,"config",(function(){return config}));var external_commonjs_react_commonjs2_react_amd_react_root_React_=__webpack_require__(1),external_commonjs_react_commonjs2_react_amd_react_root_React_default=__webpack_require__.n(external_commonjs_react_commonjs2_react_amd_react_root_React_),external_commonjs_react_dom_commonjs2_react_dom_amd_react_dom_root_ReactDOM_=__webpack_require__(5),external_commonjs_react_dom_commonjs2_react_dom_amd_react_dom_root_ReactDOM_default=__webpack_require__.n(external_commonjs_react_dom_commonjs2_react_dom_amd_react_dom_root_ReactDOM_),config={disabled:!1},TransitionGroupContext=external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.createContext(null),ENTERING="entering",ENTERED="entered",Transition_Transition=function(_React$Component){function Transition(props,context){var _this;_this=_React$Component.call(this,props,context)||this;var initialStatus,appear=context&&!context.isMounting?props.enter:props.appear;return _this.appearStatus=null,props.in?appear?(initialStatus="exited",_this.appearStatus=ENTERING):initialStatus=ENTERED:initialStatus=props.unmountOnExit||props.mountOnEnter?"unmounted":"exited",_this.state={status:initialStatus},_this.nextCallback=null,_this}_inheritsLoose(Transition,_React$Component),Transition.getDerivedStateFromProps=function(_ref,prevState){return _ref.in&&"unmounted"===prevState.status?{status:"exited"}:null};var _proto=Transition.prototype;return _proto.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},_proto.componentDidUpdate=function(prevProps){var nextStatus=null;if(prevProps!==this.props){var status=this.state.status;this.props.in?status!==ENTERING&&status!==ENTERED&&(nextStatus=ENTERING):status!==ENTERING&&status!==ENTERED||(nextStatus="exiting")}this.updateStatus(!1,nextStatus)},_proto.componentWillUnmount=function(){this.cancelNextCallback()},_proto.getTimeouts=function(){var exit,enter,appear,timeout=this.props.timeout;return exit=enter=appear=timeout,null!=timeout&&"number"!=typeof timeout&&(exit=timeout.exit,enter=timeout.enter,appear=void 0!==timeout.appear?timeout.appear:enter),{exit:exit,enter:enter,appear:appear}},_proto.updateStatus=function(mounting,nextStatus){void 0===mounting&&(mounting=!1),null!==nextStatus?(this.cancelNextCallback(),nextStatus===ENTERING?this.performEnter(mounting):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},_proto.performEnter=function(mounting){var _this2=this,enter=this.props.enter,appearing=this.context?this.context.isMounting:mounting,_ref2=this.props.nodeRef?[appearing]:[external_commonjs_react_dom_commonjs2_react_dom_amd_react_dom_root_ReactDOM_default.a.findDOMNode(this),appearing],maybeNode=_ref2[0],maybeAppearing=_ref2[1],timeouts=this.getTimeouts(),enterTimeout=appearing?timeouts.appear:timeouts.enter;!mounting&&!enter||config.disabled?this.safeSetState({status:ENTERED},(function(){_this2.props.onEntered(maybeNode)})):(this.props.onEnter(maybeNode,maybeAppearing),this.safeSetState({status:ENTERING},(function(){_this2.props.onEntering(maybeNode,maybeAppearing),_this2.onTransitionEnd(enterTimeout,(function(){_this2.safeSetState({status:ENTERED},(function(){_this2.props.onEntered(maybeNode,maybeAppearing)}))}))})))},_proto.performExit=function(){var _this3=this,exit=this.props.exit,timeouts=this.getTimeouts(),maybeNode=this.props.nodeRef?void 0:external_commonjs_react_dom_commonjs2_react_dom_amd_react_dom_root_ReactDOM_default.a.findDOMNode(this);exit&&!config.disabled?(this.props.onExit(maybeNode),this.safeSetState({status:"exiting"},(function(){_this3.props.onExiting(maybeNode),_this3.onTransitionEnd(timeouts.exit,(function(){_this3.safeSetState({status:"exited"},(function(){_this3.props.onExited(maybeNode)}))}))}))):this.safeSetState({status:"exited"},(function(){_this3.props.onExited(maybeNode)}))},_proto.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},_proto.safeSetState=function(nextState,callback){callback=this.setNextCallback(callback),this.setState(nextState,callback)},_proto.setNextCallback=function(callback){var _this4=this,active=!0;return this.nextCallback=function(event){active&&(active=!1,_this4.nextCallback=null,callback(event))},this.nextCallback.cancel=function(){active=!1},this.nextCallback},_proto.onTransitionEnd=function(timeout,handler){this.setNextCallback(handler);var node=this.props.nodeRef?this.props.nodeRef.current:external_commonjs_react_dom_commonjs2_react_dom_amd_react_dom_root_ReactDOM_default.a.findDOMNode(this),doesNotHaveTimeoutOrListener=null==timeout&&!this.props.addEndListener;if(node&&!doesNotHaveTimeoutOrListener){if(this.props.addEndListener){var _ref3=this.props.nodeRef?[this.nextCallback]:[node,this.nextCallback],maybeNode=_ref3[0],maybeNextCallback=_ref3[1];this.props.addEndListener(maybeNode,maybeNextCallback)}null!=timeout&&setTimeout(this.nextCallback,timeout)}else setTimeout(this.nextCallback,0)},_proto.render=function(){var status=this.state.status;if("unmounted"===status)return null;var _this$props=this.props,children=_this$props.children,childProps=(_this$props.in,_this$props.mountOnEnter,_this$props.unmountOnExit,_this$props.appear,_this$props.enter,_this$props.exit,_this$props.timeout,_this$props.addEndListener,_this$props.onEnter,_this$props.onEntering,_this$props.onEntered,_this$props.onExit,_this$props.onExiting,_this$props.onExited,_this$props.nodeRef,_objectWithoutPropertiesLoose(_this$props,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.createElement(TransitionGroupContext.Provider,{value:null},"function"==typeof children?children(status,childProps):external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.Children.only(children),childProps))},Transition}(external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.Component);function noop(){}Transition_Transition.contextType=TransitionGroupContext,Transition_Transition.propTypes={},Transition_Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop,onEntering:noop,onEntered:noop,onExit:noop,onExiting:noop,onExited:noop},Transition_Transition.UNMOUNTED="unmounted",Transition_Transition.EXITED="exited",Transition_Transition.ENTERING=ENTERING,Transition_Transition.ENTERED=ENTERED,Transition_Transition.EXITING="exiting";var esm_Transition=Transition_Transition,CSSTransition_removeClass=function(node,classes){return node&&classes&&classes.split(" ").forEach((function(c){return className=c,void((element=node).classList?element.classList.remove(className):"string"==typeof element.className?element.className=replaceClassName(element.className,className):element.setAttribute("class",replaceClassName(element.className&&element.className.baseVal||"",className)));var element,className}))},CSSTransition_CSSTransition=function(_React$Component){function CSSTransition(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this).appliedClasses={appear:{},enter:{},exit:{}},_this.onEnter=function(maybeNode,maybeAppearing){var _this$resolveArgument=_this.resolveArguments(maybeNode,maybeAppearing),node=_this$resolveArgument[0],appearing=_this$resolveArgument[1];_this.removeClasses(node,"exit"),_this.addClass(node,appearing?"appear":"enter","base"),_this.props.onEnter&&_this.props.onEnter(maybeNode,maybeAppearing)},_this.onEntering=function(maybeNode,maybeAppearing){var _this$resolveArgument2=_this.resolveArguments(maybeNode,maybeAppearing),node=_this$resolveArgument2[0],type=_this$resolveArgument2[1]?"appear":"enter";_this.addClass(node,type,"active"),_this.props.onEntering&&_this.props.onEntering(maybeNode,maybeAppearing)},_this.onEntered=function(maybeNode,maybeAppearing){var _this$resolveArgument3=_this.resolveArguments(maybeNode,maybeAppearing),node=_this$resolveArgument3[0],type=_this$resolveArgument3[1]?"appear":"enter";_this.removeClasses(node,type),_this.addClass(node,type,"done"),_this.props.onEntered&&_this.props.onEntered(maybeNode,maybeAppearing)},_this.onExit=function(maybeNode){var node=_this.resolveArguments(maybeNode)[0];_this.removeClasses(node,"appear"),_this.removeClasses(node,"enter"),_this.addClass(node,"exit","base"),_this.props.onExit&&_this.props.onExit(maybeNode)},_this.onExiting=function(maybeNode){var node=_this.resolveArguments(maybeNode)[0];_this.addClass(node,"exit","active"),_this.props.onExiting&&_this.props.onExiting(maybeNode)},_this.onExited=function(maybeNode){var node=_this.resolveArguments(maybeNode)[0];_this.removeClasses(node,"exit"),_this.addClass(node,"exit","done"),_this.props.onExited&&_this.props.onExited(maybeNode)},_this.resolveArguments=function(maybeNode,maybeAppearing){return _this.props.nodeRef?[_this.props.nodeRef.current,maybeNode]:[maybeNode,maybeAppearing]},_this.getClassNames=function(type){var classNames=_this.props.classNames,isStringClassNames="string"==typeof classNames,baseClassName=isStringClassNames?""+(isStringClassNames&&classNames?classNames+"-":"")+type:classNames[type];return{baseClassName:baseClassName,activeClassName:isStringClassNames?baseClassName+"-active":classNames[type+"Active"],doneClassName:isStringClassNames?baseClassName+"-done":classNames[type+"Done"]}},_this}_inheritsLoose(CSSTransition,_React$Component);var _proto=CSSTransition.prototype;return _proto.addClass=function(node,type,phase){var className=this.getClassNames(type)[phase+"ClassName"],doneClassName=this.getClassNames("enter").doneClassName;"appear"===type&&"done"===phase&&doneClassName&&(className+=" "+doneClassName),"active"===phase&&node&&node.scrollTop,className&&(this.appliedClasses[type][phase]=className,function(node,classes){node&&classes&&classes.split(" ").forEach((function(c){return className=c,void((element=node).classList?element.classList.add(className):function(element,className){return element.classList?!!className&&element.classList.contains(className):-1!==(" "+(element.className.baseVal||element.className)+" ").indexOf(" "+className+" ")}(element,className)||("string"==typeof element.className?element.className=element.className+" "+className:element.setAttribute("class",(element.className&&element.className.baseVal||"")+" "+className)));var element,className}))}(node,className))},_proto.removeClasses=function(node,type){var _this$appliedClasses$=this.appliedClasses[type],baseClassName=_this$appliedClasses$.base,activeClassName=_this$appliedClasses$.active,doneClassName=_this$appliedClasses$.done;this.appliedClasses[type]={},baseClassName&&CSSTransition_removeClass(node,baseClassName),activeClassName&&CSSTransition_removeClass(node,activeClassName),doneClassName&&CSSTransition_removeClass(node,doneClassName)},_proto.render=function(){var _this$props=this.props,props=(_this$props.classNames,_objectWithoutPropertiesLoose(_this$props,["classNames"]));return external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.createElement(esm_Transition,_extends({},props,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},CSSTransition}(external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.Component);CSSTransition_CSSTransition.defaultProps={classNames:""},CSSTransition_CSSTransition.propTypes={};var esm_CSSTransition=CSSTransition_CSSTransition;function getChildMapping(children,mapFn){var result=Object.create(null);return children&&external_commonjs_react_commonjs2_react_amd_react_root_React_.Children.map(children,(function(c){return c})).forEach((function(child){result[child.key]=function(child){return mapFn&&Object(external_commonjs_react_commonjs2_react_amd_react_root_React_.isValidElement)(child)?mapFn(child):child}(child)})),result}function getProp(child,prop,props){return null!=props[prop]?props[prop]:child.props[prop]}function getNextChildMapping(nextProps,prevChildMapping,onExited){var nextChildMapping=getChildMapping(nextProps.children),children=function(prev,next){function getValueForKey(key){return key in next?next[key]:prev[key]}prev=prev||{},next=next||{};var i,nextKeysPending=Object.create(null),pendingKeys=[];for(var prevKey in prev)prevKey in next?pendingKeys.length&&(nextKeysPending[prevKey]=pendingKeys,pendingKeys=[]):pendingKeys.push(prevKey);var childMapping={};for(var nextKey in next){if(nextKeysPending[nextKey])for(i=0;i<nextKeysPending[nextKey].length;i++){var pendingNextKey=nextKeysPending[nextKey][i];childMapping[nextKeysPending[nextKey][i]]=getValueForKey(pendingNextKey)}childMapping[nextKey]=getValueForKey(nextKey)}for(i=0;i<pendingKeys.length;i++)childMapping[pendingKeys[i]]=getValueForKey(pendingKeys[i]);return childMapping}(prevChildMapping,nextChildMapping);return Object.keys(children).forEach((function(key){var child=children[key];if(Object(external_commonjs_react_commonjs2_react_amd_react_root_React_.isValidElement)(child)){var hasPrev=key in prevChildMapping,hasNext=key in nextChildMapping,prevChild=prevChildMapping[key],isLeaving=Object(external_commonjs_react_commonjs2_react_amd_react_root_React_.isValidElement)(prevChild)&&!prevChild.props.in;!hasNext||hasPrev&&!isLeaving?hasNext||!hasPrev||isLeaving?hasNext&&hasPrev&&Object(external_commonjs_react_commonjs2_react_amd_react_root_React_.isValidElement)(prevChild)&&(children[key]=Object(external_commonjs_react_commonjs2_react_amd_react_root_React_.cloneElement)(child,{onExited:onExited.bind(null,child),in:prevChild.props.in,exit:getProp(child,"exit",nextProps),enter:getProp(child,"enter",nextProps)})):children[key]=Object(external_commonjs_react_commonjs2_react_amd_react_root_React_.cloneElement)(child,{in:!1}):children[key]=Object(external_commonjs_react_commonjs2_react_amd_react_root_React_.cloneElement)(child,{onExited:onExited.bind(null,child),in:!0,exit:getProp(child,"exit",nextProps),enter:getProp(child,"enter",nextProps)})}})),children}var values=Object.values||function(obj){return Object.keys(obj).map((function(k){return obj[k]}))},TransitionGroup_TransitionGroup=function(_React$Component){function TransitionGroup(props,context){var _this,handleExited=(_this=_React$Component.call(this,props,context)||this).handleExited.bind(function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(_this));return _this.state={contextValue:{isMounting:!0},handleExited:handleExited,firstRender:!0},_this}_inheritsLoose(TransitionGroup,_React$Component);var _proto=TransitionGroup.prototype;return _proto.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},_proto.componentWillUnmount=function(){this.mounted=!1},TransitionGroup.getDerivedStateFromProps=function(nextProps,_ref){var props,onExited,prevChildMapping=_ref.children,handleExited=_ref.handleExited;return{children:_ref.firstRender?(props=nextProps,onExited=handleExited,getChildMapping(props.children,(function(child){return Object(external_commonjs_react_commonjs2_react_amd_react_root_React_.cloneElement)(child,{onExited:onExited.bind(null,child),in:!0,appear:getProp(child,"appear",props),enter:getProp(child,"enter",props),exit:getProp(child,"exit",props)})}))):getNextChildMapping(nextProps,prevChildMapping,handleExited),firstRender:!1}},_proto.handleExited=function(child,node){var currentChildMapping=getChildMapping(this.props.children);child.key in currentChildMapping||(child.props.onExited&&child.props.onExited(node),this.mounted&&this.setState((function(state){var children=_extends({},state.children);return delete children[child.key],{children:children}})))},_proto.render=function(){var _this$props=this.props,Component=_this$props.component,childFactory=_this$props.childFactory,props=_objectWithoutPropertiesLoose(_this$props,["component","childFactory"]),contextValue=this.state.contextValue,children=values(this.state.children).map(childFactory);return delete props.appear,delete props.enter,delete props.exit,null===Component?external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.createElement(TransitionGroupContext.Provider,{value:contextValue},children):external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.createElement(TransitionGroupContext.Provider,{value:contextValue},external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.createElement(Component,props,children))},TransitionGroup}(external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.Component);TransitionGroup_TransitionGroup.propTypes={},TransitionGroup_TransitionGroup.defaultProps={component:"div",childFactory:function(child){return child}};var esm_TransitionGroup=TransitionGroup_TransitionGroup,ReplaceTransition_ReplaceTransition=function(_React$Component){function ReplaceTransition(){for(var _this,_len=arguments.length,_args=new Array(_len),_key=0;_key<_len;_key++)_args[_key]=arguments[_key];return(_this=_React$Component.call.apply(_React$Component,[this].concat(_args))||this).handleEnter=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return _this.handleLifecycle("onEnter",0,args)},_this.handleEntering=function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return _this.handleLifecycle("onEntering",0,args)},_this.handleEntered=function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return _this.handleLifecycle("onEntered",0,args)},_this.handleExit=function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return _this.handleLifecycle("onExit",1,args)},_this.handleExiting=function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return _this.handleLifecycle("onExiting",1,args)},_this.handleExited=function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return _this.handleLifecycle("onExited",1,args)},_this}_inheritsLoose(ReplaceTransition,_React$Component);var _proto=ReplaceTransition.prototype;return _proto.handleLifecycle=function(handler,idx,originalArgs){var _child$props,children=this.props.children,child=external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.Children.toArray(children)[idx];if(child.props[handler]&&(_child$props=child.props)[handler].apply(_child$props,originalArgs),this.props[handler]){var maybeNode=child.props.nodeRef?void 0:external_commonjs_react_dom_commonjs2_react_dom_amd_react_dom_root_ReactDOM_default.a.findDOMNode(this);this.props[handler](maybeNode)}},_proto.render=function(){var _this$props=this.props,children=_this$props.children,inProp=_this$props.in,props=_objectWithoutPropertiesLoose(_this$props,["children","in"]),_React$Children$toArr=external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.Children.toArray(children),first=_React$Children$toArr[0],second=_React$Children$toArr[1];return delete props.onEnter,delete props.onEntering,delete props.onEntered,delete props.onExit,delete props.onExiting,delete props.onExited,external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.createElement(esm_TransitionGroup,props,inProp?external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(first,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(second,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},ReplaceTransition}(external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.Component);ReplaceTransition_ReplaceTransition.propTypes={};var _leaveRenders,_enterRenders,esm_ReplaceTransition=ReplaceTransition_ReplaceTransition;var modes_out="out-in",modes_in="in-out",callHook=function(element,name,cb){return function(){var _element$props;element.props[name]&&(_element$props=element.props)[name].apply(_element$props,arguments),cb()}},leaveRenders=((_leaveRenders={})[modes_out]=function(_ref){var current=_ref.current,changeState=_ref.changeState;return external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(current,{in:!1,onExited:callHook(current,"onExited",(function(){changeState(ENTERING,null)}))})},_leaveRenders[modes_in]=function(_ref2){var current=_ref2.current,changeState=_ref2.changeState,children=_ref2.children;return[current,external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(children,{in:!0,onEntered:callHook(children,"onEntered",(function(){changeState(ENTERING)}))})]},_leaveRenders),enterRenders=((_enterRenders={})[modes_out]=function(_ref3){var children=_ref3.children,changeState=_ref3.changeState;return external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(children,{in:!0,onEntered:callHook(children,"onEntered",(function(){changeState(ENTERED,external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(children,{in:!0}))}))})},_enterRenders[modes_in]=function(_ref4){var current=_ref4.current,children=_ref4.children,changeState=_ref4.changeState;return[external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(current,{in:!1,onExited:callHook(current,"onExited",(function(){changeState(ENTERED,external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(children,{in:!0}))}))}),external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(children,{in:!0})]},_enterRenders),SwitchTransition_SwitchTransition=function(_React$Component){function SwitchTransition(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this).state={status:ENTERED,current:null},_this.appeared=!1,_this.changeState=function(status,current){void 0===current&&(current=_this.state.current),_this.setState({status:status,current:current})},_this}_inheritsLoose(SwitchTransition,_React$Component);var _proto=SwitchTransition.prototype;return _proto.componentDidMount=function(){this.appeared=!0},SwitchTransition.getDerivedStateFromProps=function(props,state){return null==props.children?{current:null}:state.status===ENTERING&&props.mode===modes_in?{status:ENTERING}:!state.current||(oldChildren=state.current,newChildren=props.children,oldChildren===newChildren||external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.isValidElement(oldChildren)&&external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.isValidElement(newChildren)&&null!=oldChildren.key&&oldChildren.key===newChildren.key)?{current:external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.cloneElement(props.children,{in:!0})}:{status:"exiting"};var oldChildren,newChildren},_proto.render=function(){var component,_this$props=this.props,children=_this$props.children,mode=_this$props.mode,_this$state=this.state,status=_this$state.status,current=_this$state.current,data={children:children,current:current,changeState:this.changeState,status:status};switch(status){case ENTERING:component=enterRenders[mode](data);break;case"exiting":component=leaveRenders[mode](data);break;case ENTERED:component=current}return external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.createElement(TransitionGroupContext.Provider,{value:{isMounting:!this.appeared}},component)},SwitchTransition}(external_commonjs_react_commonjs2_react_amd_react_root_React_default.a.Component);SwitchTransition_SwitchTransition.propTypes={},SwitchTransition_SwitchTransition.defaultProps={mode:modes_out};var esm_SwitchTransition=SwitchTransition_SwitchTransition},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DEFAULT_PARSING_OPTIONS",{enumerable:!0,get:function(){return _parsingFunctions.DEFAULT_PARSING_OPTIONS}}),Object.defineProperty(exports,"DefaultDetailPane",{enumerable:!0,get:function(){return _DefaultDetailPane.DefaultDetailPane}}),Object.defineProperty(exports,"DefaultNodeElement",{enumerable:!0,get:function(){return _Node.DefaultNodeElement}}),Object.defineProperty(exports,"GraphParser",{enumerable:!0,get:function(){return _Graph.GraphParser}}),exports.default=void 0,Object.defineProperty(exports,"parseAnalysisSteps",{enumerable:!0,get:function(){return _parsingFunctions.parseAnalysisSteps}}),Object.defineProperty(exports,"parseBasicIOAnalysisSteps",{enumerable:!0,get:function(){return _parsingFunctions.parseBasicIOAnalysisSteps}});var _Graph=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(13)),_parsingFunctions=__webpack_require__(7),_Node=__webpack_require__(6),_DefaultDetailPane=__webpack_require__(9);function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}var _default=_Graph.default;exports.default=_default},,function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.GraphParser=void 0;var _react=_interopRequireDefault(__webpack_require__(1)),_propTypes=_interopRequireDefault(__webpack_require__(2)),_underscore=_interopRequireDefault(__webpack_require__(3)),d3=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(8)),_memoizeOne=_interopRequireDefault(__webpack_require__(4)),_StateContainer=_interopRequireDefault(__webpack_require__(17)),_ScrollContainer=_interopRequireDefault(__webpack_require__(18)),_NodesLayer=_interopRequireDefault(__webpack_require__(19)),_EdgesLayer=_interopRequireDefault(__webpack_require__(20)),_DefaultDetailPane=__webpack_require__(9),_Node=__webpack_require__(6),_parsingFunctions=__webpack_require__(7);function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Graph=function(_React$Component){_inherits(Graph,_React$Component);var _super=_createSuper(Graph);function Graph(props){var _this;return _classCallCheck(this,Graph),(_this=_super.call(this,props)).height=_this.height.bind(_assertThisInitialized(_this)),_this.nodesWithCoordinates=_this.nodesWithCoordinates.bind(_assertThisInitialized(_this)),_this.state={mounted:!1},_this.memoized={getHeightFromNodes:(0,_memoizeOne.default)(Graph.getHeightFromNodes),getScrollableWidthFromNodes:(0,_memoizeOne.default)(Graph.getScrollableWidthFromNodes),getNodesWithCoordinates:(0,_memoizeOne.default)(Graph.getNodesWithCoordinates)},_this}return _createClass(Graph,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"height",value:function(){var _this$props=this.props,nodes=_this$props.nodes,nodesPreSortFxn=_this$props.nodesPreSortFxn,rowSpacing=_this$props.rowSpacing;return this.memoized.getHeightFromNodes(nodes,nodesPreSortFxn,rowSpacing)}},{key:"scrollableWidth",value:function(){var _this$props2=this.props,nodes=_this$props2.nodes,columnWidth=_this$props2.columnWidth,columnSpacing=_this$props2.columnSpacing,innerMargin=_this$props2.innerMargin;return this.memoized.getScrollableWidthFromNodes(nodes,columnWidth,columnSpacing,innerMargin)}},{key:"nodesWithCoordinates",value:function(viewportWidth,contentWidth,contentHeight){var _this$props3=this.props,nodes=_this$props3.nodes,innerMargin=_this$props3.innerMargin,rowSpacingType=_this$props3.rowSpacingType,rowSpacing=_this$props3.rowSpacing,columnWidth=_this$props3.columnWidth,columnSpacing=_this$props3.columnSpacing,isNodeCurrentContext=_this$props3.isNodeCurrentContext;return this.memoized.getNodesWithCoordinates(nodes,viewportWidth,contentWidth,contentHeight,innerMargin,rowSpacingType,rowSpacing,columnWidth,columnSpacing,isNodeCurrentContext)}},{key:"render",value:function(){var _this$props4=this.props,width=_this$props4.width,innerMargin=_this$props4.innerMargin,edges=_this$props4.edges,minimumHeight=_this$props4.minimumHeight,mounted=this.state.mounted,innerHeight=this.height(),contentWidth=this.scrollableWidth(),innerWidth=width;if(!mounted)return _react.default.createElement("div",{key:"outer"},_react.default.createElement("div",null,""));innerMargin&&(innerMargin.left||innerMargin.right)&&(innerWidth-=innerMargin.left||0,innerWidth-=innerMargin.right||0);var nodes=this.nodesWithCoordinates(innerWidth,contentWidth,innerHeight),graphHeight=innerHeight+(innerMargin.top||0)+(innerMargin.bottom||0);return _react.default.createElement("div",{className:"workflow-chart-outer-container",key:"outer"},_react.default.createElement("div",{className:"workflow-chart-inner-container"},_react.default.createElement(_StateContainer.default,_extends({nodes:nodes,edges:edges,innerWidth:innerWidth,innerHeight:innerHeight,contentWidth:contentWidth,width:width},_underscore.default.pick(this.props,"innerMargin","columnWidth","columnSpacing","pathArrows","href","onNodeClick","renderDetailPane")),_react.default.createElement(_ScrollContainer.default,{outerHeight:graphHeight,minHeight:minimumHeight},_react.default.createElement(_EdgesLayer.default,_underscore.default.pick(this.props,"isNodeDisabled","isNodeCurrentContext","isNodeSelected","edgeStyle","rowSpacing","columnWidth","columnSpacing","nodeEdgeLedgeWidths")),_react.default.createElement(_NodesLayer.default,_underscore.default.pick(this.props,"renderNodeElement","isNodeDisabled","isNodeCurrentContext","nodeClassName"))))))}}],[{key:"getHeightFromNodes",value:function(nodes,nodesPreSortFxn,rowSpacing){return"function"==typeof nodesPreSortFxn&&(nodes=nodesPreSortFxn(nodes.slice(0))),Math.max((0,_underscore.default)(nodes).chain().groupBy("column").pairs().reduce((function(maxCount,nodeSet){return Math.max(nodeSet[1].length,maxCount)}),0).value()*rowSpacing-rowSpacing)}},{key:"getScrollableWidthFromNodes",value:function(nodes,columnWidth,columnSpacing,innerMargin){return(_underscore.default.reduce(nodes,(function(highestCol,node){return Math.max(node.column,highestCol)}),0)+1)*(columnWidth+columnSpacing)+(innerMargin.left||0)+(innerMargin.right||0)-columnSpacing}},{key:"getNodesWithCoordinates",value:function(){var nodesByColumnPairs,leftOffset,nodesWithCoords,nodes=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,viewportWidth=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,contentWidth=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,contentHeight=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,innerMargin=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{top:0,right:0,bottom:0,left:0},rowSpacingType=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"compact",rowSpacing=arguments.length>6&&void 0!==arguments[6]?arguments[6]:75,columnWidth=arguments.length>7&&void 0!==arguments[7]?arguments[7]:150,columnSpacing=arguments.length>8&&void 0!==arguments[8]?arguments[8]:56,isNodeCurrentContext=arguments.length>9&&void 0!==arguments[9]&&arguments[9];function centerNode(n){n.y=contentHeight/2+innerMargin.top,n.nodesInColumn=1,n.indexInColumn=0}return nodesByColumnPairs=_underscore.default.sortBy(_underscore.default.map(_underscore.default.pairs(_underscore.default.groupBy(nodes,"column")),(function(_ref){var _ref2=_slicedToArray(_ref,2),columnNumStr=_ref2[0],nodesInColumn=_ref2[1];return[parseInt(columnNumStr),nodesInColumn]})),0),_underscore.default.forEach(nodesByColumnPairs,(function(_ref3){var _ref4=_slicedToArray(_ref3,2),nodesInColumn=(_ref4[0],_ref4[1]),countInCol=nodesInColumn.length;if(nodesInColumn=_underscore.default.sortBy(nodesInColumn,"indexInColumn"),"compact"===rowSpacingType)if(1===countInCol)centerNode(nodesInColumn[0]);else{var padding=Math.max(0,contentHeight-(countInCol-1)*rowSpacing)/2;_underscore.default.forEach(nodesInColumn,(function(nodeInCol,idx){nodeInCol.y=(idx+0)*rowSpacing+innerMargin.top+padding,nodeInCol.nodesInColumn=countInCol}))}else if("stacked"===rowSpacingType)_underscore.default.forEach(nodesInColumn,(function(nodeInCol,idx){nodeInCol&&(nodeInCol.y=rowSpacing*idx+innerMargin.top,nodeInCol.nodesInColumn=countInCol)}));else{if("wide"!==rowSpacingType)throw console.error("Prop 'rowSpacingType' not valid. Must be ",Graph.propTypes.rowSpacingType),new Error("Prop 'rowSpacingType' not valid.");1===countInCol?centerNode(nodesInColumn[0]):_underscore.default.forEach(d3.range(0,contentHeight,contentHeight/(countInCol-1)).concat([contentHeight]),(function(yCoordinate,idx){var nodeInCol=nodesInColumn[idx];nodeInCol&&(nodeInCol.y=yCoordinate+innerMargin.top,nodeInCol.nodesInColumn=countInCol)}))}})),nodesWithCoords=_underscore.default.reduce(nodesByColumnPairs,(function(m,_ref5){var _ref6=_slicedToArray(_ref5,2),nodesInColumn=(_ref6[0],_ref6[1]);return m.concat(nodesInColumn)}),[]),leftOffset=innerMargin.left,contentWidth&&viewportWidth&&contentWidth<viewportWidth&&(leftOffset+=(viewportWidth-contentWidth)/2),_underscore.default.forEach(nodesWithCoords,(function(node){node.x=node.column*(columnWidth+columnSpacing)+leftOffset})),"function"==typeof isNodeCurrentContext&&_underscore.default.forEach(nodesWithCoords,(function(node){node.isCurrentContext=isNodeCurrentContext(node)})),nodesWithCoords}}]),Graph}(_react.default.Component);exports.default=Graph,_defineProperty(Graph,"propTypes",{isNodeDisabled:_propTypes.default.func,innerMargin:_propTypes.default.shape({top:_propTypes.default.number.isRequired,bottom:_propTypes.default.number.isRequired,left:_propTypes.default.number.isRequired,right:_propTypes.default.number.isRequired}).isRequired,renderNodeElement:_propTypes.default.func.isRequired,renderDetailPane:_propTypes.default.func.isRequired,nodes:_propTypes.default.arrayOf(_propTypes.default.shape({column:_propTypes.default.number.isRequired,name:_propTypes.default.string.isRequired,nodeType:_propTypes.default.string.isRequired,ioType:_propTypes.default.string,id:_propTypes.default.string,outputOf:_propTypes.default.object,inputOf:_propTypes.default.arrayOf(_propTypes.default.object),description:_propTypes.default.string,meta:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.shape({target:_propTypes.default.arrayOf(_propTypes.default.shape({name:_propTypes.default.string.isRequired,type:_propTypes.default.string.isRequired,step:_propTypes.default.string}))})])})).isRequired,edges:_propTypes.default.arrayOf(_propTypes.default.shape({source:_propTypes.default.object.isRequired,target:_propTypes.default.object.isRequired,capacity:_propTypes.default.string})).isRequired,nodeTitle:_propTypes.default.func,rowSpacingType:_propTypes.default.oneOf(["compact","wide","stacked"])}),_defineProperty(Graph,"defaultProps",{height:null,width:null,columnSpacing:100,columnWidth:150,rowSpacing:80,rowSpacingType:"compact",pathArrows:!0,renderDetailPane:function(selectedNode,props){return _react.default.createElement(_DefaultDetailPane.DefaultDetailPane,_extends({},props,{selectedNode:selectedNode}))},renderNodeElement:function(node,props){return _react.default.createElement(_Node.DefaultNodeElement,_extends({},props,{node:node}))},onNodeClick:null,innerMargin:{top:80,bottom:80,left:40,right:40},minimumHeight:75,edgeStyle:"bezier",isNodeCurrentContext:function(){return!1},nodeClassName:function(){return""},nodeEdgeLedgeWidths:[3,5]});var GraphParser=function(_React$Component2){_inherits(GraphParser,_React$Component2);var _super2=_createSuper(GraphParser);function GraphParser(props){var _this2;return _classCallCheck(this,GraphParser),(_this2=_super2.call(this,props)).memoized={parseAnalysisSteps:(0,_memoizeOne.default)(_parsingFunctions.parseAnalysisSteps),parseBasicIOAnalysisSteps:(0,_memoizeOne.default)(_parsingFunctions.parseBasicIOAnalysisSteps)},_this2}return _createClass(GraphParser,[{key:"render",value:function(){var graphData,_this$props5=this.props,steps=_this$props5.steps,parentItem=_this$props5.parentItem,children=_this$props5.children,parsingOptions=_this$props5.parsingOptions,parseBasicIO=parsingOptions.parseBasicIO;return graphData=parseBasicIO?this.memoized.parseBasicIOAnalysisSteps(steps,parentItem,parsingOptions):this.memoized.parseAnalysisSteps(steps,parsingOptions),_react.default.Children.map(children,(function(child){return _react.default.cloneElement(child,graphData)}))}}]),GraphParser}(_react.default.Component);exports.GraphParser=GraphParser,_defineProperty(GraphParser,"defaultProps",{parsingOptions:{showReferenceFiles:!0,showParameters:!0,showIndirectFiles:!0,parseBasicIO:!1},parentItem:{name:"Workflow"}})},function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(15);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(1)),_underscore=(_interopRequireDefault(__webpack_require__(2)),_interopRequireDefault(__webpack_require__(3))),_memoizeOne=_interopRequireDefault(__webpack_require__(4)),_excluded=["children","renderDetailPane"];function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var memoizedFindNode=(0,_memoizeOne.default)((function(nodes,name,nodeType){var id=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _underscore.default.find(nodes,(function(n){return n.name===name&&(n.nodeType===nodeType&&(null===id||n.id===id))}))})),StateContainer=function(_React$PureComponent){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(StateContainer,_React$PureComponent);var Constructor,protoProps,staticProps,_super=_createSuper(StateContainer);function StateContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StateContainer),(_this=_super.call(this,props)).defaultOnNodeClick=_this.defaultOnNodeClick.bind(_assertThisInitialized(_this)),_this.handleNodeClick=_this.handleNodeClick.bind(_assertThisInitialized(_this)),_this.deselectNode=_this.deselectNode.bind(_assertThisInitialized(_this)),_this.state={selectedNode:null},_this}return Constructor=StateContainer,staticProps=[{key:"getDerivedStateFromProps",value:function(props,state){if(state.selectedNode){var foundNode=memoizedFindNode(props.nodes,state.selectedNode.name,state.selectedNode.nodeType,state.selectedNode.id||null);return foundNode?{selectedNode:foundNode}:{selectedNode:null}}return null}}],(protoProps=[{key:"defaultOnNodeClick",value:function(node){this.setState((function(prevState){return prevState.selectedNode===node?{selectedNode:null}:{selectedNode:node}}))}},{key:"handleNodeClick",value:function(node,evt){var onNodeClick=this.props.onNodeClick,selectedNode=this.state.selectedNode;"function"==typeof onNodeClick?onNodeClick(node,selectedNode,evt):this.defaultOnNodeClick(node,selectedNode,evt)}},{key:"deselectNode",value:function(){this.setState({selectedNode:null})}},{key:"render",value:function(){var _this2=this,_this$props=this.props,children=_this$props.children,renderDetailPane=_this$props.renderDetailPane,passProps=_objectWithoutProperties(_this$props,_excluded),selectedNode=this.state.selectedNode,detailPane=null;return"function"==typeof renderDetailPane&&(detailPane=renderDetailPane(selectedNode,_objectSpread(_objectSpread({},this.props),{},{deselectNode:this.deselectNode}))),_react.default.createElement("div",{className:"state-container","data-is-node-selected":!!selectedNode},_react.default.Children.map(children,(function(child){return _react.default.cloneElement(child,_objectSpread(_objectSpread(_objectSpread({},passProps),_this2.state),{},{onNodeClick:_this2.handleNodeClick}))})),detailPane)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),StateContainer}(_react.default.PureComponent);exports.default=StateContainer},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(1)),_underscore=(_interopRequireDefault(__webpack_require__(2)),_interopRequireDefault(__webpack_require__(3)));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var ScrollContainer=function(_React$PureComponent){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(ScrollContainer,_React$PureComponent);var Constructor,protoProps,staticProps,_super=_createSuper(ScrollContainer);function ScrollContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ScrollContainer),(_this=_super.call(this,props)).state={mounted:!1,isHeightDecreasing:null,outerHeight:props.outerHeight,pastHeight:null},_this.containerRef=_react.default.createRef(),_this.heightTimer=null,_this}return Constructor=ScrollContainer,(protoProps=[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"componentDidUpdate",value:function(prevProps){var _this2=this,updateOuterHeight=this.props.outerHeight;if(updateOuterHeight!==prevProps.outerHeight){var isHeightDecreasing=updateOuterHeight<prevProps.outerHeight;this.setState({isHeightDecreasing:isHeightDecreasing,pastHeight:isHeightDecreasing?prevProps.outerHeight:null,outerHeight:updateOuterHeight},(function(){_this2.heightTimer&&clearTimeout(_this2.heightTimer),_this2.heightTimer=setTimeout((function(){_this2.setState({isHeightDecreasing:null,pastHeight:null})}),500)}))}}},{key:"render",value:function(){var _this3=this,_this$props=this.props,children=(_this$props.innerMargin,_this$props.innerWidth,_this$props.children),contentWidth=_this$props.contentWidth,width=_this$props.width,minHeight=_this$props.minHeight,_this$state=this.state,outerHeight=_this$state.outerHeight,pastHeight=_this$state.pastHeight,isHeightDecreasing=_this$state.isHeightDecreasing,mounted=_this$state.mounted,innerCls="scroll-container"+(isHeightDecreasing?" height-decreasing":"")+(!1===isHeightDecreasing?" height-increasing":""),innerStyle={width:Math.max(contentWidth,width),height:outerHeight,overflowY:outerHeight<minHeight?"hidden":null};return minHeight>outerHeight&&(innerStyle.paddingTop=innerStyle.paddingBottom=Math.floor((minHeight-outerHeight)/2)),_react.default.createElement("div",{className:"scroll-container-wrapper",ref:this.containerRef,style:{width:width,minHeight:minHeight}},_react.default.createElement("div",{className:innerCls,style:innerStyle},_react.default.Children.map(children,(function(child){return _react.default.cloneElement(child,_underscore.default.extend(_underscore.default.omit(_this3.props,"children"),{scrollContainerWrapperElement:_this3.containerRef.current||null,scrollContainerWrapperMounted:mounted,outerHeight:pastHeight||outerHeight}))}))))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),ScrollContainer}(_react.default.PureComponent);exports.default=ScrollContainer},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(1)),_underscore=_interopRequireDefault(__webpack_require__(3)),_memoizeOne=_interopRequireDefault(__webpack_require__(4)),_reactTransitionGroup=__webpack_require__(10),_Node=_interopRequireDefault(__webpack_require__(6));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var obj,key,value,NodesLayer=function(_React$PureComponent){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(NodesLayer,_React$PureComponent);var Constructor,protoProps,staticProps,_super=_createSuper(NodesLayer);function NodesLayer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodesLayer),(_this=_super.call(this,props)).memoized={sortedNodes:(0,_memoizeOne.default)(NodesLayer.sortedNodes),countInActiveContext:(0,_memoizeOne.default)(NodesLayer.countInActiveContext),lastActiveContextNode:(0,_memoizeOne.default)(NodesLayer.lastActiveContextNode)},_this}return Constructor=NodesLayer,staticProps=[{key:"sortedNodes",value:function(nodes){return _underscore.default.sortBy(nodes.slice(0),"id")}},{key:"countInActiveContext",value:function(nodes){return _underscore.default.reduce(nodes,(function(m,n){return n.isCurrentContext?++m:m}),0)}},{key:"lastActiveContextNode",value:function(nodes){return _underscore.default.sortBy(_underscore.default.filter(nodes,(function(n){return n.isCurrentContext})),"column").reverse()[0]}}],(protoProps=[{key:"renderNodeElements",value:function(){var _this2=this;if(!this.props.scrollContainerWrapperMounted)return null;var _this$props=this.props,nodes=_this$props.nodes,onNodeMouseEnter=_this$props.onNodeMouseEnter,onNodeMouseLeave=_this$props.onNodeMouseLeave,onNodeClick=_this$props.onNodeClick,nodeClassName=_this$props.nodeClassName,sortedNodes=this.memoized.sortedNodes(nodes),countInActiveContext=this.memoized.countInActiveContext(sortedNodes),lastActiveContextNode=0===countInActiveContext?null:this.memoized.lastActiveContextNode(sortedNodes);return _underscore.default.map(sortedNodes,(function(node,nodeIndex){var nodeProps=_underscore.default.extend(_underscore.default.omit(_this2.props,"children","nodes","width","innerWidth","outerWidth","windowWidth"),{node:node,countInActiveContext:countInActiveContext,lastActiveContextNode:lastActiveContextNode,onMouseEnter:onNodeMouseEnter&&onNodeMouseEnter.bind(onNodeMouseEnter,node),onMouseLeave:onNodeMouseLeave&&onNodeMouseLeave.bind(onNodeMouseLeave,node),onClick:onNodeClick&&onNodeClick.bind(onNodeClick,node),key:node.id||node.name||nodeIndex,className:nodeClassName});return _react.default.createElement(_reactTransitionGroup.CSSTransition,{classNames:"workflow-node-transition",unmountOnExit:!0,timeout:500,key:nodeProps.key},_react.default.createElement(_Node.default,nodeProps))}))}},{key:"render",value:function(){var _this$props2=this.props,innerMargin=_this$props2.innerMargin,innerWidth=_this$props2.innerWidth,outerHeight=_this$props2.outerHeight,contentWidth=_this$props2.contentWidth,fullWidth=innerWidth+innerMargin.left+innerMargin.right,layerStyle={width:Math.max(contentWidth,fullWidth),height:outerHeight};return _react.default.createElement("div",{className:"nodes-layer-wrapper",style:layerStyle},_react.default.createElement("div",{className:"nodes-layer",style:layerStyle},_react.default.createElement(_reactTransitionGroup.TransitionGroup,{component:null},this.renderNodeElements())))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),NodesLayer}(_react.default.PureComponent);exports.default=NodesLayer,value={onNodeMouseEnter:null,onNodeMouseLeave:null,onNodeClick:null},(key="defaultProps")in(obj=NodesLayer)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.traceEdges=traceEdges;var _react=_interopRequireDefault(__webpack_require__(1)),_memoizeOne=(_interopRequireDefault(__webpack_require__(2)),_interopRequireDefault(__webpack_require__(4))),_underscore=_interopRequireDefault(__webpack_require__(3)),_reactTransitionGroup=__webpack_require__(10),_d2=__webpack_require__(8),_Edge=_interopRequireDefault(__webpack_require__(21));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function traceEdges(originalEdges,nodes,columnWidth,columnSpacing,rowSpacing,contentWidth,contentHeight,innerMargin){var res,nodeEdgeLedgeWidths=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[10,10],topMargin=innerMargin&&innerMargin.top||0,leftMargin=innerMargin&&innerMargin.left||0,endHeight=topMargin+contentHeight+(innerMargin&&Math.max(0,innerMargin.bottom-10))||0,colStartXMap={},nodesByColumn=_underscore.default.reduce(nodes,(function(m,node){var column=node.column;return void 0===m[column]&&(m[column]=[]),m[column].push(node),m}),{}),columnCount=_underscore.default.keys(nodesByColumn).length;function buildVisibilityGraph(){for(var subdivisions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,partialHeight=rowSpacing/subdivisions,quarterHeight=rowSpacing/4,horizontalLineYCoords=[],currY=topMargin;currY>=10;)currY-=partialHeight;for(;currY<endHeight;)currY+=partialHeight,horizontalLineYCoords.push(currY);for(var segments=[],segmentsByColumnIdx=[],_loop=function(columnIdx){segmentsByColumnIdx.push([]);var nodesInColYCoords=_underscore.default.pluck(nodesByColumn[columnIdx],"y"),nodesInColYCoordsLen=nodesInColYCoords.length,colStartX=colStartXMap[columnIdx];void 0===colStartX&&(colStartX=colStartXMap[columnIdx]=leftMargin+columnIdx*columnWidth+columnSpacing*columnIdx);var colEndX=colStartX+columnWidth;_underscore.default.forEach(horizontalLineYCoords,(function(yCoord){for(var i=0;i<nodesInColYCoordsLen;i++){var highY=nodesInColYCoords[i]+quarterHeight,lowY=nodesInColYCoords[i]-quarterHeight;if(yCoord<=highY&&yCoord>=lowY)return}var segment=[[colStartX,yCoord],[colEndX,yCoord]];segments.push(segment),segmentsByColumnIdx[columnIdx].push(segment)}))},columnIdx=0;columnIdx<columnCount;columnIdx++)_loop(columnIdx);return{segments:segments,segmentsByColumnIdx:segmentsByColumnIdx}}function assembleSegments(segmentQ){var usedSegments=new Map,segmentQLen=segmentQ.length;function getNearestSegment(columnIdx,prevYCoord,source,target){var i,j,prevEdge,prevVs,previousEdges=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],targetYCoord=target.y,startXForCol=colStartXMap[columnIdx],prevEdgesLen=previousEdges.length,upperY=Math.max(prevYCoord,targetYCoord),lowerY=Math.min(prevYCoord,targetYCoord),closestSegmentDiff=1/0,closestSegmentIdx=-1,currSegment=null,currSegmentY=0,currExistingSegmentNodes=null,currDiff=null,multiplier=1,intersections=0,willDiverge=!1;for(i=0;i<segmentQLen;i++)if(currSegment=segmentQ[i],currSegmentY=currSegment[0][1],currSegment[0][0]===startXForCol&&(!(currExistingSegmentNodes=usedSegments.get(currSegment))||(willDiverge=_underscore.default.every(currExistingSegmentNodes,(function(_ref){var _ref2=_slicedToArray(_ref,2),exSrc=_ref2[0];_ref2[1];return exSrc===source}))))){if(currDiff=currSegmentY>upperY?currSegmentY-upperY:currSegmentY<lowerY?lowerY-currSegmentY:willDiverge?-.01:.01*Math.abs(prevYCoord-currSegmentY),!currExistingSegmentNodes){for(intersections=0,j=0;j<prevEdgesLen;j++)prevEdge=previousEdges[j],Array.isArray(prevEdge.vertices)?(prevVs=prevEdge.vertices,multiplier=2):(prevVs=[[prevEdge.source.x+columnWidth,prevEdge.source.y],[prevEdge.target.x,prevEdge.target.y]],multiplier=1),prevVs.reduce((function(prevV,v){return prevV&&prevV[0]+nodeEdgeLedgeWidths[0]<startXForCol&&v[0]>=startXForCol-nodeEdgeLedgeWidths[0]?((v[1]>currSegmentY&&prevV[1]<prevYCoord||v[1]<currSegmentY&&prevV[1]>prevYCoord)&&(0===intersections&&(intersections+=2*multiplier),intersections+=multiplier),v):v}),null);currDiff+=intersections*(.8*rowSpacing)}closestSegmentDiff>currDiff&&(closestSegmentDiff=currDiff,closestSegmentIdx=i)}if(-1===closestSegmentIdx)return null;var bestSegment=segmentQ[closestSegmentIdx];return currExistingSegmentNodes?currExistingSegmentNodes.push([source,target]):usedSegments.set(bestSegment,[[source,target]]),bestSegment}var originalEdgesSortedByLength=originalEdges.slice(0).sort((function(edgeA,edgeB){var sA=edgeA.source,tA=edgeA.target,sB=edgeB.source,tB=edgeB.target,colDifA=Math.abs(tA.column-sA.column),colDifB=Math.abs(tB.column-sB.column);if(1===colDifA&&1===colDifB)return 0;if(1===colDifA)return-1;if(1===colDifB)return 1;var xDistA=Math.abs(tA.x-sA.x),xDistB=Math.abs(tB.x-sB.x);if(xDistA>xDistB)return-1;if(xDistA<xDistB)return 1;var yDistA=Math.abs(tA.y-sA.y),yDistB=Math.abs(tB.y-sB.y);return yDistA>yDistB?1:yDistA<yDistB?-1:0})),resultEdges=[];return originalEdgesSortedByLength.forEach((function(edge){var source=edge.source,target=edge.target,sourceCol=source.column,sourceX=source.x,sourceY=source.y,targetCol=target.column,targetX=target.x,targetY=target.y,columnDiff=targetCol-sourceCol;if(columnDiff<=0)return console.error("Target column is greater than source column",source,target),void resultEdges.push(edge);if(1!==columnDiff){for(var vertices=[[sourceX+columnWidth,sourceY]],prevY=sourceY,colIdx=sourceCol+1;colIdx<targetCol;colIdx++){var bestSegment=getNearestSegment(colIdx,prevY,source,target,resultEdges);if(!bestSegment)throw new Error("Could not find viable path for edge");var _bestSegment=_slicedToArray(bestSegment,2),_bestSegment$=_slicedToArray(_bestSegment[0],2),bsX=_bestSegment$[0],bsY=_bestSegment$[1],_bestSegment$2=_slicedToArray(_bestSegment[1],2),beX=_bestSegment$2[0],beY=_bestSegment$2[1];vertices.push([bsX-nodeEdgeLedgeWidths[0],bsY]),vertices.push([beX+nodeEdgeLedgeWidths[1],beY]),prevY=beY}vertices.push([targetX,targetY]),resultEdges.push(_objectSpread(_objectSpread({},edge),{},{vertices:vertices}))}else resultEdges.push(edge)})),resultEdges}for(var tracedEdges=null,attempts=0;!tracedEdges&&attempts<5;){res=buildVisibilityGraph(4+attempts);try{tracedEdges=assembleSegments(res.segments,4+attempts)}catch(e){if(tracedEdges=null,"Could not find viable path for edge"!==e.message)throw e;console.warn("Could not find path",attempts)}attempts++}return{edges:tracedEdges,horizontalSegments:res.segments}}var EdgesLayer=function(_React$PureComponent){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(EdgesLayer,_React$PureComponent);var Constructor,protoProps,staticProps,_super=_createSuper(EdgesLayer);function EdgesLayer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EdgesLayer),_defineProperty(_assertThisInitialized(_this=_super.call(this,props)),"sortedEdges",(0,_memoizeOne.default)((function(edges,selectedNodes,isNodeDisabled){return EdgesLayer.sortedEdges(edges,selectedNodes,isNodeDisabled)}))),_this.sortedEdges=_this.sortedEdges.bind(_assertThisInitialized(_this)),_this}return Constructor=EdgesLayer,staticProps=[{key:"sortedEdges",value:function(edges,selectedNode,isNodeDisabled){return edges.slice(0).sort((function(a,b){var isASelected=_Edge.default.isSelected(a,selectedNode,isNodeDisabled),isBSelected=_Edge.default.isSelected(b,selectedNode,isNodeDisabled);return isASelected&&!isBSelected?1:!isASelected&&isBSelected?-1:0})).sort((function(a,b){var isADisabled=_Edge.default.isDisabled(a,isNodeDisabled),isBDisabled=_Edge.default.isDisabled(b,isNodeDisabled);return isADisabled&&!isBDisabled?-1:!isADisabled&&isBDisabled?1:0}))}},{key:"edgeOnEnter",value:function(elem){elem.style.opacity=0}},{key:"edgeOnEntering",value:function(elem){elem.style.opacity=0}},{key:"edgeOnEntered",value:function(elem){elem.style.opacity=null}},{key:"edgeOnExit",value:function(elem){elem.style.opacity=0}}],(protoProps=[{key:"pathArrows",value:function(){return this.props.pathArrows?_Edge.default.pathArrowsMarkers():null}},{key:"render",value:function(){var _this2=this,_this$props=this.props,outerHeight=_this$props.outerHeight,innerMargin=(_this$props.innerWidth,_this$props.innerMargin),width=_this$props.width,origEdges=_this$props.edges,nodes=_this$props.nodes,selectedNode=_this$props.selectedNode,isNodeDisabled=_this$props.isNodeDisabled,contentWidth=_this$props.contentWidth,_traceEdges=traceEdges(origEdges,nodes,_this$props.columnWidth,_this$props.columnSpacing,_this$props.rowSpacing,contentWidth,_this$props.innerHeight,innerMargin),edges=_traceEdges.edges,horizontalSegments=_traceEdges.horizontalSegments,edgeCount=edges.length,divWidth=Math.max(width,contentWidth);return _react.default.createElement("div",{className:"edges-layer-wrapper",style:{width:divWidth,height:outerHeight}},_react.default.createElement("svg",{className:"edges-layer",width:divWidth,height:outerHeight},this.pathArrows(),_react.default.createElement(_reactTransitionGroup.TransitionGroup,{component:null},_underscore.default.map(this.sortedEdges(edges,selectedNode,isNodeDisabled),(function(edge){var key=(edge.source.id||edge.source.name)+"----"+(edge.target.id||edge.target.name);return _react.default.createElement(_reactTransitionGroup.Transition,{unmountOnExit:!0,mountOnEnter:!0,timeout:500,key:key,onEnter:EdgesLayer.edgeOnEnter,onEntering:EdgesLayer.edgeOnEntering,onExit:EdgesLayer.edgeOnExit,onEntered:EdgesLayer.edgeOnEntered},_react.default.createElement(_Edge.default,_extends({},_this2.props,{key:key,edge:edge,edgeCount:edgeCount,startX:edge.source.x,startY:edge.source.y,endX:edge.target.x,endY:edge.target.y})))}))),_react.default.createElement(DebugVizGraphLayer,{segments:horizontalSegments})))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),EdgesLayer}(_react.default.PureComponent);exports.default=EdgesLayer;var DebugVizGraphLayer=_react.default.memo((function(_ref3){var segments=_ref3.segments,_ref3$enabled=_ref3.enabled;if(!(void 0!==_ref3$enabled&&_ref3$enabled))return null;var paths=segments.map((function(seg){var path=(0,_d2.path)();return path.moveTo.apply(path,_toConsumableArray(seg[0])),path.lineTo.apply(path,_toConsumableArray(seg[1])),path.toString()})).map((function(pathStr,idx){return _react.default.createElement("path",{d:pathStr,key:idx})}));return _react.default.createElement("g",{className:"vis-debug-graph"},paths)}))},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.pathDimensionFunctions=exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(1)),_underscore=(_interopRequireDefault(__webpack_require__(2)),_interopRequireDefault(__webpack_require__(3))),_memoizeOne=_interopRequireDefault(__webpack_require__(4)),d3=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(8)),_Node=_interopRequireDefault(__webpack_require__(6)),_parsingFunctions=__webpack_require__(7);function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var pathDimensionFunctions={drawBezierEdge:function(startPt,endPt,columnSpacing,rowSpacing,nodeEdgeLedgeWidths){var ledgeWidths=nodeEdgeLedgeWidths,path=d3.path();path.moveTo(startPt.x,startPt.y),path.lineTo(startPt.x+ledgeWidths[0],startPt.y);var nodeXDif=Math.abs(endPt.x-startPt.x),bezierStartPt={x:startPt.x+ledgeWidths[0],y:startPt.y},bezierEndPt={x:endPt.x-ledgeWidths[1],y:endPt.y};nodeXDif>columnSpacing&&(bezierStartPt.x+=Math.max(0,nodeXDif-columnSpacing*(Math.abs(endPt.y-startPt.y)/rowSpacing*2.5)));var bezierXDif=Math.abs(bezierStartPt.x-bezierEndPt.x),controlPoints=[{x:bezierStartPt.x+.5*bezierXDif,y:startPt.y},{x:bezierEndPt.x-.5*bezierXDif,y:endPt.y}];if(startPt.x>endPt.x){var dif=Math.max(rowSpacing||75);controlPoints[0].y+=dif*(endPt.y>=startPt.y?1:-1),controlPoints[1].y+=dif*(endPt.y-startPt.y>rowSpacing?-1:1),controlPoints[1].x=endPt.x-.5*Math.abs(endPt.x-startPt.x)}return path.bezierCurveTo(controlPoints[0].x,controlPoints[0].y,controlPoints[1].x,controlPoints[1].y,bezierEndPt.x,endPt.y),path.lineTo(endPt.x,endPt.y),path.toString()},drawStraightLineCurved:(0,_memoizeOne.default)((function(startPt,endPt,curveRadius){var radius=Math.min(curveRadius,Math.abs(startPt.y-endPt.y)/2),arcYOffset=Math.min(Math.max(endPt.y-startPt.y,-radius),radius),path=d3.path();return path.moveTo(startPt.x,startPt.y),path.lineTo(startPt.x+(endPt.x-startPt.x)/2-radius,startPt.y),path.arcTo(startPt.x+(endPt.x-startPt.x)/2,startPt.y,startPt.x+(endPt.x-startPt.x)/2,startPt.y+arcYOffset,radius),path.lineTo(startPt.x+(endPt.x-startPt.x)/2,endPt.y-arcYOffset),path.arcTo(startPt.x+(endPt.x-startPt.x)/2,endPt.y,startPt.x+(endPt.x-startPt.x)/2+radius,endPt.y,radius),path.lineTo(endPt.x,endPt.y),path.toString()})),drawBezierEdgeVertices:function(startPt,endPt,vertices,nodeEdgeLedgeWidths){var adjVertices=vertices.map((function(v){return v.slice()}));return adjVertices[0][0]=startPt&&startPt.x||adjVertices[0][0],adjVertices[adjVertices.length-1][0]=endPt&&endPt.x||adjVertices[adjVertices.length-1][0],nodeEdgeLedgeWidths[0]&&(adjVertices.unshift([adjVertices[0][0],adjVertices[0][1]]),adjVertices[1][0]+=nodeEdgeLedgeWidths[0]),nodeEdgeLedgeWidths[1]&&(adjVertices.push([adjVertices[adjVertices.length-1][0],adjVertices[adjVertices.length-1][1]]),adjVertices[adjVertices.length-2][0]-=nodeEdgeLedgeWidths[0]),adjVertices[0][0]=startPt&&startPt.x||adjVertices[0][0],adjVertices[adjVertices.length-1][0]=endPt&&endPt.x||adjVertices[adjVertices.length-1][0],d3.line().x((function(d){return d[0]})).y((function(d){return d[1]})).curve(d3.curveMonotoneX)(adjVertices)},drawStraightEdge:function(startPt,endPt){var path=d3.path();return path.moveTo(startPt.x,startPt.y),path.lineTo(endPt.x,endPt.y),path.closePath(),path.toString()}};exports.pathDimensionFunctions=pathDimensionFunctions;var obj,key,value,Edge=function(_React$Component){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Edge,_React$Component);var Constructor,protoProps,staticProps,_super=_createSuper(Edge);function Edge(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Edge),(_this=_super.call(this,props)).generatePathDimension=_this.generatePathDimension.bind(_assertThisInitialized(_this)),_this.transitionPathDimensions=_this.transitionPathDimensions.bind(_assertThisInitialized(_this)),_this.memoized={isDistantlySelected:(0,_memoizeOne.default)(Edge.isDistantlySelected),isRelated:(0,_memoizeOne.default)(Edge.isRelated),isDisabled:(0,_memoizeOne.default)(Edge.isDisabled),d:{drawBezierEdge:(0,_memoizeOne.default)(pathDimensionFunctions.drawBezierEdge),drawBezierEdgeVertices:(0,_memoizeOne.default)(pathDimensionFunctions.drawBezierEdgeVertices),drawStraightLineCurved:(0,_memoizeOne.default)(pathDimensionFunctions.drawStraightLineCurved),drawStraightEdge:(0,_memoizeOne.default)(pathDimensionFunctions.drawStraightEdge)}},_this.getComputedProperties=_this.getComputedProperties.bind(_assertThisInitialized(_this)),_this.state={pathDimension:_this.generatePathDimension()},_this.pathRef=_react.default.createRef(),_this}return Constructor=Edge,protoProps=[{key:"getComputedProperties",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,edge=props.edge,selectedNode=props.selectedNode,isNodeDisabled=props.isNodeDisabled,disabled=this.memoized.isDisabled(edge,isNodeDisabled);if(disabled||!selectedNode)return{disabled:disabled,selected:!1,related:!1};var selected=Edge.isSelected(edge,selectedNode),related=this.memoized.isRelated(edge,selectedNode),distantlySelected=selected||selectedNode&&this.memoized.isDistantlySelected(edge,selectedNode,disabled)||!1;return{disabled:disabled,selected:selected,related:related,distantlySelected:distantlySelected}}},{key:"componentDidUpdate",value:function(pastProps){var _this$props=this.props,startX=_this$props.startX,startY=_this$props.startY,endX=_this$props.endX,endY=_this$props.endY,edge=_this$props.edge;if(Edge.didNodeCoordinatesChange(this.props,pastProps))if(this.shouldDoTransitionOfEdge()){var startEndPtCoords=[{x:pastProps.startX,y:pastProps.startY},{x:startX,y:startY},{x:pastProps.endX,y:pastProps.endY},{x:endX,y:endY}];edge.vertices&&pastProps.edge.vertices&&edge.vertices.length===pastProps.edge.vertices.length?this.transitionPathDimensions.apply(this,startEndPtCoords.concat([pastProps.edge.vertices,edge.vertices])):this.transitionPathDimensions.apply(this,startEndPtCoords)}else this.setState({pathDimension:this.generatePathDimension()});else _underscore.default.isEqual(this.getPathOffsets(),this.getPathOffsets(pastProps))||this.setState({pathDimension:this.generatePathDimension()})}},{key:"shouldComponentUpdate",value:function(nextProps,nextState){if(Edge.didNodeCoordinatesChange(nextProps,this.props))return!0;if(this.state.pathDimension!==nextState.pathDimension)return!0;var i,propKeys=_underscore.default.without(_underscore.default.keys(nextProps),"scrollContainerWrapperElement","scrollContainerWrapperMounted","nodes","edges","href","renderDetailPane","isNodeCurrentContext","contentWidth","onNodeClick","edgeCount"),propKeysLen=propKeys.length;for(i=0;i<propKeysLen;i++)if(this.props[propKeys[i]]!==nextProps[propKeys[i]])return!0;return!1}},{key:"shouldDoTransitionOfEdge",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return!(props.noTransition||props.edgeCount>60)}},{key:"transitionPathDimensions",value:function(startPtA,startPtB,endPtA,endPtB,startVertices,endVertices){var _this2=this,interpolateSourceX=d3.interpolateNumber(startPtA.x,startPtB.x),interpolateSourceY=d3.interpolateNumber(startPtA.y,startPtB.y),interpolateTargetX=d3.interpolateNumber(endPtA.x,endPtB.x),interpolateTargetY=d3.interpolateNumber(endPtA.y,endPtB.y),interpolationFxnPerVertex=null;startVertices&&endVertices&&(interpolationFxnPerVertex=startVertices.map((function(startV,idx){return[d3.interpolateNumber(startV[0],endVertices[idx][0]),d3.interpolateNumber(startV[1],endVertices[idx][1])]})));var pathElem=this.pathRef.current;pathElem&&d3.select(this).interrupt().transition().ease(d3.easeQuadOut).duration(500).tween("changeDimension",(function(){return function(t){var nextCoords=[{x:interpolateSourceX(t),y:interpolateSourceY(t)},{x:interpolateTargetX(t),y:interpolateTargetY(t)}],nextVs=null;interpolationFxnPerVertex&&(nextVs=interpolationFxnPerVertex.map((function(_ref){var _ref2=_slicedToArray(_ref,2),interpX=_ref2[0],interpY=_ref2[1];return[interpX(t),interpY(t)]}))),pathElem.setAttribute("d",_this2.generatePathDimension.apply(_this2,nextCoords.concat([nextVs])))}})).on("end",(function(){_this2.setState({pathDimension:_this2.generatePathDimension()})}))}},{key:"getPathOffsets",value:function(){var startOffset=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,endOffset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-5,props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props,edge=props.edge,pathArrows=props.pathArrows,_this$getComputedProp=this.getComputedProperties(props),selected=(_this$getComputedProp.disabled,_this$getComputedProp.selected),related=_this$getComputedProp.related,distantlySelected=_this$getComputedProp.distantlySelected;return pathArrows&&(endOffset-=10),(selected||related)&&(endOffset-=5),distantlySelected&&(endOffset-=2),edge.source.isCurrentContext&&(startOffset+=5),edge.target.isCurrentContext&&(endOffset-=5),{startOffset:startOffset,endOffset:endOffset}}},{key:"generatePathDimension",value:function(){var startPtOverride=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,endPtOverride=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,edgeVerticesOverride=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_this$props2=this.props,edgeStyle=_this$props2.edgeStyle,startX=_this$props2.startX,startY=_this$props2.startY,endX=_this$props2.endX,endY=_this$props2.endY,columnWidth=_this$props2.columnWidth,curveRadius=_this$props2.curveRadius,columnSpacing=_this$props2.columnSpacing,rowSpacing=_this$props2.rowSpacing,nodeEdgeLedgeWidths=_this$props2.nodeEdgeLedgeWidths,_this$props2$edge$ver=_this$props2.edge.vertices,customEdgeVertices=void 0===_this$props2$edge$ver?null:_this$props2$edge$ver,_this$getPathOffsets=this.getPathOffsets(),startOffset=_this$getPathOffsets.startOffset,endOffset=_this$getPathOffsets.endOffset,startPt={x:(startPtOverride&&startPtOverride.x||startX)+columnWidth+startOffset,y:startPtOverride&&startPtOverride.y||startY},endPt={x:(endPtOverride&&endPtOverride.x||endX)+endOffset,y:endPtOverride&&endPtOverride.y||endY};return customEdgeVertices||edgeVerticesOverride?this.memoized.d.drawBezierEdgeVertices(startPt,endPt,edgeVerticesOverride||customEdgeVertices,nodeEdgeLedgeWidths):"straight"===edgeStyle?this.memoized.d.drawStraightEdge(startPt,endPt):"curve"===edgeStyle?this.memoized.d.drawStraightLineCurved(startPt,endPt,curveRadius):"bezier"===edgeStyle?this.memoized.d.drawBezierEdge(startPt,endPt,columnSpacing,rowSpacing,nodeEdgeLedgeWidths):void 0}},{key:"render",value:function(){var markerEnd,_this$props3=this.props,edge=_this$props3.edge,pathArrows=_this$props3.pathArrows,style=_this$props3.style,pathDimension=this.state.pathDimension,_this$getComputedProp2=this.getComputedProperties(),disabled=_this$getComputedProp2.disabled,selected=_this$getComputedProp2.selected,related=_this$getComputedProp2.related,distantlySelected=_this$getComputedProp2.distantlySelected;return markerEnd=pathArrows?selected||related||distantlySelected?"pathArrowBlack":disabled?"pathArrowLightGray":"pathArrowGray":null,_react.default.createElement("path",{d:pathDimension,ref:this.pathRef,className:"edge-path"+(disabled?" disabled":""),"data-edge-selected":selected||distantlySelected,"data-edge-related":related,"data-source":edge.source.name,"data-target":edge.target.name,style:style,markerEnd:markerEnd&&"url(#"+markerEnd+")"})}}],staticProps=[{key:"isSelected",value:function(edge,selectedNode){return _Node.default.isSelected(edge.source,selectedNode)||_Node.default.isSelected(edge.target,selectedNode)}},{key:"isRelated",value:function(edge,selectedNode){return _Node.default.isRelated(edge.source,selectedNode)}},{key:"isDistantlySelected",value:function(edge,selectedNode){if(!selectedNode)return!1;function checkInput(node){return _Node.default.isSelected(edge.target,node)}function checkOutput(node){return _Node.default.isSelected(edge.source,node)}var selectedInputs=selectedNode&&(selectedNode.inputNodes||selectedNode.outputOf&&[selectedNode.outputOf])||null;if(Array.isArray(selectedInputs)&&selectedInputs.length>0){var resultsHistory=_underscore.default.flatten(selectedInputs.map((function(sI){return(0,_parsingFunctions.traceNodePathAndRun)(sI,checkInput,"input",selectedNode)})),!1);if(_underscore.default.any(resultsHistory))return!0}var selectedOutputs=selectedNode&&(selectedNode.outputNodes||selectedNode.inputOf&&selectedNode.inputOf)||null;if(Array.isArray(selectedOutputs)&&selectedOutputs.length>0){var resultsFuture=_underscore.default.flatten(selectedOutputs.map((function(sO){return(0,_parsingFunctions.traceNodePathAndRun)(sO,checkOutput,"output",selectedNode)})),!1);if(_underscore.default.any(resultsFuture))return!0}return!1}},{key:"isDisabled",value:function(edge){var isNodeDisabled=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"boolean"==typeof isNodeDisabled?isNodeDisabled:"function"==typeof isNodeDisabled&&(isNodeDisabled(edge.source)||isNodeDisabled(edge.target))}},{key:"didNodeCoordinatesChange",value:function(nextProps,pastProps){return nextProps.startX!==pastProps.startX||nextProps.startY!==pastProps.startY||nextProps.endX!==pastProps.endX||nextProps.endY!==pastProps.endY}},{key:"pathArrowsMarkers",value:function(){return _react.default.createElement("defs",null,_react.default.createElement("marker",{id:"pathArrowBlack",viewBox:"0 0 15 15",refX:"0",refY:"5",orient:"auto",markerUnits:"strokeWidth",markerWidth:"6",markerHeight:"5"},_react.default.createElement("path",{d:"M 0 0 L 10 5 L 0 10 Z",className:"pathArrow-marker marker-color-black"})),_react.default.createElement("marker",{id:"pathArrowGray",viewBox:"0 0 15 15",refX:"0",refY:"5",orient:"auto",markerUnits:"strokeWidth",markerWidth:"6",markerHeight:"5"},_react.default.createElement("path",{d:"M 0 0 L 10 5 L 0 10 Z",className:"pathArrow-marker marker-color-gray"})),_react.default.createElement("marker",{id:"pathArrowLightGray",viewBox:"0 0 15 15",refX:"0",refY:"5",orient:"auto",markerUnits:"strokeWidth",markerWidth:"6",markerHeight:"5"},_react.default.createElement("path",{d:"M 0 0 L 10 5 L 0 10 Z",className:"pathArrow-marker marker-color-light-gray"})))}}],protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Edge}(_react.default.Component);exports.default=Edge,value={edgeStyle:"bezier",curveRadius:12},(key="defaultProps")in(obj=Edge)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}])}));
//# sourceMappingURL=react-workflow-viz.min.js.map