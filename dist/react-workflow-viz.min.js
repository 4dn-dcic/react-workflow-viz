!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory(require("React"),require("ReactDOM")):"function"==typeof define&&define.amd?define("react-workflow-viz",["React","ReactDOM"],factory):"object"==typeof exports?exports["react-workflow-viz"]=factory(require("React"),require("ReactDOM")):root["react-workflow-viz"]=factory(root.React,root.ReactDOM)}(window,function(__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__5__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/dist/",__webpack_require__(__webpack_require__.s=15)}([function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){var root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},previousUnderscore=root._,ArrayProto=Array.prototype,ObjProto=Object.prototype,SymbolProto="undefined"!=typeof Symbol?Symbol.prototype:null,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeCreate=Object.create,Ctor=function(){},_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};exports.nodeType?root._=_:(!module.nodeType&&module.exports&&(exports=module.exports=_),exports._=_),_.VERSION="1.9.1";var builtinIteratee,optimizeCb=function(func,context,argCount){if(void 0===context)return func;switch(null==argCount?3:argCount){case 1:return function(value){return func.call(context,value)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}},cb=function(value,context,argCount){return _.iteratee!==builtinIteratee?_.iteratee(value,context):null==value?_.identity:_.isFunction(value)?optimizeCb(value,context,argCount):_.isObject(value)&&!_.isArray(value)?_.matcher(value):_.property(value)};_.iteratee=builtinIteratee=function(value,context){return cb(value,context,1/0)};var restArguments=function(func,startIndex){return startIndex=null==startIndex?func.length-1:+startIndex,function(){for(var length=Math.max(arguments.length-startIndex,0),rest=Array(length),index=0;index<length;index++)rest[index]=arguments[index+startIndex];switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest);case 2:return func.call(this,arguments[0],arguments[1],rest)}var args=Array(startIndex+1);for(index=0;index<startIndex;index++)args[index]=arguments[index];return args[startIndex]=rest,func.apply(this,args)}},baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;return Ctor.prototype=null,result},shallowProperty=function(key){return function(obj){return null==obj?void 0:obj[key]}},has=function(obj,path){return null!=obj&&hasOwnProperty.call(obj,path)},deepGet=function(obj,path){for(var length=path.length,i=0;i<length;i++){if(null==obj)return;obj=obj[path[i]]}return length?obj:void 0},MAX_ARRAY_INDEX=Math.pow(2,53)-1,getLength=shallowProperty("length"),isArrayLike=function(collection){var length=getLength(collection);return"number"==typeof length&&length>=0&&length<=MAX_ARRAY_INDEX};_.each=_.forEach=function(obj,iteratee,context){var i,length;if(iteratee=optimizeCb(iteratee,context),isArrayLike(obj))for(i=0,length=obj.length;i<length;i++)iteratee(obj[i],i,obj);else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++)iteratee(obj[keys[i]],keys[i],obj)}return obj},_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length),index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results};var createReduce=function(dir){var reducer=function(obj,iteratee,memo,initial){var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;for(initial||(memo=obj[keys?keys[index]:index],index+=dir);index>=0&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo};return function(obj,iteratee,memo,context){var initial=arguments.length>=3;return reducer(obj,optimizeCb(iteratee,context,4),memo,initial)}};_.reduce=_.foldl=_.inject=createReduce(1),_.reduceRight=_.foldr=createReduce(-1),_.find=_.detect=function(obj,predicate,context){var key=(isArrayLike(obj)?_.findIndex:_.findKey)(obj,predicate,context);if(void 0!==key&&-1!==key)return obj[key]},_.filter=_.select=function(obj,predicate,context){var results=[];return predicate=cb(predicate,context),_.each(obj,function(value,index,list){predicate(value,index,list)&&results.push(value)}),results},_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)},_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return!1}return!0},_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return!0}return!1},_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){return isArrayLike(obj)||(obj=_.values(obj)),("number"!=typeof fromIndex||guard)&&(fromIndex=0),_.indexOf(obj,item,fromIndex)>=0},_.invoke=restArguments(function(obj,path,args){var contextPath,func;return _.isFunction(path)?func=path:_.isArray(path)&&(contextPath=path.slice(0,-1),path=path[path.length-1]),_.map(obj,function(context){var method=func;if(!method){if(contextPath&&contextPath.length&&(context=deepGet(context,contextPath)),null==context)return;method=context[path]}return null==method?method:method.apply(context,args)})}),_.pluck=function(obj,key){return _.map(obj,_.property(key))},_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))},_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))},_.max=function(obj,iteratee,context){var value,computed,result=-1/0,lastComputed=-1/0;if(null==iteratee||"number"==typeof iteratee&&"object"!=typeof obj[0]&&null!=obj)for(var i=0,length=(obj=isArrayLike(obj)?obj:_.values(obj)).length;i<length;i++)null!=(value=obj[i])&&value>result&&(result=value);else iteratee=cb(iteratee,context),_.each(obj,function(v,index,list){((computed=iteratee(v,index,list))>lastComputed||computed===-1/0&&result===-1/0)&&(result=v,lastComputed=computed)});return result},_.min=function(obj,iteratee,context){var value,computed,result=1/0,lastComputed=1/0;if(null==iteratee||"number"==typeof iteratee&&"object"!=typeof obj[0]&&null!=obj)for(var i=0,length=(obj=isArrayLike(obj)?obj:_.values(obj)).length;i<length;i++)null!=(value=obj[i])&&value<result&&(result=value);else iteratee=cb(iteratee,context),_.each(obj,function(v,index,list){((computed=iteratee(v,index,list))<lastComputed||computed===1/0&&result===1/0)&&(result=v,lastComputed=computed)});return result},_.shuffle=function(obj){return _.sample(obj,1/0)},_.sample=function(obj,n,guard){if(null==n||guard)return isArrayLike(obj)||(obj=_.values(obj)),obj[_.random(obj.length-1)];var sample=isArrayLike(obj)?_.clone(obj):_.values(obj),length=getLength(sample);n=Math.max(Math.min(n,length),0);for(var last=length-1,index=0;index<n;index++){var rand=_.random(index,last),temp=sample[index];sample[index]=sample[rand],sample[rand]=temp}return sample.slice(0,n)},_.sortBy=function(obj,iteratee,context){var index=0;return iteratee=cb(iteratee,context),_.pluck(_.map(obj,function(value,key,list){return{value:value,index:index++,criteria:iteratee(value,key,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(a<b||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior,partition){return function(obj,iteratee,context){var result=partition?[[],[]]:{};return iteratee=cb(iteratee,context),_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)}),result}};_.groupBy=group(function(result,value,key){has(result,key)?result[key].push(value):result[key]=[value]}),_.indexBy=group(function(result,value,key){result[key]=value}),_.countBy=group(function(result,value,key){has(result,key)?result[key]++:result[key]=1});var reStrSymbol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):_.isString(obj)?obj.match(reStrSymbol):isArrayLike(obj)?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:isArrayLike(obj)?obj.length:_.keys(obj).length},_.partition=group(function(result,value,pass){result[pass?0:1].push(value)},!0),_.first=_.head=_.take=function(array,n,guard){return null==array||array.length<1?null==n?void 0:[]:null==n||guard?array[0]:_.initial(array,array.length-n)},_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(null==n||guard?1:n)))},_.last=function(array,n,guard){return null==array||array.length<1?null==n?void 0:[]:null==n||guard?array[array.length-1]:_.rest(array,Math.max(0,array.length-n))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,Boolean)};var flatten=function(input,shallow,strict,output){for(var idx=(output=output||[]).length,i=0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value)))if(shallow)for(var j=0,len=value.length;j<len;)output[idx++]=value[j++];else flatten(value,shallow,strict,output),idx=output.length;else strict||(output[idx++]=value)}return output};_.flatten=function(array,shallow){return flatten(array,shallow,!1)},_.without=restArguments(function(array,otherArrays){return _.difference(array,otherArrays)}),_.uniq=_.unique=function(array,isSorted,iteratee,context){_.isBoolean(isSorted)||(context=iteratee,iteratee=isSorted,isSorted=!1),null!=iteratee&&(iteratee=cb(iteratee,context));for(var result=[],seen=[],i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;isSorted&&!iteratee?(i&&seen===computed||result.push(value),seen=computed):iteratee?_.contains(seen,computed)||(seen.push(computed),result.push(value)):_.contains(result,value)||result.push(value)}return result},_.union=restArguments(function(arrays){return _.uniq(flatten(arrays,!0,!0))}),_.intersection=function(array){for(var result=[],argsLength=arguments.length,i=0,length=getLength(array);i<length;i++){var item=array[i];if(!_.contains(result,item)){var j;for(j=1;j<argsLength&&_.contains(arguments[j],item);j++);j===argsLength&&result.push(item)}}return result},_.difference=restArguments(function(array,rest){return rest=flatten(rest,!0,!0),_.filter(array,function(value){return!_.contains(rest,value)})}),_.unzip=function(array){for(var length=array&&_.max(array,getLength).length||0,result=Array(length),index=0;index<length;index++)result[index]=_.pluck(array,index);return result},_.zip=restArguments(_.unzip),_.object=function(list,values){for(var result={},i=0,length=getLength(list);i<length;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result};var createPredicateIndexFinder=function(dir){return function(array,predicate,context){predicate=cb(predicate,context);for(var length=getLength(array),index=dir>0?0:length-1;index>=0&&index<length;index+=dir)if(predicate(array[index],index,array))return index;return-1}};_.findIndex=createPredicateIndexFinder(1),_.findLastIndex=createPredicateIndexFinder(-1),_.sortedIndex=function(array,obj,iteratee,context){for(var value=(iteratee=cb(iteratee,context,1))(obj),low=0,high=getLength(array);low<high;){var mid=Math.floor((low+high)/2);iteratee(array[mid])<value?low=mid+1:high=mid}return low};var createIndexFinder=function(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if("number"==typeof idx)dir>0?i=idx>=0?idx:Math.max(idx+length,i):length=idx>=0?Math.min(idx+1,length):idx+length+1;else if(sortedIndex&&idx&&length)return array[idx=sortedIndex(array,item)]===item?idx:-1;if(item!=item)return(idx=predicateFind(slice.call(array,i,length),_.isNaN))>=0?idx+i:-1;for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir)if(array[idx]===item)return idx;return-1}};_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex),_.lastIndexOf=createIndexFinder(-1,_.findLastIndex),_.range=function(start,stop,step){null==stop&&(stop=start||0,start=0),step||(step=stop<start?-1:1);for(var length=Math.max(Math.ceil((stop-start)/step),0),range=Array(length),idx=0;idx<length;idx++,start+=step)range[idx]=start;return range},_.chunk=function(array,count){if(null==count||count<1)return[];for(var result=[],i=0,length=array.length;i<length;)result.push(slice.call(array,i,i+=count));return result};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype),result=sourceFunc.apply(self,args);return _.isObject(result)?result:self};_.bind=restArguments(function(func,context,args){if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var bound=restArguments(function(callArgs){return executeBound(func,bound,context,this,args.concat(callArgs))});return bound}),_.partial=restArguments(function(func,boundArgs){var placeholder=_.partial.placeholder,bound=function(){for(var position=0,length=boundArgs.length,args=Array(length),i=0;i<length;i++)args[i]=boundArgs[i]===placeholder?arguments[position++]:boundArgs[i];for(;position<arguments.length;)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound}),_.partial.placeholder=_,_.bindAll=restArguments(function(obj,keys){var index=(keys=flatten(keys,!1,!1)).length;if(index<1)throw new Error("bindAll must be passed function names");for(;index--;){var key=keys[index];obj[key]=_.bind(obj[key],obj)}}),_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache,address=""+(hasher?hasher.apply(this,arguments):key);return has(cache,address)||(cache[address]=func.apply(this,arguments)),cache[address]};return memoize.cache={},memoize},_.delay=restArguments(function(func,wait,args){return setTimeout(function(){return func.apply(null,args)},wait)}),_.defer=_.partial(_.delay,_,1),_.throttle=function(func,wait,options){var timeout,context,args,result,previous=0;options||(options={});var later=function(){previous=!1===options.leading?0:_.now(),timeout=null,result=func.apply(context,args),timeout||(context=args=null)},throttled=function(){var now=_.now();previous||!1!==options.leading||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,remaining<=0||remaining>wait?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,result=func.apply(context,args),timeout||(context=args=null)):timeout||!1===options.trailing||(timeout=setTimeout(later,remaining)),result};return throttled.cancel=function(){clearTimeout(timeout),previous=0,timeout=context=args=null},throttled},_.debounce=function(func,wait,immediate){var timeout,result,later=function(context,args){timeout=null,args&&(result=func.apply(context,args))},debounced=restArguments(function(args){if(timeout&&clearTimeout(timeout),immediate){var callNow=!timeout;timeout=setTimeout(later,wait),callNow&&(result=func.apply(this,args))}else timeout=_.delay(later,wait,this,args);return result});return debounced.cancel=function(){clearTimeout(timeout),timeout=null},debounced},_.wrap=function(func,wrapper){return _.partial(wrapper,func)},_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}},_.compose=function(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}},_.after=function(times,func){return function(){if(--times<1)return func.apply(this,arguments)}},_.before=function(times,func){var memo;return function(){return--times>0&&(memo=func.apply(this,arguments)),times<=1&&(func=null),memo}},_.once=_.partial(_.before,2),_.restArguments=restArguments;var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],collectNonEnumProps=function(obj,keys){var nonEnumIdx=nonEnumerableProps.length,constructor=obj.constructor,proto=_.isFunction(constructor)&&constructor.prototype||ObjProto,prop="constructor";for(has(obj,prop)&&!_.contains(keys,prop)&&keys.push(prop);nonEnumIdx--;)(prop=nonEnumerableProps[nonEnumIdx])in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)&&keys.push(prop)};_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)has(obj,key)&&keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=Array(length),i=0;i<length;i++)values[i]=obj[keys[i]];return values},_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);for(var keys=_.keys(obj),length=keys.length,results={},index=0;index<length;index++){var currentKey=keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=Array(length),i=0;i<length;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;i<length;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()};var createAssigner=function(keysFunc,defaults){return function(obj){var length=arguments.length;if(defaults&&(obj=Object(obj)),length<2||null==obj)return obj;for(var index=1;index<length;index++)for(var source=arguments[index],keys=keysFunc(source),l=keys.length,i=0;i<l;i++){var key=keys[i];defaults&&void 0!==obj[key]||(obj[key]=source[key])}return obj}};_.extend=createAssigner(_.allKeys),_.extendOwn=_.assign=createAssigner(_.keys),_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);for(var key,keys=_.keys(obj),i=0,length=keys.length;i<length;i++)if(predicate(obj[key=keys[i]],key,obj))return key};var eq,deepEq,keyInObj=function(value,key,obj){return key in obj};_.pick=restArguments(function(obj,keys){var result={},iteratee=keys[0];if(null==obj)return result;_.isFunction(iteratee)?(keys.length>1&&(iteratee=optimizeCb(iteratee,keys[1])),keys=_.allKeys(obj)):(iteratee=keyInObj,keys=flatten(keys,!1,!1),obj=Object(obj));for(var i=0,length=keys.length;i<length;i++){var key=keys[i],value=obj[key];iteratee(value,key,obj)&&(result[key]=value)}return result}),_.omit=restArguments(function(obj,keys){var context,iteratee=keys[0];return _.isFunction(iteratee)?(iteratee=_.negate(iteratee),keys.length>1&&(context=keys[1])):(keys=_.map(flatten(keys,!1,!1),String),iteratee=function(value,key){return!_.contains(keys,key)}),_.pick(obj,iteratee,context)}),_.defaults=createAssigner(_.allKeys,!0),_.create=function(prototype,props){var result=baseCreate(prototype);return props&&_.extendOwn(result,props),result},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj},_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(null==object)return!length;for(var obj=Object(object),i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return!1}return!0},eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return!1;if(a!=a)return b!=b;var type=typeof a;return("function"===type||"object"===type||"object"==typeof b)&&deepEq(a,b,aStack,bStack)},deepEq=function(a,b,aStack,bStack){a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!==toString.call(b))return!1;switch(className){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object Symbol]":return SymbolProto.valueOf.call(a)===SymbolProto.valueOf.call(b)}var areArrays="[object Array]"===className;if(!areArrays){if("object"!=typeof a||"object"!=typeof b)return!1;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1}bStack=bStack||[];for(var length=(aStack=aStack||[]).length;length--;)if(aStack[length]===a)return bStack[length]===b;if(aStack.push(a),bStack.push(b),areArrays){if((length=a.length)!==b.length)return!1;for(;length--;)if(!eq(a[length],b[length],aStack,bStack))return!1}else{var key,keys=_.keys(a);if(length=keys.length,_.keys(b).length!==length)return!1;for(;length--;)if(key=keys[length],!has(b,key)||!eq(a[key],b[key],aStack,bStack))return!1}return aStack.pop(),bStack.pop(),!0},_.isEqual=function(a,b){return eq(a,b)},_.isEmpty=function(obj){return null==obj||(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj))?0===obj.length:0===_.keys(obj).length)},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"===toString.call(obj)},_.isObject=function(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj},_.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return has(obj,"callee")});var nodelist=root.document&&root.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof nodelist&&(_.isFunction=function(obj){return"function"==typeof obj||!1}),_.isFinite=function(obj){return!_.isSymbol(obj)&&isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&isNaN(obj)},_.isBoolean=function(obj){return!0===obj||!1===obj||"[object Boolean]"===toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,path){if(!_.isArray(path))return has(obj,path);for(var length=path.length,i=0;i<length;i++){var key=path[i];if(null==obj||!hasOwnProperty.call(obj,key))return!1;obj=obj[key]}return!!length},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.constant=function(value){return function(){return value}},_.noop=function(){},_.property=function(path){return _.isArray(path)?function(obj){return deepGet(obj,path)}:shallowProperty(path)},_.propertyOf=function(obj){return null==obj?function(){}:function(path){return _.isArray(path)?deepGet(obj,path):obj[path]}},_.matcher=_.matches=function(attrs){return attrs=_.extendOwn({},attrs),function(obj){return _.isMatch(obj,attrs)}},_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))},_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=_.invert(escapeMap),createEscaper=function(map){var escaper=function(match){return map[match]},source="(?:"+_.keys(map).join("|")+")",testRegexp=RegExp(source),replaceRegexp=RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap),_.unescape=createEscaper(unescapeMap),_.result=function(obj,path,fallback){_.isArray(path)||(path=[path]);var length=path.length;if(!length)return _.isFunction(fallback)?fallback.call(obj):fallback;for(var i=0;i<length;i++){var prop=null==obj?void 0:obj[path[i]];void 0===prop&&(prop=fallback,i=length),obj=_.isFunction(prop)?prop.call(obj):prop}return obj};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escapeRegExp=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){!settings&&oldSettings&&(settings=oldSettings),settings=_.defaults({},settings,_.templateSettings);var render,matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escapeRegExp,escapeChar),index=offset+match.length,escape?source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'":interpolate?source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'":evaluate&&(source+="';\n"+evaluate+"\n__p+='"),match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}var template=function(data){return render.call(this,data,_)},argument=settings.variable||"obj";return template.source="function("+argument+"){\n"+source+"}",template},_.chain=function(obj){var instance=_(obj);return instance._chain=!0,instance};var chainResult=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){return _.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),chainResult(this,func.apply(_,args))}}),_},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!==name&&"splice"!==name||0!==obj.length||delete obj[0],chainResult(this,obj)}}),_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return chainResult(this,method.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return String(this._wrapped)},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return _}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__(11),__webpack_require__(12)(module))},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(module,exports,__webpack_require__){module.exports=__webpack_require__(9)()},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(13);exports.__esModule=!0,exports.default=function(element,className){element.classList?element.classList.add(className):(0,_hasClass.default)(element,className)||("string"==typeof element.className?element.className=element.className+" "+className:element.setAttribute("class",(element.className&&element.className.baseVal||"")+" "+className))};var _hasClass=_interopRequireDefault(__webpack_require__(14));module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function replaceClassName(origClass,classToRemove){return origClass.replace(new RegExp("(^|\\s)"+classToRemove+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}module.exports=function(element,className){element.classList?element.classList.remove(className):"string"==typeof element.className?element.className=replaceClassName(element.className,className):element.setAttribute("class",replaceClassName(element.className&&element.className.baseVal||"",className))}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__5__},,,,function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(10);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports){module.exports=function(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(element,className){return element.classList?!!className&&element.classList.contains(className):-1!==(" "+(element.className.baseVal||element.className)+" ").indexOf(" "+className+" ")},module.exports=exports.default},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var external_React_=__webpack_require__(1),external_React_default=__webpack_require__.n(external_React_),prop_types=__webpack_require__(2),prop_types_default=__webpack_require__.n(prop_types),underscore=__webpack_require__(0),underscore_default=__webpack_require__.n(underscore),ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN},bisector=function(compare){var f;return 1===compare.length&&(f=compare,compare=function(d,x){return ascending(f(d),x)}),{left:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)<0?lo=mid+1:hi=mid}return lo},right:function(a,x,lo,hi){for(null==lo&&(lo=0),null==hi&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare(a[mid],x)>0?hi=mid:lo=mid+1}return lo}}};var ascendingBisect=bisector(ascending);ascendingBisect.right,ascendingBisect.left;var array_array=Array.prototype,src_range=(array_array.slice,array_array.map,function(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var src_merge=function(arrays){for(var m,merged,array,n=arrays.length,i=-1,j=0;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(m=(array=arrays[n]).length;--m>=0;)merged[--j]=array[m];return merged};Array.prototype.slice;var noop={value:function(){}};function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _)throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}})}function get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=parseTypenames(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var src_dispatch=dispatch,xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},namespace=function(name){var prefix=name+="",i=prefix.indexOf(":");return i>=0&&"xmlns"!==(prefix=name.slice(0,i))&&(name=name.slice(i+1)),namespaces.hasOwnProperty(prefix)?{space:namespaces[prefix],local:name}:name};function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===xhtml&&document.documentElement.namespaceURI===xhtml?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}var creator=function(name){var fullname=namespace(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)};function none(){}var src_selector=function(selector){return null==selector?none:function(){return this.querySelector(selector)}};function selectorAll_empty(){return[]}var selectorAll=function(selector){return null==selector?selectorAll_empty:function(){return this.querySelectorAll(selector)}},matcher=function(selector){return function(){return this.matches(selector)}},sparse=function(update){return new Array(update.length)};function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument,this.namespaceURI=parent.namespaceURI,this._next=null,this._parent=parent,this.__data__=datum}EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}};var keyPrefix="$";function bindIndex(parent,group,enter,update,exit,data){for(var node,i=0,groupLength=group.length,dataLength=data.length;i<dataLength;++i)(node=group[i])?(node.__data__=data[i],update[i]=node):enter[i]=new EnterNode(parent,data[i]);for(;i<groupLength;++i)(node=group[i])&&(exit[i]=node)}function bindKey(parent,group,enter,update,exit,data,key){var i,node,keyValue,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength);for(i=0;i<groupLength;++i)(node=group[i])&&(keyValues[i]=keyValue=keyPrefix+key.call(node,node.__data__,i,group),keyValue in nodeByKeyValue?exit[i]=node:nodeByKeyValue[keyValue]=node);for(i=0;i<dataLength;++i)(node=nodeByKeyValue[keyValue=keyPrefix+key.call(parent,data[i],i,data)])?(update[i]=node,node.__data__=data[i],nodeByKeyValue[keyValue]=null):enter[i]=new EnterNode(parent,data[i]);for(i=0;i<groupLength;++i)(node=group[i])&&nodeByKeyValue[keyValues[i]]===node&&(exit[i]=node)}function sort_ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttribute(name):this.setAttribute(name,v)}}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);null==v?this.removeAttributeNS(fullname.space,fullname.local):this.setAttributeNS(fullname.space,fullname.local,v)}}var src_window=function(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView};function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);null==v?this.style.removeProperty(name):this.style.setProperty(name,v,priority)}}function styleValue(node,name){return node.style.getPropertyValue(name)||src_window(node).getComputedStyle(node,null).getPropertyValue(name)}function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);null==v?delete this[name]:this[name]=v}}function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node,this._names=classArray(node.getAttribute("class")||"")}function classedAdd(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.add(names[i])}function classedRemove(node,names){for(var list=classList(node),i=-1,n=names.length;++i<n;)list.remove(names[i])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}ClassList.prototype={add:function(name){this._names.indexOf(name)<0&&(this._names.push(name),this._node.setAttribute("class",this._names.join(" ")))},remove:function(name){var i=this._names.indexOf(name);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(name){return this._names.indexOf(name)>=0}};function textRemove(){this.textContent=""}function textConstant(value){return function(){this.textContent=value}}function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=null==v?"":v}}function htmlRemove(){this.innerHTML=""}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=null==v?"":v}}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull(){return null}function remove_remove(){var parent=this.parentNode;parent&&parent.removeChild(this)}function selection_cloneShallow(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function selection_cloneDeep(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var filterEvents={},on_event=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(filterEvents={mouseenter:"mouseover",mouseleave:"mouseout"}));function filterContextListener(listener,index,group){return listener=contextListener(listener,index,group),function(event){var related=event.relatedTarget;related&&(related===this||8&related.compareDocumentPosition(this))||listener.call(this,event)}}function contextListener(listener,index,group){return function(event1){var event0=on_event;on_event=event1;try{listener.call(this,this.__data__,index,group)}finally{on_event=event0}}}function on_parseTypenames(typenames){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");return i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),{type:t,name:name}})}function onRemove(typename){return function(){var on=this.__on;if(on){for(var o,j=0,i=-1,m=on.length;j<m;++j)o=on[j],typename.type&&o.type!==typename.type||o.name!==typename.name?on[++i]=o:this.removeEventListener(o.type,o.listener,o.capture);++i?on.length=i:delete this.__on}}}function onAdd(typename,value,capture){var wrap=filterEvents.hasOwnProperty(typename.type)?filterContextListener:contextListener;return function(d,i,group){var o,on=this.__on,listener=wrap(value,i,group);if(on)for(var j=0,m=on.length;j<m;++j)if((o=on[j]).type===typename.type&&o.name===typename.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=listener,o.capture=capture),void(o.value=value);this.addEventListener(typename.type,listener,capture),o={type:typename.type,name:typename.name,value:value,listener:listener,capture:capture},on?on.push(o):this.__on=[o]}}function dispatchEvent(node,type,params){var window=src_window(node),event=window.CustomEvent;"function"==typeof event?event=new event(type,params):(event=window.document.createEvent("Event"),params?(event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail):event.initEvent(type,!1,!1)),node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}var selection_root=[null];function Selection(groups,parents){this._groups=groups,this._parents=parents}function selection_selection(){return new Selection([[document.documentElement]],selection_root)}Selection.prototype=selection_selection.prototype={constructor:Selection,select:function(select){"function"!=typeof select&&(select=src_selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode);return new Selection(subgroups,this._parents)},selectAll:function(select){"function"!=typeof select&&(select=selectorAll(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&(subgroups.push(select.call(node,node.__data__,i,group)),parents.push(node));return new Selection(subgroups,parents)},filter:function(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new Selection(subgroups,this._parents)},data:function(value,key){if(!value)return data=new Array(this.size()),j=-1,this.each(function(d){data[++j]=d}),data;var x,bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;"function"!=typeof value&&(x=value,value=function(){return x});for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength);bind(parent,group,enterGroup,updateGroup,exit[j]=new Array(groupLength),data,key);for(var previous,next,i0=0,i1=0;i0<dataLength;++i0)if(previous=enterGroup[i0]){for(i0>=i1&&(i1=i0+1);!(next=updateGroup[i1])&&++i1<dataLength;);previous._next=next||null}}return(update=new Selection(update,parents))._enter=enter,update._exit=exit,update},enter:function(){return new Selection(this._enter||this._groups.map(sparse),this._parents)},exit:function(){return new Selection(this._exit||this._groups.map(sparse),this._parents)},join:function(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();return enter="function"==typeof onenter?onenter(enter):enter.append(onenter+""),null!=onupdate&&(update=onupdate(update)),null==onexit?exit.remove():onexit(exit),enter&&update?enter.merge(update).order():update},merge:function(selection){for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new Selection(merges,this._parents)},order:function(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;)for(var node,group=groups[j],i=group.length-1,next=group[i];--i>=0;)(node=group[i])&&(next&&4^node.compareDocumentPosition(next)&&next.parentNode.insertBefore(node,next),next=node);return this},sort:function(compare){function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}compare||(compare=sort_ascending);for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var node,group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(sortgroup[i]=node);sortgroup.sort(compareNode)}return new Selection(sortgroups,this._parents).order()},call:function(){var callback=arguments[0];return arguments[0]=this,callback.apply(null,arguments),this},nodes:function(){var nodes=new Array(this.size()),i=-1;return this.each(function(){nodes[++i]=this}),nodes},node:function(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}return null},size:function(){var size=0;return this.each(function(){++size}),size},empty:function(){return!this.node()},each:function(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j)for(var node,group=groups[j],i=0,n=group.length;i<n;++i)(node=group[i])&&callback.call(node,node.__data__,i,group);return this},attr:function(name,value){var fullname=namespace(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((null==value?fullname.local?attrRemoveNS:attrRemove:"function"==typeof value?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value))},style:function(name,value,priority){return arguments.length>1?this.each((null==value?styleRemove:"function"==typeof value?styleFunction:styleConstant)(name,value,null==priority?"":priority)):styleValue(this.node(),name)},property:function(name,value){return arguments.length>1?this.each((null==value?propertyRemove:"function"==typeof value?propertyFunction:propertyConstant)(name,value)):this.node()[name]},classed:function(name,value){var names=classArray(name+"");if(arguments.length<2){for(var list=classList(this.node()),i=-1,n=names.length;++i<n;)if(!list.contains(names[i]))return!1;return!0}return this.each(("function"==typeof value?classedFunction:value?classedTrue:classedFalse)(names,value))},text:function(value){return arguments.length?this.each(null==value?textRemove:("function"==typeof value?textFunction:textConstant)(value)):this.node().textContent},html:function(value){return arguments.length?this.each(null==value?htmlRemove:("function"==typeof value?htmlFunction:htmlConstant)(value)):this.node().innerHTML},raise:function(){return this.each(raise)},lower:function(){return this.each(lower)},append:function(name){var create="function"==typeof name?name:creator(name);return this.select(function(){return this.appendChild(create.apply(this,arguments))})},insert:function(name,before){var create="function"==typeof name?name:creator(name),select=null==before?constantNull:"function"==typeof before?before:src_selector(before);return this.select(function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)})},remove:function(){return this.each(remove_remove)},clone:function(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)},datum:function(value){return arguments.length?this.property("__data__",value):this.node().__data__},on:function(typename,value,capture){var i,t,typenames=on_parseTypenames(typename+""),n=typenames.length;if(!(arguments.length<2)){for(on=value?onAdd:onRemove,null==capture&&(capture=!1),i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this}var on=this.node().__on;if(on)for(var o,j=0,m=on.length;j<m;++j)for(i=0,o=on[j];i<n;++i)if((t=typenames[i]).type===o.type&&t.name===o.name)return o.value},dispatch:function(type,params){return this.each(("function"==typeof params?dispatchFunction:dispatchConstant)(type,params))}};var src_selection=selection_selection,src_select=function(selector){return"string"==typeof selector?new Selection([[document.querySelector(selector)]],[document.documentElement]):new Selection([[selector]],selection_root)},nextId=0;function Local(){this._="@"+(++nextId).toString(36)}Local.prototype=function(){return new Local}.prototype={constructor:Local,get:function(node){for(var id=this._;!(id in node);)if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}};function DragEvent(target,type,subject,id,active,x,y,dx,dy,dispatch){this.target=target,this.type=type,this.subject=subject,this.identifier=id,this.active=active,this.x=x,this.y=y,this.dx=dx,this.dy=dy,this._=dispatch}DragEvent.prototype.on=function(){var value=this._.on.apply(this._,arguments);return value===this._?this:value};var define=function(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor};function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex3=/^#([0-9a-f]{3})$/,reHex6=/^#([0-9a-f]{6})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color_color(format){var m;return format=(format+"").trim().toLowerCase(),(m=reHex3.exec(format))?new Rgb((m=parseInt(m[1],16))>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):(m=reHex6.exec(format))?rgbn(parseInt(m[1],16)):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color_color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function color_rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function hex(value){return((value=Math.max(0,Math.min(255,Math.round(value)||0)))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color_color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}define(Color,color_color,{copy:function(channels){return Object.assign(new this.constructor,this,channels)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,color_rgb,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,hsl,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var deg2rad=Math.PI/180,rad2deg=180/Math.PI,Xn=.96422,Yn=1,Zn=.82521,lab_t0=4/29,lab_t1=6/29,lab_t2=3*lab_t1*lab_t1,t3=lab_t1*lab_t1*lab_t1;function labConvert(o){if(o instanceof Lab)return new Lab(o.l,o.a,o.b,o.opacity);if(o instanceof Hcl)return hcl2lab(o);o instanceof Rgb||(o=rgbConvert(o));var x,z,r=rgb2lrgb(o.r),g=rgb2lrgb(o.g),b=rgb2lrgb(o.b),y=xyz2lab((.2225045*r+.7168786*g+.0606169*b)/Yn);return r===g&&g===b?x=z=y:(x=xyz2lab((.4360747*r+.3850649*g+.1430804*b)/Xn),z=xyz2lab((.0139322*r+.0971045*g+.7141733*b)/Zn)),new Lab(116*y-16,500*(x-y),200*(y-z),o.opacity)}function lab(l,a,b,opacity){return 1===arguments.length?labConvert(l):new Lab(l,a,b,null==opacity?1:opacity)}function Lab(l,a,b,opacity){this.l=+l,this.a=+a,this.b=+b,this.opacity=+opacity}function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/lab_t2+lab_t0}function lab2xyz(t){return t>lab_t1?t*t*t:lab_t2*(t-lab_t0)}function lrgb2rgb(x){return 255*(x<=.0031308?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function rgb2lrgb(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function hclConvert(o){if(o instanceof Hcl)return new Hcl(o.h,o.c,o.l,o.opacity);if(o instanceof Lab||(o=labConvert(o)),0===o.a&&0===o.b)return new Hcl(NaN,0<o.l&&o.l<100?0:NaN,o.l,o.opacity);var h=Math.atan2(o.b,o.a)*rad2deg;return new Hcl(h<0?h+360:h,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity)}function hcl(h,c,l,opacity){return 1===arguments.length?hclConvert(h):new Hcl(h,c,l,null==opacity?1:opacity)}function Hcl(h,c,l,opacity){this.h=+h,this.c=+c,this.l=+l,this.opacity=+opacity}function hcl2lab(o){if(isNaN(o.h))return new Lab(o.l,0,0,o.opacity);var h=o.h*deg2rad;return new Lab(o.l,Math.cos(h)*o.c,Math.sin(h)*o.c,o.opacity)}define(Lab,lab,extend(Color,{brighter:function(k){return new Lab(this.l+18*(null==k?1:k),this.a,this.b,this.opacity)},darker:function(k){return new Lab(this.l-18*(null==k?1:k),this.a,this.b,this.opacity)},rgb:function(){var y=(this.l+16)/116,x=isNaN(this.a)?y:y+this.a/500,z=isNaN(this.b)?y:y-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(x=Xn*lab2xyz(x))-1.6168667*(y=Yn*lab2xyz(y))-.4906146*(z=Zn*lab2xyz(z))),lrgb2rgb(-.9787684*x+1.9161415*y+.033454*z),lrgb2rgb(.0719453*x-.2289914*y+1.4052427*z),this.opacity)}})),define(Hcl,hcl,extend(Color,{brighter:function(k){return new Hcl(this.h,this.c,this.l+18*(null==k?1:k),this.opacity)},darker:function(k){return new Hcl(this.h,this.c,this.l-18*(null==k?1:k),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}));var C=-.29227,cubehelix_D=-.90649,cubehelix_E=1.97294,ED=cubehelix_E*cubehelix_D,EB=1.78277*cubehelix_E,BC_DA=1.78277*C- -.14861*cubehelix_D;function cubehelix_cubehelix(h,s,l,opacity){return 1===arguments.length?function(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof Rgb||(o=rgbConvert(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(cubehelix_E*(g-l)-C*bl)/cubehelix_D,s=Math.sqrt(k*k+bl*bl)/(cubehelix_E*l*(1-l)),h=s?Math.atan2(k,bl)*rad2deg-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}define(Cubehelix,cubehelix_cubehelix,extend(Color,{brighter:function(k){return k=null==k?1/.7:Math.pow(1/.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker:function(k){return k=null==k?.7:Math.pow(.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb:function(){var h=isNaN(this.h)?0:(this.h+120)*deg2rad,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(-.14861*cosh+1.78277*sinh)),255*(l+a*(C*cosh+cubehelix_D*sinh)),255*(l+a*(cubehelix_E*cosh)),this.opacity)}}));var d3_interpolate_src_constant=function(x){return function(){return x}};function linear(a,d){return function(t){return a+t*d}}function color_hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):d3_interpolate_src_constant(isNaN(a)?b:a)}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):d3_interpolate_src_constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):d3_interpolate_src_constant(isNaN(a)?b:a)}var src_rgb=function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=color_rgb(start)).r,(end=color_rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=color_rgb(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}rgbSpline(function(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}),rgbSpline(function(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}});var src_number=function(a,b){return b-=a=+a,function(t){return a+b*t}},reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");var cssNode,cssRoot,cssView,svgNode,src_string=function(a,b){var am,bm,bs,bi=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],q=[];for(a+="",b+="";(am=reA.exec(a))&&(bm=reB.exec(b));)(bs=bm.index)>bi&&(bs=b.slice(bi,bs),s[i]?s[i]+=bs:s[++i]=bs),(am=am[0])===(bm=bm[0])?s[i]?s[i]+=bm:s[++i]=bm:(s[++i]=null,q.push({i:i,x:src_number(am,bm)})),bi=reB.lastIndex;return bi<b.length&&(bs=b.slice(bi),s[i]?s[i]+=bs:s[++i]=bs),s.length<2?q[0]?function(b){return function(t){return b(t)+""}}(q[0].x):function(b){return function(){return b}}(b):(b=q.length,function(t){for(var o,i=0;i<b;++i)s[(o=q[i]).i]=o.x(t);return s.join("")})},degrees=180/Math.PI,decompose_identity={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},decompose=function(a,b,c,d,e,f){var scaleX,scaleY,skewX;return(scaleX=Math.sqrt(a*a+b*b))&&(a/=scaleX,b/=scaleX),(skewX=a*c+b*d)&&(c-=a*skewX,d-=b*skewX),(scaleY=Math.sqrt(c*c+d*d))&&(c/=scaleY,d/=scaleY,skewX/=scaleY),a*d<b*c&&(a=-a,b=-b,skewX=-skewX,scaleX=-scaleX),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*degrees,skewX:Math.atan(skewX)*degrees,scaleX:scaleX,scaleY:scaleY}};function interpolateTransform(parse,pxComma,pxParen,degParen){function pop(s){return s.length?s.pop()+" ":""}return function(a,b){var s=[],q=[];return a=parse(a),b=parse(b),function(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push("translate(",null,pxComma,null,pxParen);q.push({i:i-4,x:src_number(xa,xb)},{i:i-2,x:src_number(ya,yb)})}else(xb||yb)&&s.push("translate("+xb+pxComma+yb+pxParen)}(a.translateX,a.translateY,b.translateX,b.translateY,s,q),function(a,b,s,q){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),q.push({i:s.push(pop(s)+"rotate(",null,degParen)-2,x:src_number(a,b)})):b&&s.push(pop(s)+"rotate("+b+degParen)}(a.rotate,b.rotate,s,q),function(a,b,s,q){a!==b?q.push({i:s.push(pop(s)+"skewX(",null,degParen)-2,x:src_number(a,b)}):b&&s.push(pop(s)+"skewX("+b+degParen)}(a.skewX,b.skewX,s,q),function(xa,ya,xb,yb,s,q){if(xa!==xb||ya!==yb){var i=s.push(pop(s)+"scale(",null,",",null,")");q.push({i:i-4,x:src_number(xa,xb)},{i:i-2,x:src_number(ya,yb)})}else 1===xb&&1===yb||s.push(pop(s)+"scale("+xb+","+yb+")")}(a.scaleX,a.scaleY,b.scaleX,b.scaleY,s,q),a=b=null,function(t){for(var o,i=-1,n=q.length;++i<n;)s[(o=q[i]).i]=o.x(t);return s.join("")}}}var interpolateTransformCss=interpolateTransform(function(value){return"none"===value?decompose_identity:(cssNode||(cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView),cssNode.style.transform=value,value=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),cssRoot.removeChild(cssNode),value=value.slice(7,-1).split(","),decompose(+value[0],+value[1],+value[2],+value[3],+value[4],+value[5]))},"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(function(value){return null==value?decompose_identity:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",value),(value=svgNode.transform.baseVal.consolidate())?(value=value.matrix,decompose(value.a,value.b,value.c,value.d,value.e,value.f)):decompose_identity)},", ",")",")");Math.SQRT2;function hsl_hsl(hue){return function(start,end){var h=hue((start=hsl(start)).h,(end=hsl(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(t),start.opacity=opacity(t),start+""}}}hsl_hsl(color_hue),hsl_hsl(nogamma);function hcl_hcl(hue){return function(start,end){var h=hue((start=hcl(start)).h,(end=hcl(end)).h),c=nogamma(start.c,end.c),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.c=c(t),start.l=l(t),start.opacity=opacity(t),start+""}}}hcl_hcl(color_hue),hcl_hcl(nogamma);function src_cubehelix_cubehelix(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=cubehelix_cubehelix(start)).h,(end=cubehelix_cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}src_cubehelix_cubehelix(color_hue),src_cubehelix_cubehelix(nogamma);var taskHead,taskTail,timer_frame=0,timeout=0,timer_interval=0,pokeDelay=1e3,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(callback,delay,time){var t=new Timer;return t.restart(callback,delay,time),t}function wake(){clockNow=(clockLast=clock.now())+clockSkew,timer_frame=timeout=0;try{!function(){now(),++timer_frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(null,e),t=t._next;--timer_frame}()}finally{timer_frame=0,function(){var t0,t2,t1=taskHead,time=1/0;for(;t1;)t1._call?(time>t1._time&&(time=t1._time),t0=t1,t1=t1._next):(t2=t1._next,t1._next=null,t1=t0?t0._next=t2:taskHead=t2);taskTail=t0,sleep(time)}(),clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;delay>pokeDelay&&(clockSkew-=delay,clockLast=now)}function sleep(time){timer_frame||(timeout&&(timeout=clearTimeout(timeout)),time-clockNow>24?(time<1/0&&(timeout=setTimeout(wake,time-clock.now()-clockSkew)),timer_interval&&(timer_interval=clearInterval(timer_interval))):(timer_interval||(clockLast=clock.now(),timer_interval=setInterval(poke,pokeDelay)),timer_frame=1,setFrame(wake)))}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if("function"!=typeof callback)throw new TypeError("callback is not a function");time=(null==time?now():+time)+(null==delay?0:+delay),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=callback,this._time=time,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var src_timeout=function(callback,delay,time){var t=new Timer;return delay=null==delay?0:+delay,t.restart(function(elapsed){t.stop(),callback(elapsed+delay)},delay,time),t},emptyOn=src_dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6,transition_schedule=function(node,name,id,index,group,timing){var schedules=node.__transition;if(schedules){if(id in schedules)return}else node.__transition={};!function(node,id,self){var tween,schedules=node.__transition;function start(elapsed){var i,j,n,o;if(self.state!==SCHEDULED)return stop();for(i in schedules)if((o=schedules[i]).name===self.name){if(o.state===STARTED)return src_timeout(start);o.state===RUNNING?(o.state=ENDED,o.timer.stop(),o.on.call("interrupt",node,node.__data__,o.index,o.group),delete schedules[i]):+i<id&&(o.state=ENDED,o.timer.stop(),o.on.call("cancel",node,node.__data__,o.index,o.group),delete schedules[i])}if(src_timeout(function(){self.state===STARTED&&(self.state=RUNNING,self.timer.restart(tick,self.delay,self.time),tick(elapsed))}),self.state=STARTING,self.on.call("start",node,node.__data__,self.index,self.group),self.state===STARTING){for(self.state=STARTED,tween=new Array(n=self.tween.length),i=0,j=-1;i<n;++i)(o=self.tween[i].value.call(node,node.__data__,self.index,self.group))&&(tween[++j]=o);tween.length=j+1}}function tick(elapsed){for(var t=elapsed<self.duration?self.ease.call(null,elapsed/self.duration):(self.timer.restart(stop),self.state=ENDING,1),i=-1,n=tween.length;++i<n;)tween[i].call(node,t);self.state===ENDING&&(self.on.call("end",node,node.__data__,self.index,self.group),stop())}function stop(){for(var i in self.state=ENDED,self.timer.stop(),delete schedules[id],schedules)return;delete node.__transition}schedules[id]=self,self.timer=timer(function(elapsed){self.state=SCHEDULED,self.timer.restart(start,self.delay,self.time),self.delay<=elapsed&&start(elapsed-self.delay)},0,self.time)}(node,id,{name:name,index:index,group:group,on:emptyOn,tween:emptyTween,time:timing.time,delay:timing.delay,duration:timing.duration,ease:timing.ease,timer:null,state:CREATED})};function schedule_init(node,id){var schedule=schedule_get(node,id);if(schedule.state>CREATED)throw new Error("too late; already scheduled");return schedule}function schedule_set(node,id){var schedule=schedule_get(node,id);if(schedule.state>STARTED)throw new Error("too late; already running");return schedule}function schedule_get(node,id){var schedule=node.__transition;if(!schedule||!(schedule=schedule[id]))throw new Error("transition not found");return schedule}var interrupt=function(node,name){var schedule,active,i,schedules=node.__transition,empty=!0;if(schedules){for(i in name=null==name?null:name+"",schedules)(schedule=schedules[i]).name===name?(active=schedule.state>STARTING&&schedule.state<ENDING,schedule.state=ENDED,schedule.timer.stop(),schedule.on.call(active?"interrupt":"cancel",node,node.__data__,schedule.index,schedule.group),delete schedules[i]):empty=!1;empty&&delete node.__transition}};function tweenRemove(id,name){var tween0,tween1;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0)for(var i=0,n=(tween1=tween0=tween).length;i<n;++i)if(tween1[i].name===name){(tween1=tween1.slice()).splice(i,1);break}schedule.tween=tween1}}function tweenFunction(id,name,value){var tween0,tween1;if("function"!=typeof value)throw new Error;return function(){var schedule=schedule_set(this,id),tween=schedule.tween;if(tween!==tween0){tween1=(tween0=tween).slice();for(var t={name:name,value:value},i=0,n=tween1.length;i<n;++i)if(tween1[i].name===name){tween1[i]=t;break}i===n&&tween1.push(t)}schedule.tween=tween1}}function tweenValue(transition,name,value){var id=transition._id;return transition.each(function(){var schedule=schedule_set(this,id);(schedule.value||(schedule.value={}))[name]=value.apply(this,arguments)}),function(node){return schedule_get(node,id).value[name]}}var transition_interpolate=function(a,b){var c;return("number"==typeof b?src_number:b instanceof color_color?src_rgb:(c=color_color(b))?(b=c,src_rgb):src_string)(a,b)};function attr_attrRemove(name){return function(){this.removeAttribute(name)}}function attr_attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attr_attrConstant(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttribute(name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attr_attrConstantNS(fullname,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=this.getAttributeNS(fullname.space,fullname.local);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}function attr_attrFunction(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttribute(name))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttribute(name)}}function attr_attrFunctionNS(fullname,interpolate,value){var string00,string10,interpolate0;return function(){var string0,string1,value1=value(this);if(null!=value1)return(string0=this.getAttributeNS(fullname.space,fullname.local))===(string1=value1+"")?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1));this.removeAttributeNS(fullname.space,fullname.local)}}function attrTweenNS(fullname,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function(fullname,i){return function(t){this.setAttributeNS(fullname.space,fullname.local,i(t))}}(fullname,i)),t0}return tween._value=value,tween}function attrTween(name,value){var t0,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t0=(i0=i)&&function(name,i){return function(t){this.setAttribute(name,i(t))}}(name,i)),t0}return tween._value=value,tween}function delayFunction(id,value){return function(){schedule_init(this,id).delay=+value.apply(this,arguments)}}function delayConstant(id,value){return value=+value,function(){schedule_init(this,id).delay=value}}function durationFunction(id,value){return function(){schedule_set(this,id).duration=+value.apply(this,arguments)}}function durationConstant(id,value){return value=+value,function(){schedule_set(this,id).duration=value}}function easeConstant(id,value){if("function"!=typeof value)throw new Error;return function(){schedule_set(this,id).ease=value}}function onFunction(id,name,listener){var on0,on1,sit=function(name){return(name+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t})}(name)?schedule_init:schedule_set;return function(){var schedule=sit(this,id),on=schedule.on;on!==on0&&(on1=(on0=on).copy()).on(name,listener),schedule.on=on1}}var selection_Selection=src_selection.prototype.constructor;function style_styleRemove(name){return function(){this.style.removeProperty(name)}}function styleTween(name,value,priority){var t,i0;function tween(){var i=value.apply(this,arguments);return i!==i0&&(t=(i0=i)&&function(name,i,priority){return function(t){this.style.setProperty(name,i(t),priority)}}(name,i,priority)),t}return tween._value=value,tween}var transition_id=0;function transition_Transition(groups,parents,name,id){this._groups=groups,this._parents=parents,this._name=name,this._id=id}function newId(){return++transition_id}var selection_prototype=src_selection.prototype;function quadOut(t){return t*(2-t)}transition_Transition.prototype=function(name){return src_selection().transition(name)}.prototype={constructor:transition_Transition,select:function(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=src_selector(select));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,subnode,group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),i=0;i<n;++i)(node=group[i])&&(subnode=select.call(node,node.__data__,i,group))&&("__data__"in node&&(subnode.__data__=node.__data__),subgroup[i]=subnode,transition_schedule(subgroup[i],name,id,i,subgroup,schedule_get(node,id)));return new transition_Transition(subgroups,this._parents,name,id)},selectAll:function(select){var name=this._name,id=this._id;"function"!=typeof select&&(select=selectorAll(select));for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){for(var child,children=select.call(node,node.__data__,i,group),inherit=schedule_get(node,id),k=0,l=children.length;k<l;++k)(child=children[k])&&transition_schedule(child,name,id,k,children,inherit);subgroups.push(children),parents.push(node)}return new transition_Transition(subgroups,parents,name,id)},filter:function(match){"function"!=typeof match&&(match=matcher(match));for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j)for(var node,group=groups[j],n=group.length,subgroup=subgroups[j]=[],i=0;i<n;++i)(node=group[i])&&match.call(node,node.__data__,i,group)&&subgroup.push(node);return new transition_Transition(subgroups,this._parents,this._name,this._id)},merge:function(transition){if(transition._id!==this._id)throw new Error;for(var groups0=this._groups,groups1=transition._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j)for(var node,group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),i=0;i<n;++i)(node=group0[i]||group1[i])&&(merge[i]=node);for(;j<m0;++j)merges[j]=groups0[j];return new transition_Transition(merges,this._parents,this._name,this._id)},selection:function(){return new selection_Selection(this._groups,this._parents)},transition:function(){for(var name=this._name,id0=this._id,id1=newId(),groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)if(node=group[i]){var inherit=schedule_get(node,id0);transition_schedule(node,name,id1,i,group,{time:inherit.time+inherit.delay+inherit.duration,delay:0,duration:inherit.duration,ease:inherit.ease})}return new transition_Transition(groups,this._parents,name,id1)},call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:function(name,listener){var id=this._id;return arguments.length<2?schedule_get(this.node(),id).on.on(name):this.each(onFunction(id,name,listener))},attr:function(name,value){var fullname=namespace(name),i="transform"===fullname?interpolateTransformSvg:transition_interpolate;return this.attrTween(name,"function"==typeof value?(fullname.local?attr_attrFunctionNS:attr_attrFunction)(fullname,i,tweenValue(this,"attr."+name,value)):null==value?(fullname.local?attr_attrRemoveNS:attr_attrRemove)(fullname):(fullname.local?attr_attrConstantNS:attr_attrConstant)(fullname,i,value))},attrTween:function(name,value){var key="attr."+name;if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;var fullname=namespace(name);return this.tween(key,(fullname.local?attrTweenNS:attrTween)(fullname,value))},style:function(name,value,priority){var i="transform"==(name+="")?interpolateTransformCss:transition_interpolate;return null==value?this.styleTween(name,function(name,interpolate){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),string1=(this.style.removeProperty(name),styleValue(this,name));return string0===string1?null:string0===string00&&string1===string10?interpolate0:interpolate0=interpolate(string00=string0,string10=string1)}}(name,i)).on("end.style."+name,style_styleRemove(name)):"function"==typeof value?this.styleTween(name,function(name,interpolate,value){var string00,string10,interpolate0;return function(){var string0=styleValue(this,name),value1=value(this),string1=value1+"";return null==value1&&(this.style.removeProperty(name),string1=value1=styleValue(this,name)),string0===string1?null:string0===string00&&string1===string10?interpolate0:(string10=string1,interpolate0=interpolate(string00=string0,value1))}}(name,i,tweenValue(this,"style."+name,value))).each(function(id,name){var on0,on1,listener0,remove,key="style."+name,event="end."+key;return function(){var schedule=schedule_set(this,id),on=schedule.on,listener=null==schedule.value[key]?remove||(remove=style_styleRemove(name)):void 0;on===on0&&listener0===listener||(on1=(on0=on).copy()).on(event,listener0=listener),schedule.on=on1}}(this._id,name)):this.styleTween(name,function(name,interpolate,value1){var string00,interpolate0,string1=value1+"";return function(){var string0=styleValue(this,name);return string0===string1?null:string0===string00?interpolate0:interpolate0=interpolate(string00=string0,value1)}}(name,i,value),priority).on("end.style."+name,null)},styleTween:function(name,value,priority){var key="style."+(name+="");if(arguments.length<2)return(key=this.tween(key))&&key._value;if(null==value)return this.tween(key,null);if("function"!=typeof value)throw new Error;return this.tween(key,styleTween(name,value,null==priority?"":priority))},text:function(value){return this.tween("text","function"==typeof value?function(value){return function(){var value1=value(this);this.textContent=null==value1?"":value1}}(tweenValue(this,"text",value)):function(value){return function(){this.textContent=value}}(null==value?"":value+""))},remove:function(){return this.on("end.remove",(id=this._id,function(){var parent=this.parentNode;for(var i in this.__transition)if(+i!==id)return;parent&&parent.removeChild(this)}));var id},tween:function(name,value){var id=this._id;if(name+="",arguments.length<2){for(var t,tween=schedule_get(this.node(),id).tween,i=0,n=tween.length;i<n;++i)if((t=tween[i]).name===name)return t.value;return null}return this.each((null==value?tweenRemove:tweenFunction)(id,name,value))},delay:function(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?delayFunction:delayConstant)(id,value)):schedule_get(this.node(),id).delay},duration:function(value){var id=this._id;return arguments.length?this.each(("function"==typeof value?durationFunction:durationConstant)(id,value)):schedule_get(this.node(),id).duration},ease:function(value){var id=this._id;return arguments.length?this.each(easeConstant(id,value)):schedule_get(this.node(),id).ease},end:function(){var on0,on1,that=this,id=that._id,size=that.size();return new Promise(function(resolve,reject){var cancel={value:reject},end={value:function(){0==--size&&resolve()}};that.each(function(){var schedule=schedule_set(this,id),on=schedule.on;on!==on0&&((on1=(on0=on).copy())._.cancel.push(cancel),on1._.interrupt.push(cancel),on1._.end.push(end)),schedule.on=on1})})}};(function custom(e){function polyIn(t){return Math.pow(t,e)}return e=+e,polyIn.exponent=custom,polyIn})(3),function custom(e){function polyOut(t){return 1-Math.pow(1-t,e)}return e=+e,polyOut.exponent=custom,polyOut}(3),function custom(e){function polyInOut(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,polyInOut.exponent=custom,polyInOut}(3),Math.PI;(function custom(s){function backIn(t){return t*t*((s+1)*t-s)}return s=+s,backIn.overshoot=custom,backIn})(1.70158),function custom(s){function backOut(t){return--t*t*((s+1)*t+s)+1}return s=+s,backOut.overshoot=custom,backOut}(1.70158),function custom(s){function backInOut(t){return((t*=2)<1?t*t*((s+1)*t-s):(t-=2)*t*((s+1)*t+s)+2)/2}return s=+s,backInOut.overshoot=custom,backInOut}(1.70158);var tau=2*Math.PI,defaultTiming=(function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticIn(t){return a*Math.pow(2,10*--t)*Math.sin((s-t)/p)}return elasticIn.amplitude=function(a){return custom(a,p*tau)},elasticIn.period=function(p){return custom(a,p)},elasticIn}(1,.3),function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticOut(t){return 1-a*Math.pow(2,-10*(t=+t))*Math.sin((t+s)/p)}return elasticOut.amplitude=function(a){return custom(a,p*tau)},elasticOut.period=function(p){return custom(a,p)},elasticOut}(1,.3),function custom(a,p){var s=Math.asin(1/(a=Math.max(1,a)))*(p/=tau);function elasticInOut(t){return((t=2*t-1)<0?a*Math.pow(2,10*t)*Math.sin((s-t)/p):2-a*Math.pow(2,-10*t)*Math.sin((s+t)/p))/2}return elasticInOut.amplitude=function(a){return custom(a,p*tau)},elasticInOut.period=function(p){return custom(a,p)},elasticInOut}(1,.3),{time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}});function transition_inherit(node,id){for(var timing;!(timing=node.__transition)||!(timing=timing[id]);)if(!(node=node.parentNode))return defaultTiming.time=now(),defaultTiming;return timing}src_selection.prototype.interrupt=function(name){return this.each(function(){interrupt(this,name)})},src_selection.prototype.transition=function(name){var id,timing;name instanceof transition_Transition?(id=name._id,name=name._name):(id=newId(),(timing=defaultTiming).time=now(),name=null==name?null:name+"");for(var groups=this._groups,m=groups.length,j=0;j<m;++j)for(var node,group=groups[j],n=group.length,i=0;i<n;++i)(node=group[i])&&transition_schedule(node,name,id,i,group,timing||transition_inherit(node,id));return new transition_Transition(groups,this._parents,name,id)};function number1(e){return[+e[0],+e[1]]}function number2(e){return[number1(e[0]),number1(e[1])]}["w","e"].map(brush_type),["n","s"].map(brush_type),["n","w","e","s","nw","ne","sw","se"].map(brush_type);function brush_type(t){return{type:t}}Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice;var path_pi=Math.PI,path_tau=2*path_pi,tauEpsilon=path_tau-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path_path(){return new Path}Path.prototype=path_path.prototype={constructor:Path,moveTo:function(x,y){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(x,y){this._+="L"+(this._x1=+x)+","+(this._y1=+y)},quadraticCurveTo:function(x1,y1,x,y){this._+="Q"+ +x1+","+ +y1+","+(this._x1=+x)+","+(this._y1=+y)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._+="C"+ +x1+","+ +y1+","+ +x2+","+ +y2+","+(this._x1=+x)+","+(this._y1=+y)},arcTo:function(x1,y1,x2,y2,r){x1=+x1,y1=+y1,x2=+x2,y2=+y2,r=+r;var x0=this._x1,y0=this._y1,x21=x2-x1,y21=y2-y1,x01=x0-x1,y01=y0-y1,l01_2=x01*x01+y01*y01;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=x1)+","+(this._y1=y1);else if(l01_2>1e-6)if(Math.abs(y01*x21-y21*x01)>1e-6&&r){var x20=x2-x0,y20=y2-y0,l21_2=x21*x21+y21*y21,l20_2=x20*x20+y20*y20,l21=Math.sqrt(l21_2),l01=Math.sqrt(l01_2),l=r*Math.tan((path_pi-Math.acos((l21_2+l01_2-l20_2)/(2*l21*l01)))/2),t01=l/l01,t21=l/l21;Math.abs(t01-1)>1e-6&&(this._+="L"+(x1+t01*x01)+","+(y1+t01*y01)),this._+="A"+r+","+r+",0,0,"+ +(y01*x20>x01*y20)+","+(this._x1=x1+t21*x21)+","+(this._y1=y1+t21*y21)}else this._+="L"+(this._x1=x1)+","+(this._y1=y1);else;},arc:function(x,y,r,a0,a1,ccw){x=+x,y=+y,ccw=!!ccw;var dx=(r=+r)*Math.cos(a0),dy=r*Math.sin(a0),x0=x+dx,y0=y+dy,cw=1^ccw,da=ccw?a0-a1:a1-a0;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+x0+","+y0:(Math.abs(this._x1-x0)>1e-6||Math.abs(this._y1-y0)>1e-6)&&(this._+="L"+x0+","+y0),r&&(da<0&&(da=da%path_tau+path_tau),da>tauEpsilon?this._+="A"+r+","+r+",0,1,"+cw+","+(x-dx)+","+(y-dy)+"A"+r+","+r+",0,1,"+cw+","+(this._x1=x0)+","+(this._y1=y0):da>1e-6&&(this._+="A"+r+","+r+",0,"+ +(da>=path_pi)+","+cw+","+(this._x1=x+r*Math.cos(a1))+","+(this._y1=y+r*Math.sin(a1))))},rect:function(x,y,w,h){this._+="M"+(this._x0=this._x1=+x)+","+(this._y0=this._y1=+y)+"h"+ +w+"v"+ +h+"h"+-w+"Z"},toString:function(){return this._}};var src_path=path_path;function Map(){}function map_map(object,f){var map=new Map;if(object instanceof Map)object.each(function(value,key){map.set(key,value)});else if(Array.isArray(object)){var o,i=-1,n=object.length;if(null==f)for(;++i<n;)map.set(i,object[i]);else for(;++i<n;)map.set(f(o=object[i],i,object),o)}else if(object)for(var key in object)map.set(key,object[key]);return map}Map.prototype=map_map.prototype={constructor:Map,has:function(key){return"$"+key in this},get:function(key){return this["$"+key]},set:function(key,value){return this["$"+key]=value,this},remove:function(key){var property="$"+key;return property in this&&delete this[property]},clear:function(){for(var property in this)"$"===property[0]&&delete this[property]},keys:function(){var keys=[];for(var property in this)"$"===property[0]&&keys.push(property.slice(1));return keys},values:function(){var values=[];for(var property in this)"$"===property[0]&&values.push(this[property]);return values},entries:function(){var entries=[];for(var property in this)"$"===property[0]&&entries.push({key:property.slice(1),value:this[property]});return entries},size:function(){var size=0;for(var property in this)"$"===property[0]&&++size;return size},empty:function(){for(var property in this)if("$"===property[0])return!1;return!0},each:function(f){for(var property in this)"$"===property[0]&&f(this[property],property.slice(1),this)}};var src_map=map_map;function set_Set(){}var proto=src_map.prototype;function set_set(object,f){var set=new set_Set;if(object instanceof set_Set)object.each(function(value){set.add(value)});else if(object){var i=-1,n=object.length;if(null==f)for(;++i<n;)set.add(object[i]);else for(;++i<n;)set.add(f(object[i],i,object))}return set}set_Set.prototype=set_set.prototype={constructor:set_Set,has:proto.has,add:function(value){return this["$"+(value+="")]=value,this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each};Array.prototype.slice;var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(columns){return new Function("d","return {"+columns.map(function(name,i){return JSON.stringify(name)+": d["+i+"]"}).join(",")+"}")}function inferColumns(rows){var columnSet=Object.create(null),columns=[];return rows.forEach(function(row){for(var column in row)column in columnSet||columns.push(columnSet[column]=column)}),columns}function pad(value,width){var s=value+"",length=s.length;return length<width?new Array(width-length+1).join(0)+s:s}function formatDate(date){var year,hours=date.getUTCHours(),minutes=date.getUTCMinutes(),seconds=date.getUTCSeconds(),milliseconds=date.getUTCMilliseconds();return isNaN(date)?"Invalid Date":((year=date.getUTCFullYear())<0?"-"+pad(-year,6):year>9999?"+"+pad(year,6):pad(year,4))+"-"+pad(date.getUTCMonth()+1,2)+"-"+pad(date.getUTCDate(),2)+(milliseconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"."+pad(milliseconds,3)+"Z":seconds?"T"+pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2)+"Z":minutes||hours?"T"+pad(hours,2)+":"+pad(minutes,2)+"Z":"")}var dsv=function(delimiter){var reFormat=new RegExp('["'+delimiter+"\n\r]"),DELIMITER=delimiter.charCodeAt(0);function parseRows(text,f){var t,rows=[],N=text.length,I=0,n=0,eof=N<=0,eol=!1;function token(){if(eof)return EOF;if(eol)return eol=!1,EOL;var i,c,j=I;if(text.charCodeAt(j)===QUOTE){for(;I++<N&&text.charCodeAt(I)!==QUOTE||text.charCodeAt(++I)===QUOTE;);return(i=I)>=N?eof=!0:(c=text.charCodeAt(I++))===NEWLINE?eol=!0:c===RETURN&&(eol=!0,text.charCodeAt(I)===NEWLINE&&++I),text.slice(j+1,i-1).replace(/""/g,'"')}for(;I<N;){if((c=text.charCodeAt(i=I++))===NEWLINE)eol=!0;else if(c===RETURN)eol=!0,text.charCodeAt(I)===NEWLINE&&++I;else if(c!==DELIMITER)continue;return text.slice(j,i)}return eof=!0,text.slice(j,N)}for(text.charCodeAt(N-1)===NEWLINE&&--N,text.charCodeAt(N-1)===RETURN&&--N;(t=token())!==EOF;){for(var row=[];t!==EOL&&t!==EOF;)row.push(t),t=token();f&&null==(row=f(row,n++))||rows.push(row)}return rows}function preformatBody(rows,columns){return rows.map(function(row){return columns.map(function(column){return formatValue(row[column])}).join(delimiter)})}function formatRow(row){return row.map(formatValue).join(delimiter)}function formatValue(value){return null==value?"":value instanceof Date?formatDate(value):reFormat.test(value+="")?'"'+value.replace(/"/g,'""')+'"':value}return{parse:function(text,f){var convert,columns,rows=parseRows(text,function(row,i){if(convert)return convert(row,i-1);columns=row,convert=f?function(columns,f){var object=objectConverter(columns);return function(row,i){return f(object(row),i,columns)}}(row,f):objectConverter(row)});return rows.columns=columns||[],rows},parseRows:parseRows,format:function(rows,columns){return null==columns&&(columns=inferColumns(rows)),[columns.map(formatValue).join(delimiter)].concat(preformatBody(rows,columns)).join("\n")},formatBody:function(rows,columns){return null==columns&&(columns=inferColumns(rows)),preformatBody(rows,columns).join("\n")},formatRows:function(rows){return rows.map(formatRow).join("\n")}}},csv=dsv(","),csvParse=csv.parse,tsv=(csv.parseRows,csv.format,csv.formatBody,csv.formatRows,dsv("\t")),tsvParse=tsv.parse;tsv.parseRows,tsv.format,tsv.formatBody,tsv.formatRows;function responseText(response){if(!response.ok)throw new Error(response.status+" "+response.statusText);return response.text()}var src_text=function(input,init){return fetch(input,init).then(responseText)};function dsvParse(parse){return function(input,init,row){return 2===arguments.length&&"function"==typeof init&&(row=init,init=void 0),src_text(input,init).then(function(response){return parse(response,row)})}}dsvParse(csvParse),dsvParse(tsvParse);function parser(type){return function(input,init){return src_text(input,init).then(function(text){return(new DOMParser).parseFromString(text,type)})}}parser("application/xml"),parser("text/html"),parser("image/svg+xml");function add_add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,xm,ym,xp,yp,right,bottom,i,j,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1;if(!node)return tree._root=leaf,tree;for(;node.length;)if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,tree;if(xp=+tree._x.call(null,node.data),yp=+tree._y.call(null,node.data),x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,tree;do{parent=parent?parent[i]=new Array(4):tree._root=new Array(4),(right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym}while((i=bottom<<1|right)==(j=(yp>=ym)<<1|xp>=xm));return parent[j]=node,parent[i]=leaf,tree}var src_quad=function(node,x0,y0,x1,y1){this.node=node,this.x0=x0,this.y0=y0,this.x1=x1,this.y1=y1};function x_defaultX(d){return d[0]}function y_defaultY(d){return d[1]}function quadtree(nodes,x,y){var tree=new Quadtree(null==x?x_defaultX:x,null==y?y_defaultY:y,NaN,NaN,NaN,NaN);return null==nodes?tree:tree.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x=x,this._y=y,this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this._root=void 0}function leaf_copy(leaf){for(var copy={data:leaf.data},next=copy;leaf=leaf.next;)next=next.next={data:leaf.data};return copy}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var nodes,child,copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root;if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),copy;for(nodes=[{source:node,target:copy._root=new Array(4)}];node=nodes.pop();)for(var i=0;i<4;++i)(child=node.source[i])&&(child.length?nodes.push({source:child,target:node.target[i]=new Array(4)}):node.target[i]=leaf_copy(child));return copy},treeProto.add=function(d){var x=+this._x.call(null,d),y=+this._y.call(null,d);return add_add(this.cover(x,y),x,y,d)},treeProto.addAll=function(data){var d,i,x,y,n=data.length,xz=new Array(n),yz=new Array(n),x0=1/0,y0=1/0,x1=-1/0,y1=-1/0;for(i=0;i<n;++i)isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d))||(xz[i]=x,yz[i]=y,x<x0&&(x0=x),x>x1&&(x1=x),y<y0&&(y0=y),y>y1&&(y1=y));if(x0>x1||y0>y1)return this;for(this.cover(x0,y0).cover(x1,y1),i=0;i<n;++i)add_add(this,xz[i],yz[i],data[i]);return this},treeProto.cover=function(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0))x1=(x0=Math.floor(x))+1,y1=(y0=Math.floor(y))+1;else{for(var parent,i,z=x1-x0,node=this._root;x0>x||x>=x1||y0>y||y>=y1;)switch(i=(y<y0)<<1|x<x0,(parent=new Array(4))[i]=node,node=parent,z*=2,i){case 0:x1=x0+z,y1=y0+z;break;case 1:x0=x1-z,y1=y0+z;break;case 2:x1=x0+z,y0=y1-z;break;case 3:x0=x1-z,y0=y1-z}this._root&&this._root.length&&(this._root=node)}return this._x0=x0,this._y0=y0,this._x1=x1,this._y1=y1,this},treeProto.data=function(){var data=[];return this.visit(function(node){if(!node.length)do{data.push(node.data)}while(node=node.next)}),data},treeProto.extent=function(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},treeProto.find=function(x,y,radius){var data,x1,y1,x2,y2,q,i,x0=this._x0,y0=this._y0,x3=this._x1,y3=this._y1,quads=[],node=this._root;for(node&&quads.push(new src_quad(node,x0,y0,x3,y3)),null==radius?radius=1/0:(x0=x-radius,y0=y-radius,x3=x+radius,y3=y+radius,radius*=radius);q=quads.pop();)if(!(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0))if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new src_quad(node[3],xm,ym,x2,y2),new src_quad(node[2],x1,ym,xm,y2),new src_quad(node[1],xm,y1,x2,ym),new src_quad(node[0],x1,y1,xm,ym)),(i=(y>=ym)<<1|x>=xm)&&(q=quads[quads.length-1],quads[quads.length-1]=quads[quads.length-1-i],quads[quads.length-1-i]=q)}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d,x3=x+d,y3=y+d,data=node.data}}return data},treeProto.remove=function(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var parent,retainer,previous,next,x,y,xm,ym,right,bottom,i,j,node=this._root,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(!node)return this;if(node.length)for(;;){if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,parent=node,!(node=node[i=bottom<<1|right]))return this;if(!node.length)break;(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])&&(retainer=parent,j=i)}for(;node.data!==d;)if(previous=node,!(node=node.next))return this;return(next=node.next)&&delete node.next,previous?(next?previous.next=next:delete previous.next,this):parent?(next?parent[i]=next:delete parent[i],(node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length&&(retainer?retainer[j]=node:this._root=node),this):(this._root=next,this)},treeProto.removeAll=function(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this},treeProto.root=function(){return this._root},treeProto.size=function(){var size=0;return this.visit(function(node){if(!node.length)do{++size}while(node=node.next)}),size},treeProto.visit=function(callback){var q,child,x0,y0,x1,y1,quads=[],node=this._root;for(node&&quads.push(new src_quad(node,this._x0,this._y0,this._x1,this._y1));q=quads.pop();)if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[3])&&quads.push(new src_quad(child,xm,ym,x1,y1)),(child=node[2])&&quads.push(new src_quad(child,x0,ym,xm,y1)),(child=node[1])&&quads.push(new src_quad(child,xm,y0,x1,ym)),(child=node[0])&&quads.push(new src_quad(child,x0,y0,xm,ym))}return this},treeProto.visitAfter=function(callback){var q,quads=[],next=[];for(this._root&&quads.push(new src_quad(this._root,this._x0,this._y0,this._x1,this._y1));q=quads.pop();){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;(child=node[0])&&quads.push(new src_quad(child,x0,y0,xm,ym)),(child=node[1])&&quads.push(new src_quad(child,xm,y0,x1,ym)),(child=node[2])&&quads.push(new src_quad(child,x0,ym,xm,y1)),(child=node[3])&&quads.push(new src_quad(child,xm,ym,x1,y1))}next.push(q)}for(;q=next.pop();)callback(q.node,q.x0,q.y0,q.x1,q.y1);return this},treeProto.x=function(_){return arguments.length?(this._x=_,this):this._x},treeProto.y=function(_){return arguments.length?(this._y=_,this):this._y};Math.PI,Math.sqrt(5);var formatDecimal=function(x,p){if((i=(x=p?x.toExponential(p-1):x.toExponential()).indexOf("e"))<0)return null;var i,coefficient=x.slice(0,i);return[coefficient.length>1?coefficient[0]+coefficient.slice(2):coefficient,+x.slice(i+1)]},src_exponent=function(x){return(x=formatDecimal(Math.abs(x)))?x[1]:NaN},re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(specifier){return new FormatSpecifier(specifier)}function FormatSpecifier(specifier){if(!(match=re.exec(specifier)))throw new Error("invalid format: "+specifier);var match;this.fill=match[1]||" ",this.align=match[2]||">",this.sign=match[3]||"-",this.symbol=match[4]||"",this.zero=!!match[5],this.width=match[6]&&+match[6],this.comma=!!match[7],this.precision=match[8]&&+match[8].slice(1),this.trim=!!match[9],this.type=match[10]||""}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var prefixExponent,defaultLocale_locale,formatTrim=function(s){out:for(var i1,n=s.length,i=1,i0=-1;i<n;++i)switch(s[i]){case".":i0=i1=i;break;case"0":0===i0&&(i0=i),i1=i;break;default:if(i0>0){if(!+s[i])break out;i0=0}}return i0>0?s.slice(0,i0)+s.slice(i1+1):s},formatRounded=function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1];return exponent<0?"0."+new Array(-exponent).join("0")+coefficient:coefficient.length>exponent+1?coefficient.slice(0,exponent+1)+"."+coefficient.slice(exponent+1):coefficient+new Array(exponent-coefficient.length+2).join("0")},formatTypes={"%":function(x,p){return(100*x).toFixed(p)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:function(x){return Math.round(x).toString(10)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},g:function(x,p){return x.toPrecision(p)},o:function(x){return Math.round(x).toString(8)},p:function(x,p){return formatRounded(100*x,p)},r:formatRounded,s:function(x,p){var d=formatDecimal(x,p);if(!d)return x+"";var coefficient=d[0],exponent=d[1],i=exponent-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(exponent/3))))+1,n=coefficient.length;return i===n?coefficient:i>n?coefficient+new Array(i-n+1).join("0"):i>0?coefficient.slice(0,i)+"."+coefficient.slice(i):"0."+new Array(1-i).join("0")+formatDecimal(x,Math.max(0,p+i-1))[0]},X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}},d3_format_src_identity=function(x){return x},prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];defaultLocale_locale=function(locale){var grouping,thousands,group=locale.grouping&&locale.thousands?(grouping=locale.grouping,thousands=locale.thousands,function(value,width){for(var i=value.length,t=[],j=0,g=grouping[0],length=0;i>0&&g>0&&(length+g+1>width&&(g=Math.max(1,width-length)),t.push(value.substring(i-=g,i+g)),!((length+=g+1)>width));)g=grouping[j=(j+1)%grouping.length];return t.reverse().join(thousands)}):d3_format_src_identity,currency=locale.currency,decimal=locale.decimal,numerals=locale.numerals?function(numerals){return function(value){return value.replace(/[0-9]/g,function(i){return numerals[+i]})}}(locale.numerals):d3_format_src_identity,percent=locale.percent||"%";function newFormat(specifier){var fill=(specifier=formatSpecifier(specifier)).fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,trim=specifier.trim,type=specifier.type;"n"===type?(comma=!0,type="g"):formatTypes[type]||(null==precision&&(precision=12),trim=!0,type="g"),(zero||"0"===fill&&"="===align)&&(zero=!0,fill="0",align="=");var prefix="$"===symbol?currency[0]:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currency[1]:/[%p]/.test(type)?percent:"",formatType=formatTypes[type],maybeSuffix=/[defgprs%]/.test(type);function format(value){var i,n,c,valuePrefix=prefix,valueSuffix=suffix;if("c"===type)valueSuffix=formatType(value)+valueSuffix,value="";else{var valueNegative=(value=+value)<0;if(value=formatType(Math.abs(value),precision),trim&&(value=formatTrim(value)),valueNegative&&0==+value&&(valueNegative=!1),valuePrefix=(valueNegative?"("===sign?sign:"-":"-"===sign||"("===sign?"":sign)+valuePrefix,valueSuffix=("s"===type?prefixes[8+prefixExponent/3]:"")+valueSuffix+(valueNegative&&"("===sign?")":""),maybeSuffix)for(i=-1,n=value.length;++i<n;)if(48>(c=value.charCodeAt(i))||c>57){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix,value=value.slice(0,i);break}}comma&&!zero&&(value=group(value,1/0));var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?new Array(width-length+1).join(fill):"";switch(comma&&zero&&(value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding=""),align){case"<":value=valuePrefix+value+valueSuffix+padding;break;case"=":value=valuePrefix+padding+value+valueSuffix;break;case"^":value=padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);break;default:value=padding+valuePrefix+value+valueSuffix}return numerals(value)}return precision=null==precision?6:/[gprs]/.test(type)?Math.max(1,Math.min(21,precision)):Math.max(0,Math.min(20,precision)),format.toString=function(){return specifier+""},format}return{format:newFormat,formatPrefix:function(specifier,value){var f=newFormat(((specifier=formatSpecifier(specifier)).type="f",specifier)),e=3*Math.max(-8,Math.min(8,Math.floor(src_exponent(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),defaultLocale_locale.format,defaultLocale_locale.formatPrefix;var adder=function(){return new Adder};function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(y){adder_add(temp,y,this.t),adder_add(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function adder_add(adder,a,b){var x=adder.s=a+b,bv=x-a,av=x-bv;adder.t=a-av+(b-bv)}var math_epsilon=1e-6,math_epsilon2=1e-12,src_math_pi=Math.PI,src_math_halfPi=src_math_pi/2,quarterPi=src_math_pi/4,src_math_tau=2*src_math_pi,radians=src_math_pi/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,math_cos=Math.cos,exp=(Math.ceil,Math.exp),log=(Math.floor,Math.log),math_sin=(Math.pow,Math.sin),math_sign=Math.sign||function(x){return x>0?1:x<0?-1:0},sqrt=Math.sqrt,tan=Math.tan;function acos(x){return x>1?0:x<-1?src_math_pi:Math.acos(x)}function asin(x){return x>1?src_math_halfPi:x<-1?-src_math_halfPi:Math.asin(x)}function noop_noop(){}adder(),adder();function cartesian_cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=math_cos(phi);return[cosPhi*math_cos(lambda),cosPhi*math_sin(lambda),math_sin(phi)]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianNormalizeInPlace(d){var l=sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}adder();function rotationIdentity(lambda,phi){return[abs(lambda)>src_math_pi?lambda+Math.round(-lambda/src_math_tau)*src_math_tau:lambda,phi]}rotationIdentity.invert=rotationIdentity;var clip_buffer=function(){var line,lines=[];return{point:function(x,y){line.push([x,y])},lineStart:function(){lines.push(line=[])},lineEnd:noop_noop,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}},pointEqual=function(a,b){return abs(a[0]-b[0])<math_epsilon&&abs(a[1]-b[1])<math_epsilon};function Intersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}var rejoin=function(segments,compareIntersection,startInside,interpolate,stream){var i,n,subject=[],clip=[];if(segments.forEach(function(segment){if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];if(pointEqual(p0,p1)){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);stream.lineEnd()}else subject.push(x=new Intersection(p0,segment,null,!0)),clip.push(x.o=new Intersection(p0,null,x,!1)),subject.push(x=new Intersection(p1,segment,null,!1)),clip.push(x.o=new Intersection(p1,null,x,!0))}}),subject.length){for(clip.sort(compareIntersection),rejoin_link(subject),rejoin_link(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}};function rejoin_link(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}var polygonContains_sum=adder();function longitude(point){return abs(point[0])<=src_math_pi?point[0]:math_sign(point[0])*((abs(point[0])+src_math_pi)%src_math_tau-src_math_pi)}var polygonContains=function(polygon,point){var lambda=longitude(point),phi=point[1],sinPhi=math_sin(phi),normal=[math_sin(lambda),-math_cos(lambda),0],angle=0,winding=0;polygonContains_sum.reset(),1===sinPhi?phi=src_math_halfPi+math_epsilon:-1===sinPhi&&(phi=-src_math_halfPi-math_epsilon);for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=longitude(point0),phi0=point0[1]/2+quarterPi,sinPhi0=math_sin(phi0),cosPhi0=math_cos(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=longitude(point1),phi1=point1[1]/2+quarterPi,sinPhi1=math_sin(phi1),cosPhi1=math_cos(phi1),delta=lambda1-lambda0,sign=delta>=0?1:-1,absDelta=sign*delta,antimeridian=absDelta>src_math_pi,k=sinPhi0*sinPhi1;if(polygonContains_sum.add(atan2(k*sign*math_sin(absDelta),cosPhi0*cosPhi1+k*math_cos(absDelta))),angle+=antimeridian?delta+sign*src_math_tau:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian_cartesian(point0),cartesian_cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*asin(intersection[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle<-math_epsilon||angle<math_epsilon&&polygonContains_sum<-math_epsilon)^1&winding},src_clip=function(pointVisible,clipLine,interpolate,start){return function(sink){var polygon,segments,ring,line=clipLine(sink),ringBuffer=clip_buffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=src_merge(segments);var startInside=polygonContains(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),rejoin(segments,clip_compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point(lambda,phi){pointVisible(lambda,phi)&&sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]),ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if((m=(segment=ringSegments[0]).length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}return clip}};function validSegment(segment){return segment.length>1}function clip_compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-src_math_halfPi-math_epsilon:src_math_halfPi-a[1])-((b=b.x)[0]<0?b[1]-src_math_halfPi-math_epsilon:src_math_halfPi-b[1])}src_clip(function(){return!0},function(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?src_math_pi:-src_math_pi,delta=abs(lambda1-lambda0);abs(delta-src_math_pi)<math_epsilon?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?src_math_halfPi:-src_math_halfPi),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=src_math_pi&&(abs(lambda0-sign0)<math_epsilon&&(lambda0-=sign0*math_epsilon),abs(lambda1-sign1)<math_epsilon&&(lambda1-=sign1*math_epsilon),phi0=function(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=math_sin(lambda0-lambda1);return abs(sinLambda0Lambda1)>math_epsilon?atan((math_sin(phi0)*(cosPhi1=math_cos(phi1))*math_sin(lambda1)-math_sin(phi1)*(cosPhi0=math_cos(phi0))*math_sin(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}},function(from,to,direction,stream){var phi;if(null==from)phi=direction*src_math_halfPi,stream.point(-src_math_pi,phi),stream.point(0,phi),stream.point(src_math_pi,phi),stream.point(src_math_pi,0),stream.point(src_math_pi,-phi),stream.point(0,-phi),stream.point(-src_math_pi,-phi),stream.point(-src_math_pi,0),stream.point(-src_math_pi,phi);else if(abs(from[0]-to[0])>math_epsilon){var lambda=from[0]<to[0]?src_math_pi:-src_math_pi;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])},[-src_math_pi,-src_math_halfPi]);adder();adder(),adder();function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y),this._point=1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,src_math_tau)}},result:noop_noop};adder();function PathString(){this._string=[]}function string_circle(radius){return"m0,"+radius+"a"+radius+","+radius+" 0 1,1 0,"+-2*radius+"a"+radius+","+radius+" 0 1,1 0,"+2*radius+"z"}PathString.prototype={_radius:4.5,_circle:string_circle(4.5),pointRadius:function(_){return(_=+_)!==this._radius&&(this._radius=_,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._string.push("M",x,",",y),this._point=1;break;case 1:this._string.push("L",x,",",y);break;default:null==this._circle&&(this._circle=string_circle(this._radius)),this._string.push("M",x,",",y,this._circle)}},result:function(){if(this._string.length){var result=this._string.join("");return this._string=[],result}return null}};function transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};math_cos(30*radians);transformer({point:function(x,y){this.stream.point(x*radians,y*radians)}});function azimuthalRaw(scale){return function(x,y){var cx=math_cos(x),cy=math_cos(y),k=scale(cx*cy);return[k*cy*math_sin(x),k*math_sin(y)]}}function azimuthalInvert(angle){return function(x,y){var z=sqrt(x*x+y*y),c=angle(z),sc=math_sin(c),cc=math_cos(c);return[atan2(x*sc,z*cc),asin(z&&y*sc/z)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(cxcy){return sqrt(2/(1+cxcy))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(z){return 2*asin(z/2)});var azimuthalEquidistantRaw=azimuthalRaw(function(c){return(c=acos(c))&&c/math_sin(c)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(z){return z});function mercatorRaw(lambda,phi){return[lambda,log(tan((src_math_halfPi+phi)/2))]}mercatorRaw.invert=function(x,y){return[x,2*atan(exp(y))-src_math_halfPi]};function equirectangularRaw(lambda,phi){return[lambda,phi]}equirectangularRaw.invert=equirectangularRaw;var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt(3)/2;function equalEarthRaw(lambda,phi){var l=asin(M*math_sin(phi)),l2=l*l,l6=l2*l2*l2;return[lambda*math_cos(l)/(M*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))),l*(A1+A2*l2+l6*(A3+A4*l2))]}equalEarthRaw.invert=function(x,y){for(var delta,l=y,l2=l*l,l6=l2*l2*l2,i=0;i<12&&(l6=(l2=(l-=delta=(l*(A1+A2*l2+l6*(A3+A4*l2))-y)/(A1+3*A2*l2+l6*(7*A3+9*A4*l2)))*l)*l2*l2,!(abs(delta)<math_epsilon2));++i);return[M*x*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))/math_cos(l),asin(math_sin(l)/M)]};function gnomonicRaw(x,y){var cy=math_cos(y),k=math_cos(x)*cy;return[cy*math_sin(x)/k,math_sin(y)/k]}gnomonicRaw.invert=azimuthalInvert(atan);function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(phi4*(.003971*phi2-.001529*phi4)-.013791)),phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))]}naturalEarth1Raw.invert=function(x,y){var delta,phi=y,i=25;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))-y)/(1.007226+phi2*(.045255+phi4*(.259866*phi2-.311325-.005916*11*phi4)))}while(abs(delta)>math_epsilon&&--i>0);return[x/(.8707+(phi2=phi*phi)*(phi2*(phi2*phi2*phi2*(.003971-.001529*phi2)-.013791)-.131979)),phi]};function orthographicRaw(x,y){return[math_cos(y)*math_sin(x),math_sin(y)]}orthographicRaw.invert=azimuthalInvert(asin);function stereographicRaw(x,y){var cy=math_cos(y),k=1+math_cos(x)*cy;return[cy*math_sin(x)/k,math_sin(y)/k]}stereographicRaw.invert=azimuthalInvert(function(z){return 2*atan(z)});function transverseMercatorRaw(lambda,phi){return[log(tan((src_math_halfPi+phi)/2)),-lambda]}transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(exp(x))-src_math_halfPi]};function count_count(node){var sum=0,children=node.children,i=children&&children.length;if(i)for(;--i>=0;)sum+=children[i].value;else sum=1;node.value=sum}function hierarchy(data,children){var node,child,childs,i,n,root=new hierarchy_Node(data),valued=+data.value&&(root.value=data.value),nodes=[root];for(null==children&&(children=defaultChildren);node=nodes.pop();)if(valued&&(node.value=+node.data.value),(childs=children(node.data))&&(n=childs.length))for(node.children=new Array(n),i=n-1;i>=0;--i)nodes.push(child=node.children[i]=new hierarchy_Node(childs[i])),child.parent=node,child.depth=node.depth+1;return root.eachBefore(computeHeight)}function defaultChildren(d){return d.children}function copyData(node){node.data=node.data.data}function computeHeight(node){var height=0;do{node.height=height}while((node=node.parent)&&node.height<++height)}function hierarchy_Node(data){this.data=data,this.depth=this.height=0,this.parent=null}hierarchy_Node.prototype=hierarchy.prototype={constructor:hierarchy_Node,count:function(){return this.eachAfter(count_count)},each:function(callback){var current,children,i,n,node=this,next=[node];do{for(current=next.reverse(),next=[];node=current.pop();)if(callback(node),children=node.children)for(i=0,n=children.length;i<n;++i)next.push(children[i])}while(next.length);return this},eachAfter:function(callback){for(var children,i,n,node=this,nodes=[node],next=[];node=nodes.pop();)if(next.push(node),children=node.children)for(i=0,n=children.length;i<n;++i)nodes.push(children[i]);for(;node=next.pop();)callback(node);return this},eachBefore:function(callback){for(var children,i,node=this,nodes=[node];node=nodes.pop();)if(callback(node),children=node.children)for(i=children.length-1;i>=0;--i)nodes.push(children[i]);return this},sum:function(value){return this.eachAfter(function(node){for(var sum=+value(node.data)||0,children=node.children,i=children&&children.length;--i>=0;)sum+=children[i].value;node.value=sum})},sort:function(compare){return this.eachBefore(function(node){node.children&&node.children.sort(compare)})},path:function(end){for(var start=this,ancestor=function(a,b){if(a===b)return a;var aNodes=a.ancestors(),bNodes=b.ancestors(),c=null;a=aNodes.pop(),b=bNodes.pop();for(;a===b;)c=a,a=aNodes.pop(),b=bNodes.pop();return c}(start,end),nodes=[start];start!==ancestor;)start=start.parent,nodes.push(start);for(var k=nodes.length;end!==ancestor;)nodes.splice(k,0,end),end=end.parent;return nodes},ancestors:function(){for(var node=this,nodes=[node];node=node.parent;)nodes.push(node);return nodes},descendants:function(){var nodes=[];return this.each(function(node){nodes.push(node)}),nodes},leaves:function(){var leaves=[];return this.eachBefore(function(node){node.children||leaves.push(node)}),leaves},links:function(){var root=this,links=[];return root.each(function(node){node!==root&&links.push({source:node.parent,target:node})}),links},copy:function(){return hierarchy(this).eachBefore(copyData)}};Array.prototype.slice;var dice=function(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;++i<n;)(node=nodes[i]).y0=y0,node.y1=y1,node.x0=x0,node.x1=x0+=node.value*k};function TreeNode(node,i){this._=node,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=i}TreeNode.prototype=Object.create(hierarchy_Node.prototype);var treemap_slice=function(parent,x0,y0,x1,y1){for(var node,nodes=parent.children,i=-1,n=nodes.length,k=parent.value&&(y1-y0)/parent.value;++i<n;)(node=nodes[i]).x0=x0,node.x1=x1,node.y0=y0,node.y1=y0+=node.value*k},squarify_phi=(1+Math.sqrt(5))/2;function squarifyRatio(ratio,parent,x0,y0,x1,y1){for(var row,nodeValue,dx,dy,sumValue,minValue,maxValue,newRatio,minRatio,alpha,beta,rows=[],nodes=parent.children,i0=0,i1=0,n=nodes.length,value=parent.value;i0<n;){dx=x1-x0,dy=y1-y0;do{sumValue=nodes[i1++].value}while(!sumValue&&i1<n);for(minValue=maxValue=sumValue,beta=sumValue*sumValue*(alpha=Math.max(dy/dx,dx/dy)/(value*ratio)),minRatio=Math.max(maxValue/beta,beta/minValue);i1<n;++i1){if(sumValue+=nodeValue=nodes[i1].value,nodeValue<minValue&&(minValue=nodeValue),nodeValue>maxValue&&(maxValue=nodeValue),beta=sumValue*sumValue*alpha,(newRatio=Math.max(maxValue/beta,beta/minValue))>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}rows.push(row={value:sumValue,dice:dx<dy,children:nodes.slice(i0,i1)}),row.dice?dice(row,x0,y0,x1,value?y0+=dy*sumValue/value:y1):treemap_slice(row,x0,y0,value?x0+=dx*sumValue/value:x1,y1),value-=sumValue,i0=i1}return rows}(function custom(ratio){function squarify(parent,x0,y0,x1,y1){squarifyRatio(ratio,parent,x0,y0,x1,y1)}return squarify.ratio=function(x){return custom((x=+x)>1?x:1)},squarify})(squarify_phi),function custom(ratio){function resquarify(parent,x0,y0,x1,y1){if((rows=parent._squarify)&&rows.ratio===ratio)for(var rows,row,nodes,i,n,j=-1,m=rows.length,value=parent.value;++j<m;){for(nodes=(row=rows[j]).children,i=row.value=0,n=nodes.length;i<n;++i)row.value+=nodes[i].value;row.dice?dice(row,x0,y0,x1,y0+=(y1-y0)*row.value/value):treemap_slice(row,x0,y0,x0+=(x1-x0)*row.value/value,y1),value-=row.value}else parent._squarify=rows=squarifyRatio(ratio,parent,x0,y0,x1,y1),rows.ratio=ratio}return resquarify.ratio=function(x){return custom((x=+x)>1?x:1)},resquarify}(squarify_phi);var src_defaultSource=function(){return Math.random()},src_normal=(function sourceRandomUniform(source){function randomUniform(min,max){return min=null==min?0:+min,max=null==max?1:+max,1===arguments.length?(max=min,min=0):max-=min,function(){return source()*max+min}}return randomUniform.source=sourceRandomUniform,randomUniform}(src_defaultSource),function sourceRandomNormal(source){function randomNormal(mu,sigma){var x,r;return mu=null==mu?0:+mu,sigma=null==sigma?1:+sigma,function(){var y;if(null!=x)y=x,x=null;else do{x=2*source()-1,y=2*source()-1,r=x*x+y*y}while(!r||r>1);return mu+sigma*y*Math.sqrt(-2*Math.log(r)/r)}}return randomNormal.source=sourceRandomNormal,randomNormal}(src_defaultSource)),irwinHall=(function sourceRandomLogNormal(source){function randomLogNormal(){var randomNormal=src_normal.source(source).apply(this,arguments);return function(){return Math.exp(randomNormal())}}return randomLogNormal.source=sourceRandomLogNormal,randomLogNormal}(src_defaultSource),function sourceRandomIrwinHall(source){function randomIrwinHall(n){return function(){for(var sum=0,i=0;i<n;++i)sum+=source();return sum}}return randomIrwinHall.source=sourceRandomIrwinHall,randomIrwinHall}(src_defaultSource));(function sourceRandomBates(source){function randomBates(n){var randomIrwinHall=irwinHall.source(source)(n);return function(){return randomIrwinHall()/n}}return randomBates.source=sourceRandomBates,randomBates})(src_defaultSource),function sourceRandomExponential(source){function randomExponential(lambda){return function(){return-Math.log(1-source())/lambda}}return randomExponential.source=sourceRandomExponential,randomExponential}(src_defaultSource);var d3_scale_src_array_array=Array.prototype;d3_scale_src_array_array.map,d3_scale_src_array_array.slice;var interval_t0=new Date,interval_t1=new Date;function newInterval(floori,offseti,count,field){function interval(date){return floori(date=new Date(+date)),date}return interval.floor=interval,interval.ceil=function(date){return floori(date=new Date(date-1)),offseti(date,1),floori(date),date},interval.round=function(date){var d0=interval(date),d1=interval.ceil(date);return date-d0<d1-date?d0:d1},interval.offset=function(date,step){return offseti(date=new Date(+date),null==step?1:Math.floor(step)),date},interval.range=function(start,stop,step){var previous,range=[];if(start=interval.ceil(start),step=null==step?1:Math.floor(step),!(start<stop&&step>0))return range;do{range.push(previous=new Date(+start)),offseti(start,step),floori(start)}while(previous<start&&start<stop);return range},interval.filter=function(test){return newInterval(function(date){if(date>=date)for(;floori(date),!test(date);)date.setTime(date-1)},function(date,step){if(date>=date)if(step<0)for(;++step<=0;)for(;offseti(date,-1),!test(date););else for(;--step>=0;)for(;offseti(date,1),!test(date););})},count&&(interval.count=function(start,end){return interval_t0.setTime(+start),interval_t1.setTime(+end),floori(interval_t0),floori(interval_t1),Math.floor(count(interval_t0,interval_t1))},interval.every=function(step){return step=Math.floor(step),isFinite(step)&&step>0?step>1?interval.filter(field?function(d){return field(d)%step==0}:function(d){return interval.count(0,d)%step==0}):interval:null}),interval}var millisecond_millisecond=newInterval(function(){},function(date,step){date.setTime(+date+step)},function(start,end){return end-start});millisecond_millisecond.every=function(k){return k=Math.floor(k),isFinite(k)&&k>0?k>1?newInterval(function(date){date.setTime(Math.floor(date/k)*k)},function(date,step){date.setTime(+date+step*k)},function(start,end){return(end-start)/k}):millisecond_millisecond:null};millisecond_millisecond.range;var durationMinute=6e4,durationWeek=6048e5,second_second=newInterval(function(date){date.setTime(date-date.getMilliseconds())},function(date,step){date.setTime(+date+1e3*step)},function(start,end){return(end-start)/1e3},function(date){return date.getUTCSeconds()}),minute_minute=(second_second.range,newInterval(function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds())},function(date,step){date.setTime(+date+step*durationMinute)},function(start,end){return(end-start)/durationMinute},function(date){return date.getMinutes()})),hour_hour=(minute_minute.range,newInterval(function(date){date.setTime(date-date.getMilliseconds()-1e3*date.getSeconds()-date.getMinutes()*durationMinute)},function(date,step){date.setTime(+date+36e5*step)},function(start,end){return(end-start)/36e5},function(date){return date.getHours()})),day_day=(hour_hour.range,newInterval(function(date){date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+step)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/864e5},function(date){return date.getDate()-1})),src_day=day_day;day_day.range;function weekday(i){return newInterval(function(date){date.setDate(date.getDate()-(date.getDay()+7-i)%7),date.setHours(0,0,0,0)},function(date,step){date.setDate(date.getDate()+7*step)},function(start,end){return(end-start-(end.getTimezoneOffset()-start.getTimezoneOffset())*durationMinute)/durationWeek})}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),month_month=(sunday.range,monday.range,tuesday.range,wednesday.range,thursday.range,friday.range,saturday.range,newInterval(function(date){date.setDate(1),date.setHours(0,0,0,0)},function(date,step){date.setMonth(date.getMonth()+step)},function(start,end){return end.getMonth()-start.getMonth()+12*(end.getFullYear()-start.getFullYear())},function(date){return date.getMonth()})),year_year=(month_month.range,newInterval(function(date){date.setMonth(0,1),date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step)},function(start,end){return end.getFullYear()-start.getFullYear()},function(date){return date.getFullYear()}));year_year.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval(function(date){date.setFullYear(Math.floor(date.getFullYear()/k)*k),date.setMonth(0,1),date.setHours(0,0,0,0)},function(date,step){date.setFullYear(date.getFullYear()+step*k)}):null};var src_year=year_year,utcMinute=(year_year.range,newInterval(function(date){date.setUTCSeconds(0,0)},function(date,step){date.setTime(+date+step*durationMinute)},function(start,end){return(end-start)/durationMinute},function(date){return date.getUTCMinutes()})),utcHour=(utcMinute.range,newInterval(function(date){date.setUTCMinutes(0,0,0)},function(date,step){date.setTime(+date+36e5*step)},function(start,end){return(end-start)/36e5},function(date){return date.getUTCHours()})),utcDay=(utcHour.range,newInterval(function(date){date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+step)},function(start,end){return(end-start)/864e5},function(date){return date.getUTCDate()-1})),src_utcDay=utcDay;utcDay.range;function utcWeekday(i){return newInterval(function(date){date.setUTCDate(date.getUTCDate()-(date.getUTCDay()+7-i)%7),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCDate(date.getUTCDate()+7*step)},function(start,end){return(end-start)/durationWeek})}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcMonth=(utcSunday.range,utcMonday.range,utcTuesday.range,utcWednesday.range,utcThursday.range,utcFriday.range,utcSaturday.range,newInterval(function(date){date.setUTCDate(1),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCMonth(date.getUTCMonth()+step)},function(start,end){return end.getUTCMonth()-start.getUTCMonth()+12*(end.getUTCFullYear()-start.getUTCFullYear())},function(date){return date.getUTCMonth()})),utcYear=(utcMonth.range,newInterval(function(date){date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step)},function(start,end){return end.getUTCFullYear()-start.getUTCFullYear()},function(date){return date.getUTCFullYear()}));utcYear.every=function(k){return isFinite(k=Math.floor(k))&&k>0?newInterval(function(date){date.setUTCFullYear(Math.floor(date.getUTCFullYear()/k)*k),date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0)},function(date,step){date.setUTCFullYear(date.getUTCFullYear()+step*k)}):null};var src_utcYear=utcYear;utcYear.range;function localDate(d){if(0<=d.y&&d.y<100){var date=new Date(-1,d.m,d.d,d.H,d.M,d.S,d.L);return date.setFullYear(d.y),date}return new Date(d.y,d.m,d.d,d.H,d.M,d.S,d.L)}function utcDate(d){if(0<=d.y&&d.y<100){var date=new Date(Date.UTC(-1,d.m,d.d,d.H,d.M,d.S,d.L));return date.setUTCFullYear(d.y),date}return new Date(Date.UTC(d.y,d.m,d.d,d.H,d.M,d.S,d.L))}function newYear(y){return{y:y,m:0,d:1,H:0,M:0,S:0,L:0}}var src_defaultLocale_locale,utcFormat,utcParse,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function locale_pad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function requote(s){return s.replace(requoteRe,"\\$&")}function formatRe(names){return new RegExp("^(?:"+names.map(requote).join("|")+")","i")}function formatLookup(names){for(var map={},i=-1,n=names.length;++i<n;)map[names[i].toLowerCase()]=i;return map}function parseWeekdayNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.w=+n[0],i+n[0].length):-1}function parseWeekdayNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+1));return n?(d.u=+n[0],i+n[0].length):-1}function parseWeekNumberSunday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.U=+n[0],i+n[0].length):-1}function parseWeekNumberISO(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.V=+n[0],i+n[0].length):-1}function parseWeekNumberMonday(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.W=+n[0],i+n[0].length):-1}function parseFullYear(d,string,i){var n=numberRe.exec(string.slice(i,i+4));return n?(d.y=+n[0],i+n[0].length):-1}function parseYear(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function parseZone(d,string,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i,i+6));return n?(d.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function parseMonthNumber(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.m=n[0]-1,i+n[0].length):-1}function parseDayOfMonth(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.d=+n[0],i+n[0].length):-1}function parseDayOfYear(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.m=0,d.d=+n[0],i+n[0].length):-1}function parseHour24(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.H=+n[0],i+n[0].length):-1}function parseMinutes(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.M=+n[0],i+n[0].length):-1}function parseSeconds(d,string,i){var n=numberRe.exec(string.slice(i,i+2));return n?(d.S=+n[0],i+n[0].length):-1}function parseMilliseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+3));return n?(d.L=+n[0],i+n[0].length):-1}function parseMicroseconds(d,string,i){var n=numberRe.exec(string.slice(i,i+6));return n?(d.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function parseLiteralPercent(d,string,i){var n=percentRe.exec(string.slice(i,i+1));return n?i+n[0].length:-1}function parseUnixTimestamp(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=+n[0],i+n[0].length):-1}function parseUnixTimestampSeconds(d,string,i){var n=numberRe.exec(string.slice(i));return n?(d.Q=1e3*+n[0],i+n[0].length):-1}function formatDayOfMonth(d,p){return locale_pad(d.getDate(),p,2)}function formatHour24(d,p){return locale_pad(d.getHours(),p,2)}function formatHour12(d,p){return locale_pad(d.getHours()%12||12,p,2)}function formatDayOfYear(d,p){return locale_pad(1+src_day.count(src_year(d),d),p,3)}function formatMilliseconds(d,p){return locale_pad(d.getMilliseconds(),p,3)}function formatMicroseconds(d,p){return formatMilliseconds(d,p)+"000"}function formatMonthNumber(d,p){return locale_pad(d.getMonth()+1,p,2)}function formatMinutes(d,p){return locale_pad(d.getMinutes(),p,2)}function formatSeconds(d,p){return locale_pad(d.getSeconds(),p,2)}function formatWeekdayNumberMonday(d){var day=d.getDay();return 0===day?7:day}function formatWeekNumberSunday(d,p){return locale_pad(sunday.count(src_year(d),d),p,2)}function formatWeekNumberISO(d,p){var day=d.getDay();return d=day>=4||0===day?thursday(d):thursday.ceil(d),locale_pad(thursday.count(src_year(d),d)+(4===src_year(d).getDay()),p,2)}function formatWeekdayNumberSunday(d){return d.getDay()}function formatWeekNumberMonday(d,p){return locale_pad(monday.count(src_year(d),d),p,2)}function locale_formatYear(d,p){return locale_pad(d.getFullYear()%100,p,2)}function formatFullYear(d,p){return locale_pad(d.getFullYear()%1e4,p,4)}function formatZone(d){var z=d.getTimezoneOffset();return(z>0?"-":(z*=-1,"+"))+locale_pad(z/60|0,"0",2)+locale_pad(z%60,"0",2)}function formatUTCDayOfMonth(d,p){return locale_pad(d.getUTCDate(),p,2)}function formatUTCHour24(d,p){return locale_pad(d.getUTCHours(),p,2)}function formatUTCHour12(d,p){return locale_pad(d.getUTCHours()%12||12,p,2)}function formatUTCDayOfYear(d,p){return locale_pad(1+src_utcDay.count(src_utcYear(d),d),p,3)}function formatUTCMilliseconds(d,p){return locale_pad(d.getUTCMilliseconds(),p,3)}function formatUTCMicroseconds(d,p){return formatUTCMilliseconds(d,p)+"000"}function formatUTCMonthNumber(d,p){return locale_pad(d.getUTCMonth()+1,p,2)}function formatUTCMinutes(d,p){return locale_pad(d.getUTCMinutes(),p,2)}function formatUTCSeconds(d,p){return locale_pad(d.getUTCSeconds(),p,2)}function formatUTCWeekdayNumberMonday(d){var dow=d.getUTCDay();return 0===dow?7:dow}function formatUTCWeekNumberSunday(d,p){return locale_pad(utcSunday.count(src_utcYear(d),d),p,2)}function formatUTCWeekNumberISO(d,p){var day=d.getUTCDay();return d=day>=4||0===day?utcThursday(d):utcThursday.ceil(d),locale_pad(utcThursday.count(src_utcYear(d),d)+(4===src_utcYear(d).getUTCDay()),p,2)}function formatUTCWeekdayNumberSunday(d){return d.getUTCDay()}function formatUTCWeekNumberMonday(d,p){return locale_pad(utcMonday.count(src_utcYear(d),d),p,2)}function formatUTCYear(d,p){return locale_pad(d.getUTCFullYear()%100,p,2)}function formatUTCFullYear(d,p){return locale_pad(d.getUTCFullYear()%1e4,p,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(d){return+d}function formatUnixTimestampSeconds(d){return Math.floor(+d/1e3)}!function(definition){src_defaultLocale_locale=function(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_weekdays=locale.days,locale_shortWeekdays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths,periodRe=formatRe(locale_periods),periodLookup=formatLookup(locale_periods),weekdayRe=formatRe(locale_weekdays),weekdayLookup=formatLookup(locale_weekdays),shortWeekdayRe=formatRe(locale_shortWeekdays),shortWeekdayLookup=formatLookup(locale_shortWeekdays),monthRe=formatRe(locale_months),monthLookup=formatLookup(locale_months),shortMonthRe=formatRe(locale_shortMonths),shortMonthLookup=formatLookup(locale_shortMonths),formats={a:function(d){return locale_shortWeekdays[d.getDay()]},A:function(d){return locale_weekdays[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(d){return locale_periods[+(d.getHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:locale_formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},utcFormats={a:function(d){return locale_shortWeekdays[d.getUTCDay()]},A:function(d){return locale_weekdays[d.getUTCDay()]},b:function(d){return locale_shortMonths[d.getUTCMonth()]},B:function(d){return locale_months[d.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(d){return locale_periods[+(d.getUTCHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},parses={a:function(d,string,i){var n=shortWeekdayRe.exec(string.slice(i));return n?(d.w=shortWeekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},A:function(d,string,i){var n=weekdayRe.exec(string.slice(i));return n?(d.w=weekdayLookup[n[0].toLowerCase()],i+n[0].length):-1},b:function(d,string,i){var n=shortMonthRe.exec(string.slice(i));return n?(d.m=shortMonthLookup[n[0].toLowerCase()],i+n[0].length):-1},B:function(d,string,i){var n=monthRe.exec(string.slice(i));return n?(d.m=monthLookup[n[0].toLowerCase()],i+n[0].length):-1},c:function(d,string,i){return parseSpecifier(d,locale_dateTime,string,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(d,string,i){var n=periodRe.exec(string.slice(i));return n?(d.p=periodLookup[n[0].toLowerCase()],i+n[0].length):-1},Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(d,string,i){return parseSpecifier(d,locale_date,string,i)},X:function(d,string,i){return parseSpecifier(d,locale_time,string,i)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(specifier,formats){return function(date){var c,pad,format,string=[],i=-1,j=0,n=specifier.length;for(date instanceof Date||(date=new Date(+date));++i<n;)37===specifier.charCodeAt(i)&&(string.push(specifier.slice(j,i)),null!=(pad=pads[c=specifier.charAt(++i)])?c=specifier.charAt(++i):pad="e"===c?" ":"0",(format=formats[c])&&(c=format(date,pad)),string.push(c),j=i+1);return string.push(specifier.slice(j,i)),string.join("")}}function newParse(specifier,newDate){return function(string){var week,day,d=newYear(1900);if(parseSpecifier(d,specifier,string+="",0)!=string.length)return null;if("Q"in d)return new Date(d.Q);if("p"in d&&(d.H=d.H%12+12*d.p),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(day=(week=utcDate(newYear(d.y))).getUTCDay(),week=day>4||0===day?utcMonday.ceil(week):utcMonday(week),week=src_utcDay.offset(week,7*(d.V-1)),d.y=week.getUTCFullYear(),d.m=week.getUTCMonth(),d.d=week.getUTCDate()+(d.w+6)%7):(day=(week=newDate(newYear(d.y))).getDay(),week=day>4||0===day?monday.ceil(week):monday(week),week=src_day.offset(week,7*(d.V-1)),d.y=week.getFullYear(),d.m=week.getMonth(),d.d=week.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),day="Z"in d?utcDate(newYear(d.y)).getUTCDay():newDate(newYear(d.y)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(day+5)%7:d.w+7*d.U-(day+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,utcDate(d)):newDate(d)}}function parseSpecifier(d,specifier,string,j){for(var c,parse,i=0,n=specifier.length,m=string.length;i<n;){if(j>=m)return-1;if(37===(c=specifier.charCodeAt(i++))){if(c=specifier.charAt(i++),!(parse=parses[c in pads?specifier.charAt(i++):c])||(j=parse(d,string,j))<0)return-1}else if(c!=string.charCodeAt(j++))return-1}return j}return formats.x=newFormat(locale_date,formats),formats.X=newFormat(locale_time,formats),formats.c=newFormat(locale_dateTime,formats),utcFormats.x=newFormat(locale_date,utcFormats),utcFormats.X=newFormat(locale_time,utcFormats),utcFormats.c=newFormat(locale_dateTime,utcFormats),{format:function(specifier){var f=newFormat(specifier+="",formats);return f.toString=function(){return specifier},f},parse:function(specifier){var p=newParse(specifier+="",localDate);return p.toString=function(){return specifier},p},utcFormat:function(specifier){var f=newFormat(specifier+="",utcFormats);return f.toString=function(){return specifier},f},utcParse:function(specifier){var p=newParse(specifier,utcDate);return p.toString=function(){return specifier},p}}}(definition),src_defaultLocale_locale.format,src_defaultLocale_locale.parse,utcFormat=src_defaultLocale_locale.utcFormat,utcParse=src_defaultLocale_locale.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||utcFormat("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||utcParse("%Y-%m-%dT%H:%M:%S.%LZ");var d3_shape_src_constant=function(x){return function(){return x}},src_math_epsilon=(Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt,1e-12),d3_shape_src_math_pi=Math.PI,d3_shape_src_math_tau=2*d3_shape_src_math_pi;function Linear(context){this._context=context}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:this._context.lineTo(x,y)}}};var curve_linear=function(context){return new Linear(context)};function point_x(p){return p[0]}function point_y(p){return p[1]}var src_line=function(){var x=point_x,y=point_y,defined=d3_shape_src_constant(!0),context=null,curve=curve_linear,output=null;function line(data){var i,d,buffer,n=data.length,defined0=!1;for(null==context&&(output=curve(buffer=src_path())),i=0;i<=n;++i)!(i<n&&defined(d=data[i],i,data))===defined0&&((defined0=!defined0)?output.lineStart():output.lineEnd()),defined0&&output.point(+x(d,i,data),+y(d,i,data));if(buffer)return output=null,buffer+""||null}return line.x=function(_){return arguments.length?(x="function"==typeof _?_:d3_shape_src_constant(+_),line):x},line.y=function(_){return arguments.length?(y="function"==typeof _?_:d3_shape_src_constant(+_),line):y},line.defined=function(_){return arguments.length?(defined="function"==typeof _?_:d3_shape_src_constant(!!_),line):defined},line.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),line):curve},line.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),line):context},line};curveRadial(curve_linear);function Radial(curve){this._curve=curve}function curveRadial(curve){function radial(context){return new Radial(curve(context))}return radial._curve=curve,radial}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,r){this._curve.point(r*Math.sin(a),r*-Math.cos(a))}};Array.prototype.slice;Math.sqrt(1/3);var kr=Math.sin(d3_shape_src_math_pi/10)/Math.sin(7*d3_shape_src_math_pi/10),d3_shape_src_noop=(Math.sin(d3_shape_src_math_tau/10),Math.cos(d3_shape_src_math_tau/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function basis_point(that,x,y){that._context.bezierCurveTo((2*that._x0+that._x1)/3,(2*that._y0+that._y1)/3,(that._x0+2*that._x1)/3,(that._y0+2*that._y1)/3,(that._x0+4*that._x1+x)/6,(that._y0+4*that._y1+y)/6)}function Basis(context){this._context=context}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:basis_point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:basis_point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}};function BasisClosed(context){this._context=context}BasisClosed.prototype={areaStart:d3_shape_src_noop,areaEnd:d3_shape_src_noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x2=x,this._y2=y;break;case 1:this._point=2,this._x3=x,this._y3=y;break;case 2:this._point=3,this._x4=x,this._y4=y,this._context.moveTo((this._x0+4*this._x1+x)/6,(this._y0+4*this._y1+y)/6);break;default:basis_point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}};function BasisOpen(context){this._context=context}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var x0=(this._x0+4*this._x1+x)/6,y0=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(x0,y0):this._context.moveTo(x0,y0);break;case 3:this._point=4;default:basis_point(this,x,y)}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y}};function Bundle(context,beta){this._basis=new Basis(context),this._beta=beta}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var x=this._x,y=this._y,j=x.length-1;if(j>0)for(var t,x0=x[0],y0=y[0],dx=x[j]-x0,dy=y[j]-y0,i=-1;++i<=j;)t=i/j,this._basis.point(this._beta*x[i]+(1-this._beta)*(x0+t*dx),this._beta*y[i]+(1-this._beta)*(y0+t*dy));this._x=this._y=null,this._basis.lineEnd()},point:function(x,y){this._x.push(+x),this._y.push(+y)}};(function custom(beta){function bundle(context){return 1===beta?new Basis(context):new Bundle(context,beta)}return bundle.beta=function(beta){return custom(+beta)},bundle})(.85);function cardinal_point(that,x,y){that._context.bezierCurveTo(that._x1+that._k*(that._x2-that._x0),that._y1+that._k*(that._y2-that._y0),that._x2+that._k*(that._x1-x),that._y2+that._k*(that._y1-y),that._x2,that._y2)}function Cardinal(context,tension){this._context=context,this._k=(1-tension)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cardinal_point(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2,this._x1=x,this._y1=y;break;case 2:this._point=3;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};(function custom(tension){function cardinal(context){return new Cardinal(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal})(0);function CardinalClosed(context,tension){this._context=context,this._k=(1-tension)/6}CardinalClosed.prototype={areaStart:d3_shape_src_noop,areaEnd:d3_shape_src_noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};(function custom(tension){function cardinal(context){return new CardinalClosed(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal})(0);function CardinalOpen(context,tension){this._context=context,this._k=(1-tension)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cardinal_point(this,x,y)}this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};(function custom(tension){function cardinal(context){return new CardinalOpen(context,tension)}return cardinal.tension=function(tension){return custom(+tension)},cardinal})(0);function catmullRom_point(that,x,y){var x1=that._x1,y1=that._y1,x2=that._x2,y2=that._y2;if(that._l01_a>src_math_epsilon){var a=2*that._l01_2a+3*that._l01_a*that._l12_a+that._l12_2a,n=3*that._l01_a*(that._l01_a+that._l12_a);x1=(x1*a-that._x0*that._l12_2a+that._x2*that._l01_2a)/n,y1=(y1*a-that._y0*that._l12_2a+that._y2*that._l01_2a)/n}if(that._l23_a>src_math_epsilon){var b=2*that._l23_2a+3*that._l23_a*that._l12_a+that._l12_2a,m=3*that._l23_a*(that._l23_a+that._l12_a);x2=(x2*b+that._x1*that._l23_2a-x*that._l12_2a)/m,y2=(y2*b+that._y1*that._l23_2a-y*that._l12_2a)/m}that._context.bezierCurveTo(x1,y1,x2,y2,that._x2,that._y2)}function CatmullRom(context,alpha){this._context=context,this._alpha=alpha}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};(function custom(alpha){function catmullRom(context){return alpha?new CatmullRom(context,alpha):new Cardinal(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom})(.5);function CatmullRomClosed(context,alpha){this._context=context,this._alpha=alpha}CatmullRomClosed.prototype={areaStart:d3_shape_src_noop,areaEnd:d3_shape_src_noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=x,this._y3=y;break;case 1:this._point=2,this._context.moveTo(this._x4=x,this._y4=y);break;case 2:this._point=3,this._x5=x,this._y5=y;break;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};(function custom(alpha){function catmullRom(context){return alpha?new CatmullRomClosed(context,alpha):new CardinalClosed(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom})(.5);function CatmullRomOpen(context,alpha){this._context=context,this._alpha=alpha}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){if(x=+x,y=+y,this._point){var x23=this._x2-x,y23=this._y2-y;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(x23*x23+y23*y23,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:catmullRom_point(this,x,y)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=x,this._y0=this._y1,this._y1=this._y2,this._y2=y}};(function custom(alpha){function catmullRom(context){return alpha?new CatmullRomOpen(context,alpha):new CardinalOpen(context,0)}return catmullRom.alpha=function(alpha){return custom(+alpha)},catmullRom})(.5);function LinearClosed(context){this._context=context}LinearClosed.prototype={areaStart:d3_shape_src_noop,areaEnd:d3_shape_src_noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(x,y){x=+x,y=+y,this._point?this._context.lineTo(x,y):(this._point=1,this._context.moveTo(x,y))}};function monotone_sign(x){return x<0?-1:1}function slope3(that,x2,y2){var h0=that._x1-that._x0,h1=x2-that._x1,s0=(that._y1-that._y0)/(h0||h1<0&&-0),s1=(y2-that._y1)/(h1||h0<0&&-0),p=(s0*h1+s1*h0)/(h0+h1);return(monotone_sign(s0)+monotone_sign(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}function slope2(that,t){var h=that._x1-that._x0;return h?(3*(that._y1-that._y0)/h-t)/2:t}function monotone_point(that,t0,t1){var x0=that._x0,y0=that._y0,x1=that._x1,y1=that._y1,dx=(x1-x0)/3;that._context.bezierCurveTo(x0+dx,y0+dx*t0,x1-dx,y1-dx*t1,x1,y1)}function MonotoneX(context){this._context=context}function MonotoneY(context){this._context=new ReflectContext(context)}function ReflectContext(context){this._context=context}function monotoneX(context){return new MonotoneX(context)}function Natural(context){this._context=context}function natural_controlPoints(x){var i,m,n=x.length-1,a=new Array(n),b=new Array(n),r=new Array(n);for(a[0]=0,b[0]=2,r[0]=x[0]+2*x[1],i=1;i<n-1;++i)a[i]=1,b[i]=4,r[i]=4*x[i]+2*x[i+1];for(a[n-1]=2,b[n-1]=7,r[n-1]=8*x[n-1]+x[n],i=1;i<n;++i)m=a[i]/b[i-1],b[i]-=m,r[i]-=m*r[i-1];for(a[n-1]=r[n-1]/b[n-1],i=n-2;i>=0;--i)a[i]=(r[i]-a[i+1])/b[i];for(b[n-1]=(x[n]+a[n-1])/2,i=0;i<n-1;++i)b[i]=2*x[i+1]-a[i+1];return[a,b]}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:monotone_point(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(x,y){var t1=NaN;if(y=+y,(x=+x)!==this._x1||y!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;break;case 2:this._point=3,monotone_point(this,slope2(this,t1=slope3(this,x,y)),t1);break;default:monotone_point(this,this._t0,t1=slope3(this,x,y))}this._x0=this._x1,this._x1=x,this._y0=this._y1,this._y1=y,this._t0=t1}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(x,y){MonotoneX.prototype.point.call(this,y,x)},ReflectContext.prototype={moveTo:function(x,y){this._context.moveTo(y,x)},closePath:function(){this._context.closePath()},lineTo:function(x,y){this._context.lineTo(y,x)},bezierCurveTo:function(x1,y1,x2,y2,x,y){this._context.bezierCurveTo(y1,x1,y2,x2,y,x)}},Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var x=this._x,y=this._y,n=x.length;if(n)if(this._line?this._context.lineTo(x[0],y[0]):this._context.moveTo(x[0],y[0]),2===n)this._context.lineTo(x[1],y[1]);else for(var px=natural_controlPoints(x),py=natural_controlPoints(y),i0=0,i1=1;i1<n;++i0,++i1)this._context.bezierCurveTo(px[0][i0],py[0][i0],px[1][i0],py[1][i0],x[i1],y[i1]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(x,y){this._x.push(+x),this._y.push(+y)}};function Step(context,t){this._context=context,this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(x,y){switch(x=+x,y=+y,this._point){case 0:this._point=1,this._line?this._context.lineTo(x,y):this._context.moveTo(x,y);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,y),this._context.lineTo(x,y);else{var x1=this._x*(1-this._t)+x*this._t;this._context.lineTo(x1,this._y),this._context.lineTo(x1,y)}}this._x=x,this._y=y}};function RedBlackTree(){this._=null}function RedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}function RedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.R=q.L,p.R&&(p.R.U=p),q.L=p}function RedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.L=q.R,p.L&&(p.L.U=p),q.R=p}function RedBlackFirst(node){for(;node.L;)node=node.L;return node}RedBlackTree.prototype={constructor:RedBlackTree,insert:function(after,node){var parent,grandpa,uncle;if(after){if(node.P=after,node.N=after.N,after.N&&(after.N.P=node),after.N=node,after.R){for(after=after.R;after.L;)after=after.L;after.L=node}else after.R=node;parent=after}else this._?(after=RedBlackFirst(this._),node.P=null,node.N=after,after.P=after.L=node,parent=after):(node.P=node.N=null,this._=node,parent=null);for(node.L=node.R=null,node.U=parent,node.C=!0,after=node;parent&&parent.C;)parent===(grandpa=parent.U).L?(uncle=grandpa.R)&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.R&&(RedBlackRotateLeft(this,parent),parent=(after=parent).U),parent.C=!1,grandpa.C=!0,RedBlackRotateRight(this,grandpa)):(uncle=grandpa.L)&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.L&&(RedBlackRotateRight(this,parent),parent=(after=parent).U),parent.C=!1,grandpa.C=!0,RedBlackRotateLeft(this,grandpa)),parent=after.U;this._.C=!1},remove:function(node){node.N&&(node.N.P=node.P),node.P&&(node.P.N=node.N),node.N=node.P=null;var sibling,next,red,parent=node.U,left=node.L,right=node.R;if(next=left?right?RedBlackFirst(right):left:right,parent?parent.L===node?parent.L=next:parent.R=next:this._=next,left&&right?(red=next.C,next.C=node.C,next.L=left,left.U=next,next!==right?(parent=next.U,next.U=node.U,node=next.R,parent.L=node,next.R=right,right.U=next):(next.U=parent,parent=next,node=next.R)):(red=node.C,node=next),node&&(node.U=parent),!red)if(node&&node.C)node.C=!1;else{do{if(node===this._)break;if(node===parent.L){if((sibling=parent.R).C&&(sibling.C=!1,parent.C=!0,RedBlackRotateLeft(this,parent),sibling=parent.R),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.R&&sibling.R.C||(sibling.L.C=!1,sibling.C=!0,RedBlackRotateRight(this,sibling),sibling=parent.R),sibling.C=parent.C,parent.C=sibling.R.C=!1,RedBlackRotateLeft(this,parent),node=this._;break}}else if((sibling=parent.L).C&&(sibling.C=!1,parent.C=!0,RedBlackRotateRight(this,parent),sibling=parent.L),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){sibling.L&&sibling.L.C||(sibling.R.C=!1,sibling.C=!0,RedBlackRotateLeft(this,sibling),sibling=parent.L),sibling.C=parent.C,parent.C=sibling.L.C=!1,RedBlackRotateRight(this,parent),node=this._;break}sibling.C=!0,node=parent,parent=parent.U}while(!node.C);node&&(node.C=!1)}}};var src_RedBlackTree=RedBlackTree;function createEdge(left,right,v0,v1){var edge=[null,null],index=Diagram_edges.push(edge)-1;return edge.left=left,edge.right=right,v0&&setEdgeEnd(edge,left,right,v0),v1&&setEdgeEnd(edge,right,left,v1),cells[left.index].halfedges.push(index),cells[right.index].halfedges.push(index),edge}function createBorderEdge(left,v0,v1){var edge=[v0,v1];return edge.left=left,edge}function setEdgeEnd(edge,left,right,vertex){edge[0]||edge[1]?edge.left===right?edge[1]=vertex:edge[0]=vertex:(edge[0]=vertex,edge.left=left,edge.right=right)}function clipEdge(edge,x0,y0,x1,y1){var r,a=edge[0],b=edge[1],ax=a[0],ay=a[1],t0=0,t1=1,dx=b[0]-ax,dy=b[1]-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return!(t0>0||t1<1)||(t0>0&&(edge[0]=[ax+t0*dx,ay+t0*dy]),t1<1&&(edge[1]=[ax+t1*dx,ay+t1*dy]),!0)}}}}}function connectEdge(edge,x0,y0,x1,y1){var v1=edge[1];if(v1)return!0;var fm,fb,v0=edge[0],left=edge.left,right=edge.right,lx=left[0],ly=left[1],rx=right[0],ry=right[1],fx=(lx+rx)/2,fy=(ly+ry)/2;if(ry===ly){if(fx<x0||fx>=x1)return;if(lx>rx){if(v0){if(v0[1]>=y1)return}else v0=[fx,y0];v1=[fx,y1]}else{if(v0){if(v0[1]<y0)return}else v0=[fx,y1];v1=[fx,y0]}}else if(fb=fy-(fm=(lx-rx)/(ry-ly))*fx,fm<-1||fm>1)if(lx>rx){if(v0){if(v0[1]>=y1)return}else v0=[(y0-fb)/fm,y0];v1=[(y1-fb)/fm,y1]}else{if(v0){if(v0[1]<y0)return}else v0=[(y1-fb)/fm,y1];v1=[(y0-fb)/fm,y0]}else if(ly<ry){if(v0){if(v0[0]>=x1)return}else v0=[x0,fm*x0+fb];v1=[x1,fm*x1+fb]}else{if(v0){if(v0[0]<x0)return}else v0=[x1,fm*x1+fb];v1=[x0,fm*x0+fb]}return edge[0]=v0,edge[1]=v1,!0}function cellHalfedgeAngle(cell,edge){var site=cell.site,va=edge.left,vb=edge.right;return site===vb&&(vb=va,va=site),vb?Math.atan2(vb[1]-va[1],vb[0]-va[0]):(site===va?(va=edge[1],vb=edge[0]):(va=edge[0],vb=edge[1]),Math.atan2(va[0]-vb[0],vb[1]-va[1]))}function cellHalfedgeStart(cell,edge){return edge[+(edge.left!==cell.site)]}function cellHalfedgeEnd(cell,edge){return edge[+(edge.left===cell.site)]}var firstCircle,circlePool=[];function Circle(){RedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(arc){var lArc=arc.P,rArc=arc.N;if(lArc&&rArc){var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite!==rSite){var bx=cSite[0],by=cSite[1],ax=lSite[0]-bx,ay=lSite[1]-by,cx=rSite[0]-bx,cy=rSite[1]-by,d=2*(ax*cy-ay*cx);if(!(d>=-Diagram_epsilon2)){var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x=(cy*ha-ay*hc)/d,y=(ax*hc-cx*ha)/d,circle=circlePool.pop()||new Circle;circle.arc=arc,circle.site=cSite,circle.x=x+bx,circle.y=(circle.cy=y+by)+Math.sqrt(x*x+y*y),arc.circle=circle;for(var before=null,node=Diagram_circles._;node;)if(circle.y<node.y||circle.y===node.y&&circle.x<=node.x){if(!node.L){before=node.P;break}node=node.L}else{if(!node.R){before=node;break}node=node.R}Diagram_circles.insert(before,circle),before||(firstCircle=circle)}}}}function detachCircle(arc){var circle=arc.circle;circle&&(circle.P||(firstCircle=circle.N),Diagram_circles.remove(circle),circlePool.push(circle),RedBlackNode(circle),arc.circle=null)}var beachPool=[];function Beach(){RedBlackNode(this),this.edge=this.site=this.circle=null}function createBeach(site){var beach=beachPool.pop()||new Beach;return beach.site=site,beach}function detachBeach(beach){detachCircle(beach),beaches.remove(beach),beachPool.push(beach),RedBlackNode(beach)}function removeBeach(beach){var circle=beach.circle,x=circle.x,y=circle.cy,vertex=[x,y],previous=beach.P,next=beach.N,disappearing=[beach];detachBeach(beach);for(var lArc=previous;lArc.circle&&Math.abs(x-lArc.circle.x)<Diagram_epsilon&&Math.abs(y-lArc.circle.cy)<Diagram_epsilon;)previous=lArc.P,disappearing.unshift(lArc),detachBeach(lArc),lArc=previous;disappearing.unshift(lArc),detachCircle(lArc);for(var rArc=next;rArc.circle&&Math.abs(x-rArc.circle.x)<Diagram_epsilon&&Math.abs(y-rArc.circle.cy)<Diagram_epsilon;)next=rArc.N,disappearing.push(rArc),detachBeach(rArc),rArc=next;disappearing.push(rArc),detachCircle(rArc);var iArc,nArcs=disappearing.length;for(iArc=1;iArc<nArcs;++iArc)rArc=disappearing[iArc],lArc=disappearing[iArc-1],setEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);lArc=disappearing[0],(rArc=disappearing[nArcs-1]).edge=createEdge(lArc.site,rArc.site,null,vertex),attachCircle(lArc),attachCircle(rArc)}function addBeach(site){for(var lArc,rArc,dxl,dxr,x=site[0],directrix=site[1],node=beaches._;node;)if((dxl=leftBreakPoint(node,directrix)-x)>Diagram_epsilon)node=node.L;else{if(!((dxr=x-rightBreakPoint(node,directrix))>Diagram_epsilon)){dxl>-Diagram_epsilon?(lArc=node.P,rArc=node):dxr>-Diagram_epsilon?(lArc=node,rArc=node.N):lArc=rArc=node;break}if(!node.R){lArc=node;break}node=node.R}!function(site){cells[site.index]={site:site,halfedges:[]}}(site);var newArc=createBeach(site);if(beaches.insert(lArc,newArc),lArc||rArc){if(lArc===rArc)return detachCircle(lArc),rArc=createBeach(lArc.site),beaches.insert(newArc,rArc),newArc.edge=rArc.edge=createEdge(lArc.site,newArc.site),attachCircle(lArc),void attachCircle(rArc);if(rArc){detachCircle(lArc),detachCircle(rArc);var lSite=lArc.site,ax=lSite[0],ay=lSite[1],bx=site[0]-ax,by=site[1]-ay,rSite=rArc.site,cx=rSite[0]-ax,cy=rSite[1]-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex=[(cy*hb-by*hc)/d+ax,(bx*hc-cx*hb)/d+ay];setEdgeEnd(rArc.edge,lSite,rSite,vertex),newArc.edge=createEdge(lSite,site,null,vertex),rArc.edge=createEdge(site,rSite,null,vertex),attachCircle(lArc),attachCircle(rArc)}else newArc.edge=createEdge(lArc.site,newArc.site)}}function leftBreakPoint(arc,directrix){var site=arc.site,rfocx=site[0],rfocy=site[1],pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-1/0;var lfocx=(site=lArc.site)[0],lfocy=site[1],plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;return aby2?(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx:(rfocx+lfocx)/2}function rightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return leftBreakPoint(rArc,directrix);var site=arc.site;return site[1]===directrix?site[0]:1/0}var beaches,cells,Diagram_circles,Diagram_edges,Diagram_epsilon=1e-6,Diagram_epsilon2=1e-12;function lexicographic(a,b){return b[1]-a[1]||b[0]-a[0]}function Diagram(sites,extent){var x,y,circle,site=sites.sort(lexicographic).pop();for(Diagram_edges=[],cells=new Array(sites.length),beaches=new src_RedBlackTree,Diagram_circles=new src_RedBlackTree;;)if(circle=firstCircle,site&&(!circle||site[1]<circle.y||site[1]===circle.y&&site[0]<circle.x))site[0]===x&&site[1]===y||(addBeach(site),x=site[0],y=site[1]),site=sites.pop();else{if(!circle)break;removeBeach(circle.arc)}if(function(){for(var cell,halfedges,j,m,i=0,n=cells.length;i<n;++i)if((cell=cells[i])&&(m=(halfedges=cell.halfedges).length)){var index=new Array(m),array=new Array(m);for(j=0;j<m;++j)index[j]=j,array[j]=cellHalfedgeAngle(cell,Diagram_edges[halfedges[j]]);for(index.sort(function(i,j){return array[j]-array[i]}),j=0;j<m;++j)array[j]=halfedges[index[j]];for(j=0;j<m;++j)halfedges[j]=array[j]}}(),extent){var x0=+extent[0][0],y0=+extent[0][1],x1=+extent[1][0],y1=+extent[1][1];!function(x0,y0,x1,y1){for(var edge,i=Diagram_edges.length;i--;)connectEdge(edge=Diagram_edges[i],x0,y0,x1,y1)&&clipEdge(edge,x0,y0,x1,y1)&&(Math.abs(edge[0][0]-edge[1][0])>Diagram_epsilon||Math.abs(edge[0][1]-edge[1][1])>Diagram_epsilon)||delete Diagram_edges[i]}(x0,y0,x1,y1),function(x0,y0,x1,y1){var iCell,cell,site,iHalfedge,halfedges,nHalfedges,start,startX,startY,end,endX,endY,nCells=cells.length,cover=!0;for(iCell=0;iCell<nCells;++iCell)if(cell=cells[iCell]){for(site=cell.site,iHalfedge=(halfedges=cell.halfedges).length;iHalfedge--;)Diagram_edges[halfedges[iHalfedge]]||halfedges.splice(iHalfedge,1);for(iHalfedge=0,nHalfedges=halfedges.length;iHalfedge<nHalfedges;)endX=(end=cellHalfedgeEnd(cell,Diagram_edges[halfedges[iHalfedge]]))[0],endY=end[1],startX=(start=cellHalfedgeStart(cell,Diagram_edges[halfedges[++iHalfedge%nHalfedges]]))[0],startY=start[1],(Math.abs(endX-startX)>Diagram_epsilon||Math.abs(endY-startY)>Diagram_epsilon)&&(halfedges.splice(iHalfedge,0,Diagram_edges.push(createBorderEdge(site,end,Math.abs(endX-x0)<Diagram_epsilon&&y1-endY>Diagram_epsilon?[x0,Math.abs(startX-x0)<Diagram_epsilon?startY:y1]:Math.abs(endY-y1)<Diagram_epsilon&&x1-endX>Diagram_epsilon?[Math.abs(startY-y1)<Diagram_epsilon?startX:x1,y1]:Math.abs(endX-x1)<Diagram_epsilon&&endY-y0>Diagram_epsilon?[x1,Math.abs(startX-x1)<Diagram_epsilon?startY:y0]:Math.abs(endY-y0)<Diagram_epsilon&&endX-x0>Diagram_epsilon?[Math.abs(startY-y0)<Diagram_epsilon?startX:x0,y0]:null))-1),++nHalfedges);nHalfedges&&(cover=!1)}if(cover){var dx,dy,d2,dc=1/0;for(iCell=0,cover=null;iCell<nCells;++iCell)(cell=cells[iCell])&&(d2=(dx=(site=cell.site)[0]-x0)*dx+(dy=site[1]-y0)*dy)<dc&&(dc=d2,cover=cell);if(cover){var v00=[x0,y0],v01=[x0,y1],v11=[x1,y1],v10=[x1,y0];cover.halfedges.push(Diagram_edges.push(createBorderEdge(site=cover.site,v00,v01))-1,Diagram_edges.push(createBorderEdge(site,v01,v11))-1,Diagram_edges.push(createBorderEdge(site,v11,v10))-1,Diagram_edges.push(createBorderEdge(site,v10,v00))-1)}}for(iCell=0;iCell<nCells;++iCell)(cell=cells[iCell])&&(cell.halfedges.length||delete cells[iCell])}(x0,y0,x1,y1)}this.edges=Diagram_edges,this.cells=cells,beaches=Diagram_circles=Diagram_edges=cells=null}Diagram.prototype={constructor:Diagram,polygons:function(){var edges=this.edges;return this.cells.map(function(cell){var polygon=cell.halfedges.map(function(i){return cellHalfedgeStart(cell,edges[i])});return polygon.data=cell.site.data,polygon})},triangles:function(){var triangles=[],edges=this.edges;return this.cells.forEach(function(cell,i){if(m=(halfedges=cell.halfedges).length)for(var halfedges,m,s0,a,b,c,site=cell.site,j=-1,e1=edges[halfedges[m-1]],s1=e1.left===site?e1.right:e1.left;++j<m;)s0=s1,s1=(e1=edges[halfedges[j]]).left===site?e1.right:e1.left,s0&&s1&&i<s0.index&&i<s1.index&&(b=s0,c=s1,((a=site)[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1])<0)&&triangles.push([site.data,s0.data,s1.data])}),triangles},links:function(){return this.edges.filter(function(edge){return edge.right}).map(function(edge){return{source:edge.left.data,target:edge.right.data}})},find:function(x,y,radius){for(var i0,cell,that=this,i1=that._found||0,n=that.cells.length;!(cell=that.cells[i1]);)if(++i1>=n)return null;var dx=x-cell.site[0],dy=y-cell.site[1],d2=dx*dx+dy*dy;do{cell=that.cells[i0=i1],i1=null,cell.halfedges.forEach(function(e){var edge=that.edges[e],v=edge.left;if(v!==cell.site&&v||(v=edge.right)){var vx=x-v[0],vy=y-v[1],v2=vx*vx+vy*vy;v2<d2&&(d2=v2,i1=v.index)}})}while(null!==i1);return that._found=i0,null==radius||d2<=radius*radius?cell.site:null}};function Transform(k,x,y){this.k=k,this.x=x,this.y=y}Transform.prototype={constructor:Transform,scale:function(k){return 1===k?this:new Transform(this.k*k,this.x,this.y)},translate:function(x,y){return 0===x&0===y?this:new Transform(this.k,this.x+this.k*x,this.y+this.k*y)},apply:function(point){return[point[0]*this.k+this.x,point[1]*this.k+this.y]},applyX:function(x){return x*this.k+this.x},applyY:function(y){return y*this.k+this.y},invert:function(location){return[(location[0]-this.x)/this.k,(location[1]-this.y)/this.k]},invertX:function(x){return(x-this.x)/this.k},invertY:function(y){return(y-this.y)/this.k},rescaleX:function(x){return x.copy().domain(x.range().map(this.invertX,this).map(x.invert,x))},rescaleY:function(y){return y.copy().domain(y.range().map(this.invertY,this).map(y.invert,y))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Transform(1,0,0);Transform.prototype;function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(var i=0;i<newInputs.length;i++)if(newInputs[i]!==lastInputs[i])return!1;return!0}var memoize_one_esm=function(resultFn,isEqual){var lastThis;void 0===isEqual&&(isEqual=areInputsEqual);var lastResult,lastArgs=[],calledOnce=!1;return function(){for(var newArgs=[],_i=0;_i<arguments.length;_i++)newArgs[_i]=arguments[_i];return calledOnce&&lastThis===this&&isEqual(newArgs,lastArgs)?lastResult:(lastResult=resultFn.apply(this,newArgs),calledOnce=!0,lastThis=this,lastArgs=newArgs,lastResult)}};function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var memoizedFindNode=memoize_one_esm(function(nodes,name,nodeType){var id=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return underscore_default.a.find(nodes,function(n){return n.name===name&&(n.nodeType===nodeType&&(null===id||n.id===id))})}),StateContainer_StateContainer=function(_React$PureComponent){function StateContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StateContainer),(_this=function(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(StateContainer).call(this,props))).defaultOnNodeClick=_this.defaultOnNodeClick.bind(_assertThisInitialized(_this)),_this.handleNodeClick=_this.handleNodeClick.bind(_assertThisInitialized(_this)),_this.state={selectedNode:null},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(StateContainer,external_React_default.a.PureComponent),_createClass(StateContainer,null,[{key:"getDerivedStateFromProps",value:function(props,state){if(state.selectedNode){var foundNode=memoizedFindNode(props.nodes,state.selectedNode.name,state.selectedNode.nodeType,state.selectedNode.id||null);return foundNode?{selectedNode:foundNode}:{selectedNode:null}}return null}}]),_createClass(StateContainer,[{key:"defaultOnNodeClick",value:function(node){this.setState(function(prevState){return prevState.selectedNode===node?{selectedNode:null}:{selectedNode:node}})}},{key:"handleNodeClick",value:function(node,evt){var onNodeClick=this.props.onNodeClick,selectedNode=this.state.selectedNode;"function"==typeof onNodeClick?onNodeClick(node,selectedNode,evt):this.defaultOnNodeClick(node,selectedNode,evt)}},{key:"detailPane",value:function(){return"function"==typeof this.props.renderDetailPane?this.props.renderDetailPane(this.state.selectedNode,this.props):null}},{key:"render",value:function(){var _this2=this,_this$props=this.props,children=_this$props.children,passProps=_objectWithoutProperties(_this$props,["children"]),selectedNode=this.state.selectedNode;return external_React_default.a.createElement("div",{className:"state-container","data-is-node-selected":!!selectedNode},external_React_default.a.Children.map(children,function(child){return external_React_default.a.cloneElement(child,function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(source,!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}({},passProps,{},_this2.state,{onNodeClick:_this2.handleNodeClick}))}),this.detailPane())}}]),StateContainer}();function ScrollContainer_typeof(obj){return(ScrollContainer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ScrollContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ScrollContainer_possibleConstructorReturn(self,call){return!call||"object"!==ScrollContainer_typeof(call)&&"function"!=typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function ScrollContainer_getPrototypeOf(o){return(ScrollContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ScrollContainer_setPrototypeOf(o,p){return(ScrollContainer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var ScrollContainer_ScrollContainer=function(_React$PureComponent){function ScrollContainer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ScrollContainer),(_this=ScrollContainer_possibleConstructorReturn(this,ScrollContainer_getPrototypeOf(ScrollContainer).call(this,props))).state={mounted:!1,isHeightDecreasing:!1,outerHeight:props.outerHeight,pastHeight:null},_this.containerRef=external_React_default.a.createRef(),_this.heightTimer=null,_this}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&ScrollContainer_setPrototypeOf(subClass,superClass)}(ScrollContainer,external_React_default.a.PureComponent),Constructor=ScrollContainer,(protoProps=[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"componentDidUpdate",value:function(prevProps){var _this2=this,updateOuterHeight=this.props.outerHeight;updateOuterHeight<prevProps.outerHeight?this.setState(function(_ref){return _ref.isHeightDecreasing,{isHeightDecreasing:!0,pastHeight:prevProps.outerHeight,outerHeight:updateOuterHeight}},function(){_this2.heightTimer&&clearTimeout(_this2.heightTimer),_this2.heightTimer=setTimeout(function(){_this2.setState({isHeightDecreasing:!1,pastHeight:null,outerHeight:updateOuterHeight})},500)}):updateOuterHeight>prevProps.outerHeight&&(this.heightTimer&&clearTimeout(this.heightTimer),this.setState({isHeightDecreasing:!1,pastHeight:null,outerHeight:updateOuterHeight}))}},{key:"render",value:function(){var _this3=this,_this$props=this.props,children=(_this$props.innerMargin,_this$props.innerWidth,_this$props.children),contentWidth=_this$props.contentWidth,width=_this$props.width,_this$state=this.state,outerHeight=_this$state.outerHeight,pastHeight=_this$state.pastHeight,isHeightDecreasing=_this$state.isHeightDecreasing,mounted=_this$state.mounted,innerCls="scroll-container"+(isHeightDecreasing?" height-decreasing":""),innerStyle={width:Math.max(contentWidth,width),height:outerHeight};return external_React_default.a.createElement("div",{className:"scroll-container-wrapper",ref:this.containerRef,style:{width:width}},external_React_default.a.createElement("div",{className:innerCls,style:innerStyle},external_React_default.a.Children.map(children,function(child){return external_React_default.a.cloneElement(child,underscore_default.a.extend(underscore_default.a.omit(_this3.props,"children"),{scrollContainerWrapperElement:_this3.containerRef.current||null,scrollContainerWrapperMounted:mounted,outerHeight:pastHeight||outerHeight}))})))}}])&&ScrollContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&ScrollContainer_defineProperties(Constructor,staticProps),ScrollContainer}();function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function objectWithoutPropertiesLoose_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,subClass.__proto__=superClass}var class_addClass=__webpack_require__(3),addClass_default=__webpack_require__.n(class_addClass),class_removeClass=__webpack_require__(4),removeClass_default=__webpack_require__.n(class_removeClass),external_ReactDOM_=__webpack_require__(5),external_ReactDOM_default=__webpack_require__.n(external_ReactDOM_),config_disabled=!1,TransitionGroupContext=external_React_default.a.createContext(null),UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",Transition_Transition=function(_React$Component){function Transition(props,context){var _this;_this=_React$Component.call(this,props,context)||this;var initialStatus,appear=context&&!context.isMounting?props.enter:props.appear;return _this.appearStatus=null,props.in?appear?(initialStatus=EXITED,_this.appearStatus=ENTERING):initialStatus=ENTERED:initialStatus=props.unmountOnExit||props.mountOnEnter?UNMOUNTED:EXITED,_this.state={status:initialStatus},_this.nextCallback=null,_this}_inheritsLoose(Transition,_React$Component),Transition.getDerivedStateFromProps=function(_ref,prevState){return _ref.in&&prevState.status===UNMOUNTED?{status:EXITED}:null};var _proto=Transition.prototype;return _proto.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},_proto.componentDidUpdate=function(prevProps){var nextStatus=null;if(prevProps!==this.props){var status=this.state.status;this.props.in?status!==ENTERING&&status!==ENTERED&&(nextStatus=ENTERING):status!==ENTERING&&status!==ENTERED||(nextStatus="exiting")}this.updateStatus(!1,nextStatus)},_proto.componentWillUnmount=function(){this.cancelNextCallback()},_proto.getTimeouts=function(){var exit,enter,appear,timeout=this.props.timeout;return exit=enter=appear=timeout,null!=timeout&&"number"!=typeof timeout&&(exit=timeout.exit,enter=timeout.enter,appear=void 0!==timeout.appear?timeout.appear:enter),{exit:exit,enter:enter,appear:appear}},_proto.updateStatus=function(mounting,nextStatus){if(void 0===mounting&&(mounting=!1),null!==nextStatus){this.cancelNextCallback();var node=external_ReactDOM_default.a.findDOMNode(this);nextStatus===ENTERING?this.performEnter(node,mounting):this.performExit(node)}else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},_proto.performEnter=function(node,mounting){var _this2=this,enter=this.props.enter,appearing=this.context?this.context.isMounting:mounting,timeouts=this.getTimeouts(),enterTimeout=appearing?timeouts.appear:timeouts.enter;!mounting&&!enter||config_disabled?this.safeSetState({status:ENTERED},function(){_this2.props.onEntered(node)}):(this.props.onEnter(node,appearing),this.safeSetState({status:ENTERING},function(){_this2.props.onEntering(node,appearing),_this2.onTransitionEnd(node,enterTimeout,function(){_this2.safeSetState({status:ENTERED},function(){_this2.props.onEntered(node,appearing)})})}))},_proto.performExit=function(node){var _this3=this,exit=this.props.exit,timeouts=this.getTimeouts();exit&&!config_disabled?(this.props.onExit(node),this.safeSetState({status:"exiting"},function(){_this3.props.onExiting(node),_this3.onTransitionEnd(node,timeouts.exit,function(){_this3.safeSetState({status:EXITED},function(){_this3.props.onExited(node)})})})):this.safeSetState({status:EXITED},function(){_this3.props.onExited(node)})},_proto.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},_proto.safeSetState=function(nextState,callback){callback=this.setNextCallback(callback),this.setState(nextState,callback)},_proto.setNextCallback=function(callback){var _this4=this,active=!0;return this.nextCallback=function(event){active&&(active=!1,_this4.nextCallback=null,callback(event))},this.nextCallback.cancel=function(){active=!1},this.nextCallback},_proto.onTransitionEnd=function(node,timeout,handler){this.setNextCallback(handler);var doesNotHaveTimeoutOrListener=null==timeout&&!this.props.addEndListener;node&&!doesNotHaveTimeoutOrListener?(this.props.addEndListener&&this.props.addEndListener(node,this.nextCallback),null!=timeout&&setTimeout(this.nextCallback,timeout)):setTimeout(this.nextCallback,0)},_proto.render=function(){var status=this.state.status;if(status===UNMOUNTED)return null;var _this$props=this.props,children=_this$props.children,childProps=objectWithoutPropertiesLoose_objectWithoutPropertiesLoose(_this$props,["children"]);if(delete childProps.in,delete childProps.mountOnEnter,delete childProps.unmountOnExit,delete childProps.appear,delete childProps.enter,delete childProps.exit,delete childProps.timeout,delete childProps.addEndListener,delete childProps.onEnter,delete childProps.onEntering,delete childProps.onEntered,delete childProps.onExit,delete childProps.onExiting,delete childProps.onExited,"function"==typeof children)return external_React_default.a.createElement(TransitionGroupContext.Provider,{value:null},children(status,childProps));var child=external_React_default.a.Children.only(children);return external_React_default.a.createElement(TransitionGroupContext.Provider,{value:null},external_React_default.a.cloneElement(child,childProps))},Transition}(external_React_default.a.Component);function Transition_noop(){}Transition_Transition.contextType=TransitionGroupContext,Transition_Transition.propTypes={},Transition_Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Transition_noop,onEntering:Transition_noop,onEntered:Transition_noop,onExit:Transition_noop,onExiting:Transition_noop,onExited:Transition_noop},Transition_Transition.UNMOUNTED=0,Transition_Transition.EXITED=1,Transition_Transition.ENTERING=2,Transition_Transition.ENTERED=3,Transition_Transition.EXITING=4;var esm_Transition=Transition_Transition,CSSTransition_removeClass=function(node,classes){return node&&classes&&classes.split(" ").forEach(function(c){return removeClass_default()(node,c)})},CSSTransition_CSSTransition=function(_React$Component){function CSSTransition(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_React$Component.call.apply(_React$Component,[this].concat(args))||this).appliedClasses={appear:{},enter:{},exit:{}},_this.onEnter=function(node,appearing){_this.removeClasses(node,"exit"),_this.addClass(node,appearing?"appear":"enter","base"),_this.props.onEnter&&_this.props.onEnter(node,appearing)},_this.onEntering=function(node,appearing){var type=appearing?"appear":"enter";_this.addClass(node,type,"active"),_this.props.onEntering&&_this.props.onEntering(node,appearing)},_this.onEntered=function(node,appearing){var type=appearing?"appear":"enter";_this.removeClasses(node,type),_this.addClass(node,type,"done"),_this.props.onEntered&&_this.props.onEntered(node,appearing)},_this.onExit=function(node){_this.removeClasses(node,"appear"),_this.removeClasses(node,"enter"),_this.addClass(node,"exit","base"),_this.props.onExit&&_this.props.onExit(node)},_this.onExiting=function(node){_this.addClass(node,"exit","active"),_this.props.onExiting&&_this.props.onExiting(node)},_this.onExited=function(node){_this.removeClasses(node,"exit"),_this.addClass(node,"exit","done"),_this.props.onExited&&_this.props.onExited(node)},_this.getClassNames=function(type){var classNames=_this.props.classNames,isStringClassNames="string"==typeof classNames,baseClassName=isStringClassNames?""+(isStringClassNames&&classNames?classNames+"-":"")+type:classNames[type];return{baseClassName:baseClassName,activeClassName:isStringClassNames?baseClassName+"-active":classNames[type+"Active"],doneClassName:isStringClassNames?baseClassName+"-done":classNames[type+"Done"]}},_this}_inheritsLoose(CSSTransition,_React$Component);var _proto=CSSTransition.prototype;return _proto.addClass=function(node,type,phase){var className=this.getClassNames(type)[phase+"ClassName"];"appear"===type&&"done"===phase&&(className+=" "+this.getClassNames("enter").doneClassName),"active"===phase&&node&&node.scrollTop,this.appliedClasses[type][phase]=className,function(node,classes){node&&classes&&classes.split(" ").forEach(function(c){return addClass_default()(node,c)})}(node,className)},_proto.removeClasses=function(node,type){var _this$appliedClasses$=this.appliedClasses[type],baseClassName=_this$appliedClasses$.base,activeClassName=_this$appliedClasses$.active,doneClassName=_this$appliedClasses$.done;this.appliedClasses[type]={},baseClassName&&CSSTransition_removeClass(node,baseClassName),activeClassName&&CSSTransition_removeClass(node,activeClassName),doneClassName&&CSSTransition_removeClass(node,doneClassName)},_proto.render=function(){var _this$props=this.props,props=(_this$props.classNames,objectWithoutPropertiesLoose_objectWithoutPropertiesLoose(_this$props,["classNames"]));return external_React_default.a.createElement(esm_Transition,_extends({},props,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},CSSTransition}(external_React_default.a.Component);CSSTransition_CSSTransition.defaultProps={classNames:""},CSSTransition_CSSTransition.propTypes={};var esm_CSSTransition=CSSTransition_CSSTransition;function assertThisInitialized_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function getChildMapping(children,mapFn){var result=Object.create(null);return children&&external_React_.Children.map(children,function(c){return c}).forEach(function(child){result[child.key]=function(child){return mapFn&&Object(external_React_.isValidElement)(child)?mapFn(child):child}(child)}),result}function getProp(child,prop,props){return null!=props[prop]?props[prop]:child.props[prop]}function getNextChildMapping(nextProps,prevChildMapping,onExited){var nextChildMapping=getChildMapping(nextProps.children),children=function(prev,next){function getValueForKey(key){return key in next?next[key]:prev[key]}prev=prev||{},next=next||{};var i,nextKeysPending=Object.create(null),pendingKeys=[];for(var prevKey in prev)prevKey in next?pendingKeys.length&&(nextKeysPending[prevKey]=pendingKeys,pendingKeys=[]):pendingKeys.push(prevKey);var childMapping={};for(var nextKey in next){if(nextKeysPending[nextKey])for(i=0;i<nextKeysPending[nextKey].length;i++){var pendingNextKey=nextKeysPending[nextKey][i];childMapping[nextKeysPending[nextKey][i]]=getValueForKey(pendingNextKey)}childMapping[nextKey]=getValueForKey(nextKey)}for(i=0;i<pendingKeys.length;i++)childMapping[pendingKeys[i]]=getValueForKey(pendingKeys[i]);return childMapping}(prevChildMapping,nextChildMapping);return Object.keys(children).forEach(function(key){var child=children[key];if(Object(external_React_.isValidElement)(child)){var hasPrev=key in prevChildMapping,hasNext=key in nextChildMapping,prevChild=prevChildMapping[key],isLeaving=Object(external_React_.isValidElement)(prevChild)&&!prevChild.props.in;!hasNext||hasPrev&&!isLeaving?hasNext||!hasPrev||isLeaving?hasNext&&hasPrev&&Object(external_React_.isValidElement)(prevChild)&&(children[key]=Object(external_React_.cloneElement)(child,{onExited:onExited.bind(null,child),in:prevChild.props.in,exit:getProp(child,"exit",nextProps),enter:getProp(child,"enter",nextProps)})):children[key]=Object(external_React_.cloneElement)(child,{in:!1}):children[key]=Object(external_React_.cloneElement)(child,{onExited:onExited.bind(null,child),in:!0,exit:getProp(child,"exit",nextProps),enter:getProp(child,"enter",nextProps)})}}),children}var TransitionGroup_values=Object.values||function(obj){return Object.keys(obj).map(function(k){return obj[k]})},TransitionGroup_TransitionGroup=function(_React$Component){function TransitionGroup(props,context){var _this,handleExited=(_this=_React$Component.call(this,props,context)||this).handleExited.bind(assertThisInitialized_assertThisInitialized(assertThisInitialized_assertThisInitialized(_this)));return _this.state={contextValue:{isMounting:!0},handleExited:handleExited,firstRender:!0},_this}_inheritsLoose(TransitionGroup,_React$Component);var _proto=TransitionGroup.prototype;return _proto.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},_proto.componentWillUnmount=function(){this.mounted=!1},TransitionGroup.getDerivedStateFromProps=function(nextProps,_ref){var props,onExited,prevChildMapping=_ref.children,handleExited=_ref.handleExited;return{children:_ref.firstRender?(props=nextProps,onExited=handleExited,getChildMapping(props.children,function(child){return Object(external_React_.cloneElement)(child,{onExited:onExited.bind(null,child),in:!0,appear:getProp(child,"appear",props),enter:getProp(child,"enter",props),exit:getProp(child,"exit",props)})})):getNextChildMapping(nextProps,prevChildMapping,handleExited),firstRender:!1}},_proto.handleExited=function(child,node){var currentChildMapping=getChildMapping(this.props.children);child.key in currentChildMapping||(child.props.onExited&&child.props.onExited(node),this.mounted&&this.setState(function(state){var children=_extends({},state.children);return delete children[child.key],{children:children}}))},_proto.render=function(){var _this$props=this.props,Component=_this$props.component,childFactory=_this$props.childFactory,props=objectWithoutPropertiesLoose_objectWithoutPropertiesLoose(_this$props,["component","childFactory"]),contextValue=this.state.contextValue,children=TransitionGroup_values(this.state.children).map(childFactory);return delete props.appear,delete props.enter,delete props.exit,null===Component?external_React_default.a.createElement(TransitionGroupContext.Provider,{value:contextValue},children):external_React_default.a.createElement(TransitionGroupContext.Provider,{value:contextValue},external_React_default.a.createElement(Component,props,children))},TransitionGroup}(external_React_default.a.Component);TransitionGroup_TransitionGroup.propTypes={},TransitionGroup_TransitionGroup.defaultProps={component:"div",childFactory:function(child){return child}};var esm_TransitionGroup=TransitionGroup_TransitionGroup;function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function parsing_functions_typeof(obj){return(parsing_functions_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function parsing_functions_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function parsing_functions_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?parsing_functions_ownKeys(source,!0).forEach(function(key){parsing_functions_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):parsing_functions_ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function parsing_functions_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DEFAULT_PARSING_OPTIONS={direction:"output",skipSortOnColumns:[1],dontCorrectColumns:!1,nodesPreSortFxn:function(nodes){return underscore_default.a.forEach(nodes,function(node){"input"===node.nodeType&&node.meta&&node.meta.global&&!node.outputOf&&0!==node.column&&(node.column=0)}),nodes},nodesInColumnSortFxn:function(node1,node2){function isNodeFileReference(n){return"string"==typeof n.ioType&&"reference file"===n.ioType}function isNodeParameter(n){return"string"==typeof n.ioType&&"parameter"===n.ioType}function getNodeFromListForComparison(nodeList){var averaged=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],highestColumn=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],ownColumnFilter=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!Array.isArray(nodeList)||0===nodeList.length)return null;if(1===nodeList.length)return nodeList[0];if(averaged){if("number"==typeof ownColumnFilter&&ownColumnFilter>1){var nodeListFiltered=underscore_default.a.filter(nodeList,function(n){return n.column===ownColumnFilter});nodeListFiltered.length>0&&(nodeList=nodeListFiltered)}return underscore_default.a.extend({},nodeList[0],{indexInColumn:underscore_default.a.reduce(nodeList,function(m,n){return m+("number"==typeof n.indexInColumn?n.indexInColumn:n.origIndexInColumn)},0)/nodeList.length})}var sortedList=underscore_default.a.sortBy(nodeList.slice(0),function(n){return"number"==typeof n.indexInColumn?n.indexInColumn:n.origIndexInColumn});return sortedList=underscore_default.a.sortBy(sortedList,function(n){return highestColumn?-n.column:n.column}),underscore_default.a.find(sortedList,function(n){return"number"==typeof n.indexInColumn||"number"==typeof n.origIndexInColumn})||sortedList[0]||null}function compareNodesBySameColumnIndex(n1,n2){if(n1&&!n2)return-1;if(!n1&&n2)return 1;if(n1&&n2&&n1.column===n2.column){var n1idx="number"==typeof n1.indexInColumn?n1.indexInColumn:n1.origIndexInColumn,n2idx="number"==typeof n2.indexInColumn?n2.indexInColumn:n2.origIndexInColumn;if(n1idx<n2idx)return-1;if(n1idx>n2idx)return 1}return 0}function compareNodeInputOf(n1,n2){var ioResult=compareNodesBySameColumnIndex(getNodeFromListForComparison("step"===n1.nodeType?n1.outputNodes:n1.inputOf,!0,!1),getNodeFromListForComparison("step"===n2.nodeType?n2.outputNodes:n2.inputOf,!0,!1));return 0!==ioResult?ioResult:n1.name===n2.name?0:n1.name<n2.name?-1:1}var ioResult;if("step"===node1.nodeType&&"step"===node2.nodeType){if(node1.inputNodes&&!node2.inputNodes)return-1;if(!node1.inputNodes&&node2.inputNodes)return 1;if(node1.inputNodes&&node2.inputNodes){if(0!==(ioResult=compareNodesBySameColumnIndex(getNodeFromListForComparison(node1.inputNodes,!0,!0,node1.column-1),getNodeFromListForComparison(node2.inputNodes,!0,!0,node1.column-1))))return ioResult;if(0!==(ioResult=compareNodesBySameColumnIndex(getNodeFromListForComparison(node1.inputNodes,!1),getNodeFromListForComparison(node2.inputNodes,!1))))return ioResult}return 0}if("output"===node1.nodeType&&"input"===node2.nodeType)return-1;if("input"===node1.nodeType&&"output"===node2.nodeType)return 1;if("input-group"===node1.nodeType&&"input-group"!==node2.nodeType)return 1;if("input-group"!==node1.nodeType&&"input-group"===node2.nodeType)return-1;if(node1.nodeType===node2.nodeType){if("output"===node1.nodeType)return ioResult=function(n1,n2){var n1OutputOf="step"===n1.nodeType?n1.inputNodes&&getNodeFromListForComparison(n1.inputNodes):n1.outputOf,n2OutputOf="step"===n2.nodeType?n2.inputNodes&&getNodeFromListForComparison(n2.inputNodes):n2.outputOf;if(n1OutputOf&&"number"==typeof n1OutputOf.indexInColumn&&n2OutputOf&&"number"==typeof n2OutputOf.indexInColumn&&n1OutputOf.column===n2OutputOf.column){if(n1OutputOf.indexInColumn<n2OutputOf.indexInColumn)return-1;if(n1OutputOf.indexInColumn>n2OutputOf.indexInColumn)return 1}return n1OutputOf&&n1OutputOf.name&&n2OutputOf&&n2OutputOf.name?n1OutputOf.name===n2OutputOf.name?void 0!==n1.inputOf&&void 0===n2.inputOf?-3:void 0===n1.inputOf&&void 0!==n2.inputOf?3:n1.name<n2.name?-1:n1.name>n2.name?1:0:n1OutputOf.name<n2OutputOf.name?-3:3:0}(node1,node2);if("input"===node1.nodeType){if(isNodeParameter(node1)&&isNodeParameter(node2))return compareNodeInputOf(node1,node2);if(isNodeParameter(node1))return 5;if(isNodeParameter(node2))return-5;if(isNodeFileReference(node1)){if(!isNodeFileReference(node2))return 7}else if(isNodeFileReference(node2))return-7;return ioResult=compareNodeInputOf(node1,node2)}}return 0},nodesInColumnPostSortFxn:function(nodesInColumn){var groupNodes=underscore_default.a.filter(nodesInColumn,{nodeType:"input-group"});groupNodes.length>0&&underscore_default.a.forEach(groupNodes,function(gN){var relatedFileSource=underscore_default.a.find(gN._source,function(s){return void 0===s.grouped_by&&"string"==typeof s.name&&s.for_file}),relatedFileNode=relatedFileSource&&underscore_default.a.find(nodesInColumn,function(n){return!!(n&&n.meta&&n.meta.run_data&&n.meta.run_data.file&&(n.meta.run_data.file["@id"]||n.meta.run_data.file)===(relatedFileSource.for_file||"x"))});if(relatedFileNode){var oldIdx=nodesInColumn.indexOf(gN);nodesInColumn.splice(oldIdx,1);var afterThisIdx=nodesInColumn.indexOf(relatedFileNode);nodesInColumn.splice(afterThisIdx+1,0,gN)}});return nodesInColumn},showReferenceFiles:!0,showParameters:!0,showIndirectFiles:!0},parseAnalysisSteps=memoize_one_esm(function(analysis_steps){var parsingOptions=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},parsingOpts=parsing_functions_objectSpread({},DEFAULT_PARSING_OPTIONS,{},parsingOptions),nodes=[],edges=[],ioIdsUsed={},processedSteps={};function ioNodeID(stepIOArg){var readOnly=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return preventDuplicateNodeID(stepIOArg.id||stepIOArg.name,readOnly)}function ioNodeName(stepIOArg){var nameToUse=stepIOArg.name||null;if(stepIOArg.meta&&!0===stepIOArg.meta.global){var list=null;if(Array.isArray(stepIOArg.target)&&(list=stepIOArg.target),Array.isArray(stepIOArg.source)&&(list=list?list.concat(stepIOArg.source):stepIOArg.source),!list)return nameToUse;var i,listLength=list.length;for(i=0;i<listLength;i++)if(list[i]&&void 0===list[i].step&&"string"==typeof list[i].name){nameToUse=list[i].name;break}}return nameToUse}function preventDuplicateNodeID(id){var readOnly=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"!=typeof id)throw new Error("param id is not a string.");return id=id.replace(/(~\d+)/,""),readOnly?"number"==typeof ioIdsUsed[id]&&ioIdsUsed[id]>1?id+"~"+ioIdsUsed[id]:id:void 0===ioIdsUsed[id]?(ioIdsUsed[id]=1,id):id+"~"+ ++ioIdsUsed[id]}function compareTwoFilesByID(file1,file2){return!(!file1||!file2)&&("string"==typeof file1&&"string"==typeof file2&&file1===file2||("object"===parsing_functions_typeof(file1)&&"object"===parsing_functions_typeof(file2)&&(file1["@id"]||"a")===(file2["@id"]||"b")||("object"===parsing_functions_typeof(file1)&&"string"==typeof file2&&(file1["@id"]||"a")===file2||"string"==typeof file1&&"object"===parsing_functions_typeof(file2)&&file1===(file2["@id"]||"b"))))}function generateStepNode(step,column){return{nodeType:"step",name:step.name,_inputs:step.inputs,_outputs:step.outputs,meta:underscore_default.a.extend({},step.meta||{},underscore_default.a.omit(step,"inputs","outputs","meta")),column:column}}function generateIONode(stepIOArgument,column,stepNode,nodeType){var readOnly=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if("input"!==nodeType&&"output"!==nodeType)throw new Error("Incorrect type, must be one of input or output.");var namesOnSteps={};namesOnSteps[stepNode.name]=stepIOArgument.name;var ioNode={column:column,ioType:stepIOArgument.meta&&"string"==typeof stepIOArgument.meta.type&&stepIOArgument.meta.type.toLowerCase(),id:ioNodeID(stepIOArgument,readOnly),name:ioNodeName(stepIOArgument),argNamesOnSteps:namesOnSteps,nodeType:nodeType,_source:stepIOArgument.source,_target:stepIOArgument.target,meta:underscore_default.a.extend({},stepIOArgument.meta||{},underscore_default.a.omit(stepIOArgument,"name","meta","source","target"))};return"input"===nodeType?ioNode.inputOf=[stepNode]:"output"===nodeType&&(ioNode.outputOf=stepNode),ioNode}function expandIONodes(stepIOArgument,column,stepNode,nodeType,readOnly){if(void 0===stepIOArgument.run_data||!stepIOArgument.run_data.file&&!stepIOArgument.run_data.value||stepIOArgument.run_data.file&&(!Array.isArray(stepIOArgument.run_data.file)||0===stepIOArgument.run_data.file.length)||stepIOArgument.run_data.value&&(!Array.isArray(stepIOArgument.run_data.value)||0===stepIOArgument.run_data.value.length))return[generateIONode(stepIOArgument,column,stepNode,nodeType,readOnly)];function expandRunDataArraysToIndividualNodes(value_list){var propertyToExpand=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file";return underscore_default.a.map(value_list,function(val,idx){Array.isArray(val)&&(idx=val[0],val=val[1]),val||console.error("No value(s) on",value_list,stepNode);var id=ioNodeName(stepIOArgument)+".",run_data=underscore_default.a.extend({},stepIOArgument.run_data,{meta:stepIOArgument.run_data.meta&&stepIOArgument.run_data.meta[idx]||null});return"file"===propertyToExpand?(id+=val&&val.accession||val&&val.uuid||idx,run_data.file=val):"value"===propertyToExpand&&(id+=idx,run_data.value=val),generateIONode(underscore_default.a.extend({},stepIOArgument,{name:ioNodeName(stepIOArgument),id:id,run_data:run_data}),column,stepNode,nodeType,readOnly)})}var valuesForArgument,isParameterArgument;stepIOArgument.run_data&&Array.isArray(stepIOArgument.run_data.value)&&!stepIOArgument.run_data.file?(isParameterArgument=!0,valuesForArgument=stepIOArgument.run_data.value):(isParameterArgument=!1,valuesForArgument=stepIOArgument.run_data.file);var groupSources=underscore_default.a.filter(stepIOArgument.source||[],function(s){return"string"==typeof s.grouped_by&&void 0!==s[s.grouped_by]&&"string"==typeof s.for_file});if(groupSources.length>0){var groups=underscore_default.a.reduce(groupSources,function(filesByGroup,groupSource){return void 0===filesByGroup[groupSource.grouped_by]&&(filesByGroup[groupSource.grouped_by]={}),void 0===filesByGroup[groupSource.grouped_by][groupSource[groupSource.grouped_by]]&&(filesByGroup[groupSource.grouped_by][groupSource[groupSource.grouped_by]]=new Set),filesByGroup[groupSource.grouped_by][groupSource[groupSource.grouped_by]].add(groupSource.for_file),filesByGroup},{}),groupKeys=underscore_default.a.keys(groups),filesNotInGroups=[],filesByGroup=underscore_default.a.reduce(stepIOArgument.run_data.file,function(m,file,idx){var incl=!1;return underscore_default.a.forEach(groupKeys,function(groupingTypeKey){underscore_default.a.forEach(underscore_default.a.keys(groups[groupingTypeKey]),function(group){groups[groupingTypeKey][group].has(file["@id"]||file)&&(void 0===m[groupingTypeKey]&&(m[groupingTypeKey]={}),void 0===m[groupingTypeKey][group]&&(m[groupingTypeKey][group]=new Set),m[groupingTypeKey][group].add(file),incl=!0)})}),incl||filesNotInGroups.push([idx,file]),m},{}),groupNodes=underscore_default.a.reduce(underscore_default.a.pairs(filesByGroup.workflow),function(m,wfPair){var namesOnSteps={};namesOnSteps[stepNode.name]=stepIOArgument.name;var groupNode={column:column,ioType:stepIOArgument.meta&&stepIOArgument.meta.type||"group",id:ioNodeName(stepIOArgument)+".group:workflow."+wfPair[0],name:ioNodeName(stepIOArgument),argNamesOnSteps:namesOnSteps,nodeType:nodeType+"-group",_source:stepIOArgument.source,_target:stepIOArgument.target,meta:underscore_default.a.extend({},stepIOArgument.meta||{},underscore_default.a.omit(stepIOArgument,"name","meta","source","target")),inputOf:[stepNode]};return groupNode.meta.workflow=wfPair[0],m.push(groupNode),m},[]);return expandRunDataArraysToIndividualNodes(filesNotInGroups).concat(groupNodes)}return expandRunDataArraysToIndividualNodes(valuesForArgument,isParameterArgument?"value":"file")}function generateIONodesFromStep(step,column,stepNode){var ioNodeType=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input",stepIOTargetType="input"===ioNodeType?"source":"target",oppIOTargetType="input"===ioNodeType?"target":"source",ioNodesMatched=[],ioNodesCreated=[];function areInputRunDataPresentAndEqual(node,stepIO){return!(stepIO[stepIOTargetType].length>1||void 0!==stepIO[stepIOTargetType][0].step)&&areAnyRunDataPresentAndEqual(node,stepIO)}function areAnyRunDataPresentAndEqual(node,stepIO){if(!node.meta||!node.meta.run_data)return!1;var stepIOFiles=stepIO.run_data&&Array.isArray(stepIO.run_data.file)&&stepIO.run_data.file||[];return node.meta.run_data.file&&underscore_default.a.any(stepIOFiles,compareTwoFilesByID.bind(null,node.meta.run_data.file))||void 0!==node.meta.run_data.value&&stepIO.run_data&&void 0!==stepIO.run_data.value&&node.meta.run_data.value===stepIO.run_data.value}return underscore_default.a.forEach(step[ioNodeType+"s"],function(stepIO){if(Array.isArray(stepIO[stepIOTargetType])){var isGlobalInputArg=1===stepIO[stepIOTargetType].length&&void 0===stepIO[stepIOTargetType][0].step&&!(stepIO.meta&&"array"===stepIO.meta.cardinality),ioNodeIDsMatched={},currentIONodesMatched=underscore_default.a.filter(nodes,function(n){if("step"===n.nodeType)return!1;if("input"===ioNodeType&&isGlobalInputArg){if(Array.isArray(n["_"+stepIOTargetType])&&1===n["_"+stepIOTargetType].length&&void 0===n["_"+stepIOTargetType][0].step&&(n["_"+stepIOTargetType][0].name===stepIO[stepIOTargetType][0].name||areInputRunDataPresentAndEqual(n,stepIO))&&(!n.meta||!n.meta.run_data||!stepIO.run_data||areInputRunDataPresentAndEqual(n,stepIO)))return ioNodeIDsMatched[n.id]=ioNodeName(stepIO),!0}else if(!isGlobalInputArg&&underscore_default.a.any(stepIO[stepIOTargetType],function(s){if(s.step&&n.argNamesOnSteps[s.step]===s.name&&Array.isArray(n["_"+oppIOTargetType])&&underscore_default.a.any(n["_"+oppIOTargetType],function(t){return t.step===step.name})&&(!n.meta||!n.meta.run_data||!stepIO.run_data||areAnyRunDataPresentAndEqual(n,stepIO)))return!0;if(Array.isArray(n["_"+oppIOTargetType])&&underscore_default.a.any(n["_"+oppIOTargetType],function(t){return!(!t.step||t.step!==step.name||stepIO.name!==t.name||n.meta&&n.meta.run_data&&stepIO.run_data&&!areAnyRunDataPresentAndEqual(n,stepIO))}))return!0;if("input"===ioNodeType&&"string"==typeof s.grouped_by&&"string"==typeof s[s.grouped_by]&&n.meta&&Array.isArray(n["_"+stepIOTargetType])&&underscore_default.a.any(n["_"+stepIOTargetType],function(nodeSource){return"string"==typeof nodeSource.grouped_by&&"string"==typeof nodeSource[nodeSource.grouped_by]&&nodeSource[nodeSource.grouped_by]===s[s.grouped_by]})){var nodeBeingCheckedGroupFiles=underscore_default.a.pluck(underscore_default.a.filter(n["_"+stepIOTargetType],function(nS){return"string"==typeof nS.for_file}),"for_file");return!(!s.for_file||!underscore_default.a.contains(nodeBeingCheckedGroupFiles,s.for_file))}return!1}))return ioNodeIDsMatched[n.id]=ioNodeName(stepIO),!0;return!1}),ioNodesToCreate=expandIONodes(stepIO,column,stepNode,ioNodeType,!0);if(currentIONodesMatched.length>0&&(ioNodesMatched=ioNodesMatched.concat(currentIONodesMatched),underscore_default.a.forEach(currentIONodesMatched,function(n){try{var inNode,inNodes=underscore_default.a.where(ioNodesToCreate,{name:ioNodeIDsMatched[n.id]});if(!(inNode=1===inNodes.length?inNodes[0]:underscore_default.a.find(inNodes,function(inMore){if(inMore.meta.run_data&&inMore.meta.run_data.file&&n.meta.run_data&&n.meta.run_data.file){var origFile=n.meta.run_data.file,fileToCheck=inMore.meta.run_data.file;if(!Array.isArray(origFile)&&!Array.isArray(fileToCheck))return compareTwoFilesByID(n.meta.run_data.file,inMore.meta.run_data.file);if(Array.isArray(origFile)&&!Array.isArray(fileToCheck))return underscore_default.a.any(origFile,function(oF){return compareTwoFilesByID(oF,fileToCheck)});if(!Array.isArray(origFile)&&Array.isArray(fileToCheck))return underscore_default.a.any(fileToCheck,function(fTC){return compareTwoFilesByID(origFile,fTC)});if(Array.isArray(origFile)&&Array.isArray(fileToCheck))return underscore_default.a.any(fileToCheck,function(fTC){return underscore_default.a.any(origFile,function(oF){return compareTwoFilesByID(oF,fTC)})})}return!1})))throw new Error(n.id+" new node version not found")}catch(e){return void console.warn("Didn't find newly-created temporary node to extend from which was previously matched against node",n,stepIO,stepNode,e)}var combinedMeta=underscore_default.a.extend({},n.meta,inNode.meta,{global:n.meta.global||inNode.meta.global||!1,type:n.meta&&n.meta.type||inNode.meta&&inNode.meta.type,file_format:n.meta&&n.meta.file_format||inNode.meta&&inNode.meta.file_format});if(n.meta.run_data&&Array.isArray(n.meta.run_data.file)){var runDataToUse=n.meta.run_data,runDataToUseFileIDs=underscore_default.a.pluck(runDataToUse.file,"@id");Array.isArray(inNode.meta.run_data.file)?underscore_default.a.forEach(inNode.meta.run_data.file,function(f,idx){-1===runDataToUseFileIDs.indexOf(f["@id"])&&(runDataToUse.file.push(f),runDataToUse.meta.push(inNode.meta.run_data.meta[idx]))}):-1===runDataToUseFileIDs.indexOf(inNode.meta.run_data.file["@id"])&&(runDataToUse.file.push(inNode.meta.run_data.file),runDataToUse.meta.push(inNode.meta.run_data.meta)),combinedMeta.run_data=runDataToUse}underscore_default.a.extend(n,{meta:combinedMeta,name:"output"===ioNodeType?inNode.name||n.name:n.name||inNode.name,argNamesOnSteps:underscore_default.a.extend(n.argNamesOnSteps,inNode.argNamesOnSteps),_source:n._source||inNode._source,_target:n._target||inNode._target,ioType:n.ioType||inNode.ioType,inputOf:underscore_default.a.sortBy((n.inputOf||[]).concat(inNode.inputOf||[]),"id"),nodeType:"output"===n.nodeType||"output"===inNode.nodeType?"output":n.nodeType||inNode.nodeType}),"input"===ioNodeType?n.wasMatchedAsInputOf=(n.wasMatchedAsInputOf||[]).concat(stepNode.name):(n.wasMatchedAsOutputOf=stepNode.name,n.outputOf=stepNode)})),currentIONodesMatched.length<ioNodesToCreate.length){var unmatchedIONodesToCreate=underscore_default.a.map(underscore_default.a.filter(ioNodesToCreate,function(n){if(void 0!==ioNodeIDsMatched[n.id])return!1;if(n.meta&&n.meta.run_data&&n.meta.run_data.file){var fileToMatch=n.meta.run_data.file,filesToCheck=underscore_default.a.filter(underscore_default.a.map(currentIONodesMatched,function(n2){return n2&&n2.meta&&n2.meta.run_data&&n2.meta.run_data.file||null}),function(file){return null!==file});if(underscore_default.a.any(filesToCheck,compareTwoFilesByID.bind(null,fileToMatch)))return!1}return!0}),function(n){return n.id=preventDuplicateNodeID(n.id,!1),"input"===ioNodeType?n.generatedAsInputOf=(n.generatedAsInputOf||[]).concat(stepNode.name):n.generatedAsOutputOf=(n.generatedAsOutputOf||[]).concat(stepNode.name),n});nodes=nodes.concat(unmatchedIONodesToCreate),ioNodesCreated=ioNodesCreated.concat(unmatchedIONodesToCreate)}stepNode[ioNodeType+"Nodes"]=underscore_default.a.sortBy(ioNodesCreated.concat(ioNodesMatched),"id"),stepNode[ioNodeType+"Nodes"].length>0&&underscore_default.a.forEach(stepNode[ioNodeType+"Nodes"],function(n){if(!underscore_default.a.find(edges,function(e){if(e[stepIOTargetType]===n&&e[oppIOTargetType]===stepNode)return!0})){var newEdge={};newEdge[stepIOTargetType]=n,newEdge[oppIOTargetType]=stepNode,newEdge.capacity=ioNodeType,edges.push(newEdge)}})}}),{created:ioNodesCreated,matched:ioNodesMatched}}function findNextStepsFromIONode(ioNodes){var targetPropertyName="output"===parsingOpts.direction?"_target":"_source",nextSteps=new Set;return underscore_default.a.forEach(ioNodes,function(n){Array.isArray(n[targetPropertyName])&&underscore_default.a.forEach(n[targetPropertyName],function(t){if("string"==typeof t.step){var matchedStep=underscore_default.a.findWhere(analysis_steps,{name:t.step});matchedStep&&nextSteps.add(matchedStep)}})}),_toConsumableArray(nextSteps)}function processStepInPath(step){var level=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,stepNode=generateStepNode(step,2*(level+1)-1);if("output"===parsingOpts.direction){generateIONodesFromStep(step,2*(level+1)-2,stepNode,"input");var outputNodes=generateIONodesFromStep(step,2*(level+1),stepNode,"output");return nodes.push(stepNode),processedSteps[stepNode.name]=stepNode,underscore_default.a.forEach(findNextStepsFromIONode(outputNodes.created),function(nextStep){void 0===processedSteps[nextStep.name]?processStepInPath(nextStep,level+1):generateIONodesFromStep(nextStep,2*(level+2)-2,processedSteps[nextStep.name],"input")}),stepNode}throw new Error("Input-direction drawing not currently supported.")}!function(){if(Array.isArray(analysis_steps)&&analysis_steps.length>0){processStepInPath(analysis_steps[0]);for(var i=0;i<1e3&&underscore_default.a.keys(processedSteps).length<analysis_steps.length;i++){var nextSteps=underscore_default.a.filter(analysis_steps,function(s){return void 0===processedSteps[s.name]});nextSteps.length>0&&processStepInPath(nextSteps[0])}}}();var graphData={nodes:nodes,edges:edges};parsingOpts.showParameters||(graphData=filterOutParametersFromGraphData(graphData)),parsingOpts.showReferenceFiles||(graphData=filterOutReferenceFilesFromGraphData(graphData)),parsingOpts.showIndirectFiles||(graphData=filterOutIndirectFilesFromGraphData(graphData));var sortedNodes=underscore_default.a.sortBy(graphData.nodes,"column");"function"==typeof parsingOpts.nodesPreSortFxn&&(sortedNodes=parsingOpts.nodesPreSortFxn(sortedNodes));var nodesByColumnPairs=underscore_default.a.pairs(underscore_default.a.groupBy(correctColumnAssignments(sortedNodes),"column"));return nodesByColumnPairs=underscore_default.a.map(nodesByColumnPairs,function(columnGroupPair){return underscore_default.a.forEach(columnGroupPair[1],function(n,i){n.origIndexInColumn=i}),[parseInt(columnGroupPair[0]),columnGroupPair[1]]}),"function"==typeof parsingOpts.nodesInColumnSortFxn&&(nodesByColumnPairs=underscore_default.a.map(nodesByColumnPairs,function(_ref){var nodesInColumn,_ref2=_slicedToArray(_ref,2),columnGroupIdx=_ref2[0],columnGroupNodes=_ref2[1];return nodesInColumn=Array.isArray(parsingOpts.skipSortOnColumns)&&parsingOpts.skipSortOnColumns.indexOf(columnGroupIdx)>-1?columnGroupNodes.slice(0):columnGroupNodes.sort(parsingOpts.nodesInColumnSortFxn),underscore_default.a.forEach(nodesInColumn,function(n,i){n.indexInColumn=i}),"function"==typeof parsingOpts.nodesInColumnPostSortFxn&&(nodesInColumn=parsingOpts.nodesInColumnPostSortFxn(nodesInColumn,columnGroupIdx),underscore_default.a.forEach(nodesInColumn,function(n,i){n.indexInColumn=i})),[columnGroupIdx,nodesInColumn]})),{nodes:sortedNodes=underscore_default.a.reduce(nodesByColumnPairs,function(m,_ref3){var _ref4=_slicedToArray(_ref3,2),nodesInColumn=(_ref4[0],_ref4[1]);return m.concat(nodesInColumn)},[]),edges:graphData.edges}});function traceNodePathAndRun(nextNode,fxn){var direction=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"output",lastNode=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,depth=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if("function"!=typeof fxn)return null;var nextNodes="output"===direction?Array.isArray(nextNode.outputNodes)?nextNode.outputNodes:Array.isArray(nextNode.inputOf)?nextNode.inputOf:[]:"input"===direction?Array.isArray(nextNode.inputNodes)?nextNode.inputNodes:nextNode.outputOf?[nextNode.outputOf]:[]:[],fxnResult=fxn(nextNode,lastNode,nextNodes);return depth>1e3?(console.error("Reached max depth (1000) at node ",nextNode),[fxnResult,null]):[fxnResult,underscore_default.a.map(nextNodes,function(n){return traceNodePathAndRun(n,fxn,direction,nextNode,depth+1)})]}function correctColumnAssignments(graphData){var nodes;if(Array.isArray(graphData))nodes=graphData;else{if(!Array.isArray(graphData.nodes))throw new Error("No nodes provided.");nodes=graphData.nodes}var colCorrectFxn=function(node,lastNode){if("number"==typeof node.column&&"number"==typeof lastNode.column){if(node.column-lastNode.column<1){var colDifferenceToAdd=Math.abs(lastNode.column-node.column)+1;node.column+=colDifferenceToAdd}}else console.error("No column number on one of theses nodes",node,lastNode)};return underscore_default.a.forEach(nodes,function(node){if("number"==typeof node.column){if(Array.isArray(node.outputNodes)&&node.outputNodes.length>0){var laggingOutputNodes=underscore_default.a.filter(node.outputNodes,function(oN){return"number"==typeof oN.column&&oN.column<=node.column});underscore_default.a.forEach(laggingOutputNodes,function(loN){traceNodePathAndRun(loN,colCorrectFxn,"output",node)})}if(Array.isArray(node.inputOf)&&node.inputOf.length>0){var laggingStepNodes=underscore_default.a.filter(node.inputOf,function(sN){return"number"==typeof sN.column&&sN.column<=node.column});underscore_default.a.forEach(laggingStepNodes,function(lsN){traceNodePathAndRun(lsN,colCorrectFxn,"output",node)})}}else console.error("No column number on node",node)}),graphData}function parseBasicIOAnalysisSteps(analysis_steps,workflowItem,parsingOptions){function checkIfGlobal(io){return io.meta&&io.meta.global||underscore_default.a.any(io.source||io.target||[],function(tg){return tg.name&&!tg.step})||!1}return parseAnalysisSteps([underscore_default.a.extend(underscore_default.a.omit(workflowItem,"arguments","analysis_steps","@context","cwl_data"),{inputs:underscore_default.a.filter(underscore_default.a.flatten(underscore_default.a.pluck(analysis_steps,"inputs"),!0),checkIfGlobal),outputs:underscore_default.a.filter(underscore_default.a.flatten(underscore_default.a.pluck(analysis_steps,"outputs"),!0),checkIfGlobal)})],parsingOptions)}function cleanEdgesByDeletedNodes(edges,deletedNodesObj){return underscore_default.a.filter(edges,function(e){return!(!0===deletedNodesObj[e.source.id]||!0===deletedNodesObj[e.target.id])})}function cleanNodeReferencesByDeletedNodes(nodes,deletedNodesObj){return underscore_default.a.forEach(nodes,function(n){Array.isArray(n.inputNodes)&&n.inputNodes.length>0&&(n.inputNodes=underscore_default.a.filter(n.inputNodes,function(iN){return!0!==deletedNodesObj[iN.id]})),Array.isArray(n.outputNodes)&&n.outputNodes.length>0&&(n.outputNodes=underscore_default.a.filter(n.outputNodes,function(oN){return!0!==deletedNodesObj[oN.id]}))}),nodes}function filterOutParametersFromGraphData(graphData){var deleted={};return{nodes:cleanNodeReferencesByDeletedNodes(underscore_default.a.filter(graphData.nodes,function(n){return"input"!==n.nodeType||!n.ioType||"parameter"!==n.ioType||(deleted[n.id]=!0,!1)}),deleted),edges:cleanEdgesByDeletedNodes(graphData.edges,deleted)}}function filterOutReferenceFilesFromGraphData(graphData){var deleted={};return{nodes:cleanNodeReferencesByDeletedNodes(underscore_default.a.filter(graphData.nodes,function(n){return"reference file"!==n.ioType||(deleted[n.id]=!0,!1)}),deleted),edges:cleanEdgesByDeletedNodes(graphData.edges,deleted)}}function filterOutIndirectFilesFromGraphData(graphData){var deleted={};return{nodes:cleanNodeReferencesByDeletedNodes(underscore_default.a.filter(graphData.nodes,function(n){return"input"!==n.nodeType&&"output"!==n.nodeType||(!(!n||!n.meta||!0!==n.meta.in_path)||(deleted[n.id]=!0,!1))}),deleted),edges:cleanEdgesByDeletedNodes(graphData.edges,deleted)}}function Node_typeof(obj){return(Node_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Node_extends(){return(Node_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function Node_toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Node_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Node_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Node_createClass(Constructor,protoProps,staticProps){return protoProps&&Node_defineProperties(Constructor.prototype,protoProps),staticProps&&Node_defineProperties(Constructor,staticProps),Constructor}function Node_possibleConstructorReturn(self,call){return!call||"object"!==Node_typeof(call)&&"function"!=typeof call?Node_assertThisInitialized(self):call}function Node_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Node_getPrototypeOf(o){return(Node_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Node_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Node_setPrototypeOf(subClass,superClass)}function Node_setPrototypeOf(o,p){return(Node_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var obj,key,value,Node_DefaultNodeElement=function(_React$PureComponent){function DefaultNodeElement(){return Node_classCallCheck(this,DefaultNodeElement),Node_possibleConstructorReturn(this,Node_getPrototypeOf(DefaultNodeElement).apply(this,arguments))}return Node_inherits(DefaultNodeElement,external_React_default.a.PureComponent),Node_createClass(DefaultNodeElement,[{key:"icon",value:function(){var iconClass,_this$props$node=this.props.node,type=_this$props$node.type,format=_this$props$node.format;if("input"===type||"output"===type){var formats=format;void 0===formats?iconClass="question":"string"==typeof formats&&((formats=formats.toLowerCase()).indexOf("file")>-1?iconClass="file-text-o":(formats.indexOf("parameter")>-1||formats.indexOf("int")>-1||formats.indexOf("string")>-1)&&(iconClass="wrench"))}else"step"===type&&(iconClass="cogs");return iconClass?external_React_default.a.createElement("i",{className:"icon icon-fw icon-"+iconClass}):null}},{key:"tooltip",value:function(){var node=this.props.node,output="";if("step"===node.nodeType)output+="<small>Step "+((node.column-1)/2+1)+"</small>";else{var nodeType=node.nodeType;output+="<small>"+(nodeType=nodeType.charAt(0).toUpperCase()+nodeType.slice(1))+"</small>"}return output+='<h5 class="text-600 tooltip-title">'+(node.title||node.name)+"</h5>",("string"==typeof node.description||node.meta&&"string"==typeof node.meta.description)&&(output+="<div>"+(node.description||node.meta.description)+"</div>"),output}},{key:"render",value:function(){var _this$props=this.props,node=_this$props.node,title=_this$props.title,columnWidth=_this$props.columnWidth,style="input"===node.nodeType||"output"===node.nodeType?{width:columnWidth||100}:null;return external_React_default.a.createElement("div",{className:"node-visible-element","data-tip":this.tooltip(),"data-place":"top","data-html":!0,style:style},external_React_default.a.createElement("div",{className:"node-name"},this.icon(),title||node.title||node.name))}}]),DefaultNodeElement}();obj=Node_DefaultNodeElement,key="propTypes",value={node:prop_types_default.a.object,disabled:prop_types_default.a.bool,selected:prop_types_default.a.bool,related:prop_types_default.a.oneOfType([prop_types_default.a.bool,prop_types_default.a.string]),columnWidth:prop_types_default.a.number},key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;var Node_Node=function(_React$Component){function Node(props){var _this;return Node_classCallCheck(this,Node),(_this=Node_possibleConstructorReturn(this,Node_getPrototypeOf(Node).call(this,props))).isInSelectionPath=memoize_one_esm(Node.isInSelectionPath.bind(Node_assertThisInitialized(_this))),_this.isRelated=memoize_one_esm(Node.isRelated.bind(Node_assertThisInitialized(_this))),_this.isDisabled=memoize_one_esm(_this.isDisabled.bind(Node_assertThisInitialized(_this))),_this}return Node_inherits(Node,external_React_default.a.Component),Node_createClass(Node,null,[{key:"isSelected",value:function(currentNode,selectedNode){return!!selectedNode&&selectedNode===currentNode}},{key:"isInSelectionPath",value:function(currentNode,selectedNode){if(!selectedNode)return!1;function check(nodeBeingTraversed){return Node.isSelected(currentNode,nodeBeingTraversed)}var results,selectedInputs=selectedNode&&(selectedNode.inputNodes||selectedNode.outputOf&&[selectedNode.outputOf])||null,selectedOutputs=selectedNode&&(selectedNode.outputNodes||selectedNode.inputOf)||null;return!!(Array.isArray(selectedInputs)&&selectedInputs.length>0&&(results=underscore_default.a.flatten(underscore_default.a.map(selectedInputs,function(sI){return traceNodePathAndRun(sI,check,"input",selectedNode)}),!1),underscore_default.a.any(results)))||!!(Array.isArray(selectedOutputs)&&selectedOutputs.length>0&&(results=underscore_default.a.flatten(underscore_default.a.map(selectedOutputs,function(sO){return traceNodePathAndRun(sO,check,"output",selectedNode)}),!1),underscore_default.a.any(results)))}},{key:"findCommonStepNodesInputInto",value:function(){var nodes=Array.from(arguments),nodeInputOfLists=underscore_default.a.filter(underscore_default.a.pluck(nodes,"inputOf"),function(ioList){return Array.isArray(ioList)&&ioList.length>0});return nodeInputOfLists.length===nodes.length&&underscore_default.a.intersection.apply(underscore_default.a,Node_toConsumableArray(nodeInputOfLists))}},{key:"isInputOfSameStep",value:function(){return Node.findCommonStepNodesInputInto.apply(Node,arguments).length>0}},{key:"isRelated",value:function(currentNode,selectedNode){if(!selectedNode)return!1;if(selectedNode.name===currentNode.name||underscore_default.a.any((currentNode._source||[]).concat(currentNode._target||[]),function(s){return s.name===selectedNode.name})){if("input"===currentNode.nodeType||"output"===currentNode.nodeType)return Node.isInputOfSameStep(currentNode,selectedNode);if("input-group"===currentNode.nodeType)return Node.isInputOfSameStep(currentNode,selectedNode)&&Node.isFromSameWorkflowType(currentNode,selectedNode)}return!1}},{key:"isFromSameWorkflowType",value:function(currentNode,selectedNode){return"string"==typeof currentNode.meta.workflow&&"string"==typeof selectedNode.meta.workflow&&selectedNode.meta.workflow===currentNode.meta.workflow||(!("string"!=typeof selectedNode.meta.workflow||!Array.isArray(currentNode._source)||!underscore_default.a.any(currentNode._source,function(s){return"string"==typeof s.workflow&&s.workflow===selectedNode.meta.workflow}))||!("string"!=typeof currentNode.meta.workflow||!Array.isArray(selectedNode._source)||!underscore_default.a.any(selectedNode._source,function(s){return"string"==typeof s.workflow&&s.workflow===currentNode.meta.workflow})))}}]),Node_createClass(Node,[{key:"componentDidMount",value:function(){var _this$props2=this.props,countInActiveContext=_this$props2.countInActiveContext,lastActiveContextNode=_this$props2.lastActiveContextNode,node=_this$props2.node,scrollContainerWrapperElement=_this$props2.scrollContainerWrapperElement,columnWidth=_this$props2.columnWidth,columnSpacing=_this$props2.columnSpacing,sw=scrollContainerWrapperElement;if(node.isCurrentContext&&sw&&(1===countInActiveContext||countInActiveContext>1&&lastActiveContextNode===node)){var scrollLeft=sw.scrollLeft,containerWidth=sw.offsetWidth||sw.clientWidth,nodeXEnd=node.x+columnWidth+columnSpacing;nodeXEnd>containerWidth+scrollLeft&&(sw.scrollLeft=nodeXEnd-containerWidth)}}},{key:"isDisabled",value:function(node,isNodeDisabled){return"function"==typeof isNodeDisabled?isNodeDisabled(node):"boolean"==typeof isNodeDisabled&&isNodeDisabled}},{key:"render",value:function(){var _this$props3=this.props,node=_this$props3.node,isNodeDisabled=_this$props3.isNodeDisabled,className=_this$props3.className,columnWidth=_this$props3.columnWidth,renderNodeElement=_this$props3.renderNodeElement,selectedNode=_this$props3.selectedNode,disabled=void 0!==node.disabled?node.disabled:this.isDisabled(node,isNodeDisabled),isCurrentContext=void 0!==node.isCurrentContext?node.isCurrentContext:null,classNameList=["node","node-type-"+node.nodeType],selected=!disabled&&Node.isSelected(node,selectedNode)||!1,related=!disabled&&this.isRelated(node,selectedNode)||!1,inSelectionPath=selected||!disabled&&this.isInSelectionPath(node,selectedNode)||!1;disabled&&classNameList.push("disabled"),isCurrentContext&&classNameList.push("current-context"),"function"==typeof className?classNameList.push(className(node)):"string"==typeof className&&classNameList.push(className);var visibleNodeProps=underscore_default.a.extend(underscore_default.a.omit(this.props,"children","onMouseEnter","onMouseLeave","onClick","className","nodeElement"),{disabled:disabled,selected:selected,related:related,isCurrentContext:isCurrentContext,inSelectionPath:inSelectionPath});return external_React_default.a.createElement("div",{className:classNameList.join(" "),"data-node-key":node.id||node.name,"data-node-type":node.nodeType,"data-node-global":node.meta&&!0===node.meta.global,"data-node-selected":selected,"data-node-in-selection-path":inSelectionPath,"data-node-related":related,"data-node-type-detail":node.ioType&&node.ioType.toLowerCase(),"data-node-column":node.column,style:{top:node.y,left:node.x,width:columnWidth||100,zIndex:2+(node.indexInColumn||0)}},external_React_default.a.createElement("div",Node_extends({className:"inner",children:renderNodeElement(node,visibleNodeProps)},underscore_default.a.pick(this.props,"onMouseEnter","onMouseLeave"),{onClick:disabled?null:this.props.onClick})))}}]),Node}();function NodesLayer_typeof(obj){return(NodesLayer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function NodesLayer_possibleConstructorReturn(self,call){return!call||"object"!==NodesLayer_typeof(call)&&"function"!=typeof call?function(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function NodesLayer_getPrototypeOf(o){return(NodesLayer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function NodesLayer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NodesLayer_createClass(Constructor,protoProps,staticProps){return protoProps&&NodesLayer_defineProperties(Constructor.prototype,protoProps),staticProps&&NodesLayer_defineProperties(Constructor,staticProps),Constructor}function NodesLayer_setPrototypeOf(o,p){return(NodesLayer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}var NodesLayer_NodesLayer=function(_React$PureComponent){function NodesLayer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodesLayer),(_this=NodesLayer_possibleConstructorReturn(this,NodesLayer_getPrototypeOf(NodesLayer).call(this,props))).memoized={sortedNodes:memoize_one_esm(NodesLayer.sortedNodes),countInActiveContext:memoize_one_esm(NodesLayer.countInActiveContext),lastActiveContextNode:memoize_one_esm(NodesLayer.lastActiveContextNode)},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&NodesLayer_setPrototypeOf(subClass,superClass)}(NodesLayer,external_React_default.a.PureComponent),NodesLayer_createClass(NodesLayer,null,[{key:"sortedNodes",value:function(nodes){return underscore_default.a.sortBy(nodes.slice(0),"id")}},{key:"countInActiveContext",value:function(nodes){return underscore_default.a.reduce(nodes,function(m,n){return n.isCurrentContext?++m:m},0)}},{key:"lastActiveContextNode",value:function(nodes){return underscore_default.a.sortBy(underscore_default.a.filter(nodes,function(n){return n.isCurrentContext}),"column").reverse()[0]}}]),NodesLayer_createClass(NodesLayer,[{key:"renderNodeElements",value:function(){var _this2=this;if(!this.props.scrollContainerWrapperMounted)return null;var _this$props=this.props,nodes=_this$props.nodes,onNodeMouseEnter=_this$props.onNodeMouseEnter,onNodeMouseLeave=_this$props.onNodeMouseLeave,onNodeClick=_this$props.onNodeClick,nodeClassName=_this$props.nodeClassName,sortedNodes=this.memoized.sortedNodes(nodes),countInActiveContext=this.memoized.countInActiveContext(sortedNodes),lastActiveContextNode=0===countInActiveContext?null:this.memoized.lastActiveContextNode(sortedNodes);return underscore_default.a.map(sortedNodes,function(node,nodeIndex){var nodeProps=underscore_default.a.extend(underscore_default.a.omit(_this2.props,"children","nodes","width","innerWidth","outerWidth","windowWidth"),{node:node,countInActiveContext:countInActiveContext,lastActiveContextNode:lastActiveContextNode,onMouseEnter:onNodeMouseEnter&&onNodeMouseEnter.bind(onNodeMouseEnter,node),onMouseLeave:onNodeMouseLeave&&onNodeMouseLeave.bind(onNodeMouseLeave,node),onClick:onNodeClick&&onNodeClick.bind(onNodeClick,node),key:node.id||node.name||nodeIndex,className:nodeClassName});return external_React_default.a.createElement(esm_CSSTransition,{classNames:"workflow-node-transition",unmountOnExit:!0,timeout:500,key:nodeProps.key},external_React_default.a.createElement(Node_Node,nodeProps))})}},{key:"render",value:function(){var _this$props2=this.props,innerMargin=_this$props2.innerMargin,innerWidth=_this$props2.innerWidth,outerHeight=_this$props2.outerHeight,contentWidth=_this$props2.contentWidth,fullWidth=innerWidth+innerMargin.left+innerMargin.right,layerStyle={width:Math.max(contentWidth,fullWidth),height:outerHeight};return external_React_default.a.createElement("div",{className:"nodes-layer-wrapper",style:layerStyle},external_React_default.a.createElement("div",{className:"nodes-layer",style:layerStyle},external_React_default.a.createElement(esm_TransitionGroup,{component:null},this.renderNodeElements())))}}]),NodesLayer}();function Edge_typeof(obj){return(Edge_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Edge_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Edge_getPrototypeOf(o){return(Edge_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Edge_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Edge_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Edge_createClass(Constructor,protoProps,staticProps){return protoProps&&Edge_defineProperties(Constructor.prototype,protoProps),staticProps&&Edge_defineProperties(Constructor,staticProps),Constructor}function Edge_setPrototypeOf(o,p){return(Edge_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(NodesLayer_NodesLayer,"defaultProps",{onNodeMouseEnter:null,onNodeMouseLeave:null,onNodeClick:null});var pathDimensionFunctions={drawBezierEdge:function(startPt,endPt,columnSpacing,rowSpacing,nodeEdgeLedgeWidths){var ledgeWidths=nodeEdgeLedgeWidths,path=src_path();path.moveTo(startPt.x,startPt.y),path.lineTo(startPt.x+ledgeWidths[0],startPt.y);var nodeXDif=Math.abs(endPt.x-startPt.x),bezierStartPt={x:startPt.x+ledgeWidths[0],y:startPt.y},bezierEndPt={x:endPt.x-ledgeWidths[1],y:endPt.y};nodeXDif>columnSpacing&&(bezierStartPt.x+=Math.max(0,nodeXDif-columnSpacing*(Math.abs(endPt.y-startPt.y)/rowSpacing*2.5)));var bezierXDif=Math.abs(bezierStartPt.x-bezierEndPt.x),controlPoints=[{x:bezierStartPt.x+.5*bezierXDif,y:startPt.y},{x:bezierEndPt.x-.5*bezierXDif,y:endPt.y}];if(startPt.x>endPt.x){var dif=Math.max(rowSpacing||75);controlPoints[0].y+=dif*(endPt.y>=startPt.y?1:-1),controlPoints[1].y+=dif*(endPt.y-startPt.y>rowSpacing?-1:1),controlPoints[1].x=endPt.x-.5*Math.abs(endPt.x-startPt.x)}return path.bezierCurveTo(controlPoints[0].x,controlPoints[0].y,controlPoints[1].x,controlPoints[1].y,bezierEndPt.x,endPt.y),path.lineTo(endPt.x,endPt.y),path.toString()},drawStraightLineCurved:memoize_one_esm(function(startPt,endPt,curveRadius){var radius=Math.min(curveRadius,Math.abs(startPt.y-endPt.y)/2),arcYOffset=Math.min(Math.max(endPt.y-startPt.y,-radius),radius),path=src_path();return path.moveTo(startPt.x,startPt.y),path.lineTo(startPt.x+(endPt.x-startPt.x)/2-radius,startPt.y),path.arcTo(startPt.x+(endPt.x-startPt.x)/2,startPt.y,startPt.x+(endPt.x-startPt.x)/2,startPt.y+arcYOffset,radius),path.lineTo(startPt.x+(endPt.x-startPt.x)/2,endPt.y-arcYOffset),path.arcTo(startPt.x+(endPt.x-startPt.x)/2,endPt.y,startPt.x+(endPt.x-startPt.x)/2+radius,endPt.y,radius),path.lineTo(endPt.x,endPt.y),path.toString()}),drawBezierEdgeVertices:function(startPt,endPt,vertices,nodeEdgeLedgeWidths){var adjVertices=vertices.map(function(v){return v.slice()});return adjVertices[0][0]=startPt&&startPt.x||adjVertices[0][0],adjVertices[adjVertices.length-1][0]=endPt&&endPt.x||adjVertices[adjVertices.length-1][0],nodeEdgeLedgeWidths[0]&&(adjVertices.unshift([adjVertices[0][0],adjVertices[0][1]]),adjVertices[1][0]+=nodeEdgeLedgeWidths[0]),nodeEdgeLedgeWidths[1]&&(adjVertices.push([adjVertices[adjVertices.length-1][0],adjVertices[adjVertices.length-1][1]]),adjVertices[adjVertices.length-2][0]-=nodeEdgeLedgeWidths[0]),adjVertices[0][0]=startPt&&startPt.x||adjVertices[0][0],adjVertices[adjVertices.length-1][0]=endPt&&endPt.x||adjVertices[adjVertices.length-1][0],src_line().x(function(d){return d[0]}).y(function(d){return d[1]}).curve(monotoneX)(adjVertices)},drawStraightEdge:function(startPt,endPt){var path=src_path();return path.moveTo(startPt.x,startPt.y),path.lineTo(endPt.x,endPt.y),path.closePath(),path.toString()}},Edge_Edge=function(_React$Component){function Edge(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Edge),(_this=function(self,call){return!call||"object"!==Edge_typeof(call)&&"function"!=typeof call?Edge_assertThisInitialized(self):call}(this,Edge_getPrototypeOf(Edge).call(this,props))).generatePathDimension=_this.generatePathDimension.bind(Edge_assertThisInitialized(_this)),_this.transitionPathDimensions=_this.transitionPathDimensions.bind(Edge_assertThisInitialized(_this)),_this.memoized={isDistantlySelected:memoize_one_esm(Edge.isDistantlySelected),isRelated:memoize_one_esm(Edge.isRelated),isDisabled:memoize_one_esm(Edge.isDisabled),d:{drawBezierEdge:memoize_one_esm(pathDimensionFunctions.drawBezierEdge),drawBezierEdgeVertices:memoize_one_esm(pathDimensionFunctions.drawBezierEdgeVertices),drawStraightLineCurved:memoize_one_esm(pathDimensionFunctions.drawStraightLineCurved),drawStraightEdge:memoize_one_esm(pathDimensionFunctions.drawStraightEdge)}},_this.getComputedProperties=_this.getComputedProperties.bind(Edge_assertThisInitialized(_this)),_this.state={pathDimension:_this.generatePathDimension()},_this.pathRef=external_React_default.a.createRef(),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Edge_setPrototypeOf(subClass,superClass)}(Edge,external_React_default.a.Component),Edge_createClass(Edge,null,[{key:"isSelected",value:function(edge,selectedNode){return Node_Node.isSelected(edge.source,selectedNode)||Node_Node.isSelected(edge.target,selectedNode)}},{key:"isRelated",value:function(edge,selectedNode){return Node_Node.isRelated(edge.source,selectedNode)}},{key:"isDistantlySelected",value:function(edge,selectedNode){if(!selectedNode)return!1;function checkInput(node){return Node_Node.isSelected(edge.target,node)}function checkOutput(node){return Node_Node.isSelected(edge.source,node)}var selectedInputs=selectedNode&&(selectedNode.inputNodes||selectedNode.outputOf&&[selectedNode.outputOf])||null;if(Array.isArray(selectedInputs)&&selectedInputs.length>0){var resultsHistory=underscore_default.a.flatten(selectedInputs.map(function(sI){return traceNodePathAndRun(sI,checkInput,"input",selectedNode)}),!1);if(underscore_default.a.any(resultsHistory))return!0}var selectedOutputs=selectedNode&&(selectedNode.outputNodes||selectedNode.inputOf&&selectedNode.inputOf)||null;if(Array.isArray(selectedOutputs)&&selectedOutputs.length>0){var resultsFuture=underscore_default.a.flatten(selectedOutputs.map(function(sO){return traceNodePathAndRun(sO,checkOutput,"output",selectedNode)}),!1);if(underscore_default.a.any(resultsFuture))return!0}return!1}},{key:"isDisabled",value:function(edge){var isNodeDisabled=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"boolean"==typeof isNodeDisabled?isNodeDisabled:"function"==typeof isNodeDisabled&&(isNodeDisabled(edge.source)||isNodeDisabled(edge.target))}},{key:"didNodeCoordinatesChange",value:function(nextProps,pastProps){return nextProps.startX!==pastProps.startX||nextProps.startY!==pastProps.startY||nextProps.endX!==pastProps.endX||nextProps.endY!==pastProps.endY}},{key:"pathArrowsMarkers",value:function(){return external_React_default.a.createElement("defs",null,external_React_default.a.createElement("marker",{id:"pathArrowBlack",viewBox:"0 0 15 15",refX:"0",refY:"5",orient:"auto",markerUnits:"strokeWidth",markerWidth:"6",markerHeight:"5"},external_React_default.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 Z",className:"pathArrow-marker marker-color-black"})),external_React_default.a.createElement("marker",{id:"pathArrowGray",viewBox:"0 0 15 15",refX:"0",refY:"5",orient:"auto",markerUnits:"strokeWidth",markerWidth:"6",markerHeight:"5"},external_React_default.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 Z",className:"pathArrow-marker marker-color-gray"})),external_React_default.a.createElement("marker",{id:"pathArrowLightGray",viewBox:"0 0 15 15",refX:"0",refY:"5",orient:"auto",markerUnits:"strokeWidth",markerWidth:"6",markerHeight:"5"},external_React_default.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 Z",className:"pathArrow-marker marker-color-light-gray"})))}}]),Edge_createClass(Edge,[{key:"getComputedProperties",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,edge=props.edge,selectedNode=props.selectedNode,isNodeDisabled=props.isNodeDisabled,disabled=this.memoized.isDisabled(edge,isNodeDisabled);if(disabled||!selectedNode)return{disabled:disabled,selected:!1,related:!1};var selected=Edge.isSelected(edge,selectedNode),related=this.memoized.isRelated(edge,selectedNode),distantlySelected=selected||selectedNode&&this.memoized.isDistantlySelected(edge,selectedNode,disabled)||!1;return{disabled:disabled,selected:selected,related:related,distantlySelected:distantlySelected}}},{key:"componentDidUpdate",value:function(pastProps){var _this$props=this.props,startX=_this$props.startX,startY=_this$props.startY,endX=_this$props.endX,endY=_this$props.endY,edge=_this$props.edge;if(Edge.didNodeCoordinatesChange(this.props,pastProps))if(this.shouldDoTransitionOfEdge()){var startEndPtCoords=[{x:pastProps.startX,y:pastProps.startY},{x:startX,y:startY},{x:pastProps.endX,y:pastProps.endY},{x:endX,y:endY}];edge.vertices&&pastProps.edge.vertices&&edge.vertices.length===pastProps.edge.vertices.length?this.transitionPathDimensions.apply(this,startEndPtCoords.concat([pastProps.edge.vertices,edge.vertices])):this.transitionPathDimensions.apply(this,startEndPtCoords)}else this.setState({pathDimension:this.generatePathDimension()});else underscore_default.a.isEqual(this.getPathOffsets(),this.getPathOffsets(pastProps))||this.setState({pathDimension:this.generatePathDimension()})}},{key:"shouldComponentUpdate",value:function(nextProps,nextState){if(Edge.didNodeCoordinatesChange(nextProps,this.props))return!0;if(this.state.pathDimension!==nextState.pathDimension)return!0;var i,propKeys=underscore_default.a.without(underscore_default.a.keys(nextProps),"scrollContainerWrapperElement","scrollContainerWrapperMounted","nodes","edges","href","renderDetailPane","isNodeCurrentContext","contentWidth","onNodeClick","edgeCount"),propKeysLen=propKeys.length;for(i=0;i<propKeysLen;i++)if(this.props[propKeys[i]]!==nextProps[propKeys[i]])return!0;return!1}},{key:"shouldDoTransitionOfEdge",value:function(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return!props.noTransition&&!(props.edgeCount>60)}},{key:"transitionPathDimensions",value:function(startPtA,startPtB,endPtA,endPtB,startVertices,endVertices){var _this2=this,interpolateSourceX=src_number(startPtA.x,startPtB.x),interpolateSourceY=src_number(startPtA.y,startPtB.y),interpolateTargetX=src_number(endPtA.x,endPtB.x),interpolateTargetY=src_number(endPtA.y,endPtB.y),interpolationFxnPerVertex=null;startVertices&&endVertices&&(interpolationFxnPerVertex=startVertices.map(function(startV,idx){return[src_number(startV[0],endVertices[idx][0]),src_number(startV[1],endVertices[idx][1])]}));var pathElem=this.pathRef.current;pathElem&&src_select(this).interrupt().transition().ease(quadOut).duration(500).tween("changeDimension",function(){return function(t){var nextCoords=[{x:interpolateSourceX(t),y:interpolateSourceY(t)},{x:interpolateTargetX(t),y:interpolateTargetY(t)}],nextVs=null;interpolationFxnPerVertex&&(nextVs=interpolationFxnPerVertex.map(function(_ref){var _ref2=Edge_slicedToArray(_ref,2),interpX=_ref2[0],interpY=_ref2[1];return[interpX(t),interpY(t)]})),pathElem.setAttribute("d",_this2.generatePathDimension.apply(_this2,nextCoords.concat([nextVs])))}}).on("end",function(){_this2.setState({pathDimension:_this2.generatePathDimension()})})}},{key:"getPathOffsets",value:function(){var startOffset=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,endOffset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-5,props=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props,edge=props.edge,pathArrows=props.pathArrows,_this$getComputedProp=this.getComputedProperties(props),selected=(_this$getComputedProp.disabled,_this$getComputedProp.selected),related=_this$getComputedProp.related,distantlySelected=_this$getComputedProp.distantlySelected;return pathArrows&&(endOffset-=10),(selected||related)&&(endOffset-=5),distantlySelected&&(endOffset-=2),edge.source.isCurrentContext&&(startOffset+=5),edge.target.isCurrentContext&&(endOffset-=5),{startOffset:startOffset,endOffset:endOffset}}},{key:"generatePathDimension",value:function(){var startPtOverride=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,endPtOverride=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,edgeVerticesOverride=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_this$props2=this.props,edgeStyle=_this$props2.edgeStyle,startX=_this$props2.startX,startY=_this$props2.startY,endX=_this$props2.endX,endY=_this$props2.endY,columnWidth=_this$props2.columnWidth,curveRadius=_this$props2.curveRadius,columnSpacing=_this$props2.columnSpacing,rowSpacing=_this$props2.rowSpacing,nodeEdgeLedgeWidths=_this$props2.nodeEdgeLedgeWidths,_this$props2$edge$ver=_this$props2.edge.vertices,customEdgeVertices=void 0===_this$props2$edge$ver?null:_this$props2$edge$ver,_this$getPathOffsets=this.getPathOffsets(),startOffset=_this$getPathOffsets.startOffset,endOffset=_this$getPathOffsets.endOffset,startPt={x:(startPtOverride&&startPtOverride.x||startX)+columnWidth+startOffset,y:startPtOverride&&startPtOverride.y||startY},endPt={x:(endPtOverride&&endPtOverride.x||endX)+endOffset,y:endPtOverride&&endPtOverride.y||endY};return customEdgeVertices||edgeVerticesOverride?this.memoized.d.drawBezierEdgeVertices(startPt,endPt,edgeVerticesOverride||customEdgeVertices,nodeEdgeLedgeWidths):"straight"===edgeStyle?this.memoized.d.drawStraightEdge(startPt,endPt):"curve"===edgeStyle?this.memoized.d.drawStraightLineCurved(startPt,endPt,curveRadius):"bezier"===edgeStyle?this.memoized.d.drawBezierEdge(startPt,endPt,columnSpacing,rowSpacing,nodeEdgeLedgeWidths):void 0}},{key:"render",value:function(){var markerEnd,_this$props3=this.props,edge=_this$props3.edge,pathArrows=_this$props3.pathArrows,style=_this$props3.style,pathDimension=this.state.pathDimension,_this$getComputedProp2=this.getComputedProperties(),disabled=_this$getComputedProp2.disabled,selected=_this$getComputedProp2.selected,related=_this$getComputedProp2.related,distantlySelected=_this$getComputedProp2.distantlySelected;return markerEnd=pathArrows?selected||related||distantlySelected?"pathArrowBlack":disabled?"pathArrowLightGray":"pathArrowGray":null,external_React_default.a.createElement("path",{d:pathDimension,ref:this.pathRef,className:"edge-path"+(disabled?" disabled":""),"data-edge-selected":selected||distantlySelected,"data-edge-related":related,"data-source":edge.source.name,"data-target":edge.target.name,style:style,markerEnd:markerEnd&&"url(#"+markerEnd+")"})}}]),Edge}();function EdgesLayer_toConsumableArray(arr){return function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function EdgesLayer_typeof(obj){return(EdgesLayer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function EdgesLayer_extends(){return(EdgesLayer_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function EdgesLayer_getPrototypeOf(o){return(EdgesLayer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function EdgesLayer_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function EdgesLayer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function EdgesLayer_createClass(Constructor,protoProps,staticProps){return protoProps&&EdgesLayer_defineProperties(Constructor.prototype,protoProps),staticProps&&EdgesLayer_defineProperties(Constructor,staticProps),Constructor}function EdgesLayer_setPrototypeOf(o,p){return(EdgesLayer_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function EdgesLayer_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(Edge_Edge,"defaultProps",{edgeStyle:"bezier",curveRadius:12});var EdgesLayer_EdgesLayer=function(_React$PureComponent){function EdgesLayer(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EdgesLayer),_this=function(self,call){return!call||"object"!==EdgesLayer_typeof(call)&&"function"!=typeof call?EdgesLayer_assertThisInitialized(self):call}(this,EdgesLayer_getPrototypeOf(EdgesLayer).call(this,props)),function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(EdgesLayer_assertThisInitialized(_this),"sortedEdges",memoize_one_esm(function(edges,selectedNodes,isNodeDisabled){return EdgesLayer.sortedEdges(edges,selectedNodes,isNodeDisabled)})),_this.sortedEdges=_this.sortedEdges.bind(EdgesLayer_assertThisInitialized(_this)),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&EdgesLayer_setPrototypeOf(subClass,superClass)}(EdgesLayer,external_React_default.a.PureComponent),EdgesLayer_createClass(EdgesLayer,null,[{key:"sortedEdges",value:function(edges,selectedNode,isNodeDisabled){return edges.slice(0).sort(function(a,b){var isASelected=Edge_Edge.isSelected(a,selectedNode,isNodeDisabled),isBSelected=Edge_Edge.isSelected(b,selectedNode,isNodeDisabled);return isASelected&&!isBSelected?1:!isASelected&&isBSelected?-1:0}).sort(function(a,b){var isADisabled=Edge_Edge.isDisabled(a,isNodeDisabled),isBDisabled=Edge_Edge.isDisabled(b,isNodeDisabled);return isADisabled&&!isBDisabled?-1:!isADisabled&&isBDisabled?1:0})}}]),EdgesLayer_createClass(EdgesLayer,[{key:"pathArrows",value:function(){return this.props.pathArrows?Edge_Edge.pathArrowsMarkers():null}},{key:"render",value:function(){var _this2=this,_this$props=this.props,outerHeight=_this$props.outerHeight,innerMargin=(_this$props.innerWidth,_this$props.innerMargin),width=_this$props.width,origEdges=_this$props.edges,nodes=_this$props.nodes,selectedNode=_this$props.selectedNode,isNodeDisabled=_this$props.isNodeDisabled,contentWidth=_this$props.contentWidth,_traceEdges=function(originalEdges,nodes,columnWidth,columnSpacing,rowSpacing,contentWidth,contentHeight,innerMargin){var res,nodeEdgeLedgeWidths=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[10,10],topMargin=innerMargin&&innerMargin.top||0,leftMargin=innerMargin&&innerMargin.left||0,endHeight=topMargin+contentHeight+(innerMargin&&Math.max(0,innerMargin.bottom-10))||0,colStartXMap={},nodesByColumn=underscore_default.a.reduce(nodes,function(m,node){var column=node.column;return void 0===m[column]&&(m[column]=[]),m[column].push(node),m},{}),columnCount=underscore_default.a.keys(nodesByColumn).length;function buildVisibilityGraph(){for(var subdivisions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,partialHeight=rowSpacing/subdivisions,quarterHeight=rowSpacing/4,horizontalLineYCoords=[],currY=topMargin;currY>=10;)currY-=partialHeight;for(;currY<endHeight;)currY+=partialHeight,horizontalLineYCoords.push(currY);for(var segments=[],segmentsByColumnIdx=[],_loop=function(columnIdx){segmentsByColumnIdx.push([]);var nodesInColYCoords=underscore_default.a.pluck(nodesByColumn[columnIdx],"y"),nodesInColYCoordsLen=nodesInColYCoords.length,colStartX=colStartXMap[columnIdx];void 0===colStartX&&(colStartX=colStartXMap[columnIdx]=leftMargin+columnIdx*columnWidth+columnSpacing*columnIdx);var colEndX=colStartX+columnWidth;underscore_default.a.forEach(horizontalLineYCoords,function(yCoord){for(var i=0;i<nodesInColYCoordsLen;i++){var highY=nodesInColYCoords[i]+quarterHeight,lowY=nodesInColYCoords[i]-quarterHeight;if(yCoord<=highY&&yCoord>=lowY)return}var segment=[[colStartX,yCoord],[colEndX,yCoord]];segments.push(segment),segmentsByColumnIdx[columnIdx].push(segment)})},columnIdx=0;columnIdx<columnCount;columnIdx++)_loop(columnIdx);return console.warn("HORZ",horizontalLineYCoords,endHeight,nodesByColumn,segments),{segments:segments,segmentsByColumnIdx:segmentsByColumnIdx}}function assembleSegments(segmentQ){function getNearestSegment(columnIdx,prevYCoord,targetYCoord){var i,j,prevEdge,previousEdges=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],segmentQLen=segmentQ.length,startXForCol=colStartXMap[columnIdx],prevEdgesLen=previousEdges.length,upperY=Math.max(prevYCoord,targetYCoord),lowerY=Math.min(prevYCoord,targetYCoord),closestSegmentDiff=1/0,closestSegmentIdx=-1,currSegment=null,currDiff=null,currSegmentY=0,intersections=0;for(i=0;i<segmentQLen;i++)if(currSegment=segmentQ[i],currSegmentY=currSegment[0][1],currSegment[0][0]===startXForCol){for(currDiff=currSegmentY>upperY?currSegmentY-upperY:currSegmentY<lowerY?lowerY-currSegmentY:.01*Math.abs(prevYCoord-currSegmentY),intersections=0,j=0;j<prevEdgesLen;j++)prevEdge=previousEdges[j],(Array.isArray(prevEdge.vertices)?prevEdge.vertices:[[prevEdge.source.x+columnWidth,prevEdge.source.y],[prevEdge.target.x,prevEdge.target.y]]).reduce(function(prevV,v){return prevV&&prevV[0]<=startXForCol&&v[0]>=startXForCol?((v[1]>currSegmentY&&prevV[1]<prevYCoord||v[1]<currSegmentY&&prevV[1]>prevYCoord)&&(0===intersections&&(intersections+=2),intersections++),v):v},null);closestSegmentDiff>(currDiff+=intersections*(.75*rowSpacing))&&(closestSegmentDiff=currDiff,closestSegmentIdx=i)}if(-1===closestSegmentIdx)return null;var bestSegment=segmentQ[closestSegmentIdx];return segmentQ.splice(closestSegmentIdx,1),bestSegment}!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var originalEdgesSortedByLength=originalEdges.slice(0).sort(function(edgeA,edgeB){var sA=edgeA.source,tA=edgeA.target,sB=edgeB.source,tB=edgeB.target,xDistA=Math.abs(tA.x-sA.x),xDistB=Math.abs(tB.x-sB.x);if(xDistA<xDistB)return-1;if(xDistA>xDistB)return 1;var yDistA=Math.abs(tA.y-sA.y),yDistB=Math.abs(tB.y-sB.y);return yDistA<yDistB?-1:yDistA>yDistB?1:0});return originalEdgesSortedByLength.map(function(edge,edgeIdx){var source=edge.source,target=edge.target,sourceCol=source.column,sourceX=source.x,sourceY=source.y,targetCol=target.column,targetX=target.x,targetY=target.y,columnDiff=targetCol-sourceCol;if(columnDiff<=0)return console.error("Target column is greater than source column",source,target),edge;if(1===columnDiff)return edge;for(var vertices=[[sourceX+columnWidth,sourceY]],prevY=sourceY,colIdx=sourceCol+1;colIdx<targetCol;colIdx++){var bestSegment=getNearestSegment(colIdx,prevY,targetY,originalEdgesSortedByLength.slice(0,edgeIdx));if(!bestSegment)throw new Error("Could not find viable path for edge");var _bestSegment=EdgesLayer_slicedToArray(bestSegment,2),_bestSegment$=EdgesLayer_slicedToArray(_bestSegment[0],2),bsX=_bestSegment$[0],bsY=_bestSegment$[1],_bestSegment$2=EdgesLayer_slicedToArray(_bestSegment[1],2),beX=_bestSegment$2[0],beY=_bestSegment$2[1];vertices.push([bsX-nodeEdgeLedgeWidths[0],bsY]),vertices.push([beX+nodeEdgeLedgeWidths[1],beY]),prevY=beY}return vertices.push([targetX,targetY]),underscore_default.a.extend({vertices:vertices},edge)})}for(var tracedEdges=null,attempts=0;!tracedEdges&&attempts<5;){res=buildVisibilityGraph(4+attempts);try{tracedEdges=assembleSegments(res.segments,4+attempts)}catch(e){if(tracedEdges=null,"Could not find viable path for edge"!==e.message)throw e;console.warn("Could not find path",attempts)}attempts++}return{edges:tracedEdges,horizontalSegments:res.segments}}(origEdges,nodes,_this$props.columnWidth,_this$props.columnSpacing,_this$props.rowSpacing,contentWidth,_this$props.innerHeight,innerMargin),edges=_traceEdges.edges,horizontalSegments=_traceEdges.horizontalSegments,edgeCount=edges.length,divWidth=Math.max(width,contentWidth);return external_React_default.a.createElement("div",{className:"edges-layer-wrapper",style:{width:divWidth,height:outerHeight}},external_React_default.a.createElement("svg",{className:"edges-layer",width:divWidth,height:outerHeight},this.pathArrows(),external_React_default.a.createElement(esm_TransitionGroup,{component:null},underscore_default.a.map(this.sortedEdges(edges,selectedNode,isNodeDisabled),function(edge){var key=(edge.source.id||edge.source.name)+"----"+(edge.target.id||edge.target.name);return external_React_default.a.createElement(esm_Transition,{unmountOnExit:!0,mountOnEnter:!0,timeout:500,key:key,onEnter:EdgesLayer.edgeOnEnter,onEntering:EdgesLayer.edgeOnEntering,onExit:EdgesLayer.edgeOnExit,onEntered:EdgesLayer.edgeOnEntered},external_React_default.a.createElement(Edge_Edge,EdgesLayer_extends({},_this2.props,{key:key,edge:edge,edgeCount:edgeCount},{startX:edge.source.x,startY:edge.source.y,endX:edge.target.x,endY:edge.target.y})))})),external_React_default.a.createElement(DebugVizGraphLayer,{segments:horizontalSegments})))}}],[{key:"edgeOnEnter",value:function(elem){elem.style.opacity=0}},{key:"edgeOnEntering",value:function(elem){elem.style.opacity=0}},{key:"edgeOnEntered",value:function(elem){elem.style.opacity=null}},{key:"edgeOnExit",value:function(elem){elem.style.opacity=0}}]),EdgesLayer}(),DebugVizGraphLayer=external_React_default.a.memo(function(_ref){var segments=_ref.segments,_ref$enabled=_ref.enabled;if(!(void 0!==_ref$enabled&&_ref$enabled))return null;var paths=segments.map(function(seg){var path=src_path();return path.moveTo.apply(path,EdgesLayer_toConsumableArray(seg[0])),path.lineTo.apply(path,EdgesLayer_toConsumableArray(seg[1])),path.toString()}).map(function(pathStr,idx){return external_React_default.a.createElement("path",{d:pathStr,key:idx})});return external_React_default.a.createElement("g",{className:"vis-debug-graph"},paths)});function DefaultDetailPane(props){var node=props.selectedNode;if(!node)return null;"step"===node.nodeType||node.ioType||node.nodeType;var textContent=JSON.stringify(node.meta,null,4);return external_React_default.a.createElement("div",{className:"detail-pane"},external_React_default.a.createElement("h4",null,"Create your own detail pane component and pass in a ",external_React_default.a.createElement("code",null,"renderDetailPane")," prop (function) which returns it."),external_React_default.a.createElement("h5",null,"Could add ",external_React_default.a.createElement("code",null,"display: flex")," & related CSS styling to visualization container & pane to have detail pane show at left or right, if desired."),external_React_default.a.createElement("div",{className:"detail-pane-body"},external_React_default.a.createElement("pre",{style:{fontFamily:"monospace",whiteSpace:"pre-wrap"}},textContent)))}function Graph_typeof(obj){return(Graph_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Graph_extends(){return(Graph_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function Graph_slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Graph_getPrototypeOf(o){return(Graph_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Graph_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Graph_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Graph_createClass(Constructor,protoProps,staticProps){return protoProps&&Graph_defineProperties(Constructor.prototype,protoProps),staticProps&&Graph_defineProperties(Constructor,staticProps),Constructor}function Graph_setPrototypeOf(o,p){return(Graph_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Graph_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}DefaultDetailPane.propTypes={selectedNode:prop_types_default.a.oneOfType([prop_types_default.a.object,prop_types_default.a.oneOf([null])])},DefaultDetailPane.defaultProps={selectedNode:null};var Graph_Graph=function(_React$Component){function Graph(props){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Graph),(_this=function(self,call){return!call||"object"!==Graph_typeof(call)&&"function"!=typeof call?Graph_assertThisInitialized(self):call}(this,Graph_getPrototypeOf(Graph).call(this,props))).height=_this.height.bind(Graph_assertThisInitialized(_this)),_this.nodesWithCoordinates=_this.nodesWithCoordinates.bind(Graph_assertThisInitialized(_this)),_this.state={mounted:!1},_this.memoized={getHeightFromNodes:memoize_one_esm(Graph.getHeightFromNodes),getScrollableWidthFromNodes:memoize_one_esm(Graph.getScrollableWidthFromNodes),getNodesWithCoordinates:memoize_one_esm(Graph.getNodesWithCoordinates)},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Graph_setPrototypeOf(subClass,superClass)}(Graph,external_React_default.a.Component),Graph_createClass(Graph,null,[{key:"getHeightFromNodes",value:function(nodes,nodesPreSortFxn,rowSpacing,minimumHeight){return"function"==typeof nodesPreSortFxn&&(nodes=nodesPreSortFxn(nodes.slice(0))),Math.max(underscore_default()(nodes).chain().groupBy("column").pairs().reduce(function(maxCount,nodeSet){return Math.max(nodeSet[1].length,maxCount)},0).value()*rowSpacing-rowSpacing,minimumHeight)}},{key:"getScrollableWidthFromNodes",value:function(nodes,columnWidth,columnSpacing,innerMargin){return(underscore_default.a.reduce(nodes,function(highestCol,node){return Math.max(node.column,highestCol)},0)+1)*(columnWidth+columnSpacing)+(innerMargin.left||0)+(innerMargin.right||0)-columnSpacing}},{key:"getNodesWithCoordinates",value:function(){var nodesByColumnPairs,leftOffset,nodesWithCoords,nodes=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,viewportWidth=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,contentWidth=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,contentHeight=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,innerMargin=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{top:0,right:0,bottom:0,left:0},rowSpacingType=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"compact",rowSpacing=arguments.length>6&&void 0!==arguments[6]?arguments[6]:75,columnWidth=arguments.length>7&&void 0!==arguments[7]?arguments[7]:150,columnSpacing=arguments.length>8&&void 0!==arguments[8]?arguments[8]:56,isNodeCurrentContext=arguments.length>9&&void 0!==arguments[9]&&arguments[9];function centerNode(n){n.y=contentHeight/2+innerMargin.top,n.nodesInColumn=1,n.indexInColumn=0}return nodesByColumnPairs=underscore_default.a.sortBy(underscore_default.a.map(underscore_default.a.pairs(underscore_default.a.groupBy(nodes,"column")),function(_ref){var _ref2=Graph_slicedToArray(_ref,2),columnNumStr=_ref2[0],nodesInColumn=_ref2[1];return[parseInt(columnNumStr),nodesInColumn]}),0),underscore_default.a.forEach(nodesByColumnPairs,function(_ref3){var _ref4=Graph_slicedToArray(_ref3,2),nodesInColumn=(_ref4[0],_ref4[1]),countInCol=nodesInColumn.length;if(nodesInColumn=underscore_default.a.sortBy(nodesInColumn,"indexInColumn"),"compact"===rowSpacingType)if(1===countInCol)centerNode(nodesInColumn[0]);else{var padding=Math.max(0,contentHeight-(countInCol-1)*rowSpacing)/2;underscore_default.a.forEach(nodesInColumn,function(nodeInCol,idx){nodeInCol.y=(idx+0)*rowSpacing+innerMargin.top+padding,nodeInCol.nodesInColumn=countInCol})}else if("stacked"===rowSpacingType)underscore_default.a.forEach(nodesInColumn,function(nodeInCol,idx){nodeInCol&&(nodeInCol.y=rowSpacing*idx+innerMargin.top,nodeInCol.nodesInColumn=countInCol)});else{if("wide"!==rowSpacingType)throw console.error("Prop 'rowSpacingType' not valid. Must be ",Graph.propTypes.rowSpacingType),new Error("Prop 'rowSpacingType' not valid.");1===countInCol?centerNode(nodesInColumn[0]):underscore_default.a.forEach(src_range(0,contentHeight,contentHeight/(countInCol-1)).concat([contentHeight]),function(yCoordinate,idx){var nodeInCol=nodesInColumn[idx];nodeInCol&&(nodeInCol.y=yCoordinate+innerMargin.top,nodeInCol.nodesInColumn=countInCol)})}}),nodesWithCoords=underscore_default.a.reduce(nodesByColumnPairs,function(m,_ref5){var _ref6=Graph_slicedToArray(_ref5,2),nodesInColumn=(_ref6[0],_ref6[1]);return m.concat(nodesInColumn)},[]),leftOffset=innerMargin.left,contentWidth&&viewportWidth&&contentWidth<viewportWidth&&(leftOffset+=(viewportWidth-contentWidth)/2),underscore_default.a.forEach(nodesWithCoords,function(node){node.x=node.column*(columnWidth+columnSpacing)+leftOffset}),"function"==typeof isNodeCurrentContext&&underscore_default.a.forEach(nodesWithCoords,function(node){node.isCurrentContext=isNodeCurrentContext(node)}),nodesWithCoords}}]),Graph_createClass(Graph,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"height",value:function(){var _this$props=this.props,nodes=_this$props.nodes,nodesPreSortFxn=_this$props.nodesPreSortFxn,rowSpacing=_this$props.rowSpacing,minimumHeight=_this$props.minimumHeight;return this.memoized.getHeightFromNodes(nodes,nodesPreSortFxn,rowSpacing,minimumHeight)}},{key:"scrollableWidth",value:function(){var _this$props2=this.props,nodes=_this$props2.nodes,columnWidth=_this$props2.columnWidth,columnSpacing=_this$props2.columnSpacing,innerMargin=_this$props2.innerMargin;return this.memoized.getScrollableWidthFromNodes(nodes,columnWidth,columnSpacing,innerMargin)}},{key:"nodesWithCoordinates",value:function(viewportWidth,contentWidth,contentHeight){var _this$props3=this.props,nodes=_this$props3.nodes,innerMargin=_this$props3.innerMargin,rowSpacingType=_this$props3.rowSpacingType,rowSpacing=_this$props3.rowSpacing,columnWidth=_this$props3.columnWidth,columnSpacing=_this$props3.columnSpacing,isNodeCurrentContext=_this$props3.isNodeCurrentContext;return this.memoized.getNodesWithCoordinates(nodes,viewportWidth,contentWidth,contentHeight,innerMargin,rowSpacingType,rowSpacing,columnWidth,columnSpacing,isNodeCurrentContext)}},{key:"render",value:function(){var _this$props4=this.props,width=_this$props4.width,innerMargin=_this$props4.innerMargin,edges=_this$props4.edges,minimumHeight=_this$props4.minimumHeight,mounted=this.state.mounted,innerHeight=this.height(),contentWidth=this.scrollableWidth(),innerWidth=width;if(!mounted)return external_React_default.a.createElement("div",{key:"outer"},external_React_default.a.createElement("div",null," "));innerMargin&&(innerMargin.left||innerMargin.right)&&(innerWidth-=innerMargin.left||0,innerWidth-=innerMargin.right||0);var nodes=this.nodesWithCoordinates(innerWidth,contentWidth,innerHeight),fullHeight=Math.max("number"==typeof minimumHeight&&minimumHeight||0,innerHeight+(innerMargin.top||0)+(innerMargin.bottom||0));return external_React_default.a.createElement("div",{className:"worfklow-chart-outer-container",key:"outer"},external_React_default.a.createElement("div",{className:"workflow-chart-inner-container"},external_React_default.a.createElement(StateContainer_StateContainer,Graph_extends({nodes:nodes,edges:edges,innerWidth:innerWidth,innerHeight:innerHeight,contentWidth:contentWidth,width:width},underscore_default.a.pick(this.props,"innerMargin","columnWidth","columnSpacing","pathArrows","href","onNodeClick","renderDetailPane")),external_React_default.a.createElement(ScrollContainer_ScrollContainer,{outerHeight:fullHeight},external_React_default.a.createElement(EdgesLayer_EdgesLayer,underscore_default.a.pick(this.props,"isNodeDisabled","isNodeCurrentContext","isNodeSelected","edgeStyle","rowSpacing","columnWidth","columnSpacing","nodeEdgeLedgeWidths")),external_React_default.a.createElement(NodesLayer_NodesLayer,underscore_default.a.pick(this.props,"renderNodeElement","isNodeDisabled","isNodeCurrentContext","nodeClassName"))))))}}]),Graph}();Graph_defineProperty(Graph_Graph,"propTypes",{isNodeDisabled:prop_types_default.a.func,innerMargin:prop_types_default.a.shape({top:prop_types_default.a.number.isRequired,bottom:prop_types_default.a.number.isRequired,left:prop_types_default.a.number.isRequired,right:prop_types_default.a.number.isRequired}).isRequired,renderNodeElement:prop_types_default.a.func.isRequired,renderDetailPane:prop_types_default.a.func.isRequired,nodes:prop_types_default.a.arrayOf(prop_types_default.a.shape({column:prop_types_default.a.number.isRequired,name:prop_types_default.a.string.isRequired,nodeType:prop_types_default.a.string.isRequired,ioType:prop_types_default.a.string,id:prop_types_default.a.string,outputOf:prop_types_default.a.object,inputOf:prop_types_default.a.arrayOf(prop_types_default.a.object),description:prop_types_default.a.string,meta:prop_types_default.a.oneOfType([prop_types_default.a.object,prop_types_default.a.shape({target:prop_types_default.a.arrayOf(prop_types_default.a.shape({name:prop_types_default.a.string.isRequired,type:prop_types_default.a.string.isRequired,step:prop_types_default.a.string}))})])})).isRequired,edges:prop_types_default.a.arrayOf(prop_types_default.a.shape({source:prop_types_default.a.object.isRequired,target:prop_types_default.a.object.isRequired,capacity:prop_types_default.a.string})).isRequired,nodeTitle:prop_types_default.a.func,rowSpacingType:prop_types_default.a.oneOf(["compact","wide","stacked"])}),Graph_defineProperty(Graph_Graph,"defaultProps",{height:null,width:null,columnSpacing:100,columnWidth:150,rowSpacing:80,rowSpacingType:"compact",pathArrows:!0,renderDetailPane:function(selectedNode,props){return external_React_default.a.createElement(DefaultDetailPane,Graph_extends({},props,{selectedNode:selectedNode}))},renderNodeElement:function(node,props){return external_React_default.a.createElement(Node_DefaultNodeElement,Graph_extends({},props,{node:node}))},onNodeClick:null,innerMargin:{top:80,bottom:80,left:40,right:40},minimumHeight:75,edgeStyle:"bezier",isNodeCurrentContext:function(){return!1},nodeClassName:function(){return""},nodeEdgeLedgeWidths:[3,5]}),__webpack_require__.d(__webpack_exports__,"parseAnalysisSteps",function(){return parseAnalysisSteps}),__webpack_require__.d(__webpack_exports__,"parseBasicIOAnalysisSteps",function(){return parseBasicIOAnalysisSteps}),__webpack_require__.d(__webpack_exports__,"DEFAULT_PARSING_OPTIONS",function(){return DEFAULT_PARSING_OPTIONS}),__webpack_require__.d(__webpack_exports__,"DefaultNodeElement",function(){return Node_DefaultNodeElement}),__webpack_require__.d(__webpack_exports__,"DefaultDetailPane",function(){return DefaultDetailPane});__webpack_exports__.default=Graph_Graph}])});
//# sourceMappingURL=react-workflow-viz.min.js.map